2024-08-21 03:00:56.523 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 03:00:56.899 +03:00 [DBG] Hosting starting
2024-08-21 03:00:57.051 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 03:00:57.065 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 03:00:57.113 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 03:00:57.119 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 03:00:57.144 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 03:00:57.170 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 03:00:57.175 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 03:00:57.201 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 03:00:57.215 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:00:57.230 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 03:00:57.236 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:00:57.257 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 03:00:57.273 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 03:00:57.290 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 03:00:57.295 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 03:00:57.819 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 03:00:57.998 +03:00 [DBG] Connection id "0HN61EHAT49CD" received FIN.
2024-08-21 03:00:58.031 +03:00 [DBG] Connection id "0HN61EHAT49CD" accepted.
2024-08-21 03:00:58.038 +03:00 [DBG] Connection id "0HN61EHAT49CD" started.
2024-08-21 03:00:58.039 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 03:00:58.042 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 03:00:58.044 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 03:00:58.046 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 03:00:58.048 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 03:00:58.057 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 03:00:58.062 +03:00 [INF] Hosting environment: Development
2024-08-21 03:00:58.065 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 03:00:58.070 +03:00 [DBG] Hosting started
2024-08-21 03:00:58.117 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 03:00:58.300 +03:00 [DBG] Connection id "0HN61EHAT49CD" stopped.
2024-08-21 03:00:58.315 +03:00 [DBG] Connection id "0HN61EHAT49CD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:01:05.564 +03:00 [DBG] Connection id "0HN61EHAT49CE" accepted.
2024-08-21 03:01:05.602 +03:00 [DBG] Connection id "0HN61EHAT49CE" started.
2024-08-21 03:01:05.907 +03:00 [DBG] Connection 0HN61EHAT49CE established using the following protocol: "Tls13"
2024-08-21 03:01:06.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:01:06.570 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 03:01:06.699 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:01:06.703 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:01:07.482 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:01:07.569 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:01:07.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:01:07.621 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1520.2566ms
2024-08-21 03:01:07.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 34.1202ms
2024-08-21 03:01:07.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:01:07.880 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 210.3972ms
2024-08-21 03:01:12.383 +03:00 [DBG] Connection id "0HN61EHAT49CE" received FIN.
2024-08-21 03:01:12.404 +03:00 [DBG] Connection id "0HN61EHAT49CE" is closed. The last processed stream ID was 5.
2024-08-21 03:01:12.411 +03:00 [DBG] Connection id "0HN61EHAT49CE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:01:12.420 +03:00 [DBG] Connection id "0HN61EHAT49CE" stopped.
2024-08-21 03:01:12.760 +03:00 [DBG] Connection id "0HN61EHAT49CF" accepted.
2024-08-21 03:01:12.767 +03:00 [DBG] Connection id "0HN61EHAT49CF" started.
2024-08-21 03:01:12.785 +03:00 [DBG] Connection 0HN61EHAT49CF established using the following protocol: "Tls13"
2024-08-21 03:01:12.790 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:01:13.642 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:01:13.676 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:01:13.682 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:01:13.686 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:01:13.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 899.0535ms
2024-08-21 03:01:13.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:01:13.887 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:01:13.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 67.3382ms
2024-08-21 03:01:14.047 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 159.9814ms
2024-08-21 03:03:01.481 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 03:03:01.881 +03:00 [DBG] Hosting starting
2024-08-21 03:03:01.993 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 03:03:02.005 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 03:03:02.064 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 03:03:02.069 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 03:03:02.108 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 03:03:02.138 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 03:03:02.142 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 03:03:02.178 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 03:03:02.193 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:03:02.211 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 03:03:02.217 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:03:02.239 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 03:03:02.253 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 03:03:02.271 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 03:03:02.275 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 03:03:02.947 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 03:03:03.227 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 03:03:03.230 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 03:03:03.233 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 03:03:03.237 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 03:03:03.239 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 03:03:03.241 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 03:03:03.243 +03:00 [INF] Hosting environment: Development
2024-08-21 03:03:03.245 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 03:03:03.247 +03:00 [DBG] Hosting started
2024-08-21 03:03:03.559 +03:00 [DBG] Connection id "0HN61EIGAIN5K" received FIN.
2024-08-21 03:03:03.585 +03:00 [DBG] Connection id "0HN61EIGAIN5K" accepted.
2024-08-21 03:03:03.590 +03:00 [DBG] Connection id "0HN61EIGAIN5K" started.
2024-08-21 03:03:03.651 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 03:03:03.893 +03:00 [DBG] Connection id "0HN61EIGAIN5K" stopped.
2024-08-21 03:03:04.067 +03:00 [DBG] Connection id "0HN61EIGAIN5L" accepted.
2024-08-21 03:03:04.110 +03:00 [DBG] Connection id "0HN61EIGAIN5L" started.
2024-08-21 03:03:04.076 +03:00 [DBG] Connection id "0HN61EIGAIN5K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:03:04.308 +03:00 [DBG] Connection 0HN61EIGAIN5L established using the following protocol: "Tls13"
2024-08-21 03:03:04.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:03:05.157 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 03:03:05.409 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:03:05.435 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:06.340 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:03:06.425 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:03:06.454 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1936.4303ms
2024-08-21 03:03:06.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:03:06.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 21.4101ms
2024-08-21 03:03:06.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:03:06.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 254.3525ms
2024-08-21 03:03:07.583 +03:00 [DBG] Connection id "0HN61EIGAIN5L" received FIN.
2024-08-21 03:03:07.630 +03:00 [DBG] Connection id "0HN61EIGAIN5L" is closed. The last processed stream ID was 5.
2024-08-21 03:03:07.637 +03:00 [DBG] Connection id "0HN61EIGAIN5L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:03:07.656 +03:00 [DBG] Connection id "0HN61EIGAIN5L" stopped.
2024-08-21 03:03:09.739 +03:00 [DBG] Connection id "0HN61EIGAIN5M" accepted.
2024-08-21 03:03:09.744 +03:00 [DBG] Connection id "0HN61EIGAIN5M" started.
2024-08-21 03:03:09.779 +03:00 [DBG] Connection 0HN61EIGAIN5M established using the following protocol: "Tls13"
2024-08-21 03:03:09.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 03:03:09.792 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 03:03:09.796 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:09.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-21 03:03:09.893 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-21 03:03:09.907 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:09.945 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-21 03:03:09.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 64.2969ms
2024-08-21 03:03:10.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 800.5903ms
2024-08-21 23:13:15.429 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:13:15.830 +03:00 [DBG] Hosting starting
2024-08-21 23:13:15.955 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:13:15.968 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:13:16.028 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:13:16.035 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:13:16.068 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:13:16.097 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:13:16.101 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:13:16.127 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:13:16.144 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:13:16.158 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:13:16.163 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:13:16.190 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:13:16.211 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:13:16.228 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:13:16.234 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:13:16.861 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:13:17.078 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:13:17.083 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:13:17.095 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:13:17.098 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:13:17.102 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:13:17.106 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:13:17.109 +03:00 [INF] Hosting environment: Development
2024-08-21 23:13:17.113 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:13:17.117 +03:00 [DBG] Hosting started
2024-08-21 23:13:17.144 +03:00 [DBG] Connection id "0HN623MORIOGG" accepted.
2024-08-21 23:13:17.144 +03:00 [DBG] Connection id "0HN623MORIOGH" accepted.
2024-08-21 23:13:17.150 +03:00 [DBG] Connection id "0HN623MORIOGG" started.
2024-08-21 23:13:17.150 +03:00 [DBG] Connection id "0HN623MORIOGH" started.
2024-08-21 23:13:18.582 +03:00 [DBG] Connection id "0HN623MORIOGI" accepted.
2024-08-21 23:13:18.589 +03:00 [DBG] Connection id "0HN623MORIOGI" started.
2024-08-21 23:13:18.613 +03:00 [DBG] Connection id "0HN623MORIOGJ" accepted.
2024-08-21 23:13:18.615 +03:00 [DBG] Connection id "0HN623MORIOGJ" started.
2024-08-21 23:13:18.812 +03:00 [DBG] Connection id "0HN623MORIOGI" received FIN.
2024-08-21 23:13:18.898 +03:00 [DBG] Connection 0HN623MORIOGJ established using the following protocol: "Tls13"
2024-08-21 23:13:18.898 +03:00 [DBG] Connection 0HN623MORIOGI established using the following protocol: "Tls13"
2024-08-21 23:13:18.953 +03:00 [DBG] Connection id "0HN623MORIOGI" is closed. The last processed stream ID was 0.
2024-08-21 23:13:18.961 +03:00 [DBG] Connection id "0HN623MORIOGI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:18.980 +03:00 [DBG] Connection id "0HN623MORIOGI" stopped.
2024-08-21 23:13:19.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-21 23:13:19.772 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:13:19.918 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-21 23:13:19.922 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:13:20.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 974.2733ms
2024-08-21 23:13:20.085 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:13:20.089 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.669 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:13:20.727 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:13:20.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 657.1310ms
2024-08-21 23:13:20.755 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-21 23:13:20.756 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-21 23:13:20.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-21 23:13:20.759 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-21 23:13:20.761 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-21 23:13:20.763 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-21 23:13:20.766 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.771 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.774 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.816 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-21 23:13:20.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 93.7197ms
2024-08-21 23:13:20.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:13:20.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 45.8247ms
2024-08-21 23:13:20.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:13:20.930 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-21 23:13:20.944 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-21 23:13:20.946 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 188.7377ms
2024-08-21 23:13:20.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 192.2239ms
2024-08-21 23:13:21.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 259.7453ms
2024-08-21 23:13:24.794 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:13:24.797 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:13:24.801 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:24.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-21 23:13:24.951 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-21 23:13:24.954 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:24.956 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-21 23:13:24.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 20.1026ms
2024-08-21 23:13:25.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 814.4941ms
2024-08-21 23:13:27.234 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-21 23:13:27.234 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-21 23:13:27.238 +03:00 [DBG] Connection id "0HN623MORIOGG" stopped.
2024-08-21 23:13:27.241 +03:00 [DBG] Connection id "0HN623MORIOGH" stopped.
2024-08-21 23:13:27.244 +03:00 [DBG] Connection id "0HN623MORIOGG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:27.249 +03:00 [DBG] Connection id "0HN623MORIOGH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:30.055 +03:00 [DBG] Connection id "0HN623MORIOGJ" received FIN.
2024-08-21 23:13:30.059 +03:00 [DBG] Connection id "0HN623MORIOGJ" is closed. The last processed stream ID was 17.
2024-08-21 23:13:30.065 +03:00 [DBG] Connection id "0HN623MORIOGJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:30.070 +03:00 [DBG] Connection id "0HN623MORIOGJ" stopped.
2024-08-21 23:15:08.203 +03:00 [DBG] Connection id "0HN623MORIOGK" accepted.
2024-08-21 23:15:08.207 +03:00 [DBG] Connection id "0HN623MORIOGK" started.
2024-08-21 23:15:08.229 +03:00 [DBG] Connection 0HN623MORIOGK established using the following protocol: "Tls13"
2024-08-21 23:15:08.236 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:15:08.265 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:15:08.280 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:15:08.284 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:08.288 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:15:08.293 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:15:08.562 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:15:08.577 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:08.711 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:15:08.720 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:15:08.728 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:15:08.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:15:08.742 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:15:08.748 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:15:08.757 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:15:09.370 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:15:09.590 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:15:09.609 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:15:09.617 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:15:09.625 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:15:09.657 +03:00 [DBG] Connection id "0HN623MORIOGK", Request id "0HN623MORIOGK:00000001": started reading request body.
2024-08-21 23:15:09.663 +03:00 [DBG] Connection id "0HN623MORIOGK", Request id "0HN623MORIOGK:00000001": done reading request body.
2024-08-21 23:15:09.722 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:15:09.728 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:09.733 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:09.737 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:15:09.825 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:12.473 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:15:12.479 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:15:12.484 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:15:12.489 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:15:12.494 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:15:12.883 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:12.889 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:12.895 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:13.044 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:15:13.050 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:15:13.805 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:15:14.271 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:15:14.645 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:15:15.826 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:15:16.083 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:16.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (142ms).
2024-08-21 23:15:16.284 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:17.445 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:17.504 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:15:17.823 +03:00 [INF] Executed DbCommand (338ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:15:18.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.283 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.374 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.381 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.431 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:18.459 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.491 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.852 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:15:18.894 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:15:18.903 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:18.907 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:18.912 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.921 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.926 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:15:18.950 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:15:18.974 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:18.976 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.981 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.026 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:15:19.100 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:15:19.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:19.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:19.119 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.124 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.128 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.149 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.162 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:19.165 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.169 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:19.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:19.230 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.234 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.239 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.249 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.257 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:19.260 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.265 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.733 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:15:19.748 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:15:19.750 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:15:19.754 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:15:19.758 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:15:19.763 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:15:19.934 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 11159.5318ms
2024-08-21 23:15:19.944 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:19.972 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:15:19.988 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 11752.2116ms
2024-08-21 23:15:25.212 +03:00 [DBG] Connection id "0HN623MORIOGK" received FIN.
2024-08-21 23:15:25.216 +03:00 [DBG] Connection id "0HN623MORIOGK" is closed. The last processed stream ID was 1.
2024-08-21 23:15:25.221 +03:00 [DBG] Connection id "0HN623MORIOGK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:15:25.242 +03:00 [DBG] Connection id "0HN623MORIOGK" stopped.
2024-08-21 23:16:00.758 +03:00 [DBG] Connection id "0HN623MORIOGL" accepted.
2024-08-21 23:16:00.762 +03:00 [DBG] Connection id "0HN623MORIOGL" started.
2024-08-21 23:16:00.776 +03:00 [DBG] Connection 0HN623MORIOGL established using the following protocol: "Tls13"
2024-08-21 23:16:00.793 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:16:00.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:16:00.846 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:16:00.877 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:00.881 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:16:00.884 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:16:01.193 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:16:01.200 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:16:01.224 +03:00 [DBG] Authorization was successful.
2024-08-21 23:16:01.228 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:01.242 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:16:01.248 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:16:01.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:16:01.258 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:16:01.265 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:16:01.271 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:16:01.277 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:16:01.953 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:16:01.959 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:16:01.964 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:16:01.969 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:16:01.988 +03:00 [DBG] Connection id "0HN623MORIOGL", Request id "0HN623MORIOGL:00000001": started reading request body.
2024-08-21 23:16:01.992 +03:00 [DBG] Connection id "0HN623MORIOGL", Request id "0HN623MORIOGL:00000001": done reading request body.
2024-08-21 23:16:02.032 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:16:02.036 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.041 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.045 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:16:02.054 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.193 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:16:02.226 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:16:02.291 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:16:02.340 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:16:02.347 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:16:02.351 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:16:02.356 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.359 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:16:02.387 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:16:02.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.528 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.596 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:16:02.599 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.605 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.739 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.850 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:16:02.860 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:16:02.932 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:16:03.034 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.040 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.056 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:16:03.101 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:16:03.287 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:16:03.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:16:03.308 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:16:03.354 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:16:03.427 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:16:03.453 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:16:03.482 +03:00 [DBG] Committing transaction.
2024-08-21 23:16:03.504 +03:00 [DBG] Committed transaction.
2024-08-21 23:16:03.527 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.531 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.550 +03:00 [DBG] Disposing transaction.
2024-08-21 23:16:03.604 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:03.620 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:16:03.627 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:16:03.630 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:16:03.634 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:16:03.638 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:16:03.670 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:16:03.679 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:16:03.684 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:16:03.688 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:16:03.690 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:16:03.693 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:16:03.698 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:16:03.714 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2437.4878ms
2024-08-21 23:16:03.721 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:03.727 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:16:03.730 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 2937.6990ms
2024-08-21 23:16:05.281 +03:00 [DBG] Connection id "0HN623MORIOGL" received FIN.
2024-08-21 23:16:05.286 +03:00 [DBG] Connection id "0HN623MORIOGL" is closed. The last processed stream ID was 1.
2024-08-21 23:16:05.292 +03:00 [DBG] Connection id "0HN623MORIOGL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:16:05.305 +03:00 [DBG] Connection id "0HN623MORIOGL" stopped.
2024-08-21 23:20:01.029 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:20:01.548 +03:00 [DBG] Hosting starting
2024-08-21 23:20:01.699 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:20:01.721 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:20:01.779 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:20:01.782 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:20:01.816 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:20:01.839 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:20:01.842 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:20:01.868 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:20:01.882 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:20:01.898 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:20:01.908 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:20:01.963 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:20:02.098 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:20:02.137 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:20:02.141 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:20:03.334 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:20:03.591 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:20:03.594 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:20:03.597 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:20:03.600 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:20:03.603 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:20:03.607 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:20:03.610 +03:00 [INF] Hosting environment: Development
2024-08-21 23:20:03.613 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:20:03.617 +03:00 [DBG] Hosting started
2024-08-21 23:20:03.801 +03:00 [DBG] Connection id "0HN623QI1NAR0" accepted.
2024-08-21 23:20:03.808 +03:00 [DBG] Connection id "0HN623QI1NAR0" received FIN.
2024-08-21 23:20:03.810 +03:00 [DBG] Connection id "0HN623QI1NAR0" started.
2024-08-21 23:20:03.886 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:20:04.052 +03:00 [DBG] Connection id "0HN623QI1NAR0" stopped.
2024-08-21 23:20:04.067 +03:00 [DBG] Connection id "0HN623QI1NAR0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:04.297 +03:00 [DBG] Connection id "0HN623QI1NAR1" accepted.
2024-08-21 23:20:04.305 +03:00 [DBG] Connection id "0HN623QI1NAR1" started.
2024-08-21 23:20:04.452 +03:00 [DBG] Connection 0HN623QI1NAR1 established using the following protocol: "Tls13"
2024-08-21 23:20:04.650 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:20:05.103 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:20:05.240 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:20:05.245 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:20:06.102 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:20:06.190 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:20:06.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1578.5228ms
2024-08-21 23:20:06.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:20:06.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.2661ms
2024-08-21 23:20:06.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:20:06.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 210.3986ms
2024-08-21 23:20:10.623 +03:00 [DBG] Connection id "0HN623QI1NAR1" received FIN.
2024-08-21 23:20:10.648 +03:00 [DBG] Connection id "0HN623QI1NAR1" is closed. The last processed stream ID was 5.
2024-08-21 23:20:10.654 +03:00 [DBG] Connection id "0HN623QI1NAR1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:10.676 +03:00 [DBG] Connection id "0HN623QI1NAR1" stopped.
2024-08-21 23:20:10.875 +03:00 [DBG] Connection id "0HN623QI1NAR2" accepted.
2024-08-21 23:20:10.878 +03:00 [DBG] Connection id "0HN623QI1NAR2" started.
2024-08-21 23:20:10.917 +03:00 [DBG] Connection 0HN623QI1NAR2 established using the following protocol: "Tls13"
2024-08-21 23:20:10.925 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:20:10.939 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:20:10.953 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:20:11.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 864.0224ms
2024-08-21 23:20:15.624 +03:00 [DBG] Connection id "0HN623QI1NAR2" received FIN.
2024-08-21 23:20:15.627 +03:00 [DBG] Connection id "0HN623QI1NAR2" is closed. The last processed stream ID was 1.
2024-08-21 23:20:15.631 +03:00 [DBG] Connection id "0HN623QI1NAR2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:15.636 +03:00 [DBG] Connection id "0HN623QI1NAR2" stopped.
2024-08-21 23:20:32.996 +03:00 [DBG] Connection id "0HN623QI1NAR3" accepted.
2024-08-21 23:20:33.008 +03:00 [DBG] Connection id "0HN623QI1NAR3" started.
2024-08-21 23:20:33.020 +03:00 [DBG] Connection 0HN623QI1NAR3 established using the following protocol: "Tls13"
2024-08-21 23:20:33.028 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:20:33.056 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:20:33.082 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:20:33.089 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:33.101 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:20:33.108 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:20:33.294 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:20:33.305 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:33.437 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:20:33.448 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:20:33.453 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:20:33.458 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:20:33.467 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:20:33.473 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:20:33.481 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:20:34.093 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:20:34.298 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:20:34.322 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:20:34.335 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:20:34.344 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:20:34.389 +03:00 [DBG] Connection id "0HN623QI1NAR3", Request id "0HN623QI1NAR3:00000001": started reading request body.
2024-08-21 23:20:34.396 +03:00 [DBG] Connection id "0HN623QI1NAR3", Request id "0HN623QI1NAR3:00000001": done reading request body.
2024-08-21 23:20:34.475 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:20:34.481 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:34.487 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:34.492 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:20:34.588 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:37.119 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:20:37.128 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:20:37.134 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:20:37.140 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:20:37.146 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:20:37.495 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.500 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.504 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.660 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:20:37.666 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:20:38.345 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:20:38.771 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:20:39.083 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:20:40.158 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:20:40.372 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:40.533 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (163ms).
2024-08-21 23:20:40.612 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:42.979 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:43.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:20:43.472 +03:00 [INF] Executed DbCommand (441ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:20:43.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.131 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.200 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.205 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.249 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:44.282 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:44.316 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.129 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:20:45.225 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:20:45.245 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.248 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:20:45.251 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.261 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.267 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:20:45.302 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:20:45.318 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.320 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.324 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.421 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:20:45.589 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:20:45.599 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-21 23:20:45.605 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.609 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.612 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.627 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.633 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.634 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.637 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.676 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-21 23:20:45.684 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.687 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.690 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.699 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.704 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.707 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.713 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:46.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:20:46.215 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:20:46.217 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:20:46.219 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:20:46.224 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:20:46.228 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:20:46.377 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 12879.8444ms
2024-08-21 23:20:46.389 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:46.427 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:20:46.445 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 13417.3223ms
2024-08-21 23:20:50.668 +03:00 [DBG] Connection id "0HN623QI1NAR3" received FIN.
2024-08-21 23:20:50.671 +03:00 [DBG] Connection id "0HN623QI1NAR3" is closed. The last processed stream ID was 1.
2024-08-21 23:20:50.678 +03:00 [DBG] Connection id "0HN623QI1NAR3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:50.695 +03:00 [DBG] Connection id "0HN623QI1NAR3" stopped.
2024-08-21 23:21:17.066 +03:00 [DBG] Connection id "0HN623QI1NAR4" accepted.
2024-08-21 23:21:17.068 +03:00 [DBG] Connection id "0HN623QI1NAR4" started.
2024-08-21 23:21:17.180 +03:00 [DBG] Connection 0HN623QI1NAR4 established using the following protocol: "Tls13"
2024-08-21 23:21:17.188 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:21:17.202 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:21:17.205 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:21:17.209 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:17.212 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:21:17.214 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:21:17.497 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:21:17.506 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:21:17.537 +03:00 [DBG] Authorization was successful.
2024-08-21 23:21:17.541 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:17.555 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:21:17.562 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:21:17.567 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:21:17.571 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:21:17.579 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:21:17.585 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:21:17.591 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:21:18.445 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:21:18.453 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:21:18.459 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:21:18.463 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:21:18.490 +03:00 [DBG] Connection id "0HN623QI1NAR4", Request id "0HN623QI1NAR4:00000001": started reading request body.
2024-08-21 23:21:18.498 +03:00 [DBG] Connection id "0HN623QI1NAR4", Request id "0HN623QI1NAR4:00000001": done reading request body.
2024-08-21 23:21:18.555 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:21:18.559 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.565 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.569 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:21:18.582 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.737 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:21:18.760 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:21:18.821 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:21:18.858 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:21:18.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:21:18.871 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:21:18.877 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:18.882 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:18.892 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:21:18.929 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:21:18.985 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.118 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.207 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:21:19.211 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.217 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.389 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.469 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.497 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:21:19.506 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:21:19.602 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:21:19.694 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.701 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.715 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:21:19.759 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:21:19.962 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:21:19.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:21:19.979 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:21:20.037 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:21:20.132 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:21:20.165 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:21:20.195 +03:00 [DBG] Committing transaction.
2024-08-21 23:21:20.218 +03:00 [DBG] Committed transaction.
2024-08-21 23:21:20.244 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:20.248 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:20.268 +03:00 [DBG] Disposing transaction.
2024-08-21 23:21:20.309 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:20.333 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:21:20.340 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:21:20.344 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:21:20.350 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:21:20.354 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:21:20.401 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:21:20.415 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:21:20.422 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:21:20.427 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:21:20.430 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:21:20.434 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:21:20.439 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:21:20.469 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2878.3219ms
2024-08-21 23:21:20.476 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:20.483 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:21:20.487 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 3298.5704ms
2024-08-21 23:21:20.710 +03:00 [DBG] Connection id "0HN623QI1NAR4" received FIN.
2024-08-21 23:21:20.713 +03:00 [DBG] Connection id "0HN623QI1NAR4" is closed. The last processed stream ID was 1.
2024-08-21 23:21:20.718 +03:00 [DBG] Connection id "0HN623QI1NAR4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:21:20.725 +03:00 [DBG] Connection id "0HN623QI1NAR4" stopped.
2024-08-21 23:25:51.420 +03:00 [DBG] Connection id "0HN623QI1NAR5" accepted.
2024-08-21 23:25:51.423 +03:00 [DBG] Connection id "0HN623QI1NAR5" started.
2024-08-21 23:25:51.492 +03:00 [DBG] Connection 0HN623QI1NAR5 established using the following protocol: "Tls13"
2024-08-21 23:25:51.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/active - -
2024-08-21 23:25:51.532 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/active'
2024-08-21 23:25:51.536 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)' with route pattern 'api/Discount/active' is valid for the request path '/api/Discount/active'
2024-08-21 23:25:51.542 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/active'
2024-08-21 23:25:51.548 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:51.551 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:25:51.606 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/21/2024 8:20:45 PM', Current time (UTC): '8/21/2024 8:25:51 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-21 23:25:51.657 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/21/2024 8:20:45 PM', Current time (UTC): '8/21/2024 8:25:51 PM'.
2024-08-21 23:25:51.663 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:51.685 +03:00 [INF] Route matched with {action = "GetActiveDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActiveDiscounts() on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:25:51.698 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:25:51.709 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:25:51.720 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:25:51.736 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:25:51.746 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:25:51.757 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:25:51.781 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:25:51.837 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:25:51.848 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)'
2024-08-21 23:25:51.855 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-21 23:25:51.870 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM Discounts AS d
        INNER JOIN Rooms AS r ON d.RoomID == r.RoomID), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:25:51.877 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:25:51.881 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:25:51.886 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:51.890 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:51.894 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-21 23:25:51.920 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-21 23:25:51.928 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.939 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.943 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.947 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.952 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.965 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.986 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.991 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.996 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.000 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.005 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.009 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.014 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.018 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.023 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.027 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.031 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.036 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.040 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.044 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.049 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.058 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.062 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.066 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.071 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.082 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.087 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.100 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.105 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.109 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.113 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:25:52.116 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:52.120 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:52.154 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:25:52.162 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:25:52.167 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:25:52.172 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:25:52.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:25:52.177 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:25:52.181 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-21 23:25:52.190 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API) in 433.1957ms
2024-08-21 23:25:52.195 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:52.199 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:25:52.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/active - - - 200 - application/json;+charset=utf-8 699.8138ms
2024-08-21 23:25:56.091 +03:00 [DBG] Connection id "0HN623QI1NAR5" received FIN.
2024-08-21 23:25:56.095 +03:00 [DBG] Connection id "0HN623QI1NAR5" is closed. The last processed stream ID was 1.
2024-08-21 23:25:56.100 +03:00 [DBG] Connection id "0HN623QI1NAR5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:25:56.106 +03:00 [DBG] Connection id "0HN623QI1NAR5" stopped.
2024-08-21 23:27:36.558 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:27:36.860 +03:00 [DBG] Hosting starting
2024-08-21 23:27:36.941 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:27:36.949 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:27:36.965 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:27:36.970 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:27:36.986 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:27:37.000 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:27:37.004 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:27:37.025 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:27:37.036 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:27:37.054 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:27:37.064 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:27:37.082 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:27:37.100 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:27:37.117 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:27:37.123 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:27:37.557 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:27:37.718 +03:00 [DBG] Connection id "0HN623UPAM4QE" accepted.
2024-08-21 23:27:37.720 +03:00 [DBG] Connection id "0HN623UPAM4QE" received FIN.
2024-08-21 23:27:37.725 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:27:37.726 +03:00 [DBG] Connection id "0HN623UPAM4QE" started.
2024-08-21 23:27:37.732 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:27:37.739 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:27:37.742 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:27:37.747 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:27:37.751 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:27:37.754 +03:00 [INF] Hosting environment: Development
2024-08-21 23:27:37.757 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:27:37.761 +03:00 [DBG] Hosting started
2024-08-21 23:27:37.775 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:27:37.906 +03:00 [DBG] Connection id "0HN623UPAM4QE" stopped.
2024-08-21 23:27:37.916 +03:00 [DBG] Connection id "0HN623UPAM4QE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:27:39.857 +03:00 [DBG] Connection id "0HN623UPAM4QF" accepted.
2024-08-21 23:27:39.874 +03:00 [DBG] Connection id "0HN623UPAM4QF" started.
2024-08-21 23:27:40.048 +03:00 [DBG] Connection 0HN623UPAM4QF established using the following protocol: "Tls13"
2024-08-21 23:27:40.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:27:40.539 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:27:40.631 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:27:40.636 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:27:41.175 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:27:41.244 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:27:41.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1100.0693ms
2024-08-21 23:27:41.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:27:41.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:27:41.320 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 18.8504ms
2024-08-21 23:27:41.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 180.7350ms
2024-08-21 23:27:44.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:27:44.796 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:27:44.800 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:27:45.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 492.2202ms
2024-08-21 23:27:46.195 +03:00 [DBG] Connection id "0HN623UPAM4QF" received FIN.
2024-08-21 23:27:46.217 +03:00 [DBG] Connection id "0HN623UPAM4QF" is closed. The last processed stream ID was 7.
2024-08-21 23:27:46.224 +03:00 [DBG] Connection id "0HN623UPAM4QF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:27:46.241 +03:00 [DBG] Connection id "0HN623UPAM4QF" stopped.
2024-08-21 23:28:02.916 +03:00 [DBG] Connection id "0HN623UPAM4QG" accepted.
2024-08-21 23:28:02.921 +03:00 [DBG] Connection id "0HN623UPAM4QG" started.
2024-08-21 23:28:02.962 +03:00 [DBG] Connection 0HN623UPAM4QG established using the following protocol: "Tls13"
2024-08-21 23:28:02.979 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:28:03.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:28:03.024 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:28:03.031 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:03.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:28:03.045 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:28:03.208 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:28:03.220 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:03.320 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:28:03.331 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:28:03.338 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:28:03.346 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:28:03.355 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:28:03.363 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:28:03.371 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:28:03.805 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:28:03.954 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:28:03.973 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:28:03.984 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:28:03.992 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:28:04.026 +03:00 [DBG] Connection id "0HN623UPAM4QG", Request id "0HN623UPAM4QG:00000001": started reading request body.
2024-08-21 23:28:04.031 +03:00 [DBG] Connection id "0HN623UPAM4QG", Request id "0HN623UPAM4QG:00000001": done reading request body.
2024-08-21 23:28:04.103 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:28:04.108 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:04.113 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:04.117 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:28:04.186 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:06.361 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:28:06.368 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:28:06.375 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:28:06.381 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:28:06.387 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:28:06.693 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.700 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.705 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.832 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:28:06.838 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:28:07.379 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:28:07.687 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:28:07.953 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:28:08.809 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:28:08.968 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:09.077 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (113ms).
2024-08-21 23:28:09.154 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:09.922 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:09.969 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:28:10.167 +03:00 [INF] Executed DbCommand (215ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:28:10.295 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.456 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.516 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.565 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:10.593 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.633 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.747 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:28:10.782 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:28:10.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:10.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-21 23:28:10.807 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.816 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.823 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:28:10.850 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:28:10.865 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:10.869 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.875 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.915 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:28:10.986 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:28:10.996 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:11.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:11.007 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.012 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.018 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.043 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.054 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:11.057 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.062 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.107 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:11.111 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:11.118 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.124 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.130 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.148 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.159 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:11.162 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.170 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.517 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:28:11.538 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:28:11.541 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:28:11.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:28:11.549 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:28:11.555 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:28:11.682 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 8295.1894ms
2024-08-21 23:28:11.690 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:11.720 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:28:11.738 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 8759.5127ms
2024-08-21 23:28:16.237 +03:00 [DBG] Connection id "0HN623UPAM4QG" received FIN.
2024-08-21 23:28:16.242 +03:00 [DBG] Connection id "0HN623UPAM4QG" is closed. The last processed stream ID was 1.
2024-08-21 23:28:16.248 +03:00 [DBG] Connection id "0HN623UPAM4QG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:28:16.267 +03:00 [DBG] Connection id "0HN623UPAM4QG" stopped.
2024-08-21 23:28:50.735 +03:00 [DBG] Connection id "0HN623UPAM4QH" accepted.
2024-08-21 23:28:50.746 +03:00 [DBG] Connection id "0HN623UPAM4QH" started.
2024-08-21 23:28:50.848 +03:00 [DBG] Connection 0HN623UPAM4QH established using the following protocol: "Tls13"
2024-08-21 23:28:50.858 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 129
2024-08-21 23:28:50.875 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:28:50.879 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:28:50.885 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:50.887 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:28:50.889 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:28:51.113 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:28:51.120 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:28:51.139 +03:00 [DBG] Authorization was successful.
2024-08-21 23:28:51.145 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:51.163 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:28:51.173 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:28:51.179 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:28:51.187 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:28:51.197 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:28:51.205 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:28:51.212 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:28:51.725 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:28:51.732 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:28:51.738 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:28:51.743 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:28:51.771 +03:00 [DBG] Connection id "0HN623UPAM4QH", Request id "0HN623UPAM4QH:00000001": started reading request body.
2024-08-21 23:28:51.777 +03:00 [DBG] Connection id "0HN623UPAM4QH", Request id "0HN623UPAM4QH:00000001": done reading request body.
2024-08-21 23:28:51.821 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:28:51.827 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.833 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.839 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:28:51.856 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.991 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:28:52.019 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:28:52.067 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:28:52.099 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:28:52.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:52.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:52.122 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.126 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:28:52.163 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:28:52.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.296 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.368 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:52.372 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.377 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.504 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.581 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.613 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:28:52.624 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:28:52.702 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:28:52.776 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.783 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.796 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:28:52.828 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:28:52.952 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:52.958 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:28:52.967 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:28:52.993 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:28:53.057 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:28:53.074 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:53.101 +03:00 [DBG] Committing transaction.
2024-08-21 23:28:53.118 +03:00 [DBG] Committed transaction.
2024-08-21 23:28:53.134 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:53.138 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:53.149 +03:00 [DBG] Disposing transaction.
2024-08-21 23:28:53.182 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:53.195 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:28:53.203 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:28:53.206 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:28:53.210 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:28:53.215 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:28:53.255 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:28:53.269 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:28:53.275 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:28:53.279 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:28:53.282 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:28:53.286 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:28:53.292 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:28:53.311 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2099.3956ms
2024-08-21 23:28:53.318 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:53.324 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:28:53.328 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 129 - 200 - application/json;+charset=utf-8 2469.8910ms
2024-08-21 23:28:56.273 +03:00 [DBG] Connection id "0HN623UPAM4QH" received FIN.
2024-08-21 23:28:56.277 +03:00 [DBG] Connection id "0HN623UPAM4QH" is closed. The last processed stream ID was 1.
2024-08-21 23:28:56.283 +03:00 [DBG] Connection id "0HN623UPAM4QH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:28:56.288 +03:00 [DBG] Connection id "0HN623UPAM4QH" stopped.
2024-08-21 23:34:29.956 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:34:30.173 +03:00 [DBG] Hosting starting
2024-08-21 23:34:30.255 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:34:30.265 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:34:30.284 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:34:30.289 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:34:30.304 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:34:30.316 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:34:30.320 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:34:30.342 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:34:30.354 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:34:30.372 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:34:30.377 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:34:30.391 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:34:30.404 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:34:30.416 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:34:30.420 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:34:30.770 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:34:30.909 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:34:30.914 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:34:30.919 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:34:30.923 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:34:30.927 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:34:30.931 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:34:30.933 +03:00 [INF] Hosting environment: Development
2024-08-21 23:34:30.936 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:34:30.937 +03:00 [DBG] Hosting started
2024-08-21 23:34:31.323 +03:00 [DBG] Connection id "0HN6242KJ6T2V" received FIN.
2024-08-21 23:34:31.324 +03:00 [DBG] Connection id "0HN6242KJ6T30" received FIN.
2024-08-21 23:34:31.357 +03:00 [DBG] Connection id "0HN6242KJ6T2V" accepted.
2024-08-21 23:34:31.357 +03:00 [DBG] Connection id "0HN6242KJ6T30" accepted.
2024-08-21 23:34:31.365 +03:00 [DBG] Connection id "0HN6242KJ6T2V" started.
2024-08-21 23:34:31.368 +03:00 [DBG] Connection id "0HN6242KJ6T30" started.
2024-08-21 23:34:31.400 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:34:31.400 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:34:31.504 +03:00 [DBG] Connection id "0HN6242KJ6T2V" stopped.
2024-08-21 23:34:31.504 +03:00 [DBG] Connection id "0HN6242KJ6T30" stopped.
2024-08-21 23:34:31.516 +03:00 [DBG] Connection id "0HN6242KJ6T2V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:31.516 +03:00 [DBG] Connection id "0HN6242KJ6T30" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:34.457 +03:00 [DBG] Connection id "0HN6242KJ6T31" accepted.
2024-08-21 23:34:34.461 +03:00 [DBG] Connection id "0HN6242KJ6T31" started.
2024-08-21 23:34:34.570 +03:00 [DBG] Connection 0HN6242KJ6T31 established using the following protocol: "Tls13"
2024-08-21 23:34:34.714 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:34:35.010 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:34:35.078 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:34:35.083 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:34:35.582 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:34:35.648 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:34:35.669 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 963.4874ms
2024-08-21 23:34:35.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:34:35.718 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.1726ms
2024-08-21 23:34:35.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:34:35.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 146.0634ms
2024-08-21 23:34:36.775 +03:00 [DBG] Connection id "0HN6242KJ6T31" received FIN.
2024-08-21 23:34:36.796 +03:00 [DBG] Connection id "0HN6242KJ6T31" is closed. The last processed stream ID was 5.
2024-08-21 23:34:36.802 +03:00 [DBG] Connection id "0HN6242KJ6T31" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:36.821 +03:00 [DBG] Connection id "0HN6242KJ6T31" stopped.
2024-08-21 23:34:39.578 +03:00 [DBG] Connection id "0HN6242KJ6T32" accepted.
2024-08-21 23:34:39.581 +03:00 [DBG] Connection id "0HN6242KJ6T32" started.
2024-08-21 23:34:39.608 +03:00 [DBG] Connection 0HN6242KJ6T32 established using the following protocol: "Tls13"
2024-08-21 23:34:39.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:34:39.617 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:34:39.619 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:34:40.161 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 548.4283ms
2024-08-21 23:34:46.789 +03:00 [DBG] Connection id "0HN6242KJ6T32" received FIN.
2024-08-21 23:34:46.795 +03:00 [DBG] Connection id "0HN6242KJ6T32" is closed. The last processed stream ID was 1.
2024-08-21 23:34:46.802 +03:00 [DBG] Connection id "0HN6242KJ6T32" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:46.818 +03:00 [DBG] Connection id "0HN6242KJ6T32" stopped.
2024-08-21 23:35:09.597 +03:00 [DBG] Connection id "0HN6242KJ6T33" accepted.
2024-08-21 23:35:09.615 +03:00 [DBG] Connection id "0HN6242KJ6T33" started.
2024-08-21 23:35:09.640 +03:00 [DBG] Connection 0HN6242KJ6T33 established using the following protocol: "Tls13"
2024-08-21 23:35:09.649 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:35:09.685 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:35:09.708 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:35:09.715 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:09.722 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:35:09.729 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:35:09.889 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:35:10.020 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:10.109 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:35:10.120 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:35:10.126 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:35:10.132 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:35:10.139 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:35:10.144 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:35:10.150 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:35:10.633 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:35:10.763 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:35:10.779 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:35:10.789 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:35:10.797 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:35:10.829 +03:00 [DBG] Connection id "0HN6242KJ6T33", Request id "0HN6242KJ6T33:00000001": started reading request body.
2024-08-21 23:35:10.837 +03:00 [DBG] Connection id "0HN6242KJ6T33", Request id "0HN6242KJ6T33:00000001": done reading request body.
2024-08-21 23:35:10.906 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:35:10.912 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:10.918 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:10.925 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:35:10.990 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:12.795 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:35:12.803 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:35:12.810 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:35:12.816 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:35:12.821 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:35:13.047 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.055 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.060 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.155 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:35:13.163 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:35:13.669 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:35:13.972 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:35:14.170 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:35:14.870 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:35:15.018 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:15.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (82ms).
2024-08-21 23:35:15.140 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:15.900 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:15.949 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:35:16.220 +03:00 [INF] Executed DbCommand (283ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:35:16.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.568 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.637 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.682 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:16.704 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.729 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.828 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:35:16.859 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:35:16.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:16.874 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:16.882 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.892 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.899 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:35:16.923 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:35:16.937 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:16.940 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.945 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.977 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:35:17.036 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:35:17.046 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:17.050 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:17.055 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.061 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.066 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.087 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.097 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:17.100 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.106 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.140 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:17.146 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:35:17.152 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.158 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.165 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.173 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.183 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:17.187 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.192 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.480 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:35:17.498 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:35:17.501 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:35:17.505 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:35:17.511 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:35:17.516 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:35:17.646 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 7477.568ms
2024-08-21 23:35:17.661 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:17.691 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:35:17.704 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 8055.9288ms
2024-08-21 23:35:26.848 +03:00 [DBG] Connection id "0HN6242KJ6T33" received FIN.
2024-08-21 23:35:26.857 +03:00 [DBG] Connection id "0HN6242KJ6T33" is closed. The last processed stream ID was 1.
2024-08-21 23:35:26.857 +03:00 [DBG] Connection id "0HN6242KJ6T33" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:35:26.891 +03:00 [DBG] Connection id "0HN6242KJ6T33" stopped.
2024-08-21 23:35:47.968 +03:00 [DBG] Connection id "0HN6242KJ6T34" accepted.
2024-08-21 23:35:47.973 +03:00 [DBG] Connection id "0HN6242KJ6T34" started.
2024-08-21 23:35:48.007 +03:00 [DBG] Connection 0HN6242KJ6T34 established using the following protocol: "Tls13"
2024-08-21 23:35:48.017 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:35:48.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:35:48.040 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:35:48.047 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:48.051 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:35:48.054 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:35:48.257 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:35:48.265 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:35:48.287 +03:00 [DBG] Authorization was successful.
2024-08-21 23:35:48.292 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:48.305 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:35:48.313 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:35:48.319 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:35:48.322 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:35:48.325 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:35:48.332 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:35:48.339 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:35:48.822 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:35:48.830 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:35:48.836 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:35:48.843 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:35:48.860 +03:00 [DBG] Connection id "0HN6242KJ6T34", Request id "0HN6242KJ6T34:00000001": started reading request body.
2024-08-21 23:35:48.866 +03:00 [DBG] Connection id "0HN6242KJ6T34", Request id "0HN6242KJ6T34:00000001": done reading request body.
2024-08-21 23:35:48.899 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:35:48.905 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:48.910 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:48.915 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:35:48.928 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:49.040 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:35:49.063 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:35:49.120 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:35:49.156 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:35:49.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:49.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:49.172 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.176 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.184 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:35:49.208 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:35:49.249 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.306 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.370 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:49.373 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.380 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.494 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.581 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:35:49.591 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:35:49.668 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:35:49.723 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.729 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.741 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:35:49.774 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:35:49.904 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:49.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:49.918 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:35:49.937 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:35:49.997 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:35:50.022 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:50.043 +03:00 [DBG] Committing transaction.
2024-08-21 23:35:50.062 +03:00 [DBG] Committed transaction.
2024-08-21 23:35:50.075 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:50.080 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:50.093 +03:00 [DBG] Disposing transaction.
2024-08-21 23:35:50.124 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:50.143 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:35:50.152 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:35:50.157 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:35:50.161 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:35:50.167 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:35:50.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:35:50.211 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:35:50.218 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:35:50.223 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:35:50.226 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:35:50.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:35:50.232 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:35:50.250 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 1911.2532ms
2024-08-21 23:35:50.254 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:50.262 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:35:50.266 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 2249.6226ms
2024-08-21 23:35:56.887 +03:00 [DBG] Connection id "0HN6242KJ6T34" received FIN.
2024-08-21 23:35:56.891 +03:00 [DBG] Connection id "0HN6242KJ6T34" is closed. The last processed stream ID was 1.
2024-08-21 23:35:56.897 +03:00 [DBG] Connection id "0HN6242KJ6T34" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:35:56.918 +03:00 [DBG] Connection id "0HN6242KJ6T34" stopped.
2024-08-21 23:49:25.720 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:49:26.218 +03:00 [DBG] Hosting starting
2024-08-21 23:49:26.331 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:49:26.341 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:49:26.386 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:49:26.390 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:49:26.418 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:49:26.444 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:49:26.446 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:49:26.479 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:49:26.492 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:49:26.509 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:49:26.515 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:49:26.538 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:49:26.554 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:49:26.572 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:49:26.577 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:49:27.153 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:49:27.306 +03:00 [DBG] Connection id "0HN624AVJV40C" received FIN.
2024-08-21 23:49:27.339 +03:00 [DBG] Connection id "0HN624AVJV40C" accepted.
2024-08-21 23:49:27.339 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:49:27.345 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:49:27.345 +03:00 [DBG] Connection id "0HN624AVJV40C" started.
2024-08-21 23:49:27.347 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:49:27.352 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:49:27.356 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:49:27.359 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:49:27.361 +03:00 [INF] Hosting environment: Development
2024-08-21 23:49:27.365 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:49:27.368 +03:00 [DBG] Hosting started
2024-08-21 23:49:27.421 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:49:27.606 +03:00 [DBG] Connection id "0HN624AVJV40C" stopped.
2024-08-21 23:49:27.617 +03:00 [DBG] Connection id "0HN624AVJV40C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:29.313 +03:00 [DBG] Connection id "0HN624AVJV40D" accepted.
2024-08-21 23:49:29.321 +03:00 [DBG] Connection id "0HN624AVJV40D" started.
2024-08-21 23:49:29.463 +03:00 [DBG] Connection 0HN624AVJV40D established using the following protocol: "Tls13"
2024-08-21 23:49:29.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:49:30.114 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:49:30.250 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:49:30.255 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:49:30.967 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:49:31.042 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:49:31.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1418.9810ms
2024-08-21 23:49:31.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:49:31.125 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:49:31.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.4419ms
2024-08-21 23:49:31.284 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 158.3536ms
2024-08-21 23:49:33.756 +03:00 [DBG] Connection id "0HN624AVJV40D" received FIN.
2024-08-21 23:49:33.781 +03:00 [DBG] Connection id "0HN624AVJV40D" is closed. The last processed stream ID was 5.
2024-08-21 23:49:33.788 +03:00 [DBG] Connection id "0HN624AVJV40D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:33.793 +03:00 [DBG] Connection id "0HN624AVJV40D" stopped.
2024-08-21 23:49:34.459 +03:00 [DBG] Connection id "0HN624AVJV40E" accepted.
2024-08-21 23:49:34.464 +03:00 [DBG] Connection id "0HN624AVJV40E" started.
2024-08-21 23:49:34.477 +03:00 [DBG] Connection 0HN624AVJV40E established using the following protocol: "Tls13"
2024-08-21 23:49:34.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:49:34.490 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:49:34.493 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:49:35.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 680.7835ms
2024-08-21 23:49:38.155 +03:00 [DBG] Connection id "0HN624AVJV40E" received FIN.
2024-08-21 23:49:38.159 +03:00 [DBG] Connection id "0HN624AVJV40E" is closed. The last processed stream ID was 1.
2024-08-21 23:49:38.165 +03:00 [DBG] Connection id "0HN624AVJV40E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:38.186 +03:00 [DBG] Connection id "0HN624AVJV40E" stopped.
2024-08-21 23:49:45.470 +03:00 [DBG] Connection id "0HN624AVJV40F" accepted.
2024-08-21 23:49:45.474 +03:00 [DBG] Connection id "0HN624AVJV40F" started.
2024-08-21 23:49:45.486 +03:00 [DBG] Connection 0HN624AVJV40F established using the following protocol: "Tls13"
2024-08-21 23:49:45.491 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-21 23:49:45.523 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:49:45.550 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:49:45.556 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:45.568 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:49:45.573 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:49:45.773 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:49:45.785 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:45.923 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:49:45.934 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:49:45.939 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:49:45.945 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:49:45.953 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:49:45.959 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:49:45.970 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:49:46.583 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:49:46.772 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:49:46.803 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:49:46.816 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:49:46.824 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:49:46.863 +03:00 [DBG] Connection id "0HN624AVJV40F", Request id "0HN624AVJV40F:00000001": started reading request body.
2024-08-21 23:49:46.869 +03:00 [DBG] Connection id "0HN624AVJV40F", Request id "0HN624AVJV40F:00000001": done reading request body.
2024-08-21 23:49:46.955 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:49:46.962 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:46.968 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:46.973 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:49:47.083 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:49.932 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:49:49.938 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:49:49.943 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:49:49.948 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:49:49.953 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:49:50.259 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.265 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.271 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.416 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:49:50.422 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:49:51.053 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:49:51.439 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:49:51.741 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:49:52.803 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:49:53.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:53.171 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (154ms).
2024-08-21 23:49:53.242 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:54.309 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:54.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:49:54.693 +03:00 [INF] Executed DbCommand (342ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:49:54.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.140 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.211 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.260 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.295 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.339 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.473 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:49:55.523 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:49:55.533 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.537 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.542 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.553 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.559 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:49:55.591 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:49:55.609 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.612 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.617 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.662 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:49:55.727 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:49:55.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.741 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.746 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.752 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.758 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.783 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.795 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.798 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.804 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.865 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.870 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.874 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.877 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.895 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.903 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.905 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.910 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:56.372 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:49:56.386 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:49:56.389 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:49:56.392 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:49:56.397 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:49:56.401 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:49:56.548 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 10564.3304ms
2024-08-21 23:49:56.561 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:56.595 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:49:56.610 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 11118.2128ms
2024-08-21 23:49:58.182 +03:00 [DBG] Connection id "0HN624AVJV40F" received FIN.
2024-08-21 23:49:58.185 +03:00 [DBG] Connection id "0HN624AVJV40F" is closed. The last processed stream ID was 1.
2024-08-21 23:49:58.191 +03:00 [DBG] Connection id "0HN624AVJV40F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:58.213 +03:00 [DBG] Connection id "0HN624AVJV40F" stopped.
2024-08-21 23:50:56.298 +03:00 [DBG] Connection id "0HN624AVJV40G" accepted.
2024-08-21 23:50:56.310 +03:00 [DBG] Connection id "0HN624AVJV40G" started.
2024-08-21 23:50:56.337 +03:00 [DBG] Connection 0HN624AVJV40G established using the following protocol: "Tls13"
2024-08-21 23:50:56.346 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-21 23:50:56.389 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-21 23:50:56.393 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-21 23:50:56.398 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:50:56.402 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:50:56.404 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:50:56.709 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:50:56.716 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:50:56.720 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:50:56.731 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-21 23:50:56.736 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:50:56.740 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:50:56.745 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:50:56.751 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:50:56.756 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:50:56.760 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:50:57.496 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:50:57.504 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:50:57.510 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-21 23:50:57.520 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:50:57.551 +03:00 [DBG] Connection id "0HN624AVJV40G", Request id "0HN624AVJV40G:00000001": started reading request body.
2024-08-21 23:50:57.556 +03:00 [DBG] Connection id "0HN624AVJV40G", Request id "0HN624AVJV40G:00000001": done reading request body.
2024-08-21 23:50:57.612 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-21 23:50:57.616 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.621 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.625 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:50:57.642 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.834 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:50:57.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:57.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:50:57.855 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.861 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:50:57.894 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:50:57.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.907 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.913 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:57.915 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.918 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.955 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:50:58.036 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:50:58.074 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.080 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.083 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:50:58.088 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.092 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.100 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:58.131 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:58.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.268 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.359 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:58.362 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.367 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.387 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-21 23:50:58.429 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.445 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.450 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:50:58.457 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.461 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-21 23:50:58.490 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-21 23:50:58.499 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:58.503 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.508 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.528 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-21 23:50:58.538 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-21 23:50:58.544 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-21 23:50:58.551 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-21 23:50:58.675 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.706 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:50:58.714 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.720 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.725 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-21 23:50:58.760 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-21 23:50:58.896 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.942 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.977 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:59.055 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:50:59.060 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-21 23:50:59.098 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-21 23:50:59.136 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.141 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.145 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.150 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.159 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:59.163 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:50:59.168 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.173 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.177 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:59.194 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:59.202 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.206 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.209 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.372 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.491 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.578 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:50:59.591 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:50:59.747 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:50:59.842 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.848 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.863 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:50:59.912 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:51:00.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:51:00.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:51:00.165 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 450), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-21 23:51:00.208 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 450), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-21 23:51:00.287 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:51:00.323 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:51:00.343 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:51:00.350 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:51:00.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:51:00.361 +03:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p9, @p10);
2024-08-21 23:51:00.397 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p9, @p10);
2024-08-21 23:51:00.407 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:51:00.428 +03:00 [DBG] Committing transaction.
2024-08-21 23:51:00.446 +03:00 [DBG] Committed transaction.
2024-08-21 23:51:00.463 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:51:00.468 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:51:00.486 +03:00 [DBG] Disposing transaction.
2024-08-21 23:51:00.540 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:51:00.549 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:51:00.569 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-21 23:51:00.579 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:51:00.583 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:51:00.588 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:51:00.592 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:51:00.651 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:51:00.661 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:51:00.664 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:51:00.667 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:51:00.670 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:51:00.675 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:51:00.713 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3952.1995ms
2024-08-21 23:51:00.719 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:51:00.725 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:51:00.729 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4385.6293ms
2024-08-21 23:51:03.276 +03:00 [DBG] Connection id "0HN624AVJV40G" received FIN.
2024-08-21 23:51:03.280 +03:00 [DBG] Connection id "0HN624AVJV40G" is closed. The last processed stream ID was 1.
2024-08-21 23:51:03.285 +03:00 [DBG] Connection id "0HN624AVJV40G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:51:03.291 +03:00 [DBG] Connection id "0HN624AVJV40G" stopped.
2024-08-21 23:58:56.492 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:58:56.750 +03:00 [DBG] Hosting starting
2024-08-21 23:58:56.845 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:58:56.855 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:58:56.873 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:58:56.878 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:58:56.894 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:58:56.911 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:58:56.915 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:58:56.934 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:58:56.945 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:58:56.957 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:58:56.963 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:58:56.978 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:58:56.992 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:58:57.007 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:58:57.014 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:58:57.416 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:58:57.643 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:58:57.646 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:58:57.650 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:58:57.653 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:58:57.656 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:58:57.660 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:58:57.663 +03:00 [INF] Hosting environment: Development
2024-08-21 23:58:57.666 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:58:57.670 +03:00 [DBG] Hosting started
2024-08-21 23:58:58.036 +03:00 [DBG] Connection id "0HN624G9MQ07P" accepted.
2024-08-21 23:58:58.036 +03:00 [DBG] Connection id "0HN624G9MQ07Q" accepted.
2024-08-21 23:58:58.044 +03:00 [DBG] Connection id "0HN624G9MQ07P" started.
2024-08-21 23:58:58.044 +03:00 [DBG] Connection id "0HN624G9MQ07Q" started.
2024-08-21 23:58:58.050 +03:00 [DBG] Connection id "0HN624G9MQ07P" received FIN.
2024-08-21 23:58:58.050 +03:00 [DBG] Connection id "0HN624G9MQ07Q" received FIN.
2024-08-21 23:58:58.089 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:58:58.089 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:58:58.206 +03:00 [DBG] Connection id "0HN624G9MQ07P" stopped.
2024-08-21 23:58:58.206 +03:00 [DBG] Connection id "0HN624G9MQ07Q" stopped.
2024-08-21 23:58:58.217 +03:00 [DBG] Connection id "0HN624G9MQ07P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:58:58.217 +03:00 [DBG] Connection id "0HN624G9MQ07Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:00.948 +03:00 [DBG] Connection id "0HN624G9MQ07R" accepted.
2024-08-21 23:59:00.971 +03:00 [DBG] Connection id "0HN624G9MQ07R" started.
2024-08-21 23:59:01.120 +03:00 [DBG] Connection 0HN624G9MQ07R established using the following protocol: "Tls13"
2024-08-21 23:59:01.351 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:59:01.833 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:59:02.001 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:59:02.006 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:59:02.783 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:59:02.860 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:59:02.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1547.3167ms
2024-08-21 23:59:02.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:59:02.933 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:59:02.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 25.1315ms
2024-08-21 23:59:03.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 219.3973ms
2024-08-21 23:59:06.105 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:59:06.109 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:59:06.113 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:59:06.825 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 719.7935ms
2024-08-21 23:59:08.911 +03:00 [DBG] Connection id "0HN624G9MQ07R" received FIN.
2024-08-21 23:59:08.932 +03:00 [DBG] Connection id "0HN624G9MQ07R" is closed. The last processed stream ID was 7.
2024-08-21 23:59:08.940 +03:00 [DBG] Connection id "0HN624G9MQ07R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:08.959 +03:00 [DBG] Connection id "0HN624G9MQ07R" stopped.
2024-08-21 23:59:22.529 +03:00 [DBG] Connection id "0HN624G9MQ07S" accepted.
2024-08-21 23:59:22.541 +03:00 [DBG] Connection id "0HN624G9MQ07S" started.
2024-08-21 23:59:22.568 +03:00 [DBG] Connection 0HN624G9MQ07S established using the following protocol: "Tls13"
2024-08-21 23:59:22.575 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-21 23:59:22.598 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:59:22.621 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:59:22.627 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:22.635 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:59:22.640 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:59:22.813 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:59:22.823 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:22.939 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:59:22.950 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:59:22.957 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:59:22.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:59:22.972 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:59:22.978 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:59:22.985 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:59:23.426 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:59:23.587 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:59:23.609 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:59:23.621 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:59:23.629 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:59:23.665 +03:00 [DBG] Connection id "0HN624G9MQ07S", Request id "0HN624G9MQ07S:00000001": started reading request body.
2024-08-21 23:59:23.671 +03:00 [DBG] Connection id "0HN624G9MQ07S", Request id "0HN624G9MQ07S:00000001": done reading request body.
2024-08-21 23:59:23.744 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:59:23.750 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:23.755 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:23.759 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:59:23.837 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:26.312 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:59:26.319 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:59:26.325 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:59:26.331 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:59:26.336 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:59:26.611 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.617 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.623 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.764 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:26.770 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:26.775 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:27.346 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:59:27.643 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:59:27.952 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:59:28.955 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:59:29.161 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:29.294 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (129ms).
2024-08-21 23:59:29.371 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:30.300 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:30.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:59:30.647 +03:00 [INF] Executed DbCommand (308ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:59:30.876 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.166 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.213 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.240 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.273 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.385 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:59:31.422 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:59:31.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:59:31.441 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.450 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.454 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:59:31.496 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:59:31.511 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.514 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.517 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.570 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:59:31.636 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:59:31.648 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.651 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:59:31.655 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.659 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.664 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.707 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.718 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.721 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.726 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.773 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:59:31.783 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.787 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.792 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.808 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.817 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.821 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.826 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:32.233 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:59:32.253 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:59:32.256 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:59:32.258 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:59:32.263 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:59:32.269 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:59:32.411 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 9413.9787ms
2024-08-21 23:59:32.420 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:32.449 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:59:32.466 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 9890.9319ms
2024-08-21 23:59:38.952 +03:00 [DBG] Connection id "0HN624G9MQ07S" received FIN.
2024-08-21 23:59:38.957 +03:00 [DBG] Connection id "0HN624G9MQ07S" is closed. The last processed stream ID was 1.
2024-08-21 23:59:38.962 +03:00 [DBG] Connection id "0HN624G9MQ07S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:38.967 +03:00 [DBG] Connection id "0HN624G9MQ07S" stopped.
2024-08-21 23:59:58.496 +03:00 [DBG] Connection id "0HN624G9MQ07T" accepted.
2024-08-21 23:59:58.499 +03:00 [DBG] Connection id "0HN624G9MQ07T" started.
2024-08-21 23:59:58.515 +03:00 [DBG] Connection 0HN624G9MQ07T established using the following protocol: "Tls13"
2024-08-21 23:59:58.522 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-21 23:59:58.552 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-21 23:59:58.557 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-21 23:59:58.566 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:59:58.570 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:59:58.575 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:59:58.889 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:59:58.896 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:59:58.903 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:59:58.915 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-21 23:59:58.923 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:59:58.929 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:59:58.935 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:59:58.942 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:59:58.946 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:59:58.953 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:59:59.713 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:59:59.721 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:59:59.726 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-21 23:59:59.735 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:59:59.767 +03:00 [DBG] Connection id "0HN624G9MQ07T", Request id "0HN624G9MQ07T:00000001": started reading request body.
2024-08-21 23:59:59.773 +03:00 [DBG] Connection id "0HN624G9MQ07T", Request id "0HN624G9MQ07T:00000001": done reading request body.
2024-08-21 23:59:59.822 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-21 23:59:59.825 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:59:59.830 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:59:59.835 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:59:59.855 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:00:00.008 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:00:00.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-22 00:00:00.032 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.038 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:00:00.090 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:00:00.102 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.106 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.111 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.118 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.122 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.126 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.162 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 00:00:00.218 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 00:00:00.246 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.256 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.265 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.272 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.283 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.320 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.395 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.467 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.544 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.548 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.554 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.576 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.585 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.590 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.594 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.614 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.623 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.625 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.629 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.642 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 00:00:00.687 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.715 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.720 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.724 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:00:00.759 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:00:00.769 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.772 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.777 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.793 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 00:00:00.801 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 00:00:00.808 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 00:00:00.814 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 00:00:00.908 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.937 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.940 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.944 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.948 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.953 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:00:00.989 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:00:01.121 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.171 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.212 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.268 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:01.272 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:01.277 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:00:01.308 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:00:01.340 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.344 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.347 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.353 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.361 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:01.365 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:01.371 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.377 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.382 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:01.414 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:01.423 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.425 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.429 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.575 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.761 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.788 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:00:01.800 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:00:01.953 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:00:02.024 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.031 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.041 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 00:00:02.088 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 00:00:02.274 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:02.278 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:02.309 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:00:02.364 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:00:02.454 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:00:02.485 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:00:02.510 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:02.519 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:02.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:00:02.528 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:00:02.544 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:00:02.553 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:02.577 +03:00 [DBG] Committing transaction.
2024-08-22 00:00:02.598 +03:00 [DBG] Committed transaction.
2024-08-22 00:00:02.622 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.627 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.649 +03:00 [DBG] Disposing transaction.
2024-08-22 00:00:02.692 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:02.701 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:02.720 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 00:00:02.727 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:00:02.731 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:00:02.737 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:00:02.740 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 00:00:02.793 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:00:02.803 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:00:02.806 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:00:02.809 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:00:02.811 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:00:02.818 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:00:02.884 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3931.4822ms
2024-08-22 00:00:02.889 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:00:02.894 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:00:02.899 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4377.2278ms
2024-08-22 00:00:08.980 +03:00 [DBG] Connection id "0HN624G9MQ07T" received FIN.
2024-08-22 00:00:08.984 +03:00 [DBG] Connection id "0HN624G9MQ07T" is closed. The last processed stream ID was 1.
2024-08-22 00:00:08.989 +03:00 [DBG] Connection id "0HN624G9MQ07T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:00:09.002 +03:00 [DBG] Connection id "0HN624G9MQ07T" stopped.
2024-08-22 00:02:20.040 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 00:02:20.277 +03:00 [DBG] Hosting starting
2024-08-22 00:02:20.345 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 00:02:20.354 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 00:02:20.368 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 00:02:20.373 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 00:02:20.391 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 00:02:20.402 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 00:02:20.406 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 00:02:20.427 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 00:02:20.437 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 00:02:20.448 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 00:02:20.453 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 00:02:20.471 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 00:02:20.488 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 00:02:20.504 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 00:02:20.509 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 00:02:20.840 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 00:02:20.956 +03:00 [DBG] Connection id "0HN624I662EQK" received FIN.
2024-08-22 00:02:20.984 +03:00 [DBG] Connection id "0HN624I662EQK" accepted.
2024-08-22 00:02:20.985 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 00:02:20.991 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 00:02:20.991 +03:00 [DBG] Connection id "0HN624I662EQK" started.
2024-08-22 00:02:20.994 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 00:02:21.000 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 00:02:21.002 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 00:02:21.005 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 00:02:21.007 +03:00 [INF] Hosting environment: Development
2024-08-22 00:02:21.011 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 00:02:21.015 +03:00 [DBG] Hosting started
2024-08-22 00:02:21.038 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 00:02:21.134 +03:00 [DBG] Connection id "0HN624I662EQK" stopped.
2024-08-22 00:02:21.146 +03:00 [DBG] Connection id "0HN624I662EQK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:21.320 +03:00 [DBG] Connection id "0HN624I662EQL" accepted.
2024-08-22 00:02:21.338 +03:00 [DBG] Connection id "0HN624I662EQL" started.
2024-08-22 00:02:21.467 +03:00 [DBG] Connection 0HN624I662EQL established using the following protocol: "Tls13"
2024-08-22 00:02:21.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 00:02:21.962 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 00:02:22.062 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 00:02:22.065 +03:00 [DBG] Request did not match any endpoints
2024-08-22 00:02:22.687 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 00:02:22.754 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 00:02:22.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1155.9649ms
2024-08-22 00:02:22.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 00:02:22.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.3223ms
2024-08-22 00:02:22.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 00:02:22.982 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 162.2077ms
2024-08-22 00:02:24.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 00:02:24.984 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 00:02:24.989 +03:00 [DBG] Request did not match any endpoints
2024-08-22 00:02:25.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 729.6820ms
2024-08-22 00:02:29.160 +03:00 [DBG] Connection id "0HN624I662EQL" received FIN.
2024-08-22 00:02:29.180 +03:00 [DBG] Connection id "0HN624I662EQL" is closed. The last processed stream ID was 7.
2024-08-22 00:02:29.186 +03:00 [DBG] Connection id "0HN624I662EQL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:29.210 +03:00 [DBG] Connection id "0HN624I662EQL" stopped.
2024-08-22 00:02:44.692 +03:00 [DBG] Connection id "0HN624I662EQM" accepted.
2024-08-22 00:02:44.703 +03:00 [DBG] Connection id "0HN624I662EQM" started.
2024-08-22 00:02:44.801 +03:00 [DBG] Connection 0HN624I662EQM established using the following protocol: "Tls13"
2024-08-22 00:02:44.810 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 00:02:44.836 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 00:02:44.857 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 00:02:44.862 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:44.869 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 00:02:44.874 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 00:02:45.030 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 00:02:45.045 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:45.166 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 00:02:45.177 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 00:02:45.183 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 00:02:45.191 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 00:02:45.199 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 00:02:45.206 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 00:02:45.214 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 00:02:45.737 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 00:02:45.872 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 00:02:45.891 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 00:02:45.902 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 00:02:45.910 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 00:02:45.953 +03:00 [DBG] Connection id "0HN624I662EQM", Request id "0HN624I662EQM:00000001": started reading request body.
2024-08-22 00:02:45.961 +03:00 [DBG] Connection id "0HN624I662EQM", Request id "0HN624I662EQM:00000001": done reading request body.
2024-08-22 00:02:46.043 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 00:02:46.049 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:46.053 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:46.056 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 00:02:46.140 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:48.638 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 00:02:48.643 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 00:02:48.648 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 00:02:48.653 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 00:02:48.658 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 00:02:48.935 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:48.941 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:48.945 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:49.075 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.082 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.087 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.760 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:02:50.104 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 00:02:50.441 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 00:02:51.621 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:02:51.868 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:51.975 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (108ms).
2024-08-22 00:02:52.034 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:52.854 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:52.917 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:02:53.244 +03:00 [INF] Executed DbCommand (353ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:02:53.479 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.706 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.853 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:53.887 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:53.929 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.057 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 00:02:54.105 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 00:02:54.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.123 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.133 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 00:02:54.160 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 00:02:54.172 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.175 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.180 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.222 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 00:02:54.290 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 00:02:54.302 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.306 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.311 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.316 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.321 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.340 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.349 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.353 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.358 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.400 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.404 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.409 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.414 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.418 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.432 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.441 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.443 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.448 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.890 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:02:54.905 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:02:54.908 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:02:54.911 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:02:54.916 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:02:54.921 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:02:55.058 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 9831.4674ms
2024-08-22 00:02:55.069 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:55.105 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:02:55.121 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 10311.1922ms
2024-08-22 00:02:59.179 +03:00 [DBG] Connection id "0HN624I662EQM" received FIN.
2024-08-22 00:02:59.184 +03:00 [DBG] Connection id "0HN624I662EQM" is closed. The last processed stream ID was 1.
2024-08-22 00:02:59.189 +03:00 [DBG] Connection id "0HN624I662EQM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:59.195 +03:00 [DBG] Connection id "0HN624I662EQM" stopped.
2024-08-22 00:03:27.624 +03:00 [DBG] Connection id "0HN624I662EQN" accepted.
2024-08-22 00:03:27.637 +03:00 [DBG] Connection id "0HN624I662EQN" started.
2024-08-22 00:03:27.677 +03:00 [DBG] Connection 0HN624I662EQN established using the following protocol: "Tls13"
2024-08-22 00:03:27.687 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-22 00:03:27.711 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-22 00:03:27.715 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-22 00:03:27.722 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:27.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 00:03:27.729 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 00:03:28.005 +03:00 [DBG] Successfully validated the token.
2024-08-22 00:03:28.012 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 00:03:28.018 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:28.030 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 00:03:28.037 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 00:03:28.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 00:03:28.047 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 00:03:28.055 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 00:03:28.060 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 00:03:28.065 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 00:03:28.684 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 00:03:28.690 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 00:03:28.694 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-22 00:03:28.699 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 00:03:28.722 +03:00 [DBG] Connection id "0HN624I662EQN", Request id "0HN624I662EQN:00000001": started reading request body.
2024-08-22 00:03:28.727 +03:00 [DBG] Connection id "0HN624I662EQN", Request id "0HN624I662EQN:00000001": done reading request body.
2024-08-22 00:03:28.778 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-22 00:03:28.783 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.789 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.794 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 00:03:28.820 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.974 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:03:28.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:28.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:28.996 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.001 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:03:29.035 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:03:29.045 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.051 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.057 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.062 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.065 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.070 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.107 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 00:03:29.166 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 00:03:29.199 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.209 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.212 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.216 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.222 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.230 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.255 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.372 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.448 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.451 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.456 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.475 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:29.484 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.490 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.496 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.516 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.524 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.526 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.531 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.545 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 00:03:29.578 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.595 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.599 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.607 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.612 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.617 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:03:29.642 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:03:29.652 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.656 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.661 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.675 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 00:03:29.686 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 00:03:29.693 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 00:03:29.699 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 00:03:29.792 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.821 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.825 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.830 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.836 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.840 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:03:29.869 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:03:30.001 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.057 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.177 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:30.181 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:30.188 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:03:30.227 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:03:30.273 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.277 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.280 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.285 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.292 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:30.295 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:30.300 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.305 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:30.325 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:30.333 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.337 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.341 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.484 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.628 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.674 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.707 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:03:30.720 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:03:30.876 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:03:30.947 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.953 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.968 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 00:03:31.013 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 00:03:31.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:31.210 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:31.229 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:03:31.256 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:03:31.330 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:03:31.359 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:03:31.374 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:31.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:31.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:31.387 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:03:31.403 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:03:31.410 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:31.439 +03:00 [DBG] Committing transaction.
2024-08-22 00:03:31.462 +03:00 [DBG] Committed transaction.
2024-08-22 00:03:31.480 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:31.485 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:31.503 +03:00 [DBG] Disposing transaction.
2024-08-22 00:03:31.548 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:31.558 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:31.576 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 00:03:31.584 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:03:31.588 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:03:31.592 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:03:31.595 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 00:03:31.635 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:03:31.643 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:03:31.645 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:03:31.648 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:03:31.651 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:03:31.655 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:03:31.719 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3653.1056ms
2024-08-22 00:03:31.724 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:31.728 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:03:31.732 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4046.1585ms
2024-08-22 00:03:39.233 +03:00 [DBG] Connection id "0HN624I662EQN" received FIN.
2024-08-22 00:03:39.240 +03:00 [DBG] Connection id "0HN624I662EQN" is closed. The last processed stream ID was 1.
2024-08-22 00:03:39.247 +03:00 [DBG] Connection id "0HN624I662EQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:03:39.263 +03:00 [DBG] Connection id "0HN624I662EQN" stopped.
2024-08-22 10:36:10.334 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 10:36:10.591 +03:00 [DBG] Hosting starting
2024-08-22 10:36:10.759 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 10:36:10.766 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 10:36:10.830 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 10:36:10.853 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 10:36:10.896 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 10:36:10.912 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 10:36:10.915 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 10:36:10.932 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 10:36:10.941 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:36:10.950 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 10:36:10.953 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:36:10.966 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 10:36:10.976 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 10:36:10.985 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 10:36:10.989 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 10:36:11.770 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 10:36:11.897 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 10:36:11.900 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 10:36:11.903 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 10:36:11.904 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 10:36:11.906 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 10:36:11.910 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 10:36:11.913 +03:00 [INF] Hosting environment: Development
2024-08-22 10:36:11.915 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 10:36:11.917 +03:00 [DBG] Hosting started
2024-08-22 10:36:12.040 +03:00 [DBG] Connection id "0HN62FKCALS52" accepted.
2024-08-22 10:36:12.047 +03:00 [DBG] Connection id "0HN62FKCALS52" started.
2024-08-22 10:36:12.052 +03:00 [DBG] Connection id "0HN62FKCALS53" accepted.
2024-08-22 10:36:12.054 +03:00 [DBG] Connection id "0HN62FKCALS53" started.
2024-08-22 10:36:14.050 +03:00 [DBG] Connection id "0HN62FKCALS54" accepted.
2024-08-22 10:36:14.098 +03:00 [DBG] Connection id "0HN62FKCALS54" started.
2024-08-22 10:36:14.335 +03:00 [DBG] Connection 0HN62FKCALS54 established using the following protocol: "Tls13"
2024-08-22 10:36:14.967 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 10:36:15.828 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 10:36:15.969 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 10:36:15.974 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:36:16.581 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 10:36:16.624 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 10:36:16.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 10:36:16.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1704.3255ms
2024-08-22 10:36:16.673 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.7835ms
2024-08-22 10:36:16.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 10:36:16.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 242.0811ms
2024-08-22 10:36:20.108 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 10:36:20.113 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 10:36:20.116 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:36:20.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 539.8343ms
2024-08-22 10:36:20.679 +03:00 [DBG] Connection id "0HN62FKCALS54" received FIN.
2024-08-22 10:36:20.694 +03:00 [DBG] Connection id "0HN62FKCALS54" is closed. The last processed stream ID was 7.
2024-08-22 10:36:20.699 +03:00 [DBG] Connection id "0HN62FKCALS54" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:20.714 +03:00 [DBG] Connection id "0HN62FKCALS54" stopped.
2024-08-22 10:36:22.088 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 10:36:22.088 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 10:36:22.091 +03:00 [DBG] Connection id "0HN62FKCALS52" stopped.
2024-08-22 10:36:22.094 +03:00 [DBG] Connection id "0HN62FKCALS53" stopped.
2024-08-22 10:36:22.095 +03:00 [DBG] Connection id "0HN62FKCALS52" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:22.097 +03:00 [DBG] Connection id "0HN62FKCALS53" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:47.391 +03:00 [DBG] Connection id "0HN62FKCALS55" accepted.
2024-08-22 10:36:47.393 +03:00 [DBG] Connection id "0HN62FKCALS55" started.
2024-08-22 10:36:47.416 +03:00 [DBG] Connection 0HN62FKCALS55 established using the following protocol: "Tls13"
2024-08-22 10:36:47.421 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:36:47.483 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:36:47.497 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:36:47.502 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:47.507 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:36:47.513 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:36:47.661 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 10:36:47.670 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:47.753 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:36:47.760 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:36:47.765 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:36:47.768 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:36:47.770 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:36:47.771 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:36:47.776 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:36:48.290 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 10:36:48.380 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:36:48.399 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:36:48.403 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:36:48.407 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:36:48.424 +03:00 [DBG] Connection id "0HN62FKCALS55", Request id "0HN62FKCALS55:00000001": started reading request body.
2024-08-22 10:36:48.428 +03:00 [DBG] Connection id "0HN62FKCALS55", Request id "0HN62FKCALS55:00000001": done reading request body.
2024-08-22 10:36:48.455 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:36:48.458 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:48.463 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:48.465 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:36:48.563 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:49.769 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 10:36:49.775 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 10:36:49.779 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 10:36:49.781 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 10:36:49.782 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 10:36:49.918 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:49.924 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:49.926 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:50.001 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.005 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.010 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.364 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:36:51.089 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 10:36:51.284 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 10:36:51.968 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:36:52.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:52.239 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (133ms).
2024-08-22 10:36:52.277 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.093 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.128 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:36:53.326 +03:00 [INF] Executed DbCommand (210ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:36:53.468 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.574 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.617 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.644 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:53.662 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.688 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.816 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 10:36:53.845 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:36:53.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:53.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:53.857 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.863 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:36:53.893 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:36:53.900 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:53.902 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.904 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.930 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 10:36:53.978 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:36:53.984 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:53.987 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:53.991 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.993 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.998 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.031 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.037 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:54.039 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.043 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.081 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:54.084 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:54.089 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.093 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.097 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.112 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.115 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:54.117 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.118 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.365 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:36:54.378 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:36:54.380 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:36:54.381 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:36:54.383 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:36:54.385 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:36:54.468 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 6679.8702ms
2024-08-22 10:36:54.476 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:54.502 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:36:54.516 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 7095.3238ms
2024-08-22 10:36:55.683 +03:00 [DBG] Connection id "0HN62FKCALS55" received FIN.
2024-08-22 10:36:55.688 +03:00 [DBG] Connection id "0HN62FKCALS55" is closed. The last processed stream ID was 1.
2024-08-22 10:36:55.697 +03:00 [DBG] Connection id "0HN62FKCALS55" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:55.705 +03:00 [DBG] Connection id "0HN62FKCALS55" stopped.
2024-08-22 10:37:36.120 +03:00 [DBG] Connection id "0HN62FKCALS56" accepted.
2024-08-22 10:37:36.128 +03:00 [DBG] Connection id "0HN62FKCALS56" started.
2024-08-22 10:37:36.142 +03:00 [DBG] Connection 0HN62FKCALS56 established using the following protocol: "Tls13"
2024-08-22 10:37:36.153 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-22 10:37:36.217 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-22 10:37:36.219 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-22 10:37:36.223 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:36.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:37:36.226 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:37:36.371 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:37:36.376 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:37:36.381 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:36.390 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:37:36.395 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:37:36.398 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:37:36.401 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:37:36.404 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:37:36.407 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:37:36.409 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:37:36.750 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:37:36.755 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 10:37:36.760 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-22 10:37:36.764 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:37:36.776 +03:00 [DBG] Connection id "0HN62FKCALS56", Request id "0HN62FKCALS56:00000001": started reading request body.
2024-08-22 10:37:36.780 +03:00 [DBG] Connection id "0HN62FKCALS56", Request id "0HN62FKCALS56:00000001": done reading request body.
2024-08-22 10:37:36.801 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-22 10:37:36.804 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.809 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.810 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 10:37:36.816 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.897 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:37:36.905 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:36.909 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:37:36.911 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.914 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:37:36.932 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:37:36.938 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.941 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.945 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.948 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:36.949 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.951 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.973 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 10:37:37.006 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 10:37:37.021 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.032 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.033 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.058 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.098 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.149 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.183 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.185 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.188 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.199 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.201 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.202 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.204 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.214 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.219 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.220 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.225 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.230 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 10:37:37.248 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.256 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:37:37.262 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.264 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.265 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 10:37:37.275 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 10:37:37.283 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.296 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.298 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.300 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.308 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 10:37:37.314 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 10:37:37.317 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 10:37:37.322 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 10:37:37.373 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.391 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:37:37.395 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.397 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.399 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 10:37:37.416 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 10:37:37.471 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.506 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.565 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.567 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 10:37:37.584 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 10:37:37.608 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.611 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.613 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.616 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.620 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.625 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.630 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.634 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.645 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.650 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.651 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.653 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.744 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.809 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.833 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.858 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 10:37:37.866 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 10:37:37.960 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 10:37:38.002 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.006 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.015 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 10:37:38.041 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 10:37:38.127 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:38.129 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:38.147 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 10:37:38.191 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 10:37:38.229 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 10:37:38.252 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 10:37:38.262 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:38.265 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:38.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:37:38.269 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 10:37:38.281 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 10:37:38.285 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:38.297 +03:00 [DBG] Committing transaction.
2024-08-22 10:37:38.308 +03:00 [DBG] Committed transaction.
2024-08-22 10:37:38.316 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.319 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.328 +03:00 [DBG] Disposing transaction.
2024-08-22 10:37:38.347 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:38.351 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:38.361 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 10:37:38.364 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 10:37:38.365 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 10:37:38.367 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 10:37:38.367 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 10:37:38.385 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:37:38.392 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:37:38.394 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:37:38.395 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:37:38.396 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:37:38.399 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:37:38.427 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 2017.801ms
2024-08-22 10:37:38.429 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:38.432 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:37:38.434 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 2281.0651ms
2024-08-22 10:37:45.694 +03:00 [DBG] Connection id "0HN62FKCALS56" received FIN.
2024-08-22 10:37:45.698 +03:00 [DBG] Connection id "0HN62FKCALS56" is closed. The last processed stream ID was 1.
2024-08-22 10:37:45.703 +03:00 [DBG] Connection id "0HN62FKCALS56" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:37:45.707 +03:00 [DBG] Connection id "0HN62FKCALS56" stopped.
2024-08-22 10:41:07.804 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 10:41:07.988 +03:00 [DBG] Hosting starting
2024-08-22 10:41:08.053 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 10:41:08.059 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 10:41:08.094 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 10:41:08.098 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 10:41:08.114 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 10:41:08.132 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 10:41:08.134 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 10:41:08.147 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 10:41:08.154 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:41:08.164 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 10:41:08.167 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:41:08.178 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 10:41:08.187 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 10:41:08.195 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 10:41:08.199 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 10:41:08.518 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 10:41:08.616 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 10:41:08.619 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 10:41:08.622 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 10:41:08.622 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 10:41:08.623 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 10:41:08.625 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 10:41:08.626 +03:00 [INF] Hosting environment: Development
2024-08-22 10:41:08.627 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 10:41:08.627 +03:00 [DBG] Hosting started
2024-08-22 10:41:08.661 +03:00 [DBG] Connection id "0HN62FN4NGIB8" accepted.
2024-08-22 10:41:08.661 +03:00 [DBG] Connection id "0HN62FN4NGIB9" accepted.
2024-08-22 10:41:08.667 +03:00 [DBG] Connection id "0HN62FN4NGIB9" started.
2024-08-22 10:41:08.667 +03:00 [DBG] Connection id "0HN62FN4NGIB8" started.
2024-08-22 10:41:08.680 +03:00 [DBG] Connection id "0HN62FN4NGIB9" received FIN.
2024-08-22 10:41:08.680 +03:00 [DBG] Connection id "0HN62FN4NGIB8" received FIN.
2024-08-22 10:41:08.713 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 10:41:08.714 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 10:41:09.332 +03:00 [DBG] Connection id "0HN62FN4NGIBA" accepted.
2024-08-22 10:41:09.447 +03:00 [DBG] Connection id "0HN62FN4NGIB9" stopped.
2024-08-22 10:41:09.448 +03:00 [DBG] Connection id "0HN62FN4NGIB8" stopped.
2024-08-22 10:41:09.449 +03:00 [DBG] Connection id "0HN62FN4NGIBA" started.
2024-08-22 10:41:09.463 +03:00 [DBG] Connection id "0HN62FN4NGIB8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:09.463 +03:00 [DBG] Connection id "0HN62FN4NGIB9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:09.592 +03:00 [DBG] Connection 0HN62FN4NGIBA established using the following protocol: "Tls13"
2024-08-22 10:41:09.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 10:41:10.015 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 10:41:10.088 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 10:41:10.093 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:41:10.419 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 10:41:10.458 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 10:41:10.482 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 771.2920ms
2024-08-22 10:41:10.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 10:41:10.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 11.5720ms
2024-08-22 10:41:10.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 10:41:10.646 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 135.1941ms
2024-08-22 10:41:12.279 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 10:41:12.283 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 10:41:12.287 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:41:12.815 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 535.8981ms
2024-08-22 10:41:15.753 +03:00 [DBG] Connection id "0HN62FN4NGIBA" received FIN.
2024-08-22 10:41:15.764 +03:00 [DBG] Connection id "0HN62FN4NGIBA" is closed. The last processed stream ID was 7.
2024-08-22 10:41:15.769 +03:00 [DBG] Connection id "0HN62FN4NGIBA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:15.778 +03:00 [DBG] Connection id "0HN62FN4NGIBA" stopped.
2024-08-22 10:41:38.418 +03:00 [DBG] Connection id "0HN62FN4NGIBB" accepted.
2024-08-22 10:41:38.429 +03:00 [DBG] Connection id "0HN62FN4NGIBB" started.
2024-08-22 10:41:38.451 +03:00 [DBG] Connection 0HN62FN4NGIBB established using the following protocol: "Tls13"
2024-08-22 10:41:38.455 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:41:38.467 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:41:38.483 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:41:38.487 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:38.492 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:41:38.497 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:41:38.591 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 10:41:38.599 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:38.678 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:41:38.686 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:41:38.688 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:41:38.691 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:41:38.697 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:41:38.701 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:41:38.704 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:41:39.005 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 10:41:39.088 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:41:39.102 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:41:39.111 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:41:39.115 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:41:39.137 +03:00 [DBG] Connection id "0HN62FN4NGIBB", Request id "0HN62FN4NGIBB:00000001": started reading request body.
2024-08-22 10:41:39.142 +03:00 [DBG] Connection id "0HN62FN4NGIBB", Request id "0HN62FN4NGIBB:00000001": done reading request body.
2024-08-22 10:41:39.182 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:41:39.187 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:39.190 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:39.195 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:41:39.248 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:40.351 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 10:41:40.357 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 10:41:40.361 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 10:41:40.364 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 10:41:40.366 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 10:41:40.567 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.582 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.584 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.866 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:40.869 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:40.873 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:41.303 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:41:41.573 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 10:41:41.726 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 10:41:42.180 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:41:42.286 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:42.377 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (90ms).
2024-08-22 10:41:42.431 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.125 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.151 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:41:43.289 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:41:43.384 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.477 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.518 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.546 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.561 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.586 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.659 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 10:41:43.686 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:41:43.693 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.696 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:41:43.699 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.702 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.705 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:41:43.733 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:41:43.746 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.749 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.752 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.786 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 10:41:43.819 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:41:43.828 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 10:41:43.836 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.838 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.841 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.872 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.879 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.880 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.882 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.907 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.910 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:41:43.912 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.914 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.920 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.923 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.925 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.929 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:44.177 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:41:44.186 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:41:44.189 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:41:44.191 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:41:44.192 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:41:44.194 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:41:44.265 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 5550.765ms
2024-08-22 10:41:44.274 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:44.300 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:41:44.314 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 5859.3308ms
2024-08-22 10:41:45.761 +03:00 [DBG] Connection id "0HN62FN4NGIBB" received FIN.
2024-08-22 10:41:45.763 +03:00 [DBG] Connection id "0HN62FN4NGIBB" is closed. The last processed stream ID was 1.
2024-08-22 10:41:45.768 +03:00 [DBG] Connection id "0HN62FN4NGIBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:45.770 +03:00 [DBG] Connection id "0HN62FN4NGIBB" stopped.
2024-08-22 10:48:57.589 +03:00 [DBG] Connection id "0HN62FN4NGIBC" accepted.
2024-08-22 10:48:57.591 +03:00 [DBG] Connection id "0HN62FN4NGIBC" started.
2024-08-22 10:48:57.619 +03:00 [DBG] Connection 0HN62FN4NGIBC established using the following protocol: "Tls13"
2024-08-22 10:48:57.623 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:48:57.667 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:48:57.677 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:48:57.681 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:57.683 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:48:57.685 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:48:57.807 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:48:57 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-22 10:48:57.826 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:48:57 AM'.
2024-08-22 10:48:57.829 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:57.836 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:48:57.842 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:48:57.844 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:48:57.846 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:48:57.850 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:48:57.853 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:48:57.856 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:48:58.150 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:48:58.155 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:48:58.158 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:48:58.160 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:48:58.176 +03:00 [DBG] Connection id "0HN62FN4NGIBC", Request id "0HN62FN4NGIBC:00000001": started reading request body.
2024-08-22 10:48:58.180 +03:00 [DBG] Connection id "0HN62FN4NGIBC", Request id "0HN62FN4NGIBC:00000001": done reading request body.
2024-08-22 10:48:58.218 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 46.
2024-08-22 10:48:58.223 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.227 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.228 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:48:58.233 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.236 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:48:58.241 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:48:58.244 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:48:58.247 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:48:58.249 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:48:58.255 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:48:58.257 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:48:58.272 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 415.9762ms
2024-08-22 10:48:58.302 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:58.305 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 400 - application/problem+json;+charset=utf-8 681.4561ms
2024-08-22 10:49:00.888 +03:00 [DBG] Connection id "0HN62FN4NGIBC" received FIN.
2024-08-22 10:49:00.893 +03:00 [DBG] Connection id "0HN62FN4NGIBC" is closed. The last processed stream ID was 1.
2024-08-22 10:49:00.897 +03:00 [DBG] Connection id "0HN62FN4NGIBC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:00.902 +03:00 [DBG] Connection id "0HN62FN4NGIBC" stopped.
2024-08-22 10:49:09.897 +03:00 [DBG] Connection id "0HN62FN4NGIBD" accepted.
2024-08-22 10:49:09.900 +03:00 [DBG] Connection id "0HN62FN4NGIBD" started.
2024-08-22 10:49:09.907 +03:00 [DBG] Connection 0HN62FN4NGIBD established using the following protocol: "Tls13"
2024-08-22 10:49:09.912 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:49:09.915 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:49:09.918 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:49:09.921 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:09.924 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:09.930 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:09.939 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:49:09 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-22 10:49:09.946 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:49:09 AM'.
2024-08-22 10:49:09.950 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:09.951 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:49:09.953 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:09.955 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:09.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:49:09.958 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:09.960 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:09.963 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:49:09.967 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:49:09.970 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:49:09.972 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:49:09.973 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:09.975 +03:00 [DBG] Connection id "0HN62FN4NGIBD", Request id "0HN62FN4NGIBD:00000001": started reading request body.
2024-08-22 10:49:09.977 +03:00 [DBG] Connection id "0HN62FN4NGIBD", Request id "0HN62FN4NGIBD:00000001": done reading request body.
2024-08-22 10:49:09.981 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:49:09.983 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:09.984 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:09.985 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:49:09.987 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:10.039 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:49:10.047 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.049 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:49:10.051 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.065 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.071 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:49:10.086 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:49:10.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.092 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.099 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.100 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.102 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.111 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.115 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:49:10.117 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.118 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.119 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:49:10.124 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:49:10.127 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.128 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.130 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.133 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:49:10.136 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.138 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.147 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.151 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.152 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.153 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-22 10:49:10.157 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.159 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.162 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.167 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.170 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.171 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.172 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.174 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:10.176 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:10.178 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:49:10.181 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:49:10.183 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:49:10.185 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:49:10.187 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 223.8827ms
2024-08-22 10:49:10.189 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:10.190 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:49:10.192 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 280.1054ms
2024-08-22 10:49:10.891 +03:00 [DBG] Connection id "0HN62FN4NGIBD" received FIN.
2024-08-22 10:49:10.893 +03:00 [DBG] Connection id "0HN62FN4NGIBD" is closed. The last processed stream ID was 1.
2024-08-22 10:49:10.897 +03:00 [DBG] Connection id "0HN62FN4NGIBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:10.902 +03:00 [DBG] Connection id "0HN62FN4NGIBD" stopped.
2024-08-22 10:49:38.788 +03:00 [DBG] Connection id "0HN62FN4NGIBE" accepted.
2024-08-22 10:49:38.790 +03:00 [DBG] Connection id "0HN62FN4NGIBE" started.
2024-08-22 10:49:38.835 +03:00 [DBG] Connection 0HN62FN4NGIBE established using the following protocol: "Tls13"
2024-08-22 10:49:38.872 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:49:38.879 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:38.892 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:38.894 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.895 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:38.896 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:38.923 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:38.927 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:38.930 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.932 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:38.938 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:38.941 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:38.942 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:38.944 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:38.946 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:38.948 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:38.951 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:38.953 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:38.954 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:38.956 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:38.957 +03:00 [DBG] Connection id "0HN62FN4NGIBE", Request id "0HN62FN4NGIBE:00000001": started reading request body.
2024-08-22 10:49:38.958 +03:00 [DBG] Connection id "0HN62FN4NGIBE", Request id "0HN62FN4NGIBE:00000001": done reading request body.
2024-08-22 10:49:38.961 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 46.
2024-08-22 10:49:38.962 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.963 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.964 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:38.966 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.969 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:49:38.970 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:49:38.971 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:38.973 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:38.974 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:49:38.977 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:49:38.978 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:49:38.979 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 31.4159ms
2024-08-22 10:49:38.981 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.983 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 400 - application/problem+json;+charset=utf-8 111.4210ms
2024-08-22 10:49:40.899 +03:00 [DBG] Connection id "0HN62FN4NGIBE" received FIN.
2024-08-22 10:49:40.904 +03:00 [DBG] Connection id "0HN62FN4NGIBE" is closed. The last processed stream ID was 1.
2024-08-22 10:49:40.908 +03:00 [DBG] Connection id "0HN62FN4NGIBE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:40.911 +03:00 [DBG] Connection id "0HN62FN4NGIBE" stopped.
2024-08-22 10:49:48.940 +03:00 [DBG] Connection id "0HN62FN4NGIBF" accepted.
2024-08-22 10:49:48.948 +03:00 [DBG] Connection id "0HN62FN4NGIBF" started.
2024-08-22 10:49:48.986 +03:00 [DBG] Connection 0HN62FN4NGIBF established using the following protocol: "Tls13"
2024-08-22 10:49:48.992 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 330
2024-08-22 10:49:48.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:49.007 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:49.010 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.013 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:49.014 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:49.017 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:49.020 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:49.023 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.024 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:49.026 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:49.029 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:49.032 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:49.035 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:49.036 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:49.038 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:49.050 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:49.054 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:49.056 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:49.057 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:49.059 +03:00 [DBG] Connection id "0HN62FN4NGIBF", Request id "0HN62FN4NGIBF:00000001": started reading request body.
2024-08-22 10:49:49.060 +03:00 [DBG] Connection id "0HN62FN4NGIBF", Request id "0HN62FN4NGIBF:00000001": done reading request body.
2024-08-22 10:49:49.063 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 45.
2024-08-22 10:49:49.064 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.067 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.068 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:49.070 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.071 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:49:49.072 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:49:49.073 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:49.075 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:49.076 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:49:49.081 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:49:49.084 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:49:49.087 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 49.3924ms
2024-08-22 10:49:49.089 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.092 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 330 - 400 - application/problem+json;+charset=utf-8 99.5378ms
2024-08-22 10:49:50.900 +03:00 [DBG] Connection id "0HN62FN4NGIBF" received FIN.
2024-08-22 10:49:50.903 +03:00 [DBG] Connection id "0HN62FN4NGIBF" is closed. The last processed stream ID was 1.
2024-08-22 10:49:50.906 +03:00 [DBG] Connection id "0HN62FN4NGIBF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:50.908 +03:00 [DBG] Connection id "0HN62FN4NGIBF" stopped.
2024-08-22 10:49:56.862 +03:00 [DBG] Connection id "0HN62FN4NGIBG" accepted.
2024-08-22 10:49:56.865 +03:00 [DBG] Connection id "0HN62FN4NGIBG" started.
2024-08-22 10:49:56.870 +03:00 [DBG] Connection 0HN62FN4NGIBG established using the following protocol: "Tls13"
2024-08-22 10:49:56.916 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:49:56.925 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:56.934 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:56.940 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:56.943 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:56.945 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:56.947 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:56.949 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:56.952 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:56.954 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:56.958 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:56.961 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:56.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:56.968 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:56.969 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:56.971 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:56.973 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:56.974 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:56.977 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:56.980 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:56.982 +03:00 [DBG] Connection id "0HN62FN4NGIBG", Request id "0HN62FN4NGIBG:00000001": started reading request body.
2024-08-22 10:49:56.984 +03:00 [DBG] Connection id "0HN62FN4NGIBG", Request id "0HN62FN4NGIBG:00000001": done reading request body.
2024-08-22 10:49:56.990 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'
2024-08-22 10:49:56.992 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:56.995 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:56.997 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:57.002 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:50:01.586 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:50:01.592 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:50:01.594 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:50:01.595 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:50:01.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:50:01.597 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 10:50:01.601 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 4629.5452ms
2024-08-22 10:50:01.603 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:50:01.604 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 200 - application/json;+charset=utf-8 4688.3945ms
2024-08-22 11:54:49.139 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 11:54:49.401 +03:00 [DBG] Hosting starting
2024-08-22 11:54:49.475 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 11:54:49.484 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 11:54:49.527 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 11:54:49.532 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 11:54:49.554 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 11:54:49.574 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 11:54:49.576 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 11:54:49.595 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 11:54:49.605 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:54:49.615 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 11:54:49.619 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:54:49.631 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 11:54:49.645 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 11:54:49.654 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 11:54:49.659 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 11:54:50.098 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 11:54:50.247 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 11:54:50.250 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 11:54:50.253 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 11:54:50.255 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 11:54:50.259 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 11:54:50.261 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 11:54:50.263 +03:00 [INF] Hosting environment: Development
2024-08-22 11:54:50.266 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 11:54:50.267 +03:00 [DBG] Hosting started
2024-08-22 11:54:50.318 +03:00 [DBG] Connection id "0HN62H0AFO5RG" received FIN.
2024-08-22 11:54:50.324 +03:00 [DBG] Connection id "0HN62H0AFO5RG" accepted.
2024-08-22 11:54:50.329 +03:00 [DBG] Connection id "0HN62H0AFO5RG" started.
2024-08-22 11:54:50.377 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:54:50.512 +03:00 [DBG] Connection id "0HN62H0AFO5RG" stopped.
2024-08-22 11:54:50.517 +03:00 [DBG] Connection id "0HN62H0AFO5RG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:54:51.544 +03:00 [DBG] Connection id "0HN62H0AFO5RH" accepted.
2024-08-22 11:54:51.559 +03:00 [DBG] Connection id "0HN62H0AFO5RH" started.
2024-08-22 11:54:51.832 +03:00 [DBG] Connection 0HN62H0AFO5RH established using the following protocol: "Tls13"
2024-08-22 11:54:52.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 11:54:52.534 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 11:54:52.622 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 11:54:52.626 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:54:53.532 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 11:54:53.598 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 11:54:53.625 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1565.6660ms
2024-08-22 11:54:53.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 11:54:53.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 42.3021ms
2024-08-22 11:54:53.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 11:54:53.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 247.7570ms
2024-08-22 11:56:08.898 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 11:56:09.103 +03:00 [DBG] Hosting starting
2024-08-22 11:56:09.179 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 11:56:09.186 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 11:56:09.229 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 11:56:09.233 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 11:56:09.249 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 11:56:09.266 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 11:56:09.269 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 11:56:09.281 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 11:56:09.289 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:56:09.297 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 11:56:09.301 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:56:09.312 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 11:56:09.323 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 11:56:09.332 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 11:56:09.335 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 11:56:09.712 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 11:56:09.821 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 11:56:09.824 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 11:56:09.826 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 11:56:09.828 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 11:56:09.829 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 11:56:09.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 11:56:09.831 +03:00 [INF] Hosting environment: Development
2024-08-22 11:56:09.832 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 11:56:09.833 +03:00 [DBG] Hosting started
2024-08-22 11:56:10.102 +03:00 [DBG] Connection id "0HN62H128K0FR" received FIN.
2024-08-22 11:56:10.105 +03:00 [DBG] Connection id "0HN62H128K0FQ" accepted.
2024-08-22 11:56:10.105 +03:00 [DBG] Connection id "0HN62H128K0FR" accepted.
2024-08-22 11:56:10.102 +03:00 [DBG] Connection id "0HN62H128K0FQ" received FIN.
2024-08-22 11:56:10.109 +03:00 [DBG] Connection id "0HN62H128K0FQ" started.
2024-08-22 11:56:10.111 +03:00 [DBG] Connection id "0HN62H128K0FR" started.
2024-08-22 11:56:10.148 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:56:10.148 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:56:10.263 +03:00 [DBG] Connection id "0HN62H128K0FQ" stopped.
2024-08-22 11:56:10.263 +03:00 [DBG] Connection id "0HN62H128K0FR" stopped.
2024-08-22 11:56:10.268 +03:00 [DBG] Connection id "0HN62H128K0FQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:10.268 +03:00 [DBG] Connection id "0HN62H128K0FR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:12.447 +03:00 [DBG] Connection id "0HN62H128K0FS" accepted.
2024-08-22 11:56:12.450 +03:00 [DBG] Connection id "0HN62H128K0FS" started.
2024-08-22 11:56:12.569 +03:00 [DBG] Connection 0HN62H128K0FS established using the following protocol: "Tls13"
2024-08-22 11:56:12.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 11:56:13.139 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 11:56:13.220 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 11:56:13.224 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:56:13.707 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 11:56:13.782 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 11:56:13.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 11:56:13.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 11:56:13.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 153.2306ms
2024-08-22 11:56:13.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1285.6485ms
2024-08-22 11:56:14.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 192.2592ms
2024-08-22 11:56:15.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 11:56:15.849 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 11:56:15.853 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:56:16.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 508.8185ms
2024-08-22 11:56:17.285 +03:00 [DBG] Connection id "0HN62H128K0FS" received FIN.
2024-08-22 11:56:17.297 +03:00 [DBG] Connection id "0HN62H128K0FS" is closed. The last processed stream ID was 7.
2024-08-22 11:56:17.302 +03:00 [DBG] Connection id "0HN62H128K0FS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:17.309 +03:00 [DBG] Connection id "0HN62H128K0FS" stopped.
2024-08-22 13:17:07.633 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:17:07.933 +03:00 [DBG] Hosting starting
2024-08-22 13:17:08.029 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:17:08.040 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:17:08.090 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:17:08.096 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:17:08.125 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:17:08.149 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:17:08.153 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:17:08.182 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:17:08.194 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:17:08.207 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:17:08.214 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:17:08.235 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:17:08.252 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:17:08.269 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:17:08.276 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:17:08.901 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:17:09.105 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 13:17:09.107 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 13:17:09.111 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 13:17:09.114 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 13:17:09.116 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 13:17:09.118 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 13:17:09.120 +03:00 [INF] Hosting environment: Development
2024-08-22 13:17:09.122 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 13:17:09.124 +03:00 [DBG] Hosting started
2024-08-22 13:17:09.209 +03:00 [DBG] Connection id "0HN62IEACM6SO" received FIN.
2024-08-22 13:17:09.209 +03:00 [DBG] Connection id "0HN62IEACM6SP" received FIN.
2024-08-22 13:17:09.239 +03:00 [DBG] Connection id "0HN62IEACM6SP" accepted.
2024-08-22 13:17:09.239 +03:00 [DBG] Connection id "0HN62IEACM6SO" accepted.
2024-08-22 13:17:09.247 +03:00 [DBG] Connection id "0HN62IEACM6SP" started.
2024-08-22 13:17:09.250 +03:00 [DBG] Connection id "0HN62IEACM6SO" started.
2024-08-22 13:17:09.311 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:17:09.311 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:17:09.935 +03:00 [DBG] Connection id "0HN62IEACM6SO" stopped.
2024-08-22 13:17:09.935 +03:00 [DBG] Connection id "0HN62IEACM6SP" stopped.
2024-08-22 13:17:09.955 +03:00 [DBG] Connection id "0HN62IEACM6SP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:09.956 +03:00 [DBG] Connection id "0HN62IEACM6SO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:10.357 +03:00 [DBG] Connection id "0HN62IEACM6SQ" accepted.
2024-08-22 13:17:10.434 +03:00 [DBG] Connection id "0HN62IEACM6SQ" started.
2024-08-22 13:17:10.686 +03:00 [DBG] Connection 0HN62IEACM6SQ established using the following protocol: "Tls13"
2024-08-22 13:17:10.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 13:17:11.597 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 13:17:11.864 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 13:17:11.970 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:17:13.379 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 13:17:13.596 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 13:17:13.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 13:17:13.656 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 2759.3081ms
2024-08-22 13:17:13.682 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 13:17:13.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 48.5406ms
2024-08-22 13:17:14.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 389.4699ms
2024-08-22 13:17:17.928 +03:00 [DBG] Connection id "0HN62IEACM6SQ" received FIN.
2024-08-22 13:17:18.064 +03:00 [DBG] Connection id "0HN62IEACM6SQ" is closed. The last processed stream ID was 5.
2024-08-22 13:17:18.089 +03:00 [DBG] Connection id "0HN62IEACM6SQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:18.111 +03:00 [DBG] Connection id "0HN62IEACM6SQ" stopped.
2024-08-22 13:17:23.717 +03:00 [DBG] Connection id "0HN62IEACM6SR" accepted.
2024-08-22 13:17:23.723 +03:00 [DBG] Connection id "0HN62IEACM6SR" started.
2024-08-22 13:17:23.737 +03:00 [DBG] Connection 0HN62IEACM6SR established using the following protocol: "Tls13"
2024-08-22 13:17:23.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 13:17:23.750 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 13:17:23.757 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:17:24.639 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 895.2898ms
2024-08-22 13:17:33.030 +03:00 [DBG] Connection id "0HN62IEACM6SR" received FIN.
2024-08-22 13:17:33.041 +03:00 [DBG] Connection id "0HN62IEACM6SR" is closed. The last processed stream ID was 1.
2024-08-22 13:17:33.049 +03:00 [DBG] Connection id "0HN62IEACM6SR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:33.057 +03:00 [DBG] Connection id "0HN62IEACM6SR" stopped.
2024-08-22 13:19:55.139 +03:00 [DBG] Connection id "0HN62IEACM6SS" accepted.
2024-08-22 13:19:55.223 +03:00 [DBG] Connection id "0HN62IEACM6SS" started.
2024-08-22 13:19:55.284 +03:00 [DBG] Connection 0HN62IEACM6SS established using the following protocol: "Tls13"
2024-08-22 13:19:55.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Bet&description=Bet&pageSize=10&pageNumber=1 - -
2024-08-22 13:19:55.327 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel'
2024-08-22 13:19:55.350 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)' with route pattern 'api/Hotel' is valid for the request path '/api/Hotel'
2024-08-22 13:19:55.356 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:19:55.366 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:19:55.600 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:19:55.617 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:19:55.776 +03:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:19:55.783 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:19:55.788 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:19:55.794 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 13:19:55.802 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:19:55.808 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:19:55.815 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:19:56.486 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 13:19:57.405 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:19:57.439 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:19:57.449 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' using the name 'hotelName' in request data ...
2024-08-22 13:19:57.457 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.463 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.468 +03:00 [DBG] Attempting to validate the bound parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:19:57.560 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.573 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' ...
2024-08-22 13:19:57.580 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' using the name 'description' in request data ...
2024-08-22 13:19:57.587 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.593 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.598 +03:00 [DBG] Attempting to validate the bound parameter 'description' of type 'System.String' ...
2024-08-22 13:19:57.605 +03:00 [DBG] Done attempting to validate the bound parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.610 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:19:57.614 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 13:19:57.622 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.628 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.632 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:19:57.644 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.648 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:19:57.654 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 13:19:57.663 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:19:57.667 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:19:57.678 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:19:57.682 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:00.194 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 13:20:00.198 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 13:20:00.203 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 13:20:00.209 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 13:20:00.214 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 13:20:00.562 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.566 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.570 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.693 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:00.700 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:00.704 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:01.328 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:20:01.649 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 13:20:02.573 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 13:20:02.579 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 13:20:03.072 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Hotels AS h
        WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
        ORDER BY (SELECT 1)
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 13:20:03.314 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:20:03.448 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (136ms).
2024-08-22 13:20:03.563 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:05.422 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:05.527 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:05.870 +03:00 [INF] Executed DbCommand (395ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:05.977 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:20:06.003 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:06.046 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:06.681 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API) in 10849.9051ms
2024-08-22 13:20:06.695 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:07.845 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:20:07.863 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Bet&description=Bet&pageSize=10&pageNumber=1 - - - 404 - application/json 12565.5392ms
2024-08-22 13:20:12.980 +03:00 [DBG] Connection id "0HN62IEACM6SS" received FIN.
2024-08-22 13:20:12.985 +03:00 [DBG] Connection id "0HN62IEACM6SS" is closed. The last processed stream ID was 1.
2024-08-22 13:20:12.991 +03:00 [DBG] Connection id "0HN62IEACM6SS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:20:12.998 +03:00 [DBG] Connection id "0HN62IEACM6SS" stopped.
2024-08-22 13:20:32.855 +03:00 [DBG] Connection id "0HN62IEACM6ST" accepted.
2024-08-22 13:20:32.859 +03:00 [DBG] Connection id "0HN62IEACM6ST" started.
2024-08-22 13:20:32.921 +03:00 [DBG] Connection 0HN62IEACM6ST established using the following protocol: "Tls13"
2024-08-22 13:20:32.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Mandarin%20Oriental%20Tokyo&description=ho&pageSize=10&pageNumber=1 - -
2024-08-22 13:20:32.986 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel'
2024-08-22 13:20:32.995 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)' with route pattern 'api/Hotel' is valid for the request path '/api/Hotel'
2024-08-22 13:20:33.001 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.003 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:20:33.022 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:20:33.025 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.047 +03:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:20:33.051 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:20:33.054 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:20:33.057 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 13:20:33.063 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:20:33.066 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:20:33.069 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:20:33.074 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:20:33.080 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:20:33.083 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' using the name 'hotelName' in request data ...
2024-08-22 13:20:33.086 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.089 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.096 +03:00 [DBG] Attempting to validate the bound parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:20:33.100 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.102 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' ...
2024-08-22 13:20:33.105 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' using the name 'description' in request data ...
2024-08-22 13:20:33.108 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.112 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.115 +03:00 [DBG] Attempting to validate the bound parameter 'description' of type 'System.String' ...
2024-08-22 13:20:33.118 +03:00 [DBG] Done attempting to validate the bound parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.121 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:20:33.124 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 13:20:33.128 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.131 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.134 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:20:33.137 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.140 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:20:33.144 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 13:20:33.149 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.153 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.157 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:20:33.161 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.281 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:20:33.299 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:20:33.302 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 13:20:33.307 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.315 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.320 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:33.346 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:33.483 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:20:33.603 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:20:33.606 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.612 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.698 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:20:33.718 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:20:33.721 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:20:33.726 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:20:33.733 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:20:33.738 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 13:20:33.875 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API) in 806.1777ms
2024-08-22 13:20:33.884 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.888 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:20:33.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Mandarin%20Oriental%20Tokyo&description=ho&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 928.6727ms
2024-08-22 13:20:42.993 +03:00 [DBG] Connection id "0HN62IEACM6ST" received FIN.
2024-08-22 13:20:42.998 +03:00 [DBG] Connection id "0HN62IEACM6ST" is closed. The last processed stream ID was 1.
2024-08-22 13:20:43.003 +03:00 [DBG] Connection id "0HN62IEACM6ST" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:20:43.010 +03:00 [DBG] Connection id "0HN62IEACM6ST" stopped.
2024-08-22 13:26:22.725 +03:00 [DBG] Connection id "0HN62IEACM6SU" accepted.
2024-08-22 13:26:22.735 +03:00 [DBG] Connection id "0HN62IEACM6SU" started.
2024-08-22 13:26:22.784 +03:00 [DBG] Connection 0HN62IEACM6SU established using the following protocol: "Tls13"
2024-08-22 13:26:22.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/amenities - -
2024-08-22 13:26:22.814 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/amenities'
2024-08-22 13:26:22.819 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/19/amenities'
2024-08-22 13:26:22.827 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:22.831 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:26:22.845 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:26:22.849 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:22.861 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:26:22.868 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:26:22.876 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:26:22.881 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 13:26:22.889 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:26:22.895 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:26:22.901 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:22.947 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:22.954 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-22 13:26:22.960 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-22 13:26:22.967 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:22.972 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:22.978 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-22 13:26:22.984 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:23.036 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:26:23.075 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.Amenities)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-22 13:26:23.148 +03:00 [DBG] Including navigation: 'Hotel.Amenities'.
2024-08-22 13:26:23.377 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 13:26:23.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:23.427 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:23.433 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.439 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.445 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-22 13:26:23.477 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-22 13:26:23.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.610 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:23.615 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:23.621 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-22 13:26:23.679 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-22 13:26:23.746 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.790 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.796 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.801 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.812 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.817 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.823 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.828 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.834 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.857 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:23.861 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:23.866 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.873 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.890 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:26:23.898 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:26:23.900 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:26:23.904 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:26:23.908 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:26:23.912 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 13:26:23.927 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 1026.5029ms
2024-08-22 13:26:23.933 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:23.937 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:26:23.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/amenities - - - 200 - application/json;+charset=utf-8 1145.6594ms
2024-08-22 13:26:28.094 +03:00 [DBG] Connection id "0HN62IEACM6SU" received FIN.
2024-08-22 13:26:28.098 +03:00 [DBG] Connection id "0HN62IEACM6SU" is closed. The last processed stream ID was 1.
2024-08-22 13:26:28.105 +03:00 [DBG] Connection id "0HN62IEACM6SU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:26:28.113 +03:00 [DBG] Connection id "0HN62IEACM6SU" stopped.
2024-08-22 13:26:36.378 +03:00 [DBG] Connection id "0HN62IEACM6SV" accepted.
2024-08-22 13:26:36.383 +03:00 [DBG] Connection id "0HN62IEACM6SV" started.
2024-08-22 13:26:36.397 +03:00 [DBG] Connection 0HN62IEACM6SV established using the following protocol: "Tls13"
2024-08-22 13:26:36.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/rating - -
2024-08-22 13:26:36.443 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/rating'
2024-08-22 13:26:36.462 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}/rating' is valid for the request path '/api/Hotel/19/rating'
2024-08-22 13:26:36.482 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:36.486 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:26:36.487 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:26:36.489 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:36.503 +03:00 [INF] Route matched with {action = "GetHotelReviewRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelReviewRating(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:26:36.507 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:26:36.513 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:26:36.517 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 13:26:36.522 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:26:36.525 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:26:36.529 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:36.534 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:36.538 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 13:26:36.541 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 13:26:36.544 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.548 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.554 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 13:26:36.556 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.576 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:26:36.586 +03:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Include(r => r.User)
    .Include(r => r.Hotel)
    .AsSplitQuery()
    .Where(r => r.HotelId == __hotelId_0)'
2024-08-22 13:26:36.603 +03:00 [DBG] Including navigation: 'Review.User'.
2024-08-22 13:26:36.606 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 13:26:36.610 +03:00 [DBG] Including navigation: 'Review.Hotel'.
2024-08-22 13:26:36.742 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Review>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Review.ReviewID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Content (string) Required, 1], [Property: Review.CreatedAtUtc (DateTime) Required, 2], [Property: Review.HotelId (int) Required FK Index, 3], [Property: Review.ModifiedAtUtc (DateTime?), 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (string) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 7], [Property: LocalUser.AccessFailedCount (int) Required, 8], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 9], [Property: LocalUser.Email (string) MaxLength(256), 10], [Property: LocalUser.EmailConfirmed (bool) Required, 11], [Property: LocalUser.FirstName (string) Required, 12], [Property: LocalUser.LastName (string) Required, 13], [Property: LocalUser.LockoutEnabled (bool) Required, 14], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 15], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 16], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 17], [Property: LocalUser.PasswordHash (string), 18], [Property: LocalUser.PhoneNumber (string), 19], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 20], [Property: LocalUser.SecurityStamp (string), 21], [Property: LocalUser.TwoFactorEnabled (bool) Required, 22], [Property: LocalUser.UserName (string) MaxLength(256), 23] }
            2 -> 0
            3 -> 7
            4 -> 24
            5 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 24], [Property: Hotel.CityID (int) Required FK Index, 25], [Property: Hotel.CreatedAtUtc (DateTime) Required, 26], [Property: Hotel.Description (string) MaxLength(500), 27], [Property: Hotel.Name (string) Required MaxLength(100), 28], [Property: Hotel.OwnerID (int) Required FK Index, 29], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 30], [Property: Hotel.StarRating (int) Required, 31] }
        SELECT r.ReviewID, r.Content, r.CreatedAtUtc, r.HotelId, r.ModifiedAtUtc, r.Rating, r.UserId, a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Reviews AS r
        INNER JOIN AspNetUsers AS a ON r.UserId == a.Id
        INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
        WHERE r.HotelId == @__hotelId_0
        ORDER BY r.ReviewID ASC, a.Id ASC, h.HotelId ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Review>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 13:26:36.754 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:36.756 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 13:26:36.759 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:36.763 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:36.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:36.848 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:36.872 +03:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:36.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.096 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.112 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:37.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:37.122 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:37.198 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:37.255 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.305 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.310 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:37.318 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:37.319 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:37.323 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:37.334 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:26:37.340 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:26:37.342 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:26:37.345 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:26:37.348 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:26:37.353 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Review.ReviewRatingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 13:26:37.368 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API) in 839.3964ms
2024-08-22 13:26:37.373 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:37.376 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:26:37.386 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/rating - - - 200 - application/json;+charset=utf-8 956.5405ms
2024-08-22 13:26:38.099 +03:00 [DBG] Connection id "0HN62IEACM6SV" received FIN.
2024-08-22 13:26:38.104 +03:00 [DBG] Connection id "0HN62IEACM6SV" is closed. The last processed stream ID was 1.
2024-08-22 13:26:38.109 +03:00 [DBG] Connection id "0HN62IEACM6SV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:26:38.117 +03:00 [DBG] Connection id "0HN62IEACM6SV" stopped.
2024-08-22 13:50:58.776 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:50:59.299 +03:00 [DBG] Hosting starting
2024-08-22 13:50:59.396 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:50:59.408 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:50:59.459 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:50:59.464 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:50:59.497 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:50:59.534 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:50:59.538 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:50:59.570 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:50:59.586 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:50:59.602 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:50:59.608 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:50:59.632 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:50:59.649 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:50:59.664 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:50:59.670 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:51:00.949 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:51:41.039 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:51:41.407 +03:00 [DBG] Hosting starting
2024-08-22 13:51:41.496 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:51:41.507 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:51:41.524 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:51:41.528 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:51:41.543 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:51:41.559 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:51:41.562 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:51:41.591 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:51:41.602 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:51:41.618 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:51:41.622 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:51:41.644 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:51:41.661 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:51:41.682 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:51:41.687 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:51:42.114 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:51:42.269 +03:00 [DBG] Connection id "0HN62J1K6TSTD" received FIN.
2024-08-22 13:51:42.269 +03:00 [DBG] Connection id "0HN62J1K6TSTE" received FIN.
2024-08-22 13:51:42.305 +03:00 [DBG] Connection id "0HN62J1K6TSTE" accepted.
2024-08-22 13:51:42.305 +03:00 [DBG] Connection id "0HN62J1K6TSTD" accepted.
2024-08-22 13:51:42.306 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 13:51:42.314 +03:00 [DBG] Connection id "0HN62J1K6TSTD" started.
2024-08-22 13:51:42.314 +03:00 [DBG] Connection id "0HN62J1K6TSTE" started.
2024-08-22 13:51:42.316 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 13:51:42.326 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 13:51:42.329 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 13:51:42.334 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 13:51:42.338 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 13:51:42.340 +03:00 [INF] Hosting environment: Development
2024-08-22 13:51:42.348 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 13:51:42.352 +03:00 [DBG] Hosting started
2024-08-22 13:51:42.416 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:51:42.416 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:51:42.588 +03:00 [DBG] Connection id "0HN62J1K6TSTE" stopped.
2024-08-22 13:51:42.588 +03:00 [DBG] Connection id "0HN62J1K6TSTD" stopped.
2024-08-22 13:51:42.604 +03:00 [DBG] Connection id "0HN62J1K6TSTD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:42.604 +03:00 [DBG] Connection id "0HN62J1K6TSTE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:44.143 +03:00 [DBG] Connection id "0HN62J1K6TSTF" accepted.
2024-08-22 13:51:44.151 +03:00 [DBG] Connection id "0HN62J1K6TSTF" started.
2024-08-22 13:51:44.312 +03:00 [DBG] Connection 0HN62J1K6TSTF established using the following protocol: "Tls13"
2024-08-22 13:51:44.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 13:51:45.293 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 13:51:45.458 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 13:51:45.466 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:51:46.265 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 13:51:46.341 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 13:51:46.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 13:51:46.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1859.9698ms
2024-08-22 13:51:46.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 13:51:46.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 38.2554ms
2024-08-22 13:51:46.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 393.9332ms
2024-08-22 13:51:48.535 +03:00 [DBG] Connection id "0HN62J1K6TSTF" received FIN.
2024-08-22 13:51:48.585 +03:00 [DBG] Connection id "0HN62J1K6TSTF" is closed. The last processed stream ID was 5.
2024-08-22 13:51:48.614 +03:00 [DBG] Connection id "0HN62J1K6TSTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:48.626 +03:00 [DBG] Connection id "0HN62J1K6TSTF" stopped.
2024-08-22 13:51:51.800 +03:00 [DBG] Connection id "0HN62J1K6TSTG" accepted.
2024-08-22 13:51:51.804 +03:00 [DBG] Connection id "0HN62J1K6TSTG" started.
2024-08-22 13:51:51.834 +03:00 [DBG] Connection 0HN62J1K6TSTG established using the following protocol: "Tls13"
2024-08-22 13:51:51.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 13:51:51.851 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 13:51:51.855 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:51:52.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 735.3387ms
2024-08-22 13:51:53.541 +03:00 [DBG] Connection id "0HN62J1K6TSTG" received FIN.
2024-08-22 13:51:53.545 +03:00 [DBG] Connection id "0HN62J1K6TSTG" is closed. The last processed stream ID was 1.
2024-08-22 13:51:53.550 +03:00 [DBG] Connection id "0HN62J1K6TSTG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:53.557 +03:00 [DBG] Connection id "0HN62J1K6TSTG" stopped.
2024-08-22 14:27:50.835 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 14:27:51.101 +03:00 [DBG] Hosting starting
2024-08-22 14:27:51.181 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 14:27:51.190 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 14:27:51.211 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 14:27:51.217 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 14:27:51.245 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 14:27:51.274 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 14:27:51.277 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 14:27:51.300 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 14:27:51.311 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 14:27:51.322 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 14:27:51.327 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 14:27:51.346 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 14:27:51.360 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 14:27:51.375 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 14:27:51.378 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 14:27:51.752 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 14:27:51.860 +03:00 [DBG] Connection id "0HN62JLQPMT7S" accepted.
2024-08-22 14:27:51.865 +03:00 [DBG] Connection id "0HN62JLQPMT7S" received FIN.
2024-08-22 14:27:51.865 +03:00 [DBG] Connection id "0HN62JLQPMT7S" started.
2024-08-22 14:27:51.866 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 14:27:51.877 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 14:27:51.882 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 14:27:51.884 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 14:27:51.887 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 14:27:51.891 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 14:27:51.896 +03:00 [INF] Hosting environment: Development
2024-08-22 14:27:51.898 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 14:27:51.907 +03:00 [DBG] Hosting started
2024-08-22 14:27:51.943 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 14:27:52.230 +03:00 [DBG] Connection id "0HN62JLQPMT7S" stopped.
2024-08-22 14:27:52.241 +03:00 [DBG] Connection id "0HN62JLQPMT7S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:27:52.544 +03:00 [DBG] Connection id "0HN62JLQPMT7T" accepted.
2024-08-22 14:27:52.845 +03:00 [DBG] Connection id "0HN62JLQPMT7T" started.
2024-08-22 14:27:53.019 +03:00 [DBG] Connection 0HN62JLQPMT7T established using the following protocol: "Tls13"
2024-08-22 14:27:53.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 14:27:53.879 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 14:27:54.036 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 14:27:54.041 +03:00 [DBG] Request did not match any endpoints
2024-08-22 14:27:54.705 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 14:27:54.768 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 14:27:54.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1587.0442ms
2024-08-22 14:27:54.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 14:27:55.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 1085.2706ms
2024-08-22 14:27:55.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 14:27:56.053 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 134.9727ms
2024-08-22 14:27:59.197 +03:00 [DBG] Connection id "0HN62JLQPMT7T" received FIN.
2024-08-22 14:27:59.218 +03:00 [DBG] Connection id "0HN62JLQPMT7T" is closed. The last processed stream ID was 5.
2024-08-22 14:27:59.224 +03:00 [DBG] Connection id "0HN62JLQPMT7T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:27:59.233 +03:00 [DBG] Connection id "0HN62JLQPMT7T" stopped.
2024-08-22 14:27:59.303 +03:00 [DBG] Connection id "0HN62JLQPMT7U" accepted.
2024-08-22 14:27:59.305 +03:00 [DBG] Connection id "0HN62JLQPMT7U" started.
2024-08-22 14:27:59.314 +03:00 [DBG] Connection 0HN62JLQPMT7U established using the following protocol: "Tls13"
2024-08-22 14:27:59.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 14:27:59.322 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 14:27:59.325 +03:00 [DBG] Request did not match any endpoints
2024-08-22 14:27:59.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 662.2703ms
2024-08-22 14:28:09.198 +03:00 [DBG] Connection id "0HN62JLQPMT7U" received FIN.
2024-08-22 14:28:09.202 +03:00 [DBG] Connection id "0HN62JLQPMT7U" is closed. The last processed stream ID was 1.
2024-08-22 14:28:09.207 +03:00 [DBG] Connection id "0HN62JLQPMT7U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:09.210 +03:00 [DBG] Connection id "0HN62JLQPMT7U" stopped.
2024-08-22 14:28:12.077 +03:00 [DBG] Connection id "0HN62JLQPMT7V" accepted.
2024-08-22 14:28:12.079 +03:00 [DBG] Connection id "0HN62JLQPMT7V" started.
2024-08-22 14:28:12.088 +03:00 [DBG] Connection 0HN62JLQPMT7V established using the following protocol: "Tls13"
2024-08-22 14:28:12.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23 - -
2024-08-22 14:28:12.123 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23'
2024-08-22 14:28:12.152 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{id}' is valid for the request path '/api/RoomClass/23'
2024-08-22 14:28:12.159 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:12.165 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:12.311 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:12.322 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:12.400 +03:00 [INF] Route matched with {action = "GetRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto]] GetRoomClass(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:12.409 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:12.413 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:12.417 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:12.422 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:12.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:12.432 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:12.879 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 14:28:13.468 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:13.488 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 14:28:13.499 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 14:28:13.507 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:13.511 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:13.515 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 14:28:13.585 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:15.162 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 14:28:15.169 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 14:28:15.173 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 14:28:15.177 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 14:28:15.181 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 14:28:15.432 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.437 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.441 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.554 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:15.557 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:15.561 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:16.059 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:16.321 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-22 14:28:16.657 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-22 14:28:17.120 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 14:28:17.251 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:17.348 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (99ms).
2024-08-22 14:28:17.383 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.046 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.083 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-22 14:28:18.326 +03:00 [INF] Executed DbCommand (259ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-22 14:28:18.443 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:18.519 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:18.602 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:18.621 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.649 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.692 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:18.707 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-22 14:28:18.711 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-22 14:28:18.714 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:18.716 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:18.719 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:18.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto'.
2024-08-22 14:28:18.764 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API) in 6323.349ms
2024-08-22 14:28:18.774 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:18.804 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:18.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23 - - - 200 - application/json;+charset=utf-8 6725.9967ms
2024-08-22 14:28:19.199 +03:00 [DBG] Connection id "0HN62JLQPMT7V" received FIN.
2024-08-22 14:28:19.203 +03:00 [DBG] Connection id "0HN62JLQPMT7V" is closed. The last processed stream ID was 1.
2024-08-22 14:28:19.208 +03:00 [DBG] Connection id "0HN62JLQPMT7V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:19.211 +03:00 [DBG] Connection id "0HN62JLQPMT7V" stopped.
2024-08-22 14:28:32.304 +03:00 [DBG] Connection id "0HN62JLQPMT80" accepted.
2024-08-22 14:28:32.315 +03:00 [DBG] Connection id "0HN62JLQPMT80" started.
2024-08-22 14:28:32.340 +03:00 [DBG] Connection 0HN62JLQPMT80 established using the following protocol: "Tls13"
2024-08-22 14:28:32.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23/images - -
2024-08-22 14:28:32.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23/images'
2024-08-22 14:28:32.359 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/images' is valid for the request path '/api/RoomClass/23/images'
2024-08-22 14:28:32.363 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.367 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:32.370 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:32.373 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.386 +03:00 [INF] Route matched with {action = "GetImagesForRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetImagesForRoomClass(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:32.391 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:32.395 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:32.400 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:32.405 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:32.410 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:32.416 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:32.421 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:32.439 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:32.445 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-22 14:28:32.448 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.451 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.456 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:32.459 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.474 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:32.491 +03:00 [DBG] Compiling query expression: 
'DbSet<Image>()
    .Where(img => img.Type == __type_0)'
2024-08-22 14:28:32.502 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Image>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Image.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Image.CreatedAt (DateTime) Required, 1], [Property: Image.EntityId (int) Required, 2], [Property: Image.PublicId (string) Required, 3], [Property: Image.Type (string) Required, 4], [Property: Image.Url (string) Required, 5] }
        SELECT i.Id, i.CreatedAt, i.EntityId, i.PublicId, i.Type, i.Url
        FROM Images AS i
        WHERE i.Type == @__type_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Image>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 14:28:32.507 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:32.513 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-22 14:28:32.520 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.529 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.534 +03:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-22 14:28:32.571 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-22 14:28:32.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.606 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.614 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.618 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.622 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.625 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.629 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.633 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.637 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.640 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.648 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:32.651 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.655 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.664 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:32.670 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 14:28:32.672 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:32.673 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:32.675 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:32.679 +03:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType6`3[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 14:28:32.699 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API) in 282.9164ms
2024-08-22 14:28:32.703 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.706 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:32.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23/images - - - 404 - application/json;+charset=utf-8 362.6958ms
2024-08-22 14:28:34.201 +03:00 [DBG] Connection id "0HN62JLQPMT80" received FIN.
2024-08-22 14:28:34.205 +03:00 [DBG] Connection id "0HN62JLQPMT80" is closed. The last processed stream ID was 1.
2024-08-22 14:28:34.209 +03:00 [DBG] Connection id "0HN62JLQPMT80" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:34.216 +03:00 [DBG] Connection id "0HN62JLQPMT80" stopped.
2024-08-22 14:28:41.092 +03:00 [DBG] Connection id "0HN62JLQPMT81" accepted.
2024-08-22 14:28:41.094 +03:00 [DBG] Connection id "0HN62JLQPMT81" started.
2024-08-22 14:28:41.104 +03:00 [DBG] Connection 0HN62JLQPMT81 established using the following protocol: "Tls13"
2024-08-22 14:28:41.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23/amenities - -
2024-08-22 14:28:41.165 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23/amenities'
2024-08-22 14:28:41.168 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/amenities' is valid for the request path '/api/RoomClass/23/amenities'
2024-08-22 14:28:41.178 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.183 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:41.212 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:41.215 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.228 +03:00 [INF] Route matched with {action = "GetAmenitiesByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:41.234 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:41.236 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:41.242 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:41.247 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:41.250 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:41.254 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:41.295 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:41.297 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:41.301 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-22 14:28:41.304 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.306 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.312 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:41.315 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.427 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:41.434 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Amenities)
    .FirstOrDefault(rc => rc.RoomClassID == __roomClassId_0)'
2024-08-22 14:28:41.448 +03:00 [DBG] Including navigation: 'RoomClass.Amenities'.
2024-08-22 14:28:41.665 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RoomClassAmenity (Dictionary<string, object>).AmenityID (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: RoomClassAmenity (Dictionary<string, object>).RoomClassID (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
                3 -> Dictionary<IProperty, int> { [Property: Amenity.AmenityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Amenity.Description (string) Required, 9], [Property: Amenity.HotelId (int) Required FK Index, 10], [Property: Amenity.Name (string) Required, 11] }
                4 -> 6
                5 -> 7
                6 -> 8
            SELECT t.RoomClassID, t.CreatedAtUtc, t.Description, t.HotelId, t.Name, t.RoomType, t0.AmenityID, t0.RoomClassID, t0.AmenityID0, t0.Description, t0.HotelId, t0.Name
            FROM 
            (
                SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
                FROM RoomClasses AS r
                WHERE r.RoomClassID == @__roomClassId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT r0.AmenityID, r0.RoomClassID, a.AmenityID AS AmenityID0, a.Description, a.HotelId, a.Name
                FROM RoomClassAmenity AS r0
                INNER JOIN Amenities AS a ON r0.AmenityID == a.AmenityID
            ) AS t0 ON t.RoomClassID == t0.RoomClassID
            ORDER BY t.RoomClassID ASC, t0.AmenityID ASC, t0.RoomClassID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 14:28:41.676 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:41.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 14:28:41.683 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.685 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.688 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-22 14:28:41.729 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-22 14:28:41.736 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.800 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.837 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.867 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.869 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.873 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.876 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.879 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.881 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.883 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.886 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.893 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.897 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.899 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.901 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.903 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:41.905 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.909 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.939 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:41.947 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 14:28:41.948 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:41.950 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:41.951 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:41.953 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 14:28:41.965 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API) in 711.3525ms
2024-08-22 14:28:41.970 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.974 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:41.981 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23/amenities - - - 200 - application/json;+charset=utf-8 826.0306ms
2024-08-22 14:28:44.205 +03:00 [DBG] Connection id "0HN62JLQPMT81" received FIN.
2024-08-22 14:28:44.208 +03:00 [DBG] Connection id "0HN62JLQPMT81" is closed. The last processed stream ID was 1.
2024-08-22 14:28:44.212 +03:00 [DBG] Connection id "0HN62JLQPMT81" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:44.217 +03:00 [DBG] Connection id "0HN62JLQPMT81" stopped.
2024-08-22 19:23:16.727 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 19:23:17.149 +03:00 [DBG] Hosting starting
2024-08-22 19:23:17.269 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 19:23:17.283 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 19:23:17.344 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 19:23:17.350 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 19:23:17.381 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 19:23:17.409 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 19:23:17.413 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 19:23:17.445 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 19:23:17.461 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:23:17.475 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 19:23:17.480 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:23:17.499 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 19:23:17.515 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 19:23:17.531 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 19:23:17.537 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 19:23:18.202 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 19:23:18.508 +03:00 [DBG] Connection id "0HN62OQTO4BDO" accepted.
2024-08-22 19:23:18.509 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 19:23:18.524 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 19:23:18.527 +03:00 [DBG] Connection id "0HN62OQTO4BDO" started.
2024-08-22 19:23:18.535 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 19:23:18.540 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 19:23:18.553 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 19:23:18.557 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 19:23:18.560 +03:00 [INF] Hosting environment: Development
2024-08-22 19:23:18.571 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 19:23:18.580 +03:00 [DBG] Hosting started
2024-08-22 19:23:18.776 +03:00 [DBG] Connection id "0HN62OQTO4BDP" accepted.
2024-08-22 19:23:18.783 +03:00 [DBG] Connection id "0HN62OQTO4BDP" started.
2024-08-22 19:23:20.109 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" accepted.
2024-08-22 19:23:20.258 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" started.
2024-08-22 19:23:20.280 +03:00 [DBG] Connection id "0HN62OQTO4BDR" accepted.
2024-08-22 19:23:20.295 +03:00 [DBG] Connection id "0HN62OQTO4BDR" started.
2024-08-22 19:23:20.483 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" received FIN.
2024-08-22 19:23:20.595 +03:00 [DBG] Connection 0HN62OQTO4BDQ established using the following protocol: "Tls13"
2024-08-22 19:23:20.595 +03:00 [DBG] Connection 0HN62OQTO4BDR established using the following protocol: "Tls13"
2024-08-22 19:23:20.674 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" is closed. The last processed stream ID was 0.
2024-08-22 19:23:20.690 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:20.759 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" stopped.
2024-08-22 19:23:20.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-22 19:23:22.837 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 19:23:22.984 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-22 19:23:22.986 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:23.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 2290.4712ms
2024-08-22 19:23:23.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 19:23:23.216 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 19:23:23.219 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:23.865 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 19:23:23.968 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 19:23:23.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 784.0291ms
2024-08-22 19:23:24.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-22 19:23:24.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-22 19:23:24.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-22 19:23:24.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 19:23:24.020 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-22 19:23:24.046 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.023 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-22 19:23:24.026 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-22 19:23:24.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 19:23:24.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 43.8561ms
2024-08-22 19:23:24.066 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.072 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.285 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-22 19:23:24.334 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-22 19:23:24.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 336.4397ms
2024-08-22 19:23:24.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 364.9358ms
2024-08-22 19:23:24.411 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-22 19:23:24.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 401.7396ms
2024-08-22 19:23:24.554 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 493.9694ms
2024-08-22 19:23:24.616 +03:00 [DBG] Connection id "0HN62OQTO4BDR" received FIN.
2024-08-22 19:23:24.623 +03:00 [DBG] Connection id "0HN62OQTO4BDR" is closed. The last processed stream ID was 13.
2024-08-22 19:23:24.637 +03:00 [DBG] Connection id "0HN62OQTO4BDR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:24.651 +03:00 [DBG] Connection id "0HN62OQTO4BDR" stopped.
2024-08-22 19:23:28.081 +03:00 [DBG] Connection id "0HN62OQTO4BDS" accepted.
2024-08-22 19:23:28.085 +03:00 [DBG] Connection id "0HN62OQTO4BDS" started.
2024-08-22 19:23:28.106 +03:00 [DBG] Connection 0HN62OQTO4BDS established using the following protocol: "Tls13"
2024-08-22 19:23:28.120 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 19:23:28.124 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 19:23:28.131 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:28.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-22 19:23:28.204 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-22 19:23:28.208 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:28.211 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-22 19:23:28.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 17.3452ms
2024-08-22 19:23:28.654 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 19:23:28.658 +03:00 [DBG] Connection id "0HN62OQTO4BDO" stopped.
2024-08-22 19:23:28.662 +03:00 [DBG] Connection id "0HN62OQTO4BDO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:28.795 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 19:23:28.797 +03:00 [DBG] Connection id "0HN62OQTO4BDP" stopped.
2024-08-22 19:23:28.804 +03:00 [DBG] Connection id "0HN62OQTO4BDP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:29.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 1140.6431ms
2024-08-22 19:23:29.619 +03:00 [DBG] Connection id "0HN62OQTO4BDS" received FIN.
2024-08-22 19:23:29.628 +03:00 [DBG] Connection id "0HN62OQTO4BDS" is closed. The last processed stream ID was 3.
2024-08-22 19:23:29.631 +03:00 [DBG] Connection id "0HN62OQTO4BDS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:29.636 +03:00 [DBG] Connection id "0HN62OQTO4BDS" stopped.
2024-08-22 19:24:06.515 +03:00 [DBG] Connection id "0HN62OQTO4BDT" accepted.
2024-08-22 19:24:06.526 +03:00 [DBG] Connection id "0HN62OQTO4BDT" started.
2024-08-22 19:24:06.563 +03:00 [DBG] Connection 0HN62OQTO4BDT established using the following protocol: "Tls13"
2024-08-22 19:24:06.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - -
2024-08-22 19:24:06.677 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Hotel/search'
2024-08-22 19:24:06.748 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/search' is valid for the request path '/api/Hotel/search'
2024-08-22 19:24:06.768 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/search'
2024-08-22 19:24:06.788 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:06.791 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:24:07.025 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:24:07.035 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:07.160 +03:00 [INF] Route matched with {action = "SearchHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchHotel(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:24:07.171 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:24:07.177 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:24:07.183 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:24:07.191 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:24:07.197 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:24:07.204 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:24:08.203 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 19:24:09.030 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:24:09.060 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-08-22 19:24:09.069 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-08-22 19:24:09.077 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.083 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.088 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-08-22 19:24:09.168 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.182 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' ...
2024-08-22 19:24:09.188 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' using the name 'desc' in request data ...
2024-08-22 19:24:09.193 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.198 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.203 +03:00 [DBG] Attempting to validate the bound parameter 'desc' of type 'System.String' ...
2024-08-22 19:24:09.209 +03:00 [DBG] Done attempting to validate the bound parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.214 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:24:09.219 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 19:24:09.226 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.231 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.236 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:24:09.245 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.250 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:24:09.255 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 19:24:09.262 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:09.267 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:09.272 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:24:09.276 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:11.835 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 19:24:11.843 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 19:24:11.851 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 19:24:11.866 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 19:24:11.871 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 19:24:12.154 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.159 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.165 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.299 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.307 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.315 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.949 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:24:13.334 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 19:24:15.170 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:24:15.177 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:24:15.513 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Hotels AS h
        WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
        ORDER BY (SELECT 1)
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 19:24:15.760 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:24:15.882 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (128ms).
2024-08-22 19:24:15.965 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:17.823 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:17.889 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 19:24:18.240 +03:00 [INF] Executed DbCommand (379ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 19:24:18.399 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.529 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.608 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:24:18.665 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:18.888 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:19.118 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:24:19.167 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:24:19.172 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:24:19.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:24:19.180 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:24:19.187 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 19:24:19.730 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API) in 12460.1588ms
2024-08-22 19:24:19.745 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:19.782 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:24:19.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 13270.4391ms
2024-08-22 19:24:24.636 +03:00 [DBG] Connection id "0HN62OQTO4BDT" received FIN.
2024-08-22 19:24:24.640 +03:00 [DBG] Connection id "0HN62OQTO4BDT" is closed. The last processed stream ID was 1.
2024-08-22 19:24:24.646 +03:00 [DBG] Connection id "0HN62OQTO4BDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:24:24.654 +03:00 [DBG] Connection id "0HN62OQTO4BDT" stopped.
2024-08-22 19:35:53.716 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 19:35:54.077 +03:00 [DBG] Hosting starting
2024-08-22 19:35:54.185 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 19:35:54.198 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 19:35:54.255 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 19:35:54.261 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 19:35:54.296 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 19:35:54.323 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 19:35:54.327 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 19:35:54.350 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 19:35:54.362 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:35:54.373 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 19:35:54.377 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:35:54.393 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 19:35:54.408 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 19:35:54.424 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 19:35:54.430 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 19:35:55.018 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 19:35:55.219 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 19:35:55.222 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 19:35:55.226 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 19:35:55.229 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 19:35:55.232 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 19:35:55.236 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 19:35:55.238 +03:00 [INF] Hosting environment: Development
2024-08-22 19:35:55.241 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 19:35:55.245 +03:00 [DBG] Hosting started
2024-08-22 19:35:55.480 +03:00 [DBG] Connection id "0HN62P1VB9S0J" received FIN.
2024-08-22 19:35:55.510 +03:00 [DBG] Connection id "0HN62P1VB9S0J" accepted.
2024-08-22 19:35:55.518 +03:00 [DBG] Connection id "0HN62P1VB9S0J" started.
2024-08-22 19:35:55.583 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 19:35:55.768 +03:00 [DBG] Connection id "0HN62P1VB9S0J" stopped.
2024-08-22 19:35:55.783 +03:00 [DBG] Connection id "0HN62P1VB9S0J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:35:57.154 +03:00 [DBG] Connection id "0HN62P1VB9S0K" accepted.
2024-08-22 19:35:57.172 +03:00 [DBG] Connection id "0HN62P1VB9S0K" started.
2024-08-22 19:35:57.339 +03:00 [DBG] Connection 0HN62P1VB9S0K established using the following protocol: "Tls13"
2024-08-22 19:35:57.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 19:35:58.399 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 19:35:58.523 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 19:35:58.528 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:35:59.200 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 19:35:59.278 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 19:35:59.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 19:35:59.328 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1784.1642ms
2024-08-22 19:35:59.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 19:35:59.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 52.3057ms
2024-08-22 19:35:59.572 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 233.3448ms
2024-08-22 19:35:59.850 +03:00 [DBG] Connection id "0HN62P1VB9S0K" received FIN.
2024-08-22 19:35:59.873 +03:00 [DBG] Connection id "0HN62P1VB9S0K" is closed. The last processed stream ID was 5.
2024-08-22 19:35:59.881 +03:00 [DBG] Connection id "0HN62P1VB9S0K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:35:59.892 +03:00 [DBG] Connection id "0HN62P1VB9S0K" stopped.
2024-08-22 19:36:02.403 +03:00 [DBG] Connection id "0HN62P1VB9S0L" accepted.
2024-08-22 19:36:02.408 +03:00 [DBG] Connection id "0HN62P1VB9S0L" started.
2024-08-22 19:36:02.450 +03:00 [DBG] Connection 0HN62P1VB9S0L established using the following protocol: "Tls13"
2024-08-22 19:36:02.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 19:36:02.493 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 19:36:02.500 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:36:03.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 775.9736ms
2024-08-22 19:36:04.860 +03:00 [DBG] Connection id "0HN62P1VB9S0L" received FIN.
2024-08-22 19:36:04.863 +03:00 [DBG] Connection id "0HN62P1VB9S0L" is closed. The last processed stream ID was 1.
2024-08-22 19:36:04.868 +03:00 [DBG] Connection id "0HN62P1VB9S0L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:04.872 +03:00 [DBG] Connection id "0HN62P1VB9S0L" stopped.
2024-08-22 19:36:16.326 +03:00 [DBG] Connection id "0HN62P1VB9S0M" accepted.
2024-08-22 19:36:16.329 +03:00 [DBG] Connection id "0HN62P1VB9S0M" started.
2024-08-22 19:36:16.343 +03:00 [DBG] Connection 0HN62P1VB9S0M established using the following protocol: "Tls13"
2024-08-22 19:36:16.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/28 - -
2024-08-22 19:36:16.374 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/28'
2024-08-22 19:36:16.398 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/28'
2024-08-22 19:36:16.406 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:16.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:36:16.623 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:36:16.640 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:16.763 +03:00 [INF] Route matched with {action = "GetHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotel(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:36:16.772 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:36:16.777 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:36:16.781 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:36:16.789 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:36:16.795 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:36:16.802 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:17.460 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 19:36:18.316 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:18.337 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 19:36:18.345 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 19:36:18.352 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:18.358 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:18.362 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 19:36:18.436 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:21.139 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 19:36:21.146 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 19:36:21.151 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 19:36:21.157 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 19:36:21.163 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 19:36:21.505 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.510 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.515 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.658 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:21.663 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:21.669 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:22.312 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:36:22.719 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 19:36:23.175 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 19:36:23.185 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 19:36:23.193 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 19:36:24.286 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 19:36:24.506 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:24.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (144ms).
2024-08-22 19:36:24.721 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:25.805 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:25.879 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:26.240 +03:00 [INF] Executed DbCommand (394ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:26.560 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.664 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.730 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.803 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:26.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 19:36:26.814 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 19:36:26.878 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 19:36:26.933 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:26.957 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:26.972 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:27.019 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:27.110 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:36:27.128 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:36:27.130 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:36:27.133 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:36:27.137 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:36:27.142 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 19:36:27.305 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API) in 10489.2626ms
2024-08-22 19:36:27.318 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:27.351 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:36:27.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/28 - - - 200 - application/json;+charset=utf-8 11013.6670ms
2024-08-22 19:36:29.857 +03:00 [DBG] Connection id "0HN62P1VB9S0M" received FIN.
2024-08-22 19:36:29.863 +03:00 [DBG] Connection id "0HN62P1VB9S0M" is closed. The last processed stream ID was 1.
2024-08-22 19:36:29.868 +03:00 [DBG] Connection id "0HN62P1VB9S0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:29.874 +03:00 [DBG] Connection id "0HN62P1VB9S0M" stopped.
2024-08-22 19:36:40.051 +03:00 [DBG] Connection id "0HN62P1VB9S0N" accepted.
2024-08-22 19:36:40.054 +03:00 [DBG] Connection id "0HN62P1VB9S0N" started.
2024-08-22 19:36:40.066 +03:00 [DBG] Connection 0HN62P1VB9S0N established using the following protocol: "Tls13"
2024-08-22 19:36:40.143 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - -
2024-08-22 19:36:40.152 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Hotel/search'
2024-08-22 19:36:40.155 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/search' is valid for the request path '/api/Hotel/search'
2024-08-22 19:36:40.167 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/search'
2024-08-22 19:36:40.172 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:40.176 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:36:40.180 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:36:40.184 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:40.203 +03:00 [INF] Route matched with {action = "SearchHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchHotel(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:36:40.208 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:36:40.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:36:40.219 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:36:40.225 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:36:40.231 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:36:40.237 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:40.243 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:40.315 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-08-22 19:36:40.322 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-08-22 19:36:40.327 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.333 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.337 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-08-22 19:36:40.353 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.356 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' ...
2024-08-22 19:36:40.360 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' using the name 'desc' in request data ...
2024-08-22 19:36:40.366 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.371 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.375 +03:00 [DBG] Attempting to validate the bound parameter 'desc' of type 'System.String' ...
2024-08-22 19:36:40.386 +03:00 [DBG] Done attempting to validate the bound parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.389 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:36:40.395 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 19:36:40.402 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.405 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.409 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:36:40.416 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.428 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:36:40.433 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 19:36:40.437 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.443 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.448 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:36:40.454 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.476 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:36:40.531 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 19:36:40.538 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 19:36:40.541 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 19:36:40.545 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 19:36:40.585 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:36:40.589 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:36:40.685 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
            2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
            3 -> 0
            4 -> 8
            5 -> 15
        SELECT t.HotelId, t.CityID, t.CreatedAtUtc, t.Description, t.Name, t.OwnerID, t.PhoneNumber, t.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM 
        (
            SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
            ORDER BY (SELECT 1)
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS t
        INNER JOIN Cities AS c ON t.CityID == c.CityID
        INNER JOIN owners AS o ON t.OwnerID == o.OwnerID
        ORDER BY t.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 19:36:40.707 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:40.712 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-22 19:36:40.720 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:40.729 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:40.735 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[CityID], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[OwnerID], [t].[PhoneNumber], [t].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.816 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[CityID], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[OwnerID], [t].[PhoneNumber], [t].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.831 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.836 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.842 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:40.855 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 19:36:40.860 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [c].[CityID], [o].[OwnerID]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[OwnerID]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.944 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [c].[CityID], [o].[OwnerID]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[OwnerID]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.962 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.966 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.984 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.988 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.993 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.998 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:41.000 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:41.003 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:41.007 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:41.022 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:36:41.031 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:36:41.033 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:36:41.036 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:36:41.040 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:36:41.045 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 19:36:41.054 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API) in 816.832ms
2024-08-22 19:36:41.060 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:41.065 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:36:41.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 925.1872ms
2024-08-22 19:36:44.868 +03:00 [DBG] Connection id "0HN62P1VB9S0N" received FIN.
2024-08-22 19:36:44.873 +03:00 [DBG] Connection id "0HN62P1VB9S0N" is closed. The last processed stream ID was 1.
2024-08-22 19:36:44.878 +03:00 [DBG] Connection id "0HN62P1VB9S0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:44.883 +03:00 [DBG] Connection id "0HN62P1VB9S0N" stopped.
