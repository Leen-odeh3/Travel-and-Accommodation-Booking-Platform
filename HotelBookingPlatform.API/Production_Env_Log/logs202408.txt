2024-08-21 03:00:56.523 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 03:00:56.899 +03:00 [DBG] Hosting starting
2024-08-21 03:00:57.051 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 03:00:57.065 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 03:00:57.113 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 03:00:57.119 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 03:00:57.144 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 03:00:57.170 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 03:00:57.175 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 03:00:57.201 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 03:00:57.215 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:00:57.230 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 03:00:57.236 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:00:57.257 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 03:00:57.273 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 03:00:57.290 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 03:00:57.295 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 03:00:57.819 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 03:00:57.998 +03:00 [DBG] Connection id "0HN61EHAT49CD" received FIN.
2024-08-21 03:00:58.031 +03:00 [DBG] Connection id "0HN61EHAT49CD" accepted.
2024-08-21 03:00:58.038 +03:00 [DBG] Connection id "0HN61EHAT49CD" started.
2024-08-21 03:00:58.039 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 03:00:58.042 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 03:00:58.044 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 03:00:58.046 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 03:00:58.048 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 03:00:58.057 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 03:00:58.062 +03:00 [INF] Hosting environment: Development
2024-08-21 03:00:58.065 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 03:00:58.070 +03:00 [DBG] Hosting started
2024-08-21 03:00:58.117 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 03:00:58.300 +03:00 [DBG] Connection id "0HN61EHAT49CD" stopped.
2024-08-21 03:00:58.315 +03:00 [DBG] Connection id "0HN61EHAT49CD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:01:05.564 +03:00 [DBG] Connection id "0HN61EHAT49CE" accepted.
2024-08-21 03:01:05.602 +03:00 [DBG] Connection id "0HN61EHAT49CE" started.
2024-08-21 03:01:05.907 +03:00 [DBG] Connection 0HN61EHAT49CE established using the following protocol: "Tls13"
2024-08-21 03:01:06.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:01:06.570 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 03:01:06.699 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:01:06.703 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:01:07.482 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:01:07.569 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:01:07.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:01:07.621 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1520.2566ms
2024-08-21 03:01:07.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 34.1202ms
2024-08-21 03:01:07.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:01:07.880 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 210.3972ms
2024-08-21 03:01:12.383 +03:00 [DBG] Connection id "0HN61EHAT49CE" received FIN.
2024-08-21 03:01:12.404 +03:00 [DBG] Connection id "0HN61EHAT49CE" is closed. The last processed stream ID was 5.
2024-08-21 03:01:12.411 +03:00 [DBG] Connection id "0HN61EHAT49CE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:01:12.420 +03:00 [DBG] Connection id "0HN61EHAT49CE" stopped.
2024-08-21 03:01:12.760 +03:00 [DBG] Connection id "0HN61EHAT49CF" accepted.
2024-08-21 03:01:12.767 +03:00 [DBG] Connection id "0HN61EHAT49CF" started.
2024-08-21 03:01:12.785 +03:00 [DBG] Connection 0HN61EHAT49CF established using the following protocol: "Tls13"
2024-08-21 03:01:12.790 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:01:13.642 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:01:13.676 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:01:13.682 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:01:13.686 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:01:13.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 899.0535ms
2024-08-21 03:01:13.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:01:13.887 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:01:13.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 67.3382ms
2024-08-21 03:01:14.047 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 159.9814ms
2024-08-21 03:03:01.481 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 03:03:01.881 +03:00 [DBG] Hosting starting
2024-08-21 03:03:01.993 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 03:03:02.005 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 03:03:02.064 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 03:03:02.069 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 03:03:02.108 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 03:03:02.138 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 03:03:02.142 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 03:03:02.178 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 03:03:02.193 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:03:02.211 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 03:03:02.217 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 03:03:02.239 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 03:03:02.253 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 03:03:02.271 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 03:03:02.275 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 03:03:02.947 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 03:03:03.227 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 03:03:03.230 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 03:03:03.233 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 03:03:03.237 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 03:03:03.239 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 03:03:03.241 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 03:03:03.243 +03:00 [INF] Hosting environment: Development
2024-08-21 03:03:03.245 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 03:03:03.247 +03:00 [DBG] Hosting started
2024-08-21 03:03:03.559 +03:00 [DBG] Connection id "0HN61EIGAIN5K" received FIN.
2024-08-21 03:03:03.585 +03:00 [DBG] Connection id "0HN61EIGAIN5K" accepted.
2024-08-21 03:03:03.590 +03:00 [DBG] Connection id "0HN61EIGAIN5K" started.
2024-08-21 03:03:03.651 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 03:03:03.893 +03:00 [DBG] Connection id "0HN61EIGAIN5K" stopped.
2024-08-21 03:03:04.067 +03:00 [DBG] Connection id "0HN61EIGAIN5L" accepted.
2024-08-21 03:03:04.110 +03:00 [DBG] Connection id "0HN61EIGAIN5L" started.
2024-08-21 03:03:04.076 +03:00 [DBG] Connection id "0HN61EIGAIN5K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:03:04.308 +03:00 [DBG] Connection 0HN61EIGAIN5L established using the following protocol: "Tls13"
2024-08-21 03:03:04.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 03:03:05.157 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 03:03:05.409 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 03:03:05.435 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:06.340 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 03:03:06.425 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 03:03:06.454 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1936.4303ms
2024-08-21 03:03:06.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 03:03:06.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 21.4101ms
2024-08-21 03:03:06.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 03:03:06.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 254.3525ms
2024-08-21 03:03:07.583 +03:00 [DBG] Connection id "0HN61EIGAIN5L" received FIN.
2024-08-21 03:03:07.630 +03:00 [DBG] Connection id "0HN61EIGAIN5L" is closed. The last processed stream ID was 5.
2024-08-21 03:03:07.637 +03:00 [DBG] Connection id "0HN61EIGAIN5L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 03:03:07.656 +03:00 [DBG] Connection id "0HN61EIGAIN5L" stopped.
2024-08-21 03:03:09.739 +03:00 [DBG] Connection id "0HN61EIGAIN5M" accepted.
2024-08-21 03:03:09.744 +03:00 [DBG] Connection id "0HN61EIGAIN5M" started.
2024-08-21 03:03:09.779 +03:00 [DBG] Connection 0HN61EIGAIN5M established using the following protocol: "Tls13"
2024-08-21 03:03:09.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 03:03:09.792 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 03:03:09.796 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:09.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-21 03:03:09.893 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-21 03:03:09.907 +03:00 [DBG] Request did not match any endpoints
2024-08-21 03:03:09.945 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-21 03:03:09.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 64.2969ms
2024-08-21 03:03:10.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 800.5903ms
2024-08-21 23:13:15.429 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:13:15.830 +03:00 [DBG] Hosting starting
2024-08-21 23:13:15.955 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:13:15.968 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:13:16.028 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:13:16.035 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:13:16.068 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:13:16.097 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:13:16.101 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:13:16.127 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:13:16.144 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:13:16.158 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:13:16.163 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:13:16.190 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:13:16.211 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:13:16.228 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:13:16.234 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:13:16.861 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:13:17.078 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:13:17.083 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:13:17.095 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:13:17.098 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:13:17.102 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:13:17.106 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:13:17.109 +03:00 [INF] Hosting environment: Development
2024-08-21 23:13:17.113 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:13:17.117 +03:00 [DBG] Hosting started
2024-08-21 23:13:17.144 +03:00 [DBG] Connection id "0HN623MORIOGG" accepted.
2024-08-21 23:13:17.144 +03:00 [DBG] Connection id "0HN623MORIOGH" accepted.
2024-08-21 23:13:17.150 +03:00 [DBG] Connection id "0HN623MORIOGG" started.
2024-08-21 23:13:17.150 +03:00 [DBG] Connection id "0HN623MORIOGH" started.
2024-08-21 23:13:18.582 +03:00 [DBG] Connection id "0HN623MORIOGI" accepted.
2024-08-21 23:13:18.589 +03:00 [DBG] Connection id "0HN623MORIOGI" started.
2024-08-21 23:13:18.613 +03:00 [DBG] Connection id "0HN623MORIOGJ" accepted.
2024-08-21 23:13:18.615 +03:00 [DBG] Connection id "0HN623MORIOGJ" started.
2024-08-21 23:13:18.812 +03:00 [DBG] Connection id "0HN623MORIOGI" received FIN.
2024-08-21 23:13:18.898 +03:00 [DBG] Connection 0HN623MORIOGJ established using the following protocol: "Tls13"
2024-08-21 23:13:18.898 +03:00 [DBG] Connection 0HN623MORIOGI established using the following protocol: "Tls13"
2024-08-21 23:13:18.953 +03:00 [DBG] Connection id "0HN623MORIOGI" is closed. The last processed stream ID was 0.
2024-08-21 23:13:18.961 +03:00 [DBG] Connection id "0HN623MORIOGI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:18.980 +03:00 [DBG] Connection id "0HN623MORIOGI" stopped.
2024-08-21 23:13:19.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-21 23:13:19.772 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:13:19.918 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-21 23:13:19.922 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:13:20.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 974.2733ms
2024-08-21 23:13:20.085 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:13:20.089 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.669 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:13:20.727 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:13:20.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 657.1310ms
2024-08-21 23:13:20.755 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-21 23:13:20.756 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-21 23:13:20.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-21 23:13:20.759 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-21 23:13:20.761 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-21 23:13:20.763 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-21 23:13:20.766 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.771 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.774 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:20.816 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-21 23:13:20.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 93.7197ms
2024-08-21 23:13:20.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:13:20.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 45.8247ms
2024-08-21 23:13:20.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:13:20.930 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-21 23:13:20.944 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-21 23:13:20.946 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 188.7377ms
2024-08-21 23:13:20.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 192.2239ms
2024-08-21 23:13:21.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 259.7453ms
2024-08-21 23:13:24.794 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:13:24.797 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:13:24.801 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:24.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-21 23:13:24.951 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-21 23:13:24.954 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:13:24.956 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-21 23:13:24.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 20.1026ms
2024-08-21 23:13:25.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 814.4941ms
2024-08-21 23:13:27.234 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-21 23:13:27.234 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-21 23:13:27.238 +03:00 [DBG] Connection id "0HN623MORIOGG" stopped.
2024-08-21 23:13:27.241 +03:00 [DBG] Connection id "0HN623MORIOGH" stopped.
2024-08-21 23:13:27.244 +03:00 [DBG] Connection id "0HN623MORIOGG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:27.249 +03:00 [DBG] Connection id "0HN623MORIOGH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:30.055 +03:00 [DBG] Connection id "0HN623MORIOGJ" received FIN.
2024-08-21 23:13:30.059 +03:00 [DBG] Connection id "0HN623MORIOGJ" is closed. The last processed stream ID was 17.
2024-08-21 23:13:30.065 +03:00 [DBG] Connection id "0HN623MORIOGJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:13:30.070 +03:00 [DBG] Connection id "0HN623MORIOGJ" stopped.
2024-08-21 23:15:08.203 +03:00 [DBG] Connection id "0HN623MORIOGK" accepted.
2024-08-21 23:15:08.207 +03:00 [DBG] Connection id "0HN623MORIOGK" started.
2024-08-21 23:15:08.229 +03:00 [DBG] Connection 0HN623MORIOGK established using the following protocol: "Tls13"
2024-08-21 23:15:08.236 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:15:08.265 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:15:08.280 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:15:08.284 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:08.288 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:15:08.293 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:15:08.562 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:15:08.577 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:08.711 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:15:08.720 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:15:08.728 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:15:08.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:15:08.742 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:15:08.748 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:15:08.757 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:15:09.370 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:15:09.590 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:15:09.609 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:15:09.617 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:15:09.625 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:15:09.657 +03:00 [DBG] Connection id "0HN623MORIOGK", Request id "0HN623MORIOGK:00000001": started reading request body.
2024-08-21 23:15:09.663 +03:00 [DBG] Connection id "0HN623MORIOGK", Request id "0HN623MORIOGK:00000001": done reading request body.
2024-08-21 23:15:09.722 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:15:09.728 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:09.733 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:09.737 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:15:09.825 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:15:12.473 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:15:12.479 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:15:12.484 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:15:12.489 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:15:12.494 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:15:12.883 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:12.889 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:12.895 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:15:13.044 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:15:13.050 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:15:13.805 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:15:14.271 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:15:14.645 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:15:15.826 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:15:16.083 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:16.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (142ms).
2024-08-21 23:15:16.284 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:17.445 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:17.504 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:15:17.823 +03:00 [INF] Executed DbCommand (338ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:15:18.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.283 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.374 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.381 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:15:18.431 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:18.459 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.491 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.852 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:15:18.894 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:15:18.903 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:18.907 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:18.912 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.921 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.926 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:15:18.950 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:15:18.974 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:18.976 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:18.981 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.026 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:15:19.100 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:15:19.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:19.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:19.119 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.124 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.128 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.149 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.162 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:19.165 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.169 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:15:19.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:15:19.230 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.234 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.239 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.249 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:15:19.257 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:15:19.260 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.265 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:15:19.733 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:15:19.748 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:15:19.750 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:15:19.754 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:15:19.758 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:15:19.763 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:15:19.934 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 11159.5318ms
2024-08-21 23:15:19.944 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:15:19.972 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:15:19.988 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 11752.2116ms
2024-08-21 23:15:25.212 +03:00 [DBG] Connection id "0HN623MORIOGK" received FIN.
2024-08-21 23:15:25.216 +03:00 [DBG] Connection id "0HN623MORIOGK" is closed. The last processed stream ID was 1.
2024-08-21 23:15:25.221 +03:00 [DBG] Connection id "0HN623MORIOGK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:15:25.242 +03:00 [DBG] Connection id "0HN623MORIOGK" stopped.
2024-08-21 23:16:00.758 +03:00 [DBG] Connection id "0HN623MORIOGL" accepted.
2024-08-21 23:16:00.762 +03:00 [DBG] Connection id "0HN623MORIOGL" started.
2024-08-21 23:16:00.776 +03:00 [DBG] Connection 0HN623MORIOGL established using the following protocol: "Tls13"
2024-08-21 23:16:00.793 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:16:00.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:16:00.846 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:16:00.877 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:00.881 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:16:00.884 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:16:01.193 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:16:01.200 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:16:01.224 +03:00 [DBG] Authorization was successful.
2024-08-21 23:16:01.228 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:01.242 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:16:01.248 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:16:01.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:16:01.258 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:16:01.265 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:16:01.271 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:16:01.277 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:16:01.953 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:16:01.959 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:16:01.964 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:16:01.969 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:16:01.988 +03:00 [DBG] Connection id "0HN623MORIOGL", Request id "0HN623MORIOGL:00000001": started reading request body.
2024-08-21 23:16:01.992 +03:00 [DBG] Connection id "0HN623MORIOGL", Request id "0HN623MORIOGL:00000001": done reading request body.
2024-08-21 23:16:02.032 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:16:02.036 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.041 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.045 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:16:02.054 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:16:02.193 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:16:02.226 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:16:02.291 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:16:02.340 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:16:02.347 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:16:02.351 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:16:02.356 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.359 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:16:02.387 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:16:02.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.528 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.596 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:16:02.599 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.605 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:02.739 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:02.850 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:16:02.860 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:16:02.932 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:16:03.034 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.040 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.056 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:16:03.101 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:16:03.287 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:16:03.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:16:03.308 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:16:03.354 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:16:03.427 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:16:03.453 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:16:03.482 +03:00 [DBG] Committing transaction.
2024-08-21 23:16:03.504 +03:00 [DBG] Committed transaction.
2024-08-21 23:16:03.527 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.531 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:16:03.550 +03:00 [DBG] Disposing transaction.
2024-08-21 23:16:03.604 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:16:03.620 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:16:03.627 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:16:03.630 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:16:03.634 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:16:03.638 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:16:03.670 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:16:03.679 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:16:03.684 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:16:03.688 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:16:03.690 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:16:03.693 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:16:03.698 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:16:03.714 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2437.4878ms
2024-08-21 23:16:03.721 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:16:03.727 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:16:03.730 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 2937.6990ms
2024-08-21 23:16:05.281 +03:00 [DBG] Connection id "0HN623MORIOGL" received FIN.
2024-08-21 23:16:05.286 +03:00 [DBG] Connection id "0HN623MORIOGL" is closed. The last processed stream ID was 1.
2024-08-21 23:16:05.292 +03:00 [DBG] Connection id "0HN623MORIOGL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:16:05.305 +03:00 [DBG] Connection id "0HN623MORIOGL" stopped.
2024-08-21 23:20:01.029 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:20:01.548 +03:00 [DBG] Hosting starting
2024-08-21 23:20:01.699 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:20:01.721 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:20:01.779 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:20:01.782 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:20:01.816 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:20:01.839 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:20:01.842 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:20:01.868 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:20:01.882 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:20:01.898 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:20:01.908 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:20:01.963 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:20:02.098 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:20:02.137 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:20:02.141 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:20:03.334 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:20:03.591 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:20:03.594 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:20:03.597 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:20:03.600 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:20:03.603 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:20:03.607 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:20:03.610 +03:00 [INF] Hosting environment: Development
2024-08-21 23:20:03.613 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:20:03.617 +03:00 [DBG] Hosting started
2024-08-21 23:20:03.801 +03:00 [DBG] Connection id "0HN623QI1NAR0" accepted.
2024-08-21 23:20:03.808 +03:00 [DBG] Connection id "0HN623QI1NAR0" received FIN.
2024-08-21 23:20:03.810 +03:00 [DBG] Connection id "0HN623QI1NAR0" started.
2024-08-21 23:20:03.886 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:20:04.052 +03:00 [DBG] Connection id "0HN623QI1NAR0" stopped.
2024-08-21 23:20:04.067 +03:00 [DBG] Connection id "0HN623QI1NAR0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:04.297 +03:00 [DBG] Connection id "0HN623QI1NAR1" accepted.
2024-08-21 23:20:04.305 +03:00 [DBG] Connection id "0HN623QI1NAR1" started.
2024-08-21 23:20:04.452 +03:00 [DBG] Connection 0HN623QI1NAR1 established using the following protocol: "Tls13"
2024-08-21 23:20:04.650 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:20:05.103 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:20:05.240 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:20:05.245 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:20:06.102 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:20:06.190 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:20:06.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1578.5228ms
2024-08-21 23:20:06.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:20:06.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.2661ms
2024-08-21 23:20:06.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:20:06.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 210.3986ms
2024-08-21 23:20:10.623 +03:00 [DBG] Connection id "0HN623QI1NAR1" received FIN.
2024-08-21 23:20:10.648 +03:00 [DBG] Connection id "0HN623QI1NAR1" is closed. The last processed stream ID was 5.
2024-08-21 23:20:10.654 +03:00 [DBG] Connection id "0HN623QI1NAR1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:10.676 +03:00 [DBG] Connection id "0HN623QI1NAR1" stopped.
2024-08-21 23:20:10.875 +03:00 [DBG] Connection id "0HN623QI1NAR2" accepted.
2024-08-21 23:20:10.878 +03:00 [DBG] Connection id "0HN623QI1NAR2" started.
2024-08-21 23:20:10.917 +03:00 [DBG] Connection 0HN623QI1NAR2 established using the following protocol: "Tls13"
2024-08-21 23:20:10.925 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:20:10.939 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:20:10.953 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:20:11.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 864.0224ms
2024-08-21 23:20:15.624 +03:00 [DBG] Connection id "0HN623QI1NAR2" received FIN.
2024-08-21 23:20:15.627 +03:00 [DBG] Connection id "0HN623QI1NAR2" is closed. The last processed stream ID was 1.
2024-08-21 23:20:15.631 +03:00 [DBG] Connection id "0HN623QI1NAR2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:15.636 +03:00 [DBG] Connection id "0HN623QI1NAR2" stopped.
2024-08-21 23:20:32.996 +03:00 [DBG] Connection id "0HN623QI1NAR3" accepted.
2024-08-21 23:20:33.008 +03:00 [DBG] Connection id "0HN623QI1NAR3" started.
2024-08-21 23:20:33.020 +03:00 [DBG] Connection 0HN623QI1NAR3 established using the following protocol: "Tls13"
2024-08-21 23:20:33.028 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:20:33.056 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:20:33.082 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:20:33.089 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:33.101 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:20:33.108 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:20:33.294 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:20:33.305 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:33.437 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:20:33.448 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:20:33.453 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:20:33.458 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:20:33.467 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:20:33.473 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:20:33.481 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:20:34.093 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:20:34.298 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:20:34.322 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:20:34.335 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:20:34.344 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:20:34.389 +03:00 [DBG] Connection id "0HN623QI1NAR3", Request id "0HN623QI1NAR3:00000001": started reading request body.
2024-08-21 23:20:34.396 +03:00 [DBG] Connection id "0HN623QI1NAR3", Request id "0HN623QI1NAR3:00000001": done reading request body.
2024-08-21 23:20:34.475 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:20:34.481 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:34.487 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:34.492 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:20:34.588 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:20:37.119 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:20:37.128 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:20:37.134 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:20:37.140 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:20:37.146 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:20:37.495 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.500 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.504 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:20:37.660 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:20:37.666 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:20:38.345 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:20:38.771 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:20:39.083 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:20:40.158 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:20:40.372 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:40.533 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (163ms).
2024-08-21 23:20:40.612 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:42.979 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:43.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:20:43.472 +03:00 [INF] Executed DbCommand (441ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:20:43.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.131 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.200 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.205 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:20:44.249 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:44.282 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:44.316 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.129 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:20:45.225 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:20:45.245 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.248 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:20:45.251 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.261 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.267 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:20:45.302 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:20:45.318 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.320 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.324 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.421 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:20:45.589 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:20:45.599 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-21 23:20:45.605 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.609 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.612 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.627 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.633 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.634 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.637 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.676 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:20:45.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-21 23:20:45.684 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.687 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.690 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.699 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:20:45.704 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:20:45.707 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:45.713 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:20:46.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:20:46.215 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:20:46.217 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:20:46.219 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:20:46.224 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:20:46.228 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:20:46.377 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 12879.8444ms
2024-08-21 23:20:46.389 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:20:46.427 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:20:46.445 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 13417.3223ms
2024-08-21 23:20:50.668 +03:00 [DBG] Connection id "0HN623QI1NAR3" received FIN.
2024-08-21 23:20:50.671 +03:00 [DBG] Connection id "0HN623QI1NAR3" is closed. The last processed stream ID was 1.
2024-08-21 23:20:50.678 +03:00 [DBG] Connection id "0HN623QI1NAR3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:20:50.695 +03:00 [DBG] Connection id "0HN623QI1NAR3" stopped.
2024-08-21 23:21:17.066 +03:00 [DBG] Connection id "0HN623QI1NAR4" accepted.
2024-08-21 23:21:17.068 +03:00 [DBG] Connection id "0HN623QI1NAR4" started.
2024-08-21 23:21:17.180 +03:00 [DBG] Connection 0HN623QI1NAR4 established using the following protocol: "Tls13"
2024-08-21 23:21:17.188 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:21:17.202 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:21:17.205 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:21:17.209 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:17.212 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:21:17.214 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:21:17.497 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:21:17.506 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:21:17.537 +03:00 [DBG] Authorization was successful.
2024-08-21 23:21:17.541 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:17.555 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:21:17.562 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:21:17.567 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:21:17.571 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:21:17.579 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:21:17.585 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:21:17.591 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:21:18.445 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:21:18.453 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:21:18.459 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:21:18.463 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:21:18.490 +03:00 [DBG] Connection id "0HN623QI1NAR4", Request id "0HN623QI1NAR4:00000001": started reading request body.
2024-08-21 23:21:18.498 +03:00 [DBG] Connection id "0HN623QI1NAR4", Request id "0HN623QI1NAR4:00000001": done reading request body.
2024-08-21 23:21:18.555 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:21:18.559 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.565 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.569 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:21:18.582 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:21:18.737 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:21:18.760 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:21:18.821 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:21:18.858 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:21:18.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:21:18.871 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:21:18.877 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:18.882 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:18.892 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:21:18.929 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:21:18.985 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.118 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.207 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:21:19.211 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.217 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.389 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.469 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:19.497 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:21:19.506 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:21:19.602 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:21:19.694 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.701 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:19.715 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:21:19.759 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:21:19.962 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:21:19.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:21:19.979 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:21:20.037 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:21:20.132 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:21:20.165 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:21:20.195 +03:00 [DBG] Committing transaction.
2024-08-21 23:21:20.218 +03:00 [DBG] Committed transaction.
2024-08-21 23:21:20.244 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:20.248 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:21:20.268 +03:00 [DBG] Disposing transaction.
2024-08-21 23:21:20.309 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:21:20.333 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:21:20.340 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:21:20.344 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:21:20.350 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:21:20.354 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:21:20.401 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:21:20.415 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:21:20.422 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:21:20.427 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:21:20.430 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:21:20.434 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:21:20.439 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:21:20.469 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2878.3219ms
2024-08-21 23:21:20.476 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:21:20.483 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:21:20.487 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 3298.5704ms
2024-08-21 23:21:20.710 +03:00 [DBG] Connection id "0HN623QI1NAR4" received FIN.
2024-08-21 23:21:20.713 +03:00 [DBG] Connection id "0HN623QI1NAR4" is closed. The last processed stream ID was 1.
2024-08-21 23:21:20.718 +03:00 [DBG] Connection id "0HN623QI1NAR4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:21:20.725 +03:00 [DBG] Connection id "0HN623QI1NAR4" stopped.
2024-08-21 23:25:51.420 +03:00 [DBG] Connection id "0HN623QI1NAR5" accepted.
2024-08-21 23:25:51.423 +03:00 [DBG] Connection id "0HN623QI1NAR5" started.
2024-08-21 23:25:51.492 +03:00 [DBG] Connection 0HN623QI1NAR5 established using the following protocol: "Tls13"
2024-08-21 23:25:51.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/active - -
2024-08-21 23:25:51.532 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/active'
2024-08-21 23:25:51.536 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)' with route pattern 'api/Discount/active' is valid for the request path '/api/Discount/active'
2024-08-21 23:25:51.542 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/active'
2024-08-21 23:25:51.548 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:51.551 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:25:51.606 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/21/2024 8:20:45 PM', Current time (UTC): '8/21/2024 8:25:51 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-21 23:25:51.657 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/21/2024 8:20:45 PM', Current time (UTC): '8/21/2024 8:25:51 PM'.
2024-08-21 23:25:51.663 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:51.685 +03:00 [INF] Route matched with {action = "GetActiveDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActiveDiscounts() on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:25:51.698 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:25:51.709 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:25:51.720 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:25:51.736 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:25:51.746 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:25:51.757 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:25:51.781 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:25:51.837 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:25:51.848 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)'
2024-08-21 23:25:51.855 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-21 23:25:51.870 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM Discounts AS d
        INNER JOIN Rooms AS r ON d.RoomID == r.RoomID), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:25:51.877 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:25:51.881 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:25:51.886 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:51.890 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:51.894 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-21 23:25:51.920 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-21 23:25:51.928 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.939 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.943 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.947 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.952 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.965 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.986 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.991 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:51.996 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.000 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.005 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.009 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.014 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.018 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.023 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.027 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.031 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.036 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.040 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.044 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.049 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.058 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.062 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.066 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.071 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.082 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.087 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.100 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.105 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.109 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:25:52.113 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:25:52.116 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:52.120 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:25:52.154 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:25:52.162 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:25:52.167 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:25:52.172 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:25:52.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:25:52.177 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:25:52.181 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-21 23:25:52.190 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API) in 433.1957ms
2024-08-21 23:25:52.195 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-21 23:25:52.199 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:25:52.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/active - - - 200 - application/json;+charset=utf-8 699.8138ms
2024-08-21 23:25:56.091 +03:00 [DBG] Connection id "0HN623QI1NAR5" received FIN.
2024-08-21 23:25:56.095 +03:00 [DBG] Connection id "0HN623QI1NAR5" is closed. The last processed stream ID was 1.
2024-08-21 23:25:56.100 +03:00 [DBG] Connection id "0HN623QI1NAR5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:25:56.106 +03:00 [DBG] Connection id "0HN623QI1NAR5" stopped.
2024-08-21 23:27:36.558 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:27:36.860 +03:00 [DBG] Hosting starting
2024-08-21 23:27:36.941 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:27:36.949 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:27:36.965 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:27:36.970 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:27:36.986 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:27:37.000 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:27:37.004 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:27:37.025 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:27:37.036 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:27:37.054 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:27:37.064 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:27:37.082 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:27:37.100 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:27:37.117 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:27:37.123 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:27:37.557 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:27:37.718 +03:00 [DBG] Connection id "0HN623UPAM4QE" accepted.
2024-08-21 23:27:37.720 +03:00 [DBG] Connection id "0HN623UPAM4QE" received FIN.
2024-08-21 23:27:37.725 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:27:37.726 +03:00 [DBG] Connection id "0HN623UPAM4QE" started.
2024-08-21 23:27:37.732 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:27:37.739 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:27:37.742 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:27:37.747 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:27:37.751 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:27:37.754 +03:00 [INF] Hosting environment: Development
2024-08-21 23:27:37.757 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:27:37.761 +03:00 [DBG] Hosting started
2024-08-21 23:27:37.775 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:27:37.906 +03:00 [DBG] Connection id "0HN623UPAM4QE" stopped.
2024-08-21 23:27:37.916 +03:00 [DBG] Connection id "0HN623UPAM4QE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:27:39.857 +03:00 [DBG] Connection id "0HN623UPAM4QF" accepted.
2024-08-21 23:27:39.874 +03:00 [DBG] Connection id "0HN623UPAM4QF" started.
2024-08-21 23:27:40.048 +03:00 [DBG] Connection 0HN623UPAM4QF established using the following protocol: "Tls13"
2024-08-21 23:27:40.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:27:40.539 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:27:40.631 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:27:40.636 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:27:41.175 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:27:41.244 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:27:41.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1100.0693ms
2024-08-21 23:27:41.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:27:41.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:27:41.320 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 18.8504ms
2024-08-21 23:27:41.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 180.7350ms
2024-08-21 23:27:44.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:27:44.796 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:27:44.800 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:27:45.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 492.2202ms
2024-08-21 23:27:46.195 +03:00 [DBG] Connection id "0HN623UPAM4QF" received FIN.
2024-08-21 23:27:46.217 +03:00 [DBG] Connection id "0HN623UPAM4QF" is closed. The last processed stream ID was 7.
2024-08-21 23:27:46.224 +03:00 [DBG] Connection id "0HN623UPAM4QF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:27:46.241 +03:00 [DBG] Connection id "0HN623UPAM4QF" stopped.
2024-08-21 23:28:02.916 +03:00 [DBG] Connection id "0HN623UPAM4QG" accepted.
2024-08-21 23:28:02.921 +03:00 [DBG] Connection id "0HN623UPAM4QG" started.
2024-08-21 23:28:02.962 +03:00 [DBG] Connection 0HN623UPAM4QG established using the following protocol: "Tls13"
2024-08-21 23:28:02.979 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:28:03.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:28:03.024 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:28:03.031 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:03.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:28:03.045 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:28:03.208 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:28:03.220 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:03.320 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:28:03.331 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:28:03.338 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:28:03.346 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:28:03.355 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:28:03.363 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:28:03.371 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:28:03.805 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:28:03.954 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:28:03.973 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:28:03.984 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:28:03.992 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:28:04.026 +03:00 [DBG] Connection id "0HN623UPAM4QG", Request id "0HN623UPAM4QG:00000001": started reading request body.
2024-08-21 23:28:04.031 +03:00 [DBG] Connection id "0HN623UPAM4QG", Request id "0HN623UPAM4QG:00000001": done reading request body.
2024-08-21 23:28:04.103 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:28:04.108 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:04.113 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:04.117 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:28:04.186 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:28:06.361 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:28:06.368 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:28:06.375 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:28:06.381 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:28:06.387 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:28:06.693 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.700 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.705 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:28:06.832 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:28:06.838 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:28:07.379 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:28:07.687 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:28:07.953 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:28:08.809 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:28:08.968 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:09.077 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (113ms).
2024-08-21 23:28:09.154 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:09.922 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:09.969 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:28:10.167 +03:00 [INF] Executed DbCommand (215ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:28:10.295 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.456 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.516 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:10.565 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:10.593 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.633 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.747 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:28:10.782 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:28:10.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:10.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-21 23:28:10.807 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.816 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.823 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:28:10.850 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:28:10.865 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:10.869 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.875 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:10.915 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:28:10.986 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:28:10.996 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:11.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:11.007 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.012 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.018 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.043 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.054 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:11.057 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.062 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.107 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:11.111 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:11.118 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.124 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.130 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.148 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:28:11.159 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:11.162 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.170 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:11.517 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:28:11.538 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:28:11.541 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:28:11.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:28:11.549 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:28:11.555 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:28:11.682 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 8295.1894ms
2024-08-21 23:28:11.690 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:28:11.720 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:28:11.738 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 8759.5127ms
2024-08-21 23:28:16.237 +03:00 [DBG] Connection id "0HN623UPAM4QG" received FIN.
2024-08-21 23:28:16.242 +03:00 [DBG] Connection id "0HN623UPAM4QG" is closed. The last processed stream ID was 1.
2024-08-21 23:28:16.248 +03:00 [DBG] Connection id "0HN623UPAM4QG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:28:16.267 +03:00 [DBG] Connection id "0HN623UPAM4QG" stopped.
2024-08-21 23:28:50.735 +03:00 [DBG] Connection id "0HN623UPAM4QH" accepted.
2024-08-21 23:28:50.746 +03:00 [DBG] Connection id "0HN623UPAM4QH" started.
2024-08-21 23:28:50.848 +03:00 [DBG] Connection 0HN623UPAM4QH established using the following protocol: "Tls13"
2024-08-21 23:28:50.858 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 129
2024-08-21 23:28:50.875 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:28:50.879 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:28:50.885 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:50.887 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:28:50.889 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:28:51.113 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:28:51.120 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:28:51.139 +03:00 [DBG] Authorization was successful.
2024-08-21 23:28:51.145 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:51.163 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:28:51.173 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:28:51.179 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:28:51.187 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:28:51.197 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:28:51.205 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:28:51.212 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:28:51.725 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:28:51.732 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:28:51.738 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:28:51.743 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:28:51.771 +03:00 [DBG] Connection id "0HN623UPAM4QH", Request id "0HN623UPAM4QH:00000001": started reading request body.
2024-08-21 23:28:51.777 +03:00 [DBG] Connection id "0HN623UPAM4QH", Request id "0HN623UPAM4QH:00000001": done reading request body.
2024-08-21 23:28:51.821 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:28:51.827 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.833 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.839 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:28:51.856 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:28:51.991 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:28:52.019 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:28:52.067 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:28:52.099 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:28:52.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:52.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:28:52.122 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.126 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:28:52.163 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:28:52.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.296 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.368 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:52.372 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.377 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.504 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.581 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:52.613 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:28:52.624 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:28:52.702 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:28:52.776 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.783 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:52.796 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:28:52.828 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:28:52.952 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:28:52.958 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:28:52.967 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:28:52.993 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:28:53.057 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:28:53.074 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:28:53.101 +03:00 [DBG] Committing transaction.
2024-08-21 23:28:53.118 +03:00 [DBG] Committed transaction.
2024-08-21 23:28:53.134 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:53.138 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:28:53.149 +03:00 [DBG] Disposing transaction.
2024-08-21 23:28:53.182 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:28:53.195 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:28:53.203 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:28:53.206 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:28:53.210 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:28:53.215 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:28:53.255 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:28:53.269 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:28:53.275 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:28:53.279 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:28:53.282 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:28:53.286 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:28:53.292 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:28:53.311 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 2099.3956ms
2024-08-21 23:28:53.318 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:28:53.324 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:28:53.328 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 129 - 200 - application/json;+charset=utf-8 2469.8910ms
2024-08-21 23:28:56.273 +03:00 [DBG] Connection id "0HN623UPAM4QH" received FIN.
2024-08-21 23:28:56.277 +03:00 [DBG] Connection id "0HN623UPAM4QH" is closed. The last processed stream ID was 1.
2024-08-21 23:28:56.283 +03:00 [DBG] Connection id "0HN623UPAM4QH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:28:56.288 +03:00 [DBG] Connection id "0HN623UPAM4QH" stopped.
2024-08-21 23:34:29.956 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:34:30.173 +03:00 [DBG] Hosting starting
2024-08-21 23:34:30.255 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:34:30.265 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:34:30.284 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:34:30.289 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:34:30.304 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:34:30.316 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:34:30.320 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:34:30.342 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:34:30.354 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:34:30.372 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:34:30.377 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:34:30.391 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:34:30.404 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:34:30.416 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:34:30.420 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:34:30.770 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:34:30.909 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:34:30.914 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:34:30.919 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:34:30.923 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:34:30.927 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:34:30.931 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:34:30.933 +03:00 [INF] Hosting environment: Development
2024-08-21 23:34:30.936 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:34:30.937 +03:00 [DBG] Hosting started
2024-08-21 23:34:31.323 +03:00 [DBG] Connection id "0HN6242KJ6T2V" received FIN.
2024-08-21 23:34:31.324 +03:00 [DBG] Connection id "0HN6242KJ6T30" received FIN.
2024-08-21 23:34:31.357 +03:00 [DBG] Connection id "0HN6242KJ6T2V" accepted.
2024-08-21 23:34:31.357 +03:00 [DBG] Connection id "0HN6242KJ6T30" accepted.
2024-08-21 23:34:31.365 +03:00 [DBG] Connection id "0HN6242KJ6T2V" started.
2024-08-21 23:34:31.368 +03:00 [DBG] Connection id "0HN6242KJ6T30" started.
2024-08-21 23:34:31.400 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:34:31.400 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:34:31.504 +03:00 [DBG] Connection id "0HN6242KJ6T2V" stopped.
2024-08-21 23:34:31.504 +03:00 [DBG] Connection id "0HN6242KJ6T30" stopped.
2024-08-21 23:34:31.516 +03:00 [DBG] Connection id "0HN6242KJ6T2V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:31.516 +03:00 [DBG] Connection id "0HN6242KJ6T30" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:34.457 +03:00 [DBG] Connection id "0HN6242KJ6T31" accepted.
2024-08-21 23:34:34.461 +03:00 [DBG] Connection id "0HN6242KJ6T31" started.
2024-08-21 23:34:34.570 +03:00 [DBG] Connection 0HN6242KJ6T31 established using the following protocol: "Tls13"
2024-08-21 23:34:34.714 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:34:35.010 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:34:35.078 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:34:35.083 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:34:35.582 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:34:35.648 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:34:35.669 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 963.4874ms
2024-08-21 23:34:35.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:34:35.718 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.1726ms
2024-08-21 23:34:35.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:34:35.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 146.0634ms
2024-08-21 23:34:36.775 +03:00 [DBG] Connection id "0HN6242KJ6T31" received FIN.
2024-08-21 23:34:36.796 +03:00 [DBG] Connection id "0HN6242KJ6T31" is closed. The last processed stream ID was 5.
2024-08-21 23:34:36.802 +03:00 [DBG] Connection id "0HN6242KJ6T31" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:36.821 +03:00 [DBG] Connection id "0HN6242KJ6T31" stopped.
2024-08-21 23:34:39.578 +03:00 [DBG] Connection id "0HN6242KJ6T32" accepted.
2024-08-21 23:34:39.581 +03:00 [DBG] Connection id "0HN6242KJ6T32" started.
2024-08-21 23:34:39.608 +03:00 [DBG] Connection 0HN6242KJ6T32 established using the following protocol: "Tls13"
2024-08-21 23:34:39.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:34:39.617 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:34:39.619 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:34:40.161 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 548.4283ms
2024-08-21 23:34:46.789 +03:00 [DBG] Connection id "0HN6242KJ6T32" received FIN.
2024-08-21 23:34:46.795 +03:00 [DBG] Connection id "0HN6242KJ6T32" is closed. The last processed stream ID was 1.
2024-08-21 23:34:46.802 +03:00 [DBG] Connection id "0HN6242KJ6T32" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:34:46.818 +03:00 [DBG] Connection id "0HN6242KJ6T32" stopped.
2024-08-21 23:35:09.597 +03:00 [DBG] Connection id "0HN6242KJ6T33" accepted.
2024-08-21 23:35:09.615 +03:00 [DBG] Connection id "0HN6242KJ6T33" started.
2024-08-21 23:35:09.640 +03:00 [DBG] Connection 0HN6242KJ6T33 established using the following protocol: "Tls13"
2024-08-21 23:35:09.649 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-21 23:35:09.685 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:35:09.708 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:35:09.715 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:09.722 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:35:09.729 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:35:09.889 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:35:10.020 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:10.109 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:35:10.120 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:35:10.126 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:35:10.132 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:35:10.139 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:35:10.144 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:35:10.150 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:35:10.633 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:35:10.763 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:35:10.779 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:35:10.789 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:35:10.797 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:35:10.829 +03:00 [DBG] Connection id "0HN6242KJ6T33", Request id "0HN6242KJ6T33:00000001": started reading request body.
2024-08-21 23:35:10.837 +03:00 [DBG] Connection id "0HN6242KJ6T33", Request id "0HN6242KJ6T33:00000001": done reading request body.
2024-08-21 23:35:10.906 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:35:10.912 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:10.918 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:10.925 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:35:10.990 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:35:12.795 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:35:12.803 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:35:12.810 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:35:12.816 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:35:12.821 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:35:13.047 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.055 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.060 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:35:13.155 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:35:13.163 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:35:13.669 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:35:13.972 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:35:14.170 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:35:14.870 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:35:15.018 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:15.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (82ms).
2024-08-21 23:35:15.140 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:15.900 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:15.949 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:35:16.220 +03:00 [INF] Executed DbCommand (283ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:35:16.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.568 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.637 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:16.682 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:16.704 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.729 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.828 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:35:16.859 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:35:16.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:16.874 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:16.882 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.892 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.899 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:35:16.923 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:35:16.937 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:16.940 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.945 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:16.977 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:35:17.036 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:35:17.046 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:17.050 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:17.055 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.061 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.066 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.087 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.097 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:17.100 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.106 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.140 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:17.146 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:35:17.152 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.158 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.165 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.173 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:35:17.183 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:17.187 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.192 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:17.480 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:35:17.498 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:35:17.501 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:35:17.505 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:35:17.511 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:35:17.516 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:35:17.646 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 7477.568ms
2024-08-21 23:35:17.661 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:35:17.691 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:35:17.704 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 8055.9288ms
2024-08-21 23:35:26.848 +03:00 [DBG] Connection id "0HN6242KJ6T33" received FIN.
2024-08-21 23:35:26.857 +03:00 [DBG] Connection id "0HN6242KJ6T33" is closed. The last processed stream ID was 1.
2024-08-21 23:35:26.857 +03:00 [DBG] Connection id "0HN6242KJ6T33" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:35:26.891 +03:00 [DBG] Connection id "0HN6242KJ6T33" stopped.
2024-08-21 23:35:47.968 +03:00 [DBG] Connection id "0HN6242KJ6T34" accepted.
2024-08-21 23:35:47.973 +03:00 [DBG] Connection id "0HN6242KJ6T34" started.
2024-08-21 23:35:48.007 +03:00 [DBG] Connection 0HN6242KJ6T34 established using the following protocol: "Tls13"
2024-08-21 23:35:48.017 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 131
2024-08-21 23:35:48.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-21 23:35:48.040 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-21 23:35:48.047 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:48.051 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:35:48.054 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:35:48.257 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:35:48.265 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:35:48.287 +03:00 [DBG] Authorization was successful.
2024-08-21 23:35:48.292 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:48.305 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-21 23:35:48.313 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:35:48.319 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:35:48.322 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:35:48.325 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:35:48.332 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:35:48.339 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:35:48.822 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-21 23:35:48.830 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:35:48.836 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-21 23:35:48.843 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:35:48.860 +03:00 [DBG] Connection id "0HN6242KJ6T34", Request id "0HN6242KJ6T34:00000001": started reading request body.
2024-08-21 23:35:48.866 +03:00 [DBG] Connection id "0HN6242KJ6T34", Request id "0HN6242KJ6T34:00000001": done reading request body.
2024-08-21 23:35:48.899 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-21 23:35:48.905 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:48.910 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:48.915 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-21 23:35:48.928 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-21 23:35:49.040 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:35:49.063 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:35:49.120 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:35:49.156 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:35:49.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:49.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:49.172 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.176 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.184 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:35:49.208 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:35:49.249 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.306 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.370 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:49.373 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.380 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.494 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:49.581 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:35:49.591 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:35:49.668 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:35:49.723 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.729 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:49.741 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:35:49.774 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:35:49.904 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:35:49.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:35:49.918 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:35:49.937 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-21 23:35:49.997 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:35:50.022 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:35:50.043 +03:00 [DBG] Committing transaction.
2024-08-21 23:35:50.062 +03:00 [DBG] Committed transaction.
2024-08-21 23:35:50.075 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:50.080 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:35:50.093 +03:00 [DBG] Disposing transaction.
2024-08-21 23:35:50.124 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:35:50.143 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-21 23:35:50.152 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:35:50.157 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:35:50.161 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:35:50.167 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:35:50.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:35:50.211 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-21 23:35:50.218 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-21 23:35:50.223 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:35:50.226 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:35:50.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:35:50.232 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:35:50.250 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 1911.2532ms
2024-08-21 23:35:50.254 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-21 23:35:50.262 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:35:50.266 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 131 - 200 - application/json;+charset=utf-8 2249.6226ms
2024-08-21 23:35:56.887 +03:00 [DBG] Connection id "0HN6242KJ6T34" received FIN.
2024-08-21 23:35:56.891 +03:00 [DBG] Connection id "0HN6242KJ6T34" is closed. The last processed stream ID was 1.
2024-08-21 23:35:56.897 +03:00 [DBG] Connection id "0HN6242KJ6T34" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:35:56.918 +03:00 [DBG] Connection id "0HN6242KJ6T34" stopped.
2024-08-21 23:49:25.720 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:49:26.218 +03:00 [DBG] Hosting starting
2024-08-21 23:49:26.331 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:49:26.341 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:49:26.386 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:49:26.390 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:49:26.418 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:49:26.444 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:49:26.446 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:49:26.479 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:49:26.492 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:49:26.509 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:49:26.515 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:49:26.538 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:49:26.554 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:49:26.572 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:49:26.577 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:49:27.153 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:49:27.306 +03:00 [DBG] Connection id "0HN624AVJV40C" received FIN.
2024-08-21 23:49:27.339 +03:00 [DBG] Connection id "0HN624AVJV40C" accepted.
2024-08-21 23:49:27.339 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:49:27.345 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:49:27.345 +03:00 [DBG] Connection id "0HN624AVJV40C" started.
2024-08-21 23:49:27.347 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:49:27.352 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:49:27.356 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:49:27.359 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:49:27.361 +03:00 [INF] Hosting environment: Development
2024-08-21 23:49:27.365 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:49:27.368 +03:00 [DBG] Hosting started
2024-08-21 23:49:27.421 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:49:27.606 +03:00 [DBG] Connection id "0HN624AVJV40C" stopped.
2024-08-21 23:49:27.617 +03:00 [DBG] Connection id "0HN624AVJV40C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:29.313 +03:00 [DBG] Connection id "0HN624AVJV40D" accepted.
2024-08-21 23:49:29.321 +03:00 [DBG] Connection id "0HN624AVJV40D" started.
2024-08-21 23:49:29.463 +03:00 [DBG] Connection 0HN624AVJV40D established using the following protocol: "Tls13"
2024-08-21 23:49:29.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:49:30.114 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:49:30.250 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:49:30.255 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:49:30.967 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:49:31.042 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:49:31.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1418.9810ms
2024-08-21 23:49:31.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:49:31.125 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:49:31.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.4419ms
2024-08-21 23:49:31.284 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 158.3536ms
2024-08-21 23:49:33.756 +03:00 [DBG] Connection id "0HN624AVJV40D" received FIN.
2024-08-21 23:49:33.781 +03:00 [DBG] Connection id "0HN624AVJV40D" is closed. The last processed stream ID was 5.
2024-08-21 23:49:33.788 +03:00 [DBG] Connection id "0HN624AVJV40D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:33.793 +03:00 [DBG] Connection id "0HN624AVJV40D" stopped.
2024-08-21 23:49:34.459 +03:00 [DBG] Connection id "0HN624AVJV40E" accepted.
2024-08-21 23:49:34.464 +03:00 [DBG] Connection id "0HN624AVJV40E" started.
2024-08-21 23:49:34.477 +03:00 [DBG] Connection 0HN624AVJV40E established using the following protocol: "Tls13"
2024-08-21 23:49:34.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:49:34.490 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:49:34.493 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:49:35.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 680.7835ms
2024-08-21 23:49:38.155 +03:00 [DBG] Connection id "0HN624AVJV40E" received FIN.
2024-08-21 23:49:38.159 +03:00 [DBG] Connection id "0HN624AVJV40E" is closed. The last processed stream ID was 1.
2024-08-21 23:49:38.165 +03:00 [DBG] Connection id "0HN624AVJV40E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:38.186 +03:00 [DBG] Connection id "0HN624AVJV40E" stopped.
2024-08-21 23:49:45.470 +03:00 [DBG] Connection id "0HN624AVJV40F" accepted.
2024-08-21 23:49:45.474 +03:00 [DBG] Connection id "0HN624AVJV40F" started.
2024-08-21 23:49:45.486 +03:00 [DBG] Connection 0HN624AVJV40F established using the following protocol: "Tls13"
2024-08-21 23:49:45.491 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-21 23:49:45.523 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:49:45.550 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:49:45.556 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:45.568 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:49:45.573 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:49:45.773 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:49:45.785 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:45.923 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:49:45.934 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:49:45.939 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:49:45.945 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:49:45.953 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:49:45.959 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:49:45.970 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:49:46.583 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:49:46.772 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:49:46.803 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:49:46.816 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:49:46.824 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:49:46.863 +03:00 [DBG] Connection id "0HN624AVJV40F", Request id "0HN624AVJV40F:00000001": started reading request body.
2024-08-21 23:49:46.869 +03:00 [DBG] Connection id "0HN624AVJV40F", Request id "0HN624AVJV40F:00000001": done reading request body.
2024-08-21 23:49:46.955 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:49:46.962 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:46.968 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:46.973 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:49:47.083 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:49:49.932 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:49:49.938 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:49:49.943 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:49:49.948 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:49:49.953 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:49:50.259 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.265 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.271 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:49:50.416 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:49:50.422 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:49:51.053 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:49:51.439 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:49:51.741 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:49:52.803 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:49:53.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:53.171 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (154ms).
2024-08-21 23:49:53.242 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:54.309 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:54.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:49:54.693 +03:00 [INF] Executed DbCommand (342ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:49:54.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.140 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.211 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:49:55.260 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.295 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.339 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.473 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:49:55.523 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:49:55.533 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.537 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.542 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.553 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.559 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:49:55.591 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:49:55.609 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.612 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.617 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.662 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:49:55.727 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:49:55.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.741 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.746 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.752 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.758 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.783 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.795 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.798 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.804 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:49:55.865 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:49:55.870 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.874 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.877 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.895 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:49:55.903 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:49:55.905 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:55.910 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:49:56.372 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:49:56.386 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:49:56.389 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:49:56.392 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:49:56.397 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:49:56.401 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:49:56.548 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 10564.3304ms
2024-08-21 23:49:56.561 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:49:56.595 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:49:56.610 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 11118.2128ms
2024-08-21 23:49:58.182 +03:00 [DBG] Connection id "0HN624AVJV40F" received FIN.
2024-08-21 23:49:58.185 +03:00 [DBG] Connection id "0HN624AVJV40F" is closed. The last processed stream ID was 1.
2024-08-21 23:49:58.191 +03:00 [DBG] Connection id "0HN624AVJV40F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:49:58.213 +03:00 [DBG] Connection id "0HN624AVJV40F" stopped.
2024-08-21 23:50:56.298 +03:00 [DBG] Connection id "0HN624AVJV40G" accepted.
2024-08-21 23:50:56.310 +03:00 [DBG] Connection id "0HN624AVJV40G" started.
2024-08-21 23:50:56.337 +03:00 [DBG] Connection 0HN624AVJV40G established using the following protocol: "Tls13"
2024-08-21 23:50:56.346 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-21 23:50:56.389 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-21 23:50:56.393 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-21 23:50:56.398 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:50:56.402 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:50:56.404 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:50:56.709 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:50:56.716 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:50:56.720 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:50:56.731 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-21 23:50:56.736 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:50:56.740 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:50:56.745 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:50:56.751 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:50:56.756 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:50:56.760 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:50:57.496 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:50:57.504 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:50:57.510 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-21 23:50:57.520 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:50:57.551 +03:00 [DBG] Connection id "0HN624AVJV40G", Request id "0HN624AVJV40G:00000001": started reading request body.
2024-08-21 23:50:57.556 +03:00 [DBG] Connection id "0HN624AVJV40G", Request id "0HN624AVJV40G:00000001": done reading request body.
2024-08-21 23:50:57.612 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-21 23:50:57.616 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.621 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.625 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:50:57.642 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:50:57.834 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:50:57.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:57.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:50:57.855 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.861 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:50:57.894 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:50:57.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.907 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:57.913 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:57.915 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.918 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:57.955 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-21 23:50:58.036 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-21 23:50:58.074 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.080 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.083 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:50:58.088 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.092 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.100 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:58.131 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:58.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.268 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.359 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:58.362 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.367 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.387 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-21 23:50:58.429 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.445 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.450 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:50:58.457 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.461 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-21 23:50:58.490 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-21 23:50:58.499 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:58.503 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.508 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.528 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-21 23:50:58.538 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-21 23:50:58.544 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-21 23:50:58.551 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-21 23:50:58.675 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:50:58.706 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:58.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:50:58.714 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.720 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:58.725 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-21 23:50:58.760 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-21 23:50:58.896 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.942 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:58.977 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:59.055 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:50:59.060 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-21 23:50:59.098 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-21 23:50:59.136 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.141 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.145 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.150 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.159 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:50:59.163 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:50:59.168 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.173 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.177 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:59.194 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-21 23:50:59.202 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:50:59.206 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.209 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.372 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.491 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:50:59.578 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:50:59.591 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:50:59.747 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:50:59.842 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.848 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:50:59.863 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-21 23:50:59.912 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-21 23:51:00.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:51:00.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-21 23:51:00.165 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 450), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-21 23:51:00.208 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 450), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-21 23:51:00.287 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:51:00.323 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-21 23:51:00.343 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:51:00.350 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:51:00.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:51:00.361 +03:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p9, @p10);
2024-08-21 23:51:00.397 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p9, @p10);
2024-08-21 23:51:00.407 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:51:00.428 +03:00 [DBG] Committing transaction.
2024-08-21 23:51:00.446 +03:00 [DBG] Committed transaction.
2024-08-21 23:51:00.463 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:51:00.468 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:51:00.486 +03:00 [DBG] Disposing transaction.
2024-08-21 23:51:00.540 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:51:00.549 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:51:00.569 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-21 23:51:00.579 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-21 23:51:00.583 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-21 23:51:00.588 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-21 23:51:00.592 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-21 23:51:00.651 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:51:00.661 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:51:00.664 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:51:00.667 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:51:00.670 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:51:00.675 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:51:00.713 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3952.1995ms
2024-08-21 23:51:00.719 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:51:00.725 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:51:00.729 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4385.6293ms
2024-08-21 23:51:03.276 +03:00 [DBG] Connection id "0HN624AVJV40G" received FIN.
2024-08-21 23:51:03.280 +03:00 [DBG] Connection id "0HN624AVJV40G" is closed. The last processed stream ID was 1.
2024-08-21 23:51:03.285 +03:00 [DBG] Connection id "0HN624AVJV40G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:51:03.291 +03:00 [DBG] Connection id "0HN624AVJV40G" stopped.
2024-08-21 23:58:56.492 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-21 23:58:56.750 +03:00 [DBG] Hosting starting
2024-08-21 23:58:56.845 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-21 23:58:56.855 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-21 23:58:56.873 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-21 23:58:56.878 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-21 23:58:56.894 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-21 23:58:56.911 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-21 23:58:56.915 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-21 23:58:56.934 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-21 23:58:56.945 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:58:56.957 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-21 23:58:56.963 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-21 23:58:56.978 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-21 23:58:56.992 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-21 23:58:57.007 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-21 23:58:57.014 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-21 23:58:57.416 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-21 23:58:57.643 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-21 23:58:57.646 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-21 23:58:57.650 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-21 23:58:57.653 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-21 23:58:57.656 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-21 23:58:57.660 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-21 23:58:57.663 +03:00 [INF] Hosting environment: Development
2024-08-21 23:58:57.666 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-21 23:58:57.670 +03:00 [DBG] Hosting started
2024-08-21 23:58:58.036 +03:00 [DBG] Connection id "0HN624G9MQ07P" accepted.
2024-08-21 23:58:58.036 +03:00 [DBG] Connection id "0HN624G9MQ07Q" accepted.
2024-08-21 23:58:58.044 +03:00 [DBG] Connection id "0HN624G9MQ07P" started.
2024-08-21 23:58:58.044 +03:00 [DBG] Connection id "0HN624G9MQ07Q" started.
2024-08-21 23:58:58.050 +03:00 [DBG] Connection id "0HN624G9MQ07P" received FIN.
2024-08-21 23:58:58.050 +03:00 [DBG] Connection id "0HN624G9MQ07Q" received FIN.
2024-08-21 23:58:58.089 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:58:58.089 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-21 23:58:58.206 +03:00 [DBG] Connection id "0HN624G9MQ07P" stopped.
2024-08-21 23:58:58.206 +03:00 [DBG] Connection id "0HN624G9MQ07Q" stopped.
2024-08-21 23:58:58.217 +03:00 [DBG] Connection id "0HN624G9MQ07P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:58:58.217 +03:00 [DBG] Connection id "0HN624G9MQ07Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:00.948 +03:00 [DBG] Connection id "0HN624G9MQ07R" accepted.
2024-08-21 23:59:00.971 +03:00 [DBG] Connection id "0HN624G9MQ07R" started.
2024-08-21 23:59:01.120 +03:00 [DBG] Connection 0HN624G9MQ07R established using the following protocol: "Tls13"
2024-08-21 23:59:01.351 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-21 23:59:01.833 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-21 23:59:02.001 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-21 23:59:02.006 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:59:02.783 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-21 23:59:02.860 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-21 23:59:02.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1547.3167ms
2024-08-21 23:59:02.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-21 23:59:02.933 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-21 23:59:02.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 25.1315ms
2024-08-21 23:59:03.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 219.3973ms
2024-08-21 23:59:06.105 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-21 23:59:06.109 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-21 23:59:06.113 +03:00 [DBG] Request did not match any endpoints
2024-08-21 23:59:06.825 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 719.7935ms
2024-08-21 23:59:08.911 +03:00 [DBG] Connection id "0HN624G9MQ07R" received FIN.
2024-08-21 23:59:08.932 +03:00 [DBG] Connection id "0HN624G9MQ07R" is closed. The last processed stream ID was 7.
2024-08-21 23:59:08.940 +03:00 [DBG] Connection id "0HN624G9MQ07R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:08.959 +03:00 [DBG] Connection id "0HN624G9MQ07R" stopped.
2024-08-21 23:59:22.529 +03:00 [DBG] Connection id "0HN624G9MQ07S" accepted.
2024-08-21 23:59:22.541 +03:00 [DBG] Connection id "0HN624G9MQ07S" started.
2024-08-21 23:59:22.568 +03:00 [DBG] Connection 0HN624G9MQ07S established using the following protocol: "Tls13"
2024-08-21 23:59:22.575 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-21 23:59:22.598 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-21 23:59:22.621 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-21 23:59:22.627 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:22.635 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:59:22.640 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:59:22.813 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-21 23:59:22.823 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:22.939 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-21 23:59:22.950 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:59:22.957 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:59:22.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-21 23:59:22.972 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:59:22.978 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:59:22.985 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:59:23.426 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-21 23:59:23.587 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-21 23:59:23.609 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:59:23.621 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-21 23:59:23.629 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:59:23.665 +03:00 [DBG] Connection id "0HN624G9MQ07S", Request id "0HN624G9MQ07S:00000001": started reading request body.
2024-08-21 23:59:23.671 +03:00 [DBG] Connection id "0HN624G9MQ07S", Request id "0HN624G9MQ07S:00000001": done reading request body.
2024-08-21 23:59:23.744 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-21 23:59:23.750 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:23.755 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:23.759 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-21 23:59:23.837 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-21 23:59:26.312 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-21 23:59:26.319 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-21 23:59:26.325 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-21 23:59:26.331 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-21 23:59:26.336 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-21 23:59:26.611 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.617 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.623 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-21 23:59:26.764 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:26.770 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:26.775 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-21 23:59:27.346 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-21 23:59:27.643 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-21 23:59:27.952 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-21 23:59:28.955 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-21 23:59:29.161 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:29.294 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (129ms).
2024-08-21 23:59:29.371 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:30.300 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:30.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:59:30.647 +03:00 [INF] Executed DbCommand (308ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-21 23:59:30.876 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.166 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-21 23:59:31.213 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.240 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.273 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.385 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-21 23:59:31.422 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:59:31.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:59:31.441 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.450 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.454 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:59:31.496 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-21 23:59:31.511 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.514 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.517 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.570 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-21 23:59:31.636 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-21 23:59:31.648 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.651 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-21 23:59:31.655 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.659 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.664 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.707 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.718 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.721 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.726 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.773 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-21 23:59:31.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-21 23:59:31.783 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.787 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.792 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.808 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-21 23:59:31.817 +03:00 [DBG] A data reader was disposed.
2024-08-21 23:59:31.821 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:31.826 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-21 23:59:32.233 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-21 23:59:32.253 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-21 23:59:32.256 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-21 23:59:32.258 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-21 23:59:32.263 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-21 23:59:32.269 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-21 23:59:32.411 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 9413.9787ms
2024-08-21 23:59:32.420 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-21 23:59:32.449 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-21 23:59:32.466 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 9890.9319ms
2024-08-21 23:59:38.952 +03:00 [DBG] Connection id "0HN624G9MQ07S" received FIN.
2024-08-21 23:59:38.957 +03:00 [DBG] Connection id "0HN624G9MQ07S" is closed. The last processed stream ID was 1.
2024-08-21 23:59:38.962 +03:00 [DBG] Connection id "0HN624G9MQ07S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-21 23:59:38.967 +03:00 [DBG] Connection id "0HN624G9MQ07S" stopped.
2024-08-21 23:59:58.496 +03:00 [DBG] Connection id "0HN624G9MQ07T" accepted.
2024-08-21 23:59:58.499 +03:00 [DBG] Connection id "0HN624G9MQ07T" started.
2024-08-21 23:59:58.515 +03:00 [DBG] Connection 0HN624G9MQ07T established using the following protocol: "Tls13"
2024-08-21 23:59:58.522 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-21 23:59:58.552 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-21 23:59:58.557 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-21 23:59:58.566 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:59:58.570 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-21 23:59:58.575 +03:00 [INF] No CORS policy found for the specified request.
2024-08-21 23:59:58.889 +03:00 [DBG] Successfully validated the token.
2024-08-21 23:59:58.896 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-21 23:59:58.903 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-21 23:59:58.915 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-21 23:59:58.923 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-21 23:59:58.929 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-21 23:59:58.935 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-21 23:59:58.942 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-21 23:59:58.946 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-21 23:59:58.953 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:59:59.713 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-21 23:59:59.721 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:59:59.726 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-21 23:59:59.735 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-21 23:59:59.767 +03:00 [DBG] Connection id "0HN624G9MQ07T", Request id "0HN624G9MQ07T:00000001": started reading request body.
2024-08-21 23:59:59.773 +03:00 [DBG] Connection id "0HN624G9MQ07T", Request id "0HN624G9MQ07T:00000001": done reading request body.
2024-08-21 23:59:59.822 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-21 23:59:59.825 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:59:59.830 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-21 23:59:59.835 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-21 23:59:59.855 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:00:00.008 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:00:00.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-22 00:00:00.032 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.038 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:00:00.090 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:00:00.102 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.106 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.111 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.118 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.122 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.126 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.162 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 00:00:00.218 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 00:00:00.246 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.256 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.265 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.272 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.283 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.320 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.395 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.467 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:00.544 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.548 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.554 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.576 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.585 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.590 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.594 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.614 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:00.623 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.625 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.629 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.642 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 00:00:00.687 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.715 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.720 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.724 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:00:00.759 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:00:00.769 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:00.772 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.777 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.793 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 00:00:00.801 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 00:00:00.808 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 00:00:00.814 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 00:00:00.908 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:00:00.937 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:00.940 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:00.944 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.948 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:00.953 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:00:00.989 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:00:01.121 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.171 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.212 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.268 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:01.272 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:01.277 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:00:01.308 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:00:01.340 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.344 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.347 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.353 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.361 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:01.365 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:01.371 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.377 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.382 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:01.414 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:00:01.423 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:01.425 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.429 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:01.575 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.761 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:01.788 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:00:01.800 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:00:01.953 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:00:02.024 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.031 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.041 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 00:00:02.088 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 00:00:02.274 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:02.278 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:00:02.309 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:00:02.364 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:00:02.454 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:00:02.485 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:00:02.510 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:02.519 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:00:02.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:00:02.528 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:00:02.544 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:00:02.553 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:00:02.577 +03:00 [DBG] Committing transaction.
2024-08-22 00:00:02.598 +03:00 [DBG] Committed transaction.
2024-08-22 00:00:02.622 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.627 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:00:02.649 +03:00 [DBG] Disposing transaction.
2024-08-22 00:00:02.692 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:02.701 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:00:02.720 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 00:00:02.727 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:00:02.731 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:00:02.737 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:00:02.740 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 00:00:02.793 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:00:02.803 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:00:02.806 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:00:02.809 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:00:02.811 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:00:02.818 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:00:02.884 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3931.4822ms
2024-08-22 00:00:02.889 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:00:02.894 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:00:02.899 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4377.2278ms
2024-08-22 00:00:08.980 +03:00 [DBG] Connection id "0HN624G9MQ07T" received FIN.
2024-08-22 00:00:08.984 +03:00 [DBG] Connection id "0HN624G9MQ07T" is closed. The last processed stream ID was 1.
2024-08-22 00:00:08.989 +03:00 [DBG] Connection id "0HN624G9MQ07T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:00:09.002 +03:00 [DBG] Connection id "0HN624G9MQ07T" stopped.
2024-08-22 00:02:20.040 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 00:02:20.277 +03:00 [DBG] Hosting starting
2024-08-22 00:02:20.345 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 00:02:20.354 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 00:02:20.368 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 00:02:20.373 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 00:02:20.391 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 00:02:20.402 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 00:02:20.406 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 00:02:20.427 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 00:02:20.437 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 00:02:20.448 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 00:02:20.453 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 00:02:20.471 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 00:02:20.488 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 00:02:20.504 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 00:02:20.509 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 00:02:20.840 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 00:02:20.956 +03:00 [DBG] Connection id "0HN624I662EQK" received FIN.
2024-08-22 00:02:20.984 +03:00 [DBG] Connection id "0HN624I662EQK" accepted.
2024-08-22 00:02:20.985 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 00:02:20.991 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 00:02:20.991 +03:00 [DBG] Connection id "0HN624I662EQK" started.
2024-08-22 00:02:20.994 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 00:02:21.000 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 00:02:21.002 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 00:02:21.005 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 00:02:21.007 +03:00 [INF] Hosting environment: Development
2024-08-22 00:02:21.011 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 00:02:21.015 +03:00 [DBG] Hosting started
2024-08-22 00:02:21.038 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 00:02:21.134 +03:00 [DBG] Connection id "0HN624I662EQK" stopped.
2024-08-22 00:02:21.146 +03:00 [DBG] Connection id "0HN624I662EQK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:21.320 +03:00 [DBG] Connection id "0HN624I662EQL" accepted.
2024-08-22 00:02:21.338 +03:00 [DBG] Connection id "0HN624I662EQL" started.
2024-08-22 00:02:21.467 +03:00 [DBG] Connection 0HN624I662EQL established using the following protocol: "Tls13"
2024-08-22 00:02:21.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 00:02:21.962 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 00:02:22.062 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 00:02:22.065 +03:00 [DBG] Request did not match any endpoints
2024-08-22 00:02:22.687 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 00:02:22.754 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 00:02:22.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1155.9649ms
2024-08-22 00:02:22.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 00:02:22.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.3223ms
2024-08-22 00:02:22.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 00:02:22.982 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 162.2077ms
2024-08-22 00:02:24.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 00:02:24.984 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 00:02:24.989 +03:00 [DBG] Request did not match any endpoints
2024-08-22 00:02:25.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 729.6820ms
2024-08-22 00:02:29.160 +03:00 [DBG] Connection id "0HN624I662EQL" received FIN.
2024-08-22 00:02:29.180 +03:00 [DBG] Connection id "0HN624I662EQL" is closed. The last processed stream ID was 7.
2024-08-22 00:02:29.186 +03:00 [DBG] Connection id "0HN624I662EQL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:29.210 +03:00 [DBG] Connection id "0HN624I662EQL" stopped.
2024-08-22 00:02:44.692 +03:00 [DBG] Connection id "0HN624I662EQM" accepted.
2024-08-22 00:02:44.703 +03:00 [DBG] Connection id "0HN624I662EQM" started.
2024-08-22 00:02:44.801 +03:00 [DBG] Connection 0HN624I662EQM established using the following protocol: "Tls13"
2024-08-22 00:02:44.810 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 00:02:44.836 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 00:02:44.857 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 00:02:44.862 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:44.869 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 00:02:44.874 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 00:02:45.030 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 00:02:45.045 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:45.166 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 00:02:45.177 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 00:02:45.183 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 00:02:45.191 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 00:02:45.199 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 00:02:45.206 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 00:02:45.214 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 00:02:45.737 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 00:02:45.872 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 00:02:45.891 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 00:02:45.902 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 00:02:45.910 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 00:02:45.953 +03:00 [DBG] Connection id "0HN624I662EQM", Request id "0HN624I662EQM:00000001": started reading request body.
2024-08-22 00:02:45.961 +03:00 [DBG] Connection id "0HN624I662EQM", Request id "0HN624I662EQM:00000001": done reading request body.
2024-08-22 00:02:46.043 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 00:02:46.049 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:46.053 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:46.056 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 00:02:46.140 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 00:02:48.638 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 00:02:48.643 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 00:02:48.648 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 00:02:48.653 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 00:02:48.658 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 00:02:48.935 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:48.941 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:48.945 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 00:02:49.075 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.082 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.087 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 00:02:49.760 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:02:50.104 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 00:02:50.441 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 00:02:51.621 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:02:51.868 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:51.975 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (108ms).
2024-08-22 00:02:52.034 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:52.854 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:52.917 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:02:53.244 +03:00 [INF] Executed DbCommand (353ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:02:53.479 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.706 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:02:53.853 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:53.887 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:53.929 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.057 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 00:02:54.105 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 00:02:54.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.123 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.133 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 00:02:54.160 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 00:02:54.172 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.175 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.180 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.222 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 00:02:54.290 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 00:02:54.302 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.306 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.311 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.316 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.321 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.340 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.349 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.353 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.358 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.400 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:02:54.404 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:02:54.409 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.414 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.418 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.432 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 00:02:54.441 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:02:54.443 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.448 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:02:54.890 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:02:54.905 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:02:54.908 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:02:54.911 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:02:54.916 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:02:54.921 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:02:55.058 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 9831.4674ms
2024-08-22 00:02:55.069 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 00:02:55.105 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:02:55.121 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 10311.1922ms
2024-08-22 00:02:59.179 +03:00 [DBG] Connection id "0HN624I662EQM" received FIN.
2024-08-22 00:02:59.184 +03:00 [DBG] Connection id "0HN624I662EQM" is closed. The last processed stream ID was 1.
2024-08-22 00:02:59.189 +03:00 [DBG] Connection id "0HN624I662EQM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:02:59.195 +03:00 [DBG] Connection id "0HN624I662EQM" stopped.
2024-08-22 00:03:27.624 +03:00 [DBG] Connection id "0HN624I662EQN" accepted.
2024-08-22 00:03:27.637 +03:00 [DBG] Connection id "0HN624I662EQN" started.
2024-08-22 00:03:27.677 +03:00 [DBG] Connection 0HN624I662EQN established using the following protocol: "Tls13"
2024-08-22 00:03:27.687 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-22 00:03:27.711 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-22 00:03:27.715 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-22 00:03:27.722 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:27.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 00:03:27.729 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 00:03:28.005 +03:00 [DBG] Successfully validated the token.
2024-08-22 00:03:28.012 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 00:03:28.018 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:28.030 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 00:03:28.037 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 00:03:28.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 00:03:28.047 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 00:03:28.055 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 00:03:28.060 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 00:03:28.065 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 00:03:28.684 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 00:03:28.690 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 00:03:28.694 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-22 00:03:28.699 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 00:03:28.722 +03:00 [DBG] Connection id "0HN624I662EQN", Request id "0HN624I662EQN:00000001": started reading request body.
2024-08-22 00:03:28.727 +03:00 [DBG] Connection id "0HN624I662EQN", Request id "0HN624I662EQN:00000001": done reading request body.
2024-08-22 00:03:28.778 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-22 00:03:28.783 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.789 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.794 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 00:03:28.820 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 00:03:28.974 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 00:03:28.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:28.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:28.996 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.001 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:03:29.035 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 00:03:29.045 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.051 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.057 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.062 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.065 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.070 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.107 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 00:03:29.166 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 00:03:29.199 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.209 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.212 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.216 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.222 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.230 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.255 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.372 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:29.448 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.451 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.456 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.475 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:29.484 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.490 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.496 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.516 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:29.524 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.526 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.531 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.545 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 00:03:29.578 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.595 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.599 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.607 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.612 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.617 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:03:29.642 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 00:03:29.652 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:29.656 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.661 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.675 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 00:03:29.686 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 00:03:29.693 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 00:03:29.699 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 00:03:29.792 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 00:03:29.821 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:29.825 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:29.830 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.836 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:29.840 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:03:29.869 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 00:03:30.001 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.057 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.177 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:30.181 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 00:03:30.188 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:03:30.227 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 00:03:30.273 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.277 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.280 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.285 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.292 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:30.295 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:30.300 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.305 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:30.325 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 00:03:30.333 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:30.337 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.341 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.484 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.628 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.674 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:30.707 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:03:30.720 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:03:30.876 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:03:30.947 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.953 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:30.968 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 00:03:31.013 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 00:03:31.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:31.210 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:31.229 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:03:31.256 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 00:03:31.330 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:03:31.359 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 00:03:31.374 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:31.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 00:03:31.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 00:03:31.387 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:03:31.403 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 00:03:31.410 +03:00 [DBG] A data reader was disposed.
2024-08-22 00:03:31.439 +03:00 [DBG] Committing transaction.
2024-08-22 00:03:31.462 +03:00 [DBG] Committed transaction.
2024-08-22 00:03:31.480 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:31.485 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 00:03:31.503 +03:00 [DBG] Disposing transaction.
2024-08-22 00:03:31.548 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:31.558 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 00:03:31.576 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 00:03:31.584 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 00:03:31.588 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 00:03:31.592 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 00:03:31.595 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 00:03:31.635 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 00:03:31.643 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 00:03:31.645 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 00:03:31.648 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 00:03:31.651 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 00:03:31.655 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 00:03:31.719 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3653.1056ms
2024-08-22 00:03:31.724 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 00:03:31.728 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 00:03:31.732 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 4046.1585ms
2024-08-22 00:03:39.233 +03:00 [DBG] Connection id "0HN624I662EQN" received FIN.
2024-08-22 00:03:39.240 +03:00 [DBG] Connection id "0HN624I662EQN" is closed. The last processed stream ID was 1.
2024-08-22 00:03:39.247 +03:00 [DBG] Connection id "0HN624I662EQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 00:03:39.263 +03:00 [DBG] Connection id "0HN624I662EQN" stopped.
2024-08-22 10:36:10.334 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 10:36:10.591 +03:00 [DBG] Hosting starting
2024-08-22 10:36:10.759 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 10:36:10.766 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 10:36:10.830 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 10:36:10.853 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 10:36:10.896 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 10:36:10.912 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 10:36:10.915 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 10:36:10.932 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 10:36:10.941 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:36:10.950 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 10:36:10.953 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:36:10.966 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 10:36:10.976 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 10:36:10.985 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 10:36:10.989 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 10:36:11.770 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 10:36:11.897 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 10:36:11.900 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 10:36:11.903 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 10:36:11.904 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 10:36:11.906 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 10:36:11.910 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 10:36:11.913 +03:00 [INF] Hosting environment: Development
2024-08-22 10:36:11.915 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 10:36:11.917 +03:00 [DBG] Hosting started
2024-08-22 10:36:12.040 +03:00 [DBG] Connection id "0HN62FKCALS52" accepted.
2024-08-22 10:36:12.047 +03:00 [DBG] Connection id "0HN62FKCALS52" started.
2024-08-22 10:36:12.052 +03:00 [DBG] Connection id "0HN62FKCALS53" accepted.
2024-08-22 10:36:12.054 +03:00 [DBG] Connection id "0HN62FKCALS53" started.
2024-08-22 10:36:14.050 +03:00 [DBG] Connection id "0HN62FKCALS54" accepted.
2024-08-22 10:36:14.098 +03:00 [DBG] Connection id "0HN62FKCALS54" started.
2024-08-22 10:36:14.335 +03:00 [DBG] Connection 0HN62FKCALS54 established using the following protocol: "Tls13"
2024-08-22 10:36:14.967 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 10:36:15.828 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 10:36:15.969 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 10:36:15.974 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:36:16.581 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 10:36:16.624 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 10:36:16.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 10:36:16.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1704.3255ms
2024-08-22 10:36:16.673 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 17.7835ms
2024-08-22 10:36:16.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 10:36:16.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 242.0811ms
2024-08-22 10:36:20.108 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 10:36:20.113 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 10:36:20.116 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:36:20.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 539.8343ms
2024-08-22 10:36:20.679 +03:00 [DBG] Connection id "0HN62FKCALS54" received FIN.
2024-08-22 10:36:20.694 +03:00 [DBG] Connection id "0HN62FKCALS54" is closed. The last processed stream ID was 7.
2024-08-22 10:36:20.699 +03:00 [DBG] Connection id "0HN62FKCALS54" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:20.714 +03:00 [DBG] Connection id "0HN62FKCALS54" stopped.
2024-08-22 10:36:22.088 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 10:36:22.088 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 10:36:22.091 +03:00 [DBG] Connection id "0HN62FKCALS52" stopped.
2024-08-22 10:36:22.094 +03:00 [DBG] Connection id "0HN62FKCALS53" stopped.
2024-08-22 10:36:22.095 +03:00 [DBG] Connection id "0HN62FKCALS52" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:22.097 +03:00 [DBG] Connection id "0HN62FKCALS53" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:47.391 +03:00 [DBG] Connection id "0HN62FKCALS55" accepted.
2024-08-22 10:36:47.393 +03:00 [DBG] Connection id "0HN62FKCALS55" started.
2024-08-22 10:36:47.416 +03:00 [DBG] Connection 0HN62FKCALS55 established using the following protocol: "Tls13"
2024-08-22 10:36:47.421 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:36:47.483 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:36:47.497 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:36:47.502 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:47.507 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:36:47.513 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:36:47.661 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 10:36:47.670 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:47.753 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:36:47.760 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:36:47.765 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:36:47.768 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:36:47.770 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:36:47.771 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:36:47.776 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:36:48.290 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 10:36:48.380 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:36:48.399 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:36:48.403 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:36:48.407 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:36:48.424 +03:00 [DBG] Connection id "0HN62FKCALS55", Request id "0HN62FKCALS55:00000001": started reading request body.
2024-08-22 10:36:48.428 +03:00 [DBG] Connection id "0HN62FKCALS55", Request id "0HN62FKCALS55:00000001": done reading request body.
2024-08-22 10:36:48.455 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:36:48.458 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:48.463 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:48.465 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:36:48.563 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:36:49.769 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 10:36:49.775 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 10:36:49.779 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 10:36:49.781 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 10:36:49.782 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 10:36:49.918 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:49.924 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:49.926 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:36:50.001 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.005 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.010 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:36:50.364 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:36:51.089 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 10:36:51.284 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 10:36:51.968 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:36:52.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:52.239 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (133ms).
2024-08-22 10:36:52.277 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.093 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.128 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:36:53.326 +03:00 [INF] Executed DbCommand (210ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:36:53.468 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.574 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.617 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:36:53.644 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:53.662 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.688 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.816 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 10:36:53.845 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:36:53.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:53.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:53.857 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.863 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.866 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:36:53.893 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:36:53.900 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:53.902 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.904 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.930 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 10:36:53.978 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:36:53.984 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:53.987 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:53.991 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.993 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:53.998 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.031 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.037 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:54.039 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.043 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.081 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:36:54.084 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:36:54.089 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.093 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.097 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.112 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:36:54.115 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:36:54.117 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.118 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:36:54.365 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:36:54.378 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:36:54.380 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:36:54.381 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:36:54.383 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:36:54.385 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:36:54.468 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 6679.8702ms
2024-08-22 10:36:54.476 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:36:54.502 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:36:54.516 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 7095.3238ms
2024-08-22 10:36:55.683 +03:00 [DBG] Connection id "0HN62FKCALS55" received FIN.
2024-08-22 10:36:55.688 +03:00 [DBG] Connection id "0HN62FKCALS55" is closed. The last processed stream ID was 1.
2024-08-22 10:36:55.697 +03:00 [DBG] Connection id "0HN62FKCALS55" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:36:55.705 +03:00 [DBG] Connection id "0HN62FKCALS55" stopped.
2024-08-22 10:37:36.120 +03:00 [DBG] Connection id "0HN62FKCALS56" accepted.
2024-08-22 10:37:36.128 +03:00 [DBG] Connection id "0HN62FKCALS56" started.
2024-08-22 10:37:36.142 +03:00 [DBG] Connection 0HN62FKCALS56 established using the following protocol: "Tls13"
2024-08-22 10:37:36.153 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163
2024-08-22 10:37:36.217 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-22 10:37:36.219 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-22 10:37:36.223 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:36.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:37:36.226 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:37:36.371 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:37:36.376 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:37:36.381 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:36.390 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:37:36.395 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:37:36.398 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:37:36.401 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:37:36.404 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:37:36.407 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:37:36.409 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:37:36.750 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:37:36.755 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 10:37:36.760 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-22 10:37:36.764 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:37:36.776 +03:00 [DBG] Connection id "0HN62FKCALS56", Request id "0HN62FKCALS56:00000001": started reading request body.
2024-08-22 10:37:36.780 +03:00 [DBG] Connection id "0HN62FKCALS56", Request id "0HN62FKCALS56:00000001": done reading request body.
2024-08-22 10:37:36.801 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-22 10:37:36.804 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.809 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.810 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-22 10:37:36.816 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-22 10:37:36.897 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:37:36.905 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:36.909 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:37:36.911 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.914 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:37:36.932 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:37:36.938 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.941 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.945 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:36.948 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:36.949 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.951 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:36.973 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-22 10:37:37.006 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-22 10:37:37.021 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.032 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.033 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.058 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.098 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.149 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.183 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.185 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.188 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.199 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.201 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.202 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.204 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.214 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.219 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.220 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.225 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.230 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-22 10:37:37.248 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.256 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:37:37.262 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.264 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.265 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 10:37:37.275 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-22 10:37:37.283 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.296 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.298 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.300 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.308 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 10:37:37.314 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 10:37:37.317 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 10:37:37.322 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 10:37:37.373 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:37:37.391 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:37:37.395 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.397 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.399 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 10:37:37.416 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 10:37:37.471 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.506 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.565 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.567 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 10:37:37.584 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 10:37:37.608 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.611 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.613 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.616 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.620 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:37.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:37.625 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.630 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.634 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.645 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-22 10:37:37.650 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:37.651 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.653 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:37.744 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.809 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.833 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:37.858 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 10:37:37.866 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 10:37:37.960 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 10:37:38.002 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.006 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.015 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-22 10:37:38.041 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-22 10:37:38.127 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:38.129 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:37:38.147 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 10:37:38.191 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-22 10:37:38.229 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 10:37:38.252 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-22 10:37:38.262 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:38.265 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:37:38.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:37:38.269 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 10:37:38.281 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-22 10:37:38.285 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:37:38.297 +03:00 [DBG] Committing transaction.
2024-08-22 10:37:38.308 +03:00 [DBG] Committed transaction.
2024-08-22 10:37:38.316 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.319 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:37:38.328 +03:00 [DBG] Disposing transaction.
2024-08-22 10:37:38.347 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:38.351 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:37:38.361 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-22 10:37:38.364 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-22 10:37:38.365 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-22 10:37:38.367 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-22 10:37:38.367 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-22 10:37:38.385 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:37:38.392 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:37:38.394 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:37:38.395 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:37:38.396 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:37:38.399 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:37:38.427 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 2017.801ms
2024-08-22 10:37:38.429 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-22 10:37:38.432 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:37:38.434 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 163 - 200 - application/json;+charset=utf-8 2281.0651ms
2024-08-22 10:37:45.694 +03:00 [DBG] Connection id "0HN62FKCALS56" received FIN.
2024-08-22 10:37:45.698 +03:00 [DBG] Connection id "0HN62FKCALS56" is closed. The last processed stream ID was 1.
2024-08-22 10:37:45.703 +03:00 [DBG] Connection id "0HN62FKCALS56" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:37:45.707 +03:00 [DBG] Connection id "0HN62FKCALS56" stopped.
2024-08-22 10:41:07.804 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 10:41:07.988 +03:00 [DBG] Hosting starting
2024-08-22 10:41:08.053 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 10:41:08.059 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 10:41:08.094 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 10:41:08.098 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 10:41:08.114 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 10:41:08.132 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 10:41:08.134 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 10:41:08.147 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 10:41:08.154 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:41:08.164 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 10:41:08.167 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 10:41:08.178 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 10:41:08.187 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 10:41:08.195 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 10:41:08.199 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 10:41:08.518 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 10:41:08.616 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 10:41:08.619 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 10:41:08.622 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 10:41:08.622 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 10:41:08.623 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 10:41:08.625 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 10:41:08.626 +03:00 [INF] Hosting environment: Development
2024-08-22 10:41:08.627 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 10:41:08.627 +03:00 [DBG] Hosting started
2024-08-22 10:41:08.661 +03:00 [DBG] Connection id "0HN62FN4NGIB8" accepted.
2024-08-22 10:41:08.661 +03:00 [DBG] Connection id "0HN62FN4NGIB9" accepted.
2024-08-22 10:41:08.667 +03:00 [DBG] Connection id "0HN62FN4NGIB9" started.
2024-08-22 10:41:08.667 +03:00 [DBG] Connection id "0HN62FN4NGIB8" started.
2024-08-22 10:41:08.680 +03:00 [DBG] Connection id "0HN62FN4NGIB9" received FIN.
2024-08-22 10:41:08.680 +03:00 [DBG] Connection id "0HN62FN4NGIB8" received FIN.
2024-08-22 10:41:08.713 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 10:41:08.714 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 10:41:09.332 +03:00 [DBG] Connection id "0HN62FN4NGIBA" accepted.
2024-08-22 10:41:09.447 +03:00 [DBG] Connection id "0HN62FN4NGIB9" stopped.
2024-08-22 10:41:09.448 +03:00 [DBG] Connection id "0HN62FN4NGIB8" stopped.
2024-08-22 10:41:09.449 +03:00 [DBG] Connection id "0HN62FN4NGIBA" started.
2024-08-22 10:41:09.463 +03:00 [DBG] Connection id "0HN62FN4NGIB8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:09.463 +03:00 [DBG] Connection id "0HN62FN4NGIB9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:09.592 +03:00 [DBG] Connection 0HN62FN4NGIBA established using the following protocol: "Tls13"
2024-08-22 10:41:09.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 10:41:10.015 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 10:41:10.088 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 10:41:10.093 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:41:10.419 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 10:41:10.458 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 10:41:10.482 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 771.2920ms
2024-08-22 10:41:10.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 10:41:10.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 11.5720ms
2024-08-22 10:41:10.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 10:41:10.646 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 135.1941ms
2024-08-22 10:41:12.279 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 10:41:12.283 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 10:41:12.287 +03:00 [DBG] Request did not match any endpoints
2024-08-22 10:41:12.815 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 535.8981ms
2024-08-22 10:41:15.753 +03:00 [DBG] Connection id "0HN62FN4NGIBA" received FIN.
2024-08-22 10:41:15.764 +03:00 [DBG] Connection id "0HN62FN4NGIBA" is closed. The last processed stream ID was 7.
2024-08-22 10:41:15.769 +03:00 [DBG] Connection id "0HN62FN4NGIBA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:15.778 +03:00 [DBG] Connection id "0HN62FN4NGIBA" stopped.
2024-08-22 10:41:38.418 +03:00 [DBG] Connection id "0HN62FN4NGIBB" accepted.
2024-08-22 10:41:38.429 +03:00 [DBG] Connection id "0HN62FN4NGIBB" started.
2024-08-22 10:41:38.451 +03:00 [DBG] Connection 0HN62FN4NGIBB established using the following protocol: "Tls13"
2024-08-22 10:41:38.455 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:41:38.467 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:41:38.483 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:41:38.487 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:38.492 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:41:38.497 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:41:38.591 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 10:41:38.599 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:38.678 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:41:38.686 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:41:38.688 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:41:38.691 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:41:38.697 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:41:38.701 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:41:38.704 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:41:39.005 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 10:41:39.088 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:41:39.102 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:41:39.111 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:41:39.115 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:41:39.137 +03:00 [DBG] Connection id "0HN62FN4NGIBB", Request id "0HN62FN4NGIBB:00000001": started reading request body.
2024-08-22 10:41:39.142 +03:00 [DBG] Connection id "0HN62FN4NGIBB", Request id "0HN62FN4NGIBB:00000001": done reading request body.
2024-08-22 10:41:39.182 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:41:39.187 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:39.190 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:39.195 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:41:39.248 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:41:40.351 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 10:41:40.357 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 10:41:40.361 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 10:41:40.364 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 10:41:40.366 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 10:41:40.567 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.582 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.584 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 10:41:40.866 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:40.869 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:40.873 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 10:41:41.303 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:41:41.573 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-22 10:41:41.726 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 10:41:42.180 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 10:41:42.286 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:42.377 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (90ms).
2024-08-22 10:41:42.431 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.125 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.151 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:41:43.289 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:41:43.384 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.477 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.518 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:41:43.546 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.561 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.586 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.659 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-22 10:41:43.686 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:41:43.693 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.696 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:41:43.699 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.702 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.705 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:41:43.733 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:41:43.746 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.749 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.752 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.786 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-22 10:41:43.819 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 10:41:43.828 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 10:41:43.836 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.838 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.841 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.872 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.879 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.880 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.882 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.907 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:41:43.910 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:41:43.912 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.914 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.920 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:41:43.923 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:41:43.925 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:43.929 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:41:44.177 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:41:44.186 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:41:44.189 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:41:44.191 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:41:44.192 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:41:44.194 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:41:44.265 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 5550.765ms
2024-08-22 10:41:44.274 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:41:44.300 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:41:44.314 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 5859.3308ms
2024-08-22 10:41:45.761 +03:00 [DBG] Connection id "0HN62FN4NGIBB" received FIN.
2024-08-22 10:41:45.763 +03:00 [DBG] Connection id "0HN62FN4NGIBB" is closed. The last processed stream ID was 1.
2024-08-22 10:41:45.768 +03:00 [DBG] Connection id "0HN62FN4NGIBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:41:45.770 +03:00 [DBG] Connection id "0HN62FN4NGIBB" stopped.
2024-08-22 10:48:57.589 +03:00 [DBG] Connection id "0HN62FN4NGIBC" accepted.
2024-08-22 10:48:57.591 +03:00 [DBG] Connection id "0HN62FN4NGIBC" started.
2024-08-22 10:48:57.619 +03:00 [DBG] Connection 0HN62FN4NGIBC established using the following protocol: "Tls13"
2024-08-22 10:48:57.623 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:48:57.667 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:48:57.677 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:48:57.681 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:57.683 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:48:57.685 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:48:57.807 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:48:57 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-22 10:48:57.826 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:48:57 AM'.
2024-08-22 10:48:57.829 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:57.836 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:48:57.842 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:48:57.844 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:48:57.846 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:48:57.850 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:48:57.853 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:48:57.856 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:48:58.150 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:48:58.155 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:48:58.158 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:48:58.160 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:48:58.176 +03:00 [DBG] Connection id "0HN62FN4NGIBC", Request id "0HN62FN4NGIBC:00000001": started reading request body.
2024-08-22 10:48:58.180 +03:00 [DBG] Connection id "0HN62FN4NGIBC", Request id "0HN62FN4NGIBC:00000001": done reading request body.
2024-08-22 10:48:58.218 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 46.
2024-08-22 10:48:58.223 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.227 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.228 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:48:58.233 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:48:58.236 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:48:58.241 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:48:58.244 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:48:58.247 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:48:58.249 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:48:58.255 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:48:58.257 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:48:58.272 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 415.9762ms
2024-08-22 10:48:58.302 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:48:58.305 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 400 - application/problem+json;+charset=utf-8 681.4561ms
2024-08-22 10:49:00.888 +03:00 [DBG] Connection id "0HN62FN4NGIBC" received FIN.
2024-08-22 10:49:00.893 +03:00 [DBG] Connection id "0HN62FN4NGIBC" is closed. The last processed stream ID was 1.
2024-08-22 10:49:00.897 +03:00 [DBG] Connection id "0HN62FN4NGIBC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:00.902 +03:00 [DBG] Connection id "0HN62FN4NGIBC" stopped.
2024-08-22 10:49:09.897 +03:00 [DBG] Connection id "0HN62FN4NGIBD" accepted.
2024-08-22 10:49:09.900 +03:00 [DBG] Connection id "0HN62FN4NGIBD" started.
2024-08-22 10:49:09.907 +03:00 [DBG] Connection 0HN62FN4NGIBD established using the following protocol: "Tls13"
2024-08-22 10:49:09.912 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-22 10:49:09.915 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-22 10:49:09.918 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-22 10:49:09.921 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:09.924 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:09.930 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:09.939 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:49:09 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-22 10:49:09.946 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/22/2024 7:41:43 AM', Current time (UTC): '8/22/2024 7:49:09 AM'.
2024-08-22 10:49:09.950 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:09.951 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-22 10:49:09.953 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:09.955 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:09.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 10:49:09.958 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:09.960 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:09.963 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:49:09.967 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-22 10:49:09.970 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:49:09.972 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-22 10:49:09.973 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:09.975 +03:00 [DBG] Connection id "0HN62FN4NGIBD", Request id "0HN62FN4NGIBD:00000001": started reading request body.
2024-08-22 10:49:09.977 +03:00 [DBG] Connection id "0HN62FN4NGIBD", Request id "0HN62FN4NGIBD:00000001": done reading request body.
2024-08-22 10:49:09.981 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-22 10:49:09.983 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:09.984 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:09.985 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-22 10:49:09.987 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-22 10:49:10.039 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 10:49:10.047 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.049 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 10:49:10.051 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.065 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.071 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:49:10.086 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-22 10:49:10.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.092 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 10:49:10.099 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.100 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.102 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.111 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.115 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 10:49:10.117 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.118 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.119 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:49:10.124 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-22 10:49:10.127 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.128 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.130 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.133 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-22 10:49:10.136 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.138 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.147 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.151 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.152 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.153 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 10:49:10.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-22 10:49:10.157 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.159 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.162 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.167 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-22 10:49:10.170 +03:00 [DBG] A data reader was disposed.
2024-08-22 10:49:10.171 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.172 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 10:49:10.174 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:10.176 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:10.178 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:49:10.181 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:49:10.183 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:49:10.185 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 10:49:10.187 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 223.8827ms
2024-08-22 10:49:10.189 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-22 10:49:10.190 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 10:49:10.192 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 280.1054ms
2024-08-22 10:49:10.891 +03:00 [DBG] Connection id "0HN62FN4NGIBD" received FIN.
2024-08-22 10:49:10.893 +03:00 [DBG] Connection id "0HN62FN4NGIBD" is closed. The last processed stream ID was 1.
2024-08-22 10:49:10.897 +03:00 [DBG] Connection id "0HN62FN4NGIBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:10.902 +03:00 [DBG] Connection id "0HN62FN4NGIBD" stopped.
2024-08-22 10:49:38.788 +03:00 [DBG] Connection id "0HN62FN4NGIBE" accepted.
2024-08-22 10:49:38.790 +03:00 [DBG] Connection id "0HN62FN4NGIBE" started.
2024-08-22 10:49:38.835 +03:00 [DBG] Connection 0HN62FN4NGIBE established using the following protocol: "Tls13"
2024-08-22 10:49:38.872 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:49:38.879 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:38.892 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:38.894 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.895 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:38.896 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:38.923 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:38.927 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:38.930 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.932 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:38.938 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:38.941 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:38.942 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:38.944 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:38.946 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:38.948 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:38.951 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:38.953 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:38.954 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:38.956 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:38.957 +03:00 [DBG] Connection id "0HN62FN4NGIBE", Request id "0HN62FN4NGIBE:00000001": started reading request body.
2024-08-22 10:49:38.958 +03:00 [DBG] Connection id "0HN62FN4NGIBE", Request id "0HN62FN4NGIBE:00000001": done reading request body.
2024-08-22 10:49:38.961 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 46.
2024-08-22 10:49:38.962 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.963 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.964 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:38.966 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:38.969 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:49:38.970 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:49:38.971 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:38.973 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:38.974 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:49:38.977 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:49:38.978 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:49:38.979 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 31.4159ms
2024-08-22 10:49:38.981 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:38.983 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 400 - application/problem+json;+charset=utf-8 111.4210ms
2024-08-22 10:49:40.899 +03:00 [DBG] Connection id "0HN62FN4NGIBE" received FIN.
2024-08-22 10:49:40.904 +03:00 [DBG] Connection id "0HN62FN4NGIBE" is closed. The last processed stream ID was 1.
2024-08-22 10:49:40.908 +03:00 [DBG] Connection id "0HN62FN4NGIBE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:40.911 +03:00 [DBG] Connection id "0HN62FN4NGIBE" stopped.
2024-08-22 10:49:48.940 +03:00 [DBG] Connection id "0HN62FN4NGIBF" accepted.
2024-08-22 10:49:48.948 +03:00 [DBG] Connection id "0HN62FN4NGIBF" started.
2024-08-22 10:49:48.986 +03:00 [DBG] Connection 0HN62FN4NGIBF established using the following protocol: "Tls13"
2024-08-22 10:49:48.992 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 330
2024-08-22 10:49:48.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:49.007 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:49.010 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.013 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:49.014 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:49.017 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:49.020 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:49.023 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.024 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:49.026 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:49.029 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:49.032 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:49.035 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:49.036 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:49.038 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:49.050 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:49.054 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:49.056 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:49.057 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:49.059 +03:00 [DBG] Connection id "0HN62FN4NGIBF", Request id "0HN62FN4NGIBF:00000001": started reading request body.
2024-08-22 10:49:49.060 +03:00 [DBG] Connection id "0HN62FN4NGIBF", Request id "0HN62FN4NGIBF:00000001": done reading request body.
2024-08-22 10:49:49.063 +03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateTime. Path: $.checkInDate | LineNumber: 6 | BytePositionInLine: 45.
2024-08-22 10:49:49.064 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.067 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.068 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:49.070 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:49.071 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-22 10:49:49.072 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-22 10:49:49.073 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:49:49.075 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:49:49.076 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-22 10:49:49.081 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-22 10:49:49.084 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-22 10:49:49.087 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 49.3924ms
2024-08-22 10:49:49.089 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:49.092 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 330 - 400 - application/problem+json;+charset=utf-8 99.5378ms
2024-08-22 10:49:50.900 +03:00 [DBG] Connection id "0HN62FN4NGIBF" received FIN.
2024-08-22 10:49:50.903 +03:00 [DBG] Connection id "0HN62FN4NGIBF" is closed. The last processed stream ID was 1.
2024-08-22 10:49:50.906 +03:00 [DBG] Connection id "0HN62FN4NGIBF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 10:49:50.908 +03:00 [DBG] Connection id "0HN62FN4NGIBF" stopped.
2024-08-22 10:49:56.862 +03:00 [DBG] Connection id "0HN62FN4NGIBG" accepted.
2024-08-22 10:49:56.865 +03:00 [DBG] Connection id "0HN62FN4NGIBG" started.
2024-08-22 10:49:56.870 +03:00 [DBG] Connection 0HN62FN4NGIBG established using the following protocol: "Tls13"
2024-08-22 10:49:56.916 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331
2024-08-22 10:49:56.925 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-22 10:49:56.934 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-22 10:49:56.940 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:56.943 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 10:49:56.945 +03:00 [INF] No CORS policy found for the specified request.
2024-08-22 10:49:56.947 +03:00 [DBG] Successfully validated the token.
2024-08-22 10:49:56.949 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-22 10:49:56.952 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:49:56.954 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-22 10:49:56.958 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 10:49:56.961 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 10:49:56.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 10:49:56.968 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 10:49:56.969 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 10:49:56.971 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:56.973 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-22 10:49:56.974 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:56.977 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-22 10:49:56.980 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-22 10:49:56.982 +03:00 [DBG] Connection id "0HN62FN4NGIBG", Request id "0HN62FN4NGIBG:00000001": started reading request body.
2024-08-22 10:49:56.984 +03:00 [DBG] Connection id "0HN62FN4NGIBG", Request id "0HN62FN4NGIBG:00000001": done reading request body.
2024-08-22 10:49:56.990 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'
2024-08-22 10:49:56.992 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:56.995 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:49:56.997 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-22 10:49:57.002 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-22 10:50:01.586 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 10:50:01.592 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 10:50:01.594 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 10:50:01.595 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 10:50:01.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 10:50:01.597 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 10:50:01.601 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 4629.5452ms
2024-08-22 10:50:01.603 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-22 10:50:01.604 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 331 - 200 - application/json;+charset=utf-8 4688.3945ms
2024-08-22 11:54:49.139 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 11:54:49.401 +03:00 [DBG] Hosting starting
2024-08-22 11:54:49.475 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 11:54:49.484 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 11:54:49.527 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 11:54:49.532 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 11:54:49.554 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 11:54:49.574 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 11:54:49.576 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 11:54:49.595 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 11:54:49.605 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:54:49.615 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 11:54:49.619 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:54:49.631 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 11:54:49.645 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 11:54:49.654 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 11:54:49.659 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 11:54:50.098 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 11:54:50.247 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 11:54:50.250 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 11:54:50.253 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 11:54:50.255 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 11:54:50.259 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 11:54:50.261 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 11:54:50.263 +03:00 [INF] Hosting environment: Development
2024-08-22 11:54:50.266 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 11:54:50.267 +03:00 [DBG] Hosting started
2024-08-22 11:54:50.318 +03:00 [DBG] Connection id "0HN62H0AFO5RG" received FIN.
2024-08-22 11:54:50.324 +03:00 [DBG] Connection id "0HN62H0AFO5RG" accepted.
2024-08-22 11:54:50.329 +03:00 [DBG] Connection id "0HN62H0AFO5RG" started.
2024-08-22 11:54:50.377 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:54:50.512 +03:00 [DBG] Connection id "0HN62H0AFO5RG" stopped.
2024-08-22 11:54:50.517 +03:00 [DBG] Connection id "0HN62H0AFO5RG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:54:51.544 +03:00 [DBG] Connection id "0HN62H0AFO5RH" accepted.
2024-08-22 11:54:51.559 +03:00 [DBG] Connection id "0HN62H0AFO5RH" started.
2024-08-22 11:54:51.832 +03:00 [DBG] Connection 0HN62H0AFO5RH established using the following protocol: "Tls13"
2024-08-22 11:54:52.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 11:54:52.534 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 11:54:52.622 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 11:54:52.626 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:54:53.532 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 11:54:53.598 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 11:54:53.625 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1565.6660ms
2024-08-22 11:54:53.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 11:54:53.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 42.3021ms
2024-08-22 11:54:53.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 11:54:53.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 247.7570ms
2024-08-22 11:56:08.898 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 11:56:09.103 +03:00 [DBG] Hosting starting
2024-08-22 11:56:09.179 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 11:56:09.186 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 11:56:09.229 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 11:56:09.233 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 11:56:09.249 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 11:56:09.266 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 11:56:09.269 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 11:56:09.281 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 11:56:09.289 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:56:09.297 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 11:56:09.301 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 11:56:09.312 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 11:56:09.323 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 11:56:09.332 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 11:56:09.335 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 11:56:09.712 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 11:56:09.821 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 11:56:09.824 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 11:56:09.826 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 11:56:09.828 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 11:56:09.829 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 11:56:09.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 11:56:09.831 +03:00 [INF] Hosting environment: Development
2024-08-22 11:56:09.832 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 11:56:09.833 +03:00 [DBG] Hosting started
2024-08-22 11:56:10.102 +03:00 [DBG] Connection id "0HN62H128K0FR" received FIN.
2024-08-22 11:56:10.105 +03:00 [DBG] Connection id "0HN62H128K0FQ" accepted.
2024-08-22 11:56:10.105 +03:00 [DBG] Connection id "0HN62H128K0FR" accepted.
2024-08-22 11:56:10.102 +03:00 [DBG] Connection id "0HN62H128K0FQ" received FIN.
2024-08-22 11:56:10.109 +03:00 [DBG] Connection id "0HN62H128K0FQ" started.
2024-08-22 11:56:10.111 +03:00 [DBG] Connection id "0HN62H128K0FR" started.
2024-08-22 11:56:10.148 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:56:10.148 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 11:56:10.263 +03:00 [DBG] Connection id "0HN62H128K0FQ" stopped.
2024-08-22 11:56:10.263 +03:00 [DBG] Connection id "0HN62H128K0FR" stopped.
2024-08-22 11:56:10.268 +03:00 [DBG] Connection id "0HN62H128K0FQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:10.268 +03:00 [DBG] Connection id "0HN62H128K0FR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:12.447 +03:00 [DBG] Connection id "0HN62H128K0FS" accepted.
2024-08-22 11:56:12.450 +03:00 [DBG] Connection id "0HN62H128K0FS" started.
2024-08-22 11:56:12.569 +03:00 [DBG] Connection 0HN62H128K0FS established using the following protocol: "Tls13"
2024-08-22 11:56:12.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 11:56:13.139 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 11:56:13.220 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 11:56:13.224 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:56:13.707 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 11:56:13.782 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 11:56:13.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 11:56:13.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 11:56:13.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 153.2306ms
2024-08-22 11:56:13.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1285.6485ms
2024-08-22 11:56:14.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 192.2592ms
2024-08-22 11:56:15.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 11:56:15.849 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 11:56:15.853 +03:00 [DBG] Request did not match any endpoints
2024-08-22 11:56:16.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 508.8185ms
2024-08-22 11:56:17.285 +03:00 [DBG] Connection id "0HN62H128K0FS" received FIN.
2024-08-22 11:56:17.297 +03:00 [DBG] Connection id "0HN62H128K0FS" is closed. The last processed stream ID was 7.
2024-08-22 11:56:17.302 +03:00 [DBG] Connection id "0HN62H128K0FS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 11:56:17.309 +03:00 [DBG] Connection id "0HN62H128K0FS" stopped.
2024-08-22 13:17:07.633 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:17:07.933 +03:00 [DBG] Hosting starting
2024-08-22 13:17:08.029 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:17:08.040 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:17:08.090 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:17:08.096 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:17:08.125 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:17:08.149 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:17:08.153 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:17:08.182 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:17:08.194 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:17:08.207 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:17:08.214 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:17:08.235 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:17:08.252 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:17:08.269 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:17:08.276 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:17:08.901 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:17:09.105 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 13:17:09.107 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 13:17:09.111 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 13:17:09.114 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 13:17:09.116 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 13:17:09.118 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 13:17:09.120 +03:00 [INF] Hosting environment: Development
2024-08-22 13:17:09.122 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 13:17:09.124 +03:00 [DBG] Hosting started
2024-08-22 13:17:09.209 +03:00 [DBG] Connection id "0HN62IEACM6SO" received FIN.
2024-08-22 13:17:09.209 +03:00 [DBG] Connection id "0HN62IEACM6SP" received FIN.
2024-08-22 13:17:09.239 +03:00 [DBG] Connection id "0HN62IEACM6SP" accepted.
2024-08-22 13:17:09.239 +03:00 [DBG] Connection id "0HN62IEACM6SO" accepted.
2024-08-22 13:17:09.247 +03:00 [DBG] Connection id "0HN62IEACM6SP" started.
2024-08-22 13:17:09.250 +03:00 [DBG] Connection id "0HN62IEACM6SO" started.
2024-08-22 13:17:09.311 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:17:09.311 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:17:09.935 +03:00 [DBG] Connection id "0HN62IEACM6SO" stopped.
2024-08-22 13:17:09.935 +03:00 [DBG] Connection id "0HN62IEACM6SP" stopped.
2024-08-22 13:17:09.955 +03:00 [DBG] Connection id "0HN62IEACM6SP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:09.956 +03:00 [DBG] Connection id "0HN62IEACM6SO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:10.357 +03:00 [DBG] Connection id "0HN62IEACM6SQ" accepted.
2024-08-22 13:17:10.434 +03:00 [DBG] Connection id "0HN62IEACM6SQ" started.
2024-08-22 13:17:10.686 +03:00 [DBG] Connection 0HN62IEACM6SQ established using the following protocol: "Tls13"
2024-08-22 13:17:10.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 13:17:11.597 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 13:17:11.864 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 13:17:11.970 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:17:13.379 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 13:17:13.596 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 13:17:13.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 13:17:13.656 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 2759.3081ms
2024-08-22 13:17:13.682 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 13:17:13.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 48.5406ms
2024-08-22 13:17:14.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 389.4699ms
2024-08-22 13:17:17.928 +03:00 [DBG] Connection id "0HN62IEACM6SQ" received FIN.
2024-08-22 13:17:18.064 +03:00 [DBG] Connection id "0HN62IEACM6SQ" is closed. The last processed stream ID was 5.
2024-08-22 13:17:18.089 +03:00 [DBG] Connection id "0HN62IEACM6SQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:18.111 +03:00 [DBG] Connection id "0HN62IEACM6SQ" stopped.
2024-08-22 13:17:23.717 +03:00 [DBG] Connection id "0HN62IEACM6SR" accepted.
2024-08-22 13:17:23.723 +03:00 [DBG] Connection id "0HN62IEACM6SR" started.
2024-08-22 13:17:23.737 +03:00 [DBG] Connection 0HN62IEACM6SR established using the following protocol: "Tls13"
2024-08-22 13:17:23.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 13:17:23.750 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 13:17:23.757 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:17:24.639 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 895.2898ms
2024-08-22 13:17:33.030 +03:00 [DBG] Connection id "0HN62IEACM6SR" received FIN.
2024-08-22 13:17:33.041 +03:00 [DBG] Connection id "0HN62IEACM6SR" is closed. The last processed stream ID was 1.
2024-08-22 13:17:33.049 +03:00 [DBG] Connection id "0HN62IEACM6SR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:17:33.057 +03:00 [DBG] Connection id "0HN62IEACM6SR" stopped.
2024-08-22 13:19:55.139 +03:00 [DBG] Connection id "0HN62IEACM6SS" accepted.
2024-08-22 13:19:55.223 +03:00 [DBG] Connection id "0HN62IEACM6SS" started.
2024-08-22 13:19:55.284 +03:00 [DBG] Connection 0HN62IEACM6SS established using the following protocol: "Tls13"
2024-08-22 13:19:55.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Bet&description=Bet&pageSize=10&pageNumber=1 - -
2024-08-22 13:19:55.327 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel'
2024-08-22 13:19:55.350 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)' with route pattern 'api/Hotel' is valid for the request path '/api/Hotel'
2024-08-22 13:19:55.356 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:19:55.366 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:19:55.600 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:19:55.617 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:19:55.776 +03:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:19:55.783 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:19:55.788 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:19:55.794 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 13:19:55.802 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:19:55.808 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:19:55.815 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:19:56.486 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 13:19:57.405 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:19:57.439 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:19:57.449 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' using the name 'hotelName' in request data ...
2024-08-22 13:19:57.457 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.463 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.468 +03:00 [DBG] Attempting to validate the bound parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:19:57.560 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelName' of type 'System.String'.
2024-08-22 13:19:57.573 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' ...
2024-08-22 13:19:57.580 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' using the name 'description' in request data ...
2024-08-22 13:19:57.587 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.593 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.598 +03:00 [DBG] Attempting to validate the bound parameter 'description' of type 'System.String' ...
2024-08-22 13:19:57.605 +03:00 [DBG] Done attempting to validate the bound parameter 'description' of type 'System.String'.
2024-08-22 13:19:57.610 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:19:57.614 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 13:19:57.622 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.628 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.632 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:19:57.644 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:19:57.648 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:19:57.654 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 13:19:57.663 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:19:57.667 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:19:57.678 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:19:57.682 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:00.194 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 13:20:00.198 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 13:20:00.203 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 13:20:00.209 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 13:20:00.214 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 13:20:00.562 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.566 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.570 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 13:20:00.693 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:00.700 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:00.704 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 13:20:01.328 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:20:01.649 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 13:20:02.573 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 13:20:02.579 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 13:20:03.072 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Hotels AS h
        WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
        ORDER BY (SELECT 1)
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 13:20:03.314 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:20:03.448 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (136ms).
2024-08-22 13:20:03.563 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:05.422 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:05.527 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:05.870 +03:00 [INF] Executed DbCommand (395ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:05.977 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:20:06.003 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:06.046 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:06.681 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API) in 10849.9051ms
2024-08-22 13:20:06.695 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:07.845 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:20:07.863 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Bet&description=Bet&pageSize=10&pageNumber=1 - - - 404 - application/json 12565.5392ms
2024-08-22 13:20:12.980 +03:00 [DBG] Connection id "0HN62IEACM6SS" received FIN.
2024-08-22 13:20:12.985 +03:00 [DBG] Connection id "0HN62IEACM6SS" is closed. The last processed stream ID was 1.
2024-08-22 13:20:12.991 +03:00 [DBG] Connection id "0HN62IEACM6SS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:20:12.998 +03:00 [DBG] Connection id "0HN62IEACM6SS" stopped.
2024-08-22 13:20:32.855 +03:00 [DBG] Connection id "0HN62IEACM6ST" accepted.
2024-08-22 13:20:32.859 +03:00 [DBG] Connection id "0HN62IEACM6ST" started.
2024-08-22 13:20:32.921 +03:00 [DBG] Connection 0HN62IEACM6ST established using the following protocol: "Tls13"
2024-08-22 13:20:32.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Mandarin%20Oriental%20Tokyo&description=ho&pageSize=10&pageNumber=1 - -
2024-08-22 13:20:32.986 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel'
2024-08-22 13:20:32.995 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)' with route pattern 'api/Hotel' is valid for the request path '/api/Hotel'
2024-08-22 13:20:33.001 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.003 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:20:33.022 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:20:33.025 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.047 +03:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:20:33.051 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:20:33.054 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:20:33.057 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 13:20:33.063 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:20:33.066 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:20:33.069 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:20:33.074 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:20:33.080 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:20:33.083 +03:00 [DBG] Attempting to bind parameter 'hotelName' of type 'System.String' using the name 'hotelName' in request data ...
2024-08-22 13:20:33.086 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.089 +03:00 [DBG] Done attempting to bind parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.096 +03:00 [DBG] Attempting to validate the bound parameter 'hotelName' of type 'System.String' ...
2024-08-22 13:20:33.100 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelName' of type 'System.String'.
2024-08-22 13:20:33.102 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' ...
2024-08-22 13:20:33.105 +03:00 [DBG] Attempting to bind parameter 'description' of type 'System.String' using the name 'description' in request data ...
2024-08-22 13:20:33.108 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.112 +03:00 [DBG] Done attempting to bind parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.115 +03:00 [DBG] Attempting to validate the bound parameter 'description' of type 'System.String' ...
2024-08-22 13:20:33.118 +03:00 [DBG] Done attempting to validate the bound parameter 'description' of type 'System.String'.
2024-08-22 13:20:33.121 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:20:33.124 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 13:20:33.128 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.131 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.134 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 13:20:33.137 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 13:20:33.140 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:20:33.144 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 13:20:33.149 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.153 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.157 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 13:20:33.161 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 13:20:33.281 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:20:33.299 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:20:33.302 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 13:20:33.307 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.315 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.320 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:33.346 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 13:20:33.483 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:20:33.603 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:20:33.606 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.612 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:20:33.698 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:20:33.718 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:20:33.721 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:20:33.726 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:20:33.733 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:20:33.738 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 13:20:33.875 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API) in 806.1777ms
2024-08-22 13:20:33.884 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotels (HotelBookingPlatform.API)'
2024-08-22 13:20:33.888 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:20:33.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel?hotelName=Mandarin%20Oriental%20Tokyo&description=ho&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 928.6727ms
2024-08-22 13:20:42.993 +03:00 [DBG] Connection id "0HN62IEACM6ST" received FIN.
2024-08-22 13:20:42.998 +03:00 [DBG] Connection id "0HN62IEACM6ST" is closed. The last processed stream ID was 1.
2024-08-22 13:20:43.003 +03:00 [DBG] Connection id "0HN62IEACM6ST" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:20:43.010 +03:00 [DBG] Connection id "0HN62IEACM6ST" stopped.
2024-08-22 13:26:22.725 +03:00 [DBG] Connection id "0HN62IEACM6SU" accepted.
2024-08-22 13:26:22.735 +03:00 [DBG] Connection id "0HN62IEACM6SU" started.
2024-08-22 13:26:22.784 +03:00 [DBG] Connection 0HN62IEACM6SU established using the following protocol: "Tls13"
2024-08-22 13:26:22.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/amenities - -
2024-08-22 13:26:22.814 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/amenities'
2024-08-22 13:26:22.819 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/19/amenities'
2024-08-22 13:26:22.827 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:22.831 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:26:22.845 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:26:22.849 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:22.861 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:26:22.868 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:26:22.876 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:26:22.881 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 13:26:22.889 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:26:22.895 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:26:22.901 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:22.947 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:22.954 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-22 13:26:22.960 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-22 13:26:22.967 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:22.972 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:22.978 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-22 13:26:22.984 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-22 13:26:23.036 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:26:23.075 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.Amenities)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-22 13:26:23.148 +03:00 [DBG] Including navigation: 'Hotel.Amenities'.
2024-08-22 13:26:23.377 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 13:26:23.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:23.427 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:23.433 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.439 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.445 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-22 13:26:23.477 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-22 13:26:23.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.610 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:23.615 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:23.621 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-22 13:26:23.679 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-22 13:26:23.746 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.790 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.796 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.801 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.812 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.817 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.823 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.828 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.834 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:23.857 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:23.861 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:23.866 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.873 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:23.890 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:26:23.898 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:26:23.900 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:26:23.904 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:26:23.908 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:26:23.912 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 13:26:23.927 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 1026.5029ms
2024-08-22 13:26:23.933 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-22 13:26:23.937 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:26:23.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/amenities - - - 200 - application/json;+charset=utf-8 1145.6594ms
2024-08-22 13:26:28.094 +03:00 [DBG] Connection id "0HN62IEACM6SU" received FIN.
2024-08-22 13:26:28.098 +03:00 [DBG] Connection id "0HN62IEACM6SU" is closed. The last processed stream ID was 1.
2024-08-22 13:26:28.105 +03:00 [DBG] Connection id "0HN62IEACM6SU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:26:28.113 +03:00 [DBG] Connection id "0HN62IEACM6SU" stopped.
2024-08-22 13:26:36.378 +03:00 [DBG] Connection id "0HN62IEACM6SV" accepted.
2024-08-22 13:26:36.383 +03:00 [DBG] Connection id "0HN62IEACM6SV" started.
2024-08-22 13:26:36.397 +03:00 [DBG] Connection 0HN62IEACM6SV established using the following protocol: "Tls13"
2024-08-22 13:26:36.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/rating - -
2024-08-22 13:26:36.443 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/rating'
2024-08-22 13:26:36.462 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}/rating' is valid for the request path '/api/Hotel/19/rating'
2024-08-22 13:26:36.482 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:36.486 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 13:26:36.487 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 13:26:36.489 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:36.503 +03:00 [INF] Route matched with {action = "GetHotelReviewRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelReviewRating(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 13:26:36.507 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 13:26:36.513 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 13:26:36.517 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 13:26:36.522 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 13:26:36.525 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 13:26:36.529 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:36.534 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 13:26:36.538 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 13:26:36.541 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 13:26:36.544 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.548 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.554 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 13:26:36.556 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 13:26:36.576 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 13:26:36.586 +03:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Include(r => r.User)
    .Include(r => r.Hotel)
    .AsSplitQuery()
    .Where(r => r.HotelId == __hotelId_0)'
2024-08-22 13:26:36.603 +03:00 [DBG] Including navigation: 'Review.User'.
2024-08-22 13:26:36.606 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-22 13:26:36.610 +03:00 [DBG] Including navigation: 'Review.Hotel'.
2024-08-22 13:26:36.742 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Review>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Review.ReviewID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Content (string) Required, 1], [Property: Review.CreatedAtUtc (DateTime) Required, 2], [Property: Review.HotelId (int) Required FK Index, 3], [Property: Review.ModifiedAtUtc (DateTime?), 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (string) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 7], [Property: LocalUser.AccessFailedCount (int) Required, 8], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 9], [Property: LocalUser.Email (string) MaxLength(256), 10], [Property: LocalUser.EmailConfirmed (bool) Required, 11], [Property: LocalUser.FirstName (string) Required, 12], [Property: LocalUser.LastName (string) Required, 13], [Property: LocalUser.LockoutEnabled (bool) Required, 14], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 15], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 16], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 17], [Property: LocalUser.PasswordHash (string), 18], [Property: LocalUser.PhoneNumber (string), 19], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 20], [Property: LocalUser.SecurityStamp (string), 21], [Property: LocalUser.TwoFactorEnabled (bool) Required, 22], [Property: LocalUser.UserName (string) MaxLength(256), 23] }
            2 -> 0
            3 -> 7
            4 -> 24
            5 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 24], [Property: Hotel.CityID (int) Required FK Index, 25], [Property: Hotel.CreatedAtUtc (DateTime) Required, 26], [Property: Hotel.Description (string) MaxLength(500), 27], [Property: Hotel.Name (string) Required MaxLength(100), 28], [Property: Hotel.OwnerID (int) Required FK Index, 29], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 30], [Property: Hotel.StarRating (int) Required, 31] }
        SELECT r.ReviewID, r.Content, r.CreatedAtUtc, r.HotelId, r.ModifiedAtUtc, r.Rating, r.UserId, a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Reviews AS r
        INNER JOIN AspNetUsers AS a ON r.UserId == a.Id
        INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
        WHERE r.HotelId == @__hotelId_0
        ORDER BY r.ReviewID ASC, a.Id ASC, h.HotelId ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Review>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 13:26:36.754 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:36.756 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-22 13:26:36.759 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:36.763 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:36.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:36.848 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:36.872 +03:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:36.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.096 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.112 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 13:26:37.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 13:26:37.122 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:37.198 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-22 13:26:37.255 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.305 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 13:26:37.310 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:37.318 +03:00 [DBG] A data reader was disposed.
2024-08-22 13:26:37.319 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:37.323 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 13:26:37.334 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 13:26:37.340 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 13:26:37.342 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 13:26:37.345 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 13:26:37.348 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 13:26:37.353 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Review.ReviewRatingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 13:26:37.368 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API) in 839.3964ms
2024-08-22 13:26:37.373 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-22 13:26:37.376 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 13:26:37.386 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/rating - - - 200 - application/json;+charset=utf-8 956.5405ms
2024-08-22 13:26:38.099 +03:00 [DBG] Connection id "0HN62IEACM6SV" received FIN.
2024-08-22 13:26:38.104 +03:00 [DBG] Connection id "0HN62IEACM6SV" is closed. The last processed stream ID was 1.
2024-08-22 13:26:38.109 +03:00 [DBG] Connection id "0HN62IEACM6SV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:26:38.117 +03:00 [DBG] Connection id "0HN62IEACM6SV" stopped.
2024-08-22 13:50:58.776 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:50:59.299 +03:00 [DBG] Hosting starting
2024-08-22 13:50:59.396 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:50:59.408 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:50:59.459 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:50:59.464 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:50:59.497 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:50:59.534 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:50:59.538 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:50:59.570 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:50:59.586 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:50:59.602 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:50:59.608 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:50:59.632 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:50:59.649 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:50:59.664 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:50:59.670 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:51:00.949 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:51:41.039 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 13:51:41.407 +03:00 [DBG] Hosting starting
2024-08-22 13:51:41.496 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 13:51:41.507 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 13:51:41.524 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 13:51:41.528 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 13:51:41.543 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 13:51:41.559 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 13:51:41.562 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 13:51:41.591 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 13:51:41.602 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:51:41.618 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 13:51:41.622 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 13:51:41.644 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 13:51:41.661 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 13:51:41.682 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 13:51:41.687 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 13:51:42.114 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 13:51:42.269 +03:00 [DBG] Connection id "0HN62J1K6TSTD" received FIN.
2024-08-22 13:51:42.269 +03:00 [DBG] Connection id "0HN62J1K6TSTE" received FIN.
2024-08-22 13:51:42.305 +03:00 [DBG] Connection id "0HN62J1K6TSTE" accepted.
2024-08-22 13:51:42.305 +03:00 [DBG] Connection id "0HN62J1K6TSTD" accepted.
2024-08-22 13:51:42.306 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 13:51:42.314 +03:00 [DBG] Connection id "0HN62J1K6TSTD" started.
2024-08-22 13:51:42.314 +03:00 [DBG] Connection id "0HN62J1K6TSTE" started.
2024-08-22 13:51:42.316 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 13:51:42.326 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 13:51:42.329 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 13:51:42.334 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 13:51:42.338 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 13:51:42.340 +03:00 [INF] Hosting environment: Development
2024-08-22 13:51:42.348 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 13:51:42.352 +03:00 [DBG] Hosting started
2024-08-22 13:51:42.416 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:51:42.416 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 13:51:42.588 +03:00 [DBG] Connection id "0HN62J1K6TSTE" stopped.
2024-08-22 13:51:42.588 +03:00 [DBG] Connection id "0HN62J1K6TSTD" stopped.
2024-08-22 13:51:42.604 +03:00 [DBG] Connection id "0HN62J1K6TSTD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:42.604 +03:00 [DBG] Connection id "0HN62J1K6TSTE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:44.143 +03:00 [DBG] Connection id "0HN62J1K6TSTF" accepted.
2024-08-22 13:51:44.151 +03:00 [DBG] Connection id "0HN62J1K6TSTF" started.
2024-08-22 13:51:44.312 +03:00 [DBG] Connection 0HN62J1K6TSTF established using the following protocol: "Tls13"
2024-08-22 13:51:44.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 13:51:45.293 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 13:51:45.458 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 13:51:45.466 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:51:46.265 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 13:51:46.341 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 13:51:46.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 13:51:46.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1859.9698ms
2024-08-22 13:51:46.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 13:51:46.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 38.2554ms
2024-08-22 13:51:46.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 393.9332ms
2024-08-22 13:51:48.535 +03:00 [DBG] Connection id "0HN62J1K6TSTF" received FIN.
2024-08-22 13:51:48.585 +03:00 [DBG] Connection id "0HN62J1K6TSTF" is closed. The last processed stream ID was 5.
2024-08-22 13:51:48.614 +03:00 [DBG] Connection id "0HN62J1K6TSTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:48.626 +03:00 [DBG] Connection id "0HN62J1K6TSTF" stopped.
2024-08-22 13:51:51.800 +03:00 [DBG] Connection id "0HN62J1K6TSTG" accepted.
2024-08-22 13:51:51.804 +03:00 [DBG] Connection id "0HN62J1K6TSTG" started.
2024-08-22 13:51:51.834 +03:00 [DBG] Connection 0HN62J1K6TSTG established using the following protocol: "Tls13"
2024-08-22 13:51:51.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 13:51:51.851 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 13:51:51.855 +03:00 [DBG] Request did not match any endpoints
2024-08-22 13:51:52.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 735.3387ms
2024-08-22 13:51:53.541 +03:00 [DBG] Connection id "0HN62J1K6TSTG" received FIN.
2024-08-22 13:51:53.545 +03:00 [DBG] Connection id "0HN62J1K6TSTG" is closed. The last processed stream ID was 1.
2024-08-22 13:51:53.550 +03:00 [DBG] Connection id "0HN62J1K6TSTG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 13:51:53.557 +03:00 [DBG] Connection id "0HN62J1K6TSTG" stopped.
2024-08-22 14:27:50.835 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 14:27:51.101 +03:00 [DBG] Hosting starting
2024-08-22 14:27:51.181 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 14:27:51.190 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 14:27:51.211 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 14:27:51.217 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 14:27:51.245 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 14:27:51.274 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 14:27:51.277 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 14:27:51.300 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 14:27:51.311 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 14:27:51.322 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 14:27:51.327 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 14:27:51.346 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 14:27:51.360 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 14:27:51.375 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 14:27:51.378 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 14:27:51.752 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 14:27:51.860 +03:00 [DBG] Connection id "0HN62JLQPMT7S" accepted.
2024-08-22 14:27:51.865 +03:00 [DBG] Connection id "0HN62JLQPMT7S" received FIN.
2024-08-22 14:27:51.865 +03:00 [DBG] Connection id "0HN62JLQPMT7S" started.
2024-08-22 14:27:51.866 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 14:27:51.877 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 14:27:51.882 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 14:27:51.884 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 14:27:51.887 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 14:27:51.891 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 14:27:51.896 +03:00 [INF] Hosting environment: Development
2024-08-22 14:27:51.898 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 14:27:51.907 +03:00 [DBG] Hosting started
2024-08-22 14:27:51.943 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 14:27:52.230 +03:00 [DBG] Connection id "0HN62JLQPMT7S" stopped.
2024-08-22 14:27:52.241 +03:00 [DBG] Connection id "0HN62JLQPMT7S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:27:52.544 +03:00 [DBG] Connection id "0HN62JLQPMT7T" accepted.
2024-08-22 14:27:52.845 +03:00 [DBG] Connection id "0HN62JLQPMT7T" started.
2024-08-22 14:27:53.019 +03:00 [DBG] Connection 0HN62JLQPMT7T established using the following protocol: "Tls13"
2024-08-22 14:27:53.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 14:27:53.879 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 14:27:54.036 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 14:27:54.041 +03:00 [DBG] Request did not match any endpoints
2024-08-22 14:27:54.705 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 14:27:54.768 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 14:27:54.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1587.0442ms
2024-08-22 14:27:54.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 14:27:55.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 1085.2706ms
2024-08-22 14:27:55.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 14:27:56.053 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 134.9727ms
2024-08-22 14:27:59.197 +03:00 [DBG] Connection id "0HN62JLQPMT7T" received FIN.
2024-08-22 14:27:59.218 +03:00 [DBG] Connection id "0HN62JLQPMT7T" is closed. The last processed stream ID was 5.
2024-08-22 14:27:59.224 +03:00 [DBG] Connection id "0HN62JLQPMT7T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:27:59.233 +03:00 [DBG] Connection id "0HN62JLQPMT7T" stopped.
2024-08-22 14:27:59.303 +03:00 [DBG] Connection id "0HN62JLQPMT7U" accepted.
2024-08-22 14:27:59.305 +03:00 [DBG] Connection id "0HN62JLQPMT7U" started.
2024-08-22 14:27:59.314 +03:00 [DBG] Connection 0HN62JLQPMT7U established using the following protocol: "Tls13"
2024-08-22 14:27:59.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 14:27:59.322 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 14:27:59.325 +03:00 [DBG] Request did not match any endpoints
2024-08-22 14:27:59.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 662.2703ms
2024-08-22 14:28:09.198 +03:00 [DBG] Connection id "0HN62JLQPMT7U" received FIN.
2024-08-22 14:28:09.202 +03:00 [DBG] Connection id "0HN62JLQPMT7U" is closed. The last processed stream ID was 1.
2024-08-22 14:28:09.207 +03:00 [DBG] Connection id "0HN62JLQPMT7U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:09.210 +03:00 [DBG] Connection id "0HN62JLQPMT7U" stopped.
2024-08-22 14:28:12.077 +03:00 [DBG] Connection id "0HN62JLQPMT7V" accepted.
2024-08-22 14:28:12.079 +03:00 [DBG] Connection id "0HN62JLQPMT7V" started.
2024-08-22 14:28:12.088 +03:00 [DBG] Connection 0HN62JLQPMT7V established using the following protocol: "Tls13"
2024-08-22 14:28:12.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23 - -
2024-08-22 14:28:12.123 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23'
2024-08-22 14:28:12.152 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{id}' is valid for the request path '/api/RoomClass/23'
2024-08-22 14:28:12.159 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:12.165 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:12.311 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:12.322 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:12.400 +03:00 [INF] Route matched with {action = "GetRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto]] GetRoomClass(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:12.409 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:12.413 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:12.417 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:12.422 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:12.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:12.432 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:12.879 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 14:28:13.468 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:13.488 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 14:28:13.499 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 14:28:13.507 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:13.511 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:13.515 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 14:28:13.585 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 14:28:15.162 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 14:28:15.169 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 14:28:15.173 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 14:28:15.177 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 14:28:15.181 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 14:28:15.432 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.437 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.441 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 14:28:15.554 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:15.557 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:15.561 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 14:28:16.059 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:16.321 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-22 14:28:16.657 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-22 14:28:17.120 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 14:28:17.251 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:17.348 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (99ms).
2024-08-22 14:28:17.383 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.046 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.083 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-22 14:28:18.326 +03:00 [INF] Executed DbCommand (259ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-22 14:28:18.443 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:18.519 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:18.602 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:18.621 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.649 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:18.692 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:18.707 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-22 14:28:18.711 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-22 14:28:18.714 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:18.716 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:18.719 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:18.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto'.
2024-08-22 14:28:18.764 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API) in 6323.349ms
2024-08-22 14:28:18.774 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:18.804 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:18.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23 - - - 200 - application/json;+charset=utf-8 6725.9967ms
2024-08-22 14:28:19.199 +03:00 [DBG] Connection id "0HN62JLQPMT7V" received FIN.
2024-08-22 14:28:19.203 +03:00 [DBG] Connection id "0HN62JLQPMT7V" is closed. The last processed stream ID was 1.
2024-08-22 14:28:19.208 +03:00 [DBG] Connection id "0HN62JLQPMT7V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:19.211 +03:00 [DBG] Connection id "0HN62JLQPMT7V" stopped.
2024-08-22 14:28:32.304 +03:00 [DBG] Connection id "0HN62JLQPMT80" accepted.
2024-08-22 14:28:32.315 +03:00 [DBG] Connection id "0HN62JLQPMT80" started.
2024-08-22 14:28:32.340 +03:00 [DBG] Connection 0HN62JLQPMT80 established using the following protocol: "Tls13"
2024-08-22 14:28:32.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23/images - -
2024-08-22 14:28:32.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23/images'
2024-08-22 14:28:32.359 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/images' is valid for the request path '/api/RoomClass/23/images'
2024-08-22 14:28:32.363 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.367 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:32.370 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:32.373 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.386 +03:00 [INF] Route matched with {action = "GetImagesForRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetImagesForRoomClass(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:32.391 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:32.395 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:32.400 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:32.405 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:32.410 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:32.416 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:32.421 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:32.439 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:32.445 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-22 14:28:32.448 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.451 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.456 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:32.459 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:32.474 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:32.491 +03:00 [DBG] Compiling query expression: 
'DbSet<Image>()
    .Where(img => img.Type == __type_0)'
2024-08-22 14:28:32.502 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Image>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Image.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Image.CreatedAt (DateTime) Required, 1], [Property: Image.EntityId (int) Required, 2], [Property: Image.PublicId (string) Required, 3], [Property: Image.Type (string) Required, 4], [Property: Image.Url (string) Required, 5] }
        SELECT i.Id, i.CreatedAt, i.EntityId, i.PublicId, i.Type, i.Url
        FROM Images AS i
        WHERE i.Type == @__type_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Image>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 14:28:32.507 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:32.513 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-22 14:28:32.520 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.529 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.534 +03:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-22 14:28:32.571 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-22 14:28:32.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.606 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.614 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.618 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.622 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.625 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.629 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.633 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.637 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.640 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:32.648 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:32.651 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.655 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:32.664 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:32.670 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 14:28:32.672 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:32.673 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:32.675 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:32.679 +03:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType6`3[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 14:28:32.699 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API) in 282.9164ms
2024-08-22 14:28:32.703 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-22 14:28:32.706 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:32.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23/images - - - 404 - application/json;+charset=utf-8 362.6958ms
2024-08-22 14:28:34.201 +03:00 [DBG] Connection id "0HN62JLQPMT80" received FIN.
2024-08-22 14:28:34.205 +03:00 [DBG] Connection id "0HN62JLQPMT80" is closed. The last processed stream ID was 1.
2024-08-22 14:28:34.209 +03:00 [DBG] Connection id "0HN62JLQPMT80" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:34.216 +03:00 [DBG] Connection id "0HN62JLQPMT80" stopped.
2024-08-22 14:28:41.092 +03:00 [DBG] Connection id "0HN62JLQPMT81" accepted.
2024-08-22 14:28:41.094 +03:00 [DBG] Connection id "0HN62JLQPMT81" started.
2024-08-22 14:28:41.104 +03:00 [DBG] Connection 0HN62JLQPMT81 established using the following protocol: "Tls13"
2024-08-22 14:28:41.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/23/amenities - -
2024-08-22 14:28:41.165 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/23/amenities'
2024-08-22 14:28:41.168 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/amenities' is valid for the request path '/api/RoomClass/23/amenities'
2024-08-22 14:28:41.178 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.183 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 14:28:41.212 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 14:28:41.215 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.228 +03:00 [INF] Route matched with {action = "GetAmenitiesByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-22 14:28:41.234 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 14:28:41.236 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 14:28:41.242 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-22 14:28:41.247 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 14:28:41.250 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 14:28:41.254 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:41.295 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-22 14:28:41.297 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:41.301 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-22 14:28:41.304 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.306 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.312 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-22 14:28:41.315 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-22 14:28:41.427 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 14:28:41.434 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Amenities)
    .FirstOrDefault(rc => rc.RoomClassID == __roomClassId_0)'
2024-08-22 14:28:41.448 +03:00 [DBG] Including navigation: 'RoomClass.Amenities'.
2024-08-22 14:28:41.665 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RoomClassAmenity (Dictionary<string, object>).AmenityID (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: RoomClassAmenity (Dictionary<string, object>).RoomClassID (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
                3 -> Dictionary<IProperty, int> { [Property: Amenity.AmenityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Amenity.Description (string) Required, 9], [Property: Amenity.HotelId (int) Required FK Index, 10], [Property: Amenity.Name (string) Required, 11] }
                4 -> 6
                5 -> 7
                6 -> 8
            SELECT t.RoomClassID, t.CreatedAtUtc, t.Description, t.HotelId, t.Name, t.RoomType, t0.AmenityID, t0.RoomClassID, t0.AmenityID0, t0.Description, t0.HotelId, t0.Name
            FROM 
            (
                SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
                FROM RoomClasses AS r
                WHERE r.RoomClassID == @__roomClassId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT r0.AmenityID, r0.RoomClassID, a.AmenityID AS AmenityID0, a.Description, a.HotelId, a.Name
                FROM RoomClassAmenity AS r0
                INNER JOIN Amenities AS a ON r0.AmenityID == a.AmenityID
            ) AS t0 ON t.RoomClassID == t0.RoomClassID
            ORDER BY t.RoomClassID ASC, t0.AmenityID ASC, t0.RoomClassID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 14:28:41.676 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 14:28:41.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-22 14:28:41.683 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.685 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.688 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-22 14:28:41.729 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-22 14:28:41.736 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.800 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.837 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.867 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.869 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.873 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.876 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.879 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.881 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.883 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.886 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.893 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.897 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.899 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.901 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 14:28:41.903 +03:00 [DBG] A data reader was disposed.
2024-08-22 14:28:41.905 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.909 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 14:28:41.939 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 14:28:41.947 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 14:28:41.948 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 14:28:41.950 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 14:28:41.951 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 14:28:41.953 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 14:28:41.965 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API) in 711.3525ms
2024-08-22 14:28:41.970 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-22 14:28:41.974 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 14:28:41.981 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/23/amenities - - - 200 - application/json;+charset=utf-8 826.0306ms
2024-08-22 14:28:44.205 +03:00 [DBG] Connection id "0HN62JLQPMT81" received FIN.
2024-08-22 14:28:44.208 +03:00 [DBG] Connection id "0HN62JLQPMT81" is closed. The last processed stream ID was 1.
2024-08-22 14:28:44.212 +03:00 [DBG] Connection id "0HN62JLQPMT81" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 14:28:44.217 +03:00 [DBG] Connection id "0HN62JLQPMT81" stopped.
2024-08-22 19:23:16.727 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 19:23:17.149 +03:00 [DBG] Hosting starting
2024-08-22 19:23:17.269 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 19:23:17.283 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 19:23:17.344 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 19:23:17.350 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 19:23:17.381 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 19:23:17.409 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 19:23:17.413 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 19:23:17.445 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 19:23:17.461 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:23:17.475 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 19:23:17.480 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:23:17.499 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 19:23:17.515 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 19:23:17.531 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 19:23:17.537 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 19:23:18.202 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 19:23:18.508 +03:00 [DBG] Connection id "0HN62OQTO4BDO" accepted.
2024-08-22 19:23:18.509 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 19:23:18.524 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 19:23:18.527 +03:00 [DBG] Connection id "0HN62OQTO4BDO" started.
2024-08-22 19:23:18.535 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 19:23:18.540 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 19:23:18.553 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 19:23:18.557 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 19:23:18.560 +03:00 [INF] Hosting environment: Development
2024-08-22 19:23:18.571 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 19:23:18.580 +03:00 [DBG] Hosting started
2024-08-22 19:23:18.776 +03:00 [DBG] Connection id "0HN62OQTO4BDP" accepted.
2024-08-22 19:23:18.783 +03:00 [DBG] Connection id "0HN62OQTO4BDP" started.
2024-08-22 19:23:20.109 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" accepted.
2024-08-22 19:23:20.258 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" started.
2024-08-22 19:23:20.280 +03:00 [DBG] Connection id "0HN62OQTO4BDR" accepted.
2024-08-22 19:23:20.295 +03:00 [DBG] Connection id "0HN62OQTO4BDR" started.
2024-08-22 19:23:20.483 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" received FIN.
2024-08-22 19:23:20.595 +03:00 [DBG] Connection 0HN62OQTO4BDQ established using the following protocol: "Tls13"
2024-08-22 19:23:20.595 +03:00 [DBG] Connection 0HN62OQTO4BDR established using the following protocol: "Tls13"
2024-08-22 19:23:20.674 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" is closed. The last processed stream ID was 0.
2024-08-22 19:23:20.690 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:20.759 +03:00 [DBG] Connection id "0HN62OQTO4BDQ" stopped.
2024-08-22 19:23:20.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-22 19:23:22.837 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 19:23:22.984 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-22 19:23:22.986 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:23.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 2290.4712ms
2024-08-22 19:23:23.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 19:23:23.216 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 19:23:23.219 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:23.865 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 19:23:23.968 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 19:23:23.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 784.0291ms
2024-08-22 19:23:24.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-22 19:23:24.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-22 19:23:24.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-22 19:23:24.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 19:23:24.020 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-22 19:23:24.046 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.023 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-22 19:23:24.026 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-22 19:23:24.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 19:23:24.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 43.8561ms
2024-08-22 19:23:24.066 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.072 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:24.285 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-22 19:23:24.334 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-22 19:23:24.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 336.4397ms
2024-08-22 19:23:24.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 364.9358ms
2024-08-22 19:23:24.411 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-22 19:23:24.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 401.7396ms
2024-08-22 19:23:24.554 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 493.9694ms
2024-08-22 19:23:24.616 +03:00 [DBG] Connection id "0HN62OQTO4BDR" received FIN.
2024-08-22 19:23:24.623 +03:00 [DBG] Connection id "0HN62OQTO4BDR" is closed. The last processed stream ID was 13.
2024-08-22 19:23:24.637 +03:00 [DBG] Connection id "0HN62OQTO4BDR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:24.651 +03:00 [DBG] Connection id "0HN62OQTO4BDR" stopped.
2024-08-22 19:23:28.081 +03:00 [DBG] Connection id "0HN62OQTO4BDS" accepted.
2024-08-22 19:23:28.085 +03:00 [DBG] Connection id "0HN62OQTO4BDS" started.
2024-08-22 19:23:28.106 +03:00 [DBG] Connection 0HN62OQTO4BDS established using the following protocol: "Tls13"
2024-08-22 19:23:28.120 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 19:23:28.124 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 19:23:28.131 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:28.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-22 19:23:28.204 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-22 19:23:28.208 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:23:28.211 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-22 19:23:28.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 17.3452ms
2024-08-22 19:23:28.654 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 19:23:28.658 +03:00 [DBG] Connection id "0HN62OQTO4BDO" stopped.
2024-08-22 19:23:28.662 +03:00 [DBG] Connection id "0HN62OQTO4BDO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:28.795 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-22 19:23:28.797 +03:00 [DBG] Connection id "0HN62OQTO4BDP" stopped.
2024-08-22 19:23:28.804 +03:00 [DBG] Connection id "0HN62OQTO4BDP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:29.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 1140.6431ms
2024-08-22 19:23:29.619 +03:00 [DBG] Connection id "0HN62OQTO4BDS" received FIN.
2024-08-22 19:23:29.628 +03:00 [DBG] Connection id "0HN62OQTO4BDS" is closed. The last processed stream ID was 3.
2024-08-22 19:23:29.631 +03:00 [DBG] Connection id "0HN62OQTO4BDS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:23:29.636 +03:00 [DBG] Connection id "0HN62OQTO4BDS" stopped.
2024-08-22 19:24:06.515 +03:00 [DBG] Connection id "0HN62OQTO4BDT" accepted.
2024-08-22 19:24:06.526 +03:00 [DBG] Connection id "0HN62OQTO4BDT" started.
2024-08-22 19:24:06.563 +03:00 [DBG] Connection 0HN62OQTO4BDT established using the following protocol: "Tls13"
2024-08-22 19:24:06.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - -
2024-08-22 19:24:06.677 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Hotel/search'
2024-08-22 19:24:06.748 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/search' is valid for the request path '/api/Hotel/search'
2024-08-22 19:24:06.768 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/search'
2024-08-22 19:24:06.788 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:06.791 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:24:07.025 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:24:07.035 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:07.160 +03:00 [INF] Route matched with {action = "SearchHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchHotel(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:24:07.171 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:24:07.177 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:24:07.183 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:24:07.191 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:24:07.197 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:24:07.204 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:24:08.203 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 19:24:09.030 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:24:09.060 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-08-22 19:24:09.069 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-08-22 19:24:09.077 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.083 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.088 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-08-22 19:24:09.168 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-08-22 19:24:09.182 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' ...
2024-08-22 19:24:09.188 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' using the name 'desc' in request data ...
2024-08-22 19:24:09.193 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.198 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.203 +03:00 [DBG] Attempting to validate the bound parameter 'desc' of type 'System.String' ...
2024-08-22 19:24:09.209 +03:00 [DBG] Done attempting to validate the bound parameter 'desc' of type 'System.String'.
2024-08-22 19:24:09.214 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:24:09.219 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 19:24:09.226 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.231 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.236 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:24:09.245 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:24:09.250 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:24:09.255 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 19:24:09.262 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:09.267 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:09.272 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:24:09.276 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:24:11.835 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 19:24:11.843 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 19:24:11.851 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 19:24:11.866 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 19:24:11.871 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 19:24:12.154 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.159 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.165 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:24:12.299 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.307 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.315 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:24:12.949 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:24:13.334 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 19:24:15.170 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:24:15.177 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:24:15.513 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Hotels AS h
        WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
        ORDER BY (SELECT 1)
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 19:24:15.760 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:24:15.882 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (128ms).
2024-08-22 19:24:15.965 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:17.823 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:17.889 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 19:24:18.240 +03:00 [INF] Executed DbCommand (379ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-22 19:24:18.399 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.529 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:24:18.608 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:24:18.665 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:18.888 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:24:19.118 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:24:19.167 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:24:19.172 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:24:19.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:24:19.180 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:24:19.187 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 19:24:19.730 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API) in 12460.1588ms
2024-08-22 19:24:19.745 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:24:19.782 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:24:19.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 13270.4391ms
2024-08-22 19:24:24.636 +03:00 [DBG] Connection id "0HN62OQTO4BDT" received FIN.
2024-08-22 19:24:24.640 +03:00 [DBG] Connection id "0HN62OQTO4BDT" is closed. The last processed stream ID was 1.
2024-08-22 19:24:24.646 +03:00 [DBG] Connection id "0HN62OQTO4BDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:24:24.654 +03:00 [DBG] Connection id "0HN62OQTO4BDT" stopped.
2024-08-22 19:35:53.716 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-22 19:35:54.077 +03:00 [DBG] Hosting starting
2024-08-22 19:35:54.185 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-22 19:35:54.198 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-22 19:35:54.255 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-22 19:35:54.261 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-22 19:35:54.296 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-22 19:35:54.323 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-22 19:35:54.327 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-22 19:35:54.350 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-22 19:35:54.362 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:35:54.373 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-22 19:35:54.377 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-22 19:35:54.393 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-22 19:35:54.408 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-22 19:35:54.424 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-22 19:35:54.430 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-22 19:35:55.018 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-22 19:35:55.219 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-22 19:35:55.222 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-22 19:35:55.226 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-22 19:35:55.229 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-22 19:35:55.232 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-22 19:35:55.236 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-22 19:35:55.238 +03:00 [INF] Hosting environment: Development
2024-08-22 19:35:55.241 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-22 19:35:55.245 +03:00 [DBG] Hosting started
2024-08-22 19:35:55.480 +03:00 [DBG] Connection id "0HN62P1VB9S0J" received FIN.
2024-08-22 19:35:55.510 +03:00 [DBG] Connection id "0HN62P1VB9S0J" accepted.
2024-08-22 19:35:55.518 +03:00 [DBG] Connection id "0HN62P1VB9S0J" started.
2024-08-22 19:35:55.583 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-22 19:35:55.768 +03:00 [DBG] Connection id "0HN62P1VB9S0J" stopped.
2024-08-22 19:35:55.783 +03:00 [DBG] Connection id "0HN62P1VB9S0J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:35:57.154 +03:00 [DBG] Connection id "0HN62P1VB9S0K" accepted.
2024-08-22 19:35:57.172 +03:00 [DBG] Connection id "0HN62P1VB9S0K" started.
2024-08-22 19:35:57.339 +03:00 [DBG] Connection 0HN62P1VB9S0K established using the following protocol: "Tls13"
2024-08-22 19:35:57.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-22 19:35:58.399 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-22 19:35:58.523 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-22 19:35:58.528 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:35:59.200 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-22 19:35:59.278 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-22 19:35:59.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-22 19:35:59.328 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1784.1642ms
2024-08-22 19:35:59.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-22 19:35:59.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 52.3057ms
2024-08-22 19:35:59.572 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 233.3448ms
2024-08-22 19:35:59.850 +03:00 [DBG] Connection id "0HN62P1VB9S0K" received FIN.
2024-08-22 19:35:59.873 +03:00 [DBG] Connection id "0HN62P1VB9S0K" is closed. The last processed stream ID was 5.
2024-08-22 19:35:59.881 +03:00 [DBG] Connection id "0HN62P1VB9S0K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:35:59.892 +03:00 [DBG] Connection id "0HN62P1VB9S0K" stopped.
2024-08-22 19:36:02.403 +03:00 [DBG] Connection id "0HN62P1VB9S0L" accepted.
2024-08-22 19:36:02.408 +03:00 [DBG] Connection id "0HN62P1VB9S0L" started.
2024-08-22 19:36:02.450 +03:00 [DBG] Connection 0HN62P1VB9S0L established using the following protocol: "Tls13"
2024-08-22 19:36:02.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-22 19:36:02.493 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-22 19:36:02.500 +03:00 [DBG] Request did not match any endpoints
2024-08-22 19:36:03.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 775.9736ms
2024-08-22 19:36:04.860 +03:00 [DBG] Connection id "0HN62P1VB9S0L" received FIN.
2024-08-22 19:36:04.863 +03:00 [DBG] Connection id "0HN62P1VB9S0L" is closed. The last processed stream ID was 1.
2024-08-22 19:36:04.868 +03:00 [DBG] Connection id "0HN62P1VB9S0L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:04.872 +03:00 [DBG] Connection id "0HN62P1VB9S0L" stopped.
2024-08-22 19:36:16.326 +03:00 [DBG] Connection id "0HN62P1VB9S0M" accepted.
2024-08-22 19:36:16.329 +03:00 [DBG] Connection id "0HN62P1VB9S0M" started.
2024-08-22 19:36:16.343 +03:00 [DBG] Connection 0HN62P1VB9S0M established using the following protocol: "Tls13"
2024-08-22 19:36:16.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/28 - -
2024-08-22 19:36:16.374 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/28'
2024-08-22 19:36:16.398 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/28'
2024-08-22 19:36:16.406 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:16.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:36:16.623 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:36:16.640 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:16.763 +03:00 [INF] Route matched with {action = "GetHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotel(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:36:16.772 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:36:16.777 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:36:16.781 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:36:16.789 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:36:16.795 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:36:16.802 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:17.460 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-22 19:36:18.316 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:18.337 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-22 19:36:18.345 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-22 19:36:18.352 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:18.358 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:18.362 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-22 19:36:18.436 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-22 19:36:21.139 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-22 19:36:21.146 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-22 19:36:21.151 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-22 19:36:21.157 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-22 19:36:21.163 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-22 19:36:21.505 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.510 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.515 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-22 19:36:21.658 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:21.663 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:21.669 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-22 19:36:22.312 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:36:22.719 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-22 19:36:23.175 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 19:36:23.185 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 19:36:23.193 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 19:36:24.286 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-22 19:36:24.506 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:24.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (144ms).
2024-08-22 19:36:24.721 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:25.805 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:25.879 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:26.240 +03:00 [INF] Executed DbCommand (394ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:26.560 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.664 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.730 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:26.803 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:26.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 19:36:26.814 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 19:36:26.878 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-22 19:36:26.933 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:26.957 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:26.972 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:27.019 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:27.110 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:36:27.128 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:36:27.130 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:36:27.133 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:36:27.137 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:36:27.142 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-22 19:36:27.305 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API) in 10489.2626ms
2024-08-22 19:36:27.318 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:27.351 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:36:27.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/28 - - - 200 - application/json;+charset=utf-8 11013.6670ms
2024-08-22 19:36:29.857 +03:00 [DBG] Connection id "0HN62P1VB9S0M" received FIN.
2024-08-22 19:36:29.863 +03:00 [DBG] Connection id "0HN62P1VB9S0M" is closed. The last processed stream ID was 1.
2024-08-22 19:36:29.868 +03:00 [DBG] Connection id "0HN62P1VB9S0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:29.874 +03:00 [DBG] Connection id "0HN62P1VB9S0M" stopped.
2024-08-22 19:36:40.051 +03:00 [DBG] Connection id "0HN62P1VB9S0N" accepted.
2024-08-22 19:36:40.054 +03:00 [DBG] Connection id "0HN62P1VB9S0N" started.
2024-08-22 19:36:40.066 +03:00 [DBG] Connection 0HN62P1VB9S0N established using the following protocol: "Tls13"
2024-08-22 19:36:40.143 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - -
2024-08-22 19:36:40.152 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Hotel/search'
2024-08-22 19:36:40.155 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/search' is valid for the request path '/api/Hotel/search'
2024-08-22 19:36:40.167 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/search'
2024-08-22 19:36:40.172 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:40.176 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-22 19:36:40.180 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-22 19:36:40.184 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:40.203 +03:00 [INF] Route matched with {action = "SearchHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchHotel(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-22 19:36:40.208 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-22 19:36:40.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-22 19:36:40.219 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-22 19:36:40.225 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-22 19:36:40.231 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-22 19:36:40.237 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:40.243 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-22 19:36:40.315 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-08-22 19:36:40.322 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-08-22 19:36:40.327 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.333 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.337 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-08-22 19:36:40.353 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-08-22 19:36:40.356 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' ...
2024-08-22 19:36:40.360 +03:00 [DBG] Attempting to bind parameter 'desc' of type 'System.String' using the name 'desc' in request data ...
2024-08-22 19:36:40.366 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.371 +03:00 [DBG] Done attempting to bind parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.375 +03:00 [DBG] Attempting to validate the bound parameter 'desc' of type 'System.String' ...
2024-08-22 19:36:40.386 +03:00 [DBG] Done attempting to validate the bound parameter 'desc' of type 'System.String'.
2024-08-22 19:36:40.389 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:36:40.395 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-22 19:36:40.402 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.405 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.409 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-22 19:36:40.416 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-22 19:36:40.428 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:36:40.433 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-22 19:36:40.437 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.443 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.448 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-22 19:36:40.454 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-22 19:36:40.476 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-22 19:36:40.531 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .Where(h => False || h.Name.Contains(__hotelName_0) && False || h.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-22 19:36:40.538 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-22 19:36:40.541 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-22 19:36:40.545 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-22 19:36:40.585 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:36:40.589 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-22 19:36:40.685 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
            2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
            3 -> 0
            4 -> 8
            5 -> 15
        SELECT t.HotelId, t.CityID, t.CreatedAtUtc, t.Description, t.Name, t.OwnerID, t.PhoneNumber, t.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM 
        (
            SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE (CAST(0 AS bit) || ((@__hotelName_0 LIKE N'') || (CHARINDEX(@__hotelName_0, h.Name) > 0))) && (CAST(0 AS bit) || ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, h.Description) > 0)))
            ORDER BY (SELECT 1)
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS t
        INNER JOIN Cities AS c ON t.CityID == c.CityID
        INNER JOIN owners AS o ON t.OwnerID == o.OwnerID
        ORDER BY t.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-22 19:36:40.707 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:40.712 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-22 19:36:40.720 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:40.729 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:40.735 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[CityID], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[OwnerID], [t].[PhoneNumber], [t].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.816 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[HotelId], [t].[CityID], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[OwnerID], [t].[PhoneNumber], [t].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.831 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.836 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.842 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-22 19:36:40.855 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-22 19:36:40.860 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [c].[CityID], [o].[OwnerID]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[OwnerID]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.944 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__hotelName_0='?' (Size = 100), @__description_1='?' (Size = 500), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [c].[CityID], [o].[OwnerID]
FROM (
    SELECT [h].[HotelId], [h].[CityID], [h].[OwnerID]
    FROM [Hotels] AS [h]
    WHERE ((@__hotelName_0 LIKE N'') OR (CHARINDEX(@__hotelName_0, [h].[Name]) > 0)) AND ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [h].[Description]) > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Cities] AS [c] ON [t].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [t].[OwnerID] = [o].[OwnerID]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-22 19:36:40.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.962 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.966 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.984 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.988 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.993 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-22 19:36:40.998 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:41.000 +03:00 [DBG] A data reader was disposed.
2024-08-22 19:36:41.003 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:41.007 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-22 19:36:41.022 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-22 19:36:41.031 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-22 19:36:41.033 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-22 19:36:41.036 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-22 19:36:41.040 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-22 19:36:41.045 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-22 19:36:41.054 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API) in 816.832ms
2024-08-22 19:36:41.060 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.SearchHotel (HotelBookingPlatform.API)'
2024-08-22 19:36:41.065 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-22 19:36:41.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/search?name=La&desc=A&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 925.1872ms
2024-08-22 19:36:44.868 +03:00 [DBG] Connection id "0HN62P1VB9S0N" received FIN.
2024-08-22 19:36:44.873 +03:00 [DBG] Connection id "0HN62P1VB9S0N" is closed. The last processed stream ID was 1.
2024-08-22 19:36:44.878 +03:00 [DBG] Connection id "0HN62P1VB9S0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-22 19:36:44.883 +03:00 [DBG] Connection id "0HN62P1VB9S0N" stopped.
2024-08-23 14:47:38.814 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 14:47:39.005 +03:00 [DBG] Hosting starting
2024-08-23 14:47:39.062 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 14:47:39.068 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 14:47:39.130 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 14:47:39.147 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 14:47:39.183 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 14:47:39.199 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 14:47:39.203 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 14:47:39.215 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 14:47:39.223 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:47:39.229 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 14:47:39.232 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:47:39.242 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 14:47:39.251 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 14:47:39.259 +03:00 [DBG] Default key expiration imminent and repository contains no viable successor. Caller should generate a successor.
2024-08-23 14:47:39.260 +03:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2024-08-23 14:47:39.270 +03:00 [INF] Creating key {8b924b12-ddc6-487f-b83a-45744266a460} with creation date 2024-08-23 11:47:39Z, activation date 2024-08-24 22:00:11Z, and expiration date 2024-11-21 11:47:39Z.
2024-08-23 14:47:39.286 +03:00 [DBG] Descriptor deserializer type for key {8b924b12-ddc6-487f-b83a-45744266a460} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2024-08-23 14:47:39.290 +03:00 [DBG] No key escrow sink found. Not writing key {8b924b12-ddc6-487f-b83a-45744266a460} to escrow.
2024-08-23 14:47:39.303 +03:00 [DBG] Encrypting to Windows DPAPI for current user account (DESKTOP-K7JO1GJ\hp).
2024-08-23 14:47:39.308 +03:00 [INF] Writing data to file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 14:47:39.311 +03:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2024-08-23 14:47:39.313 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 14:47:39.316 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 14:47:39.319 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 14:47:39.334 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 14:47:39.337 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 14:47:39.340 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 14:47:39.342 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 14:47:39.344 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 14:47:39.346 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 14:47:39.349 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:47:39.352 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 14:47:39.355 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:47:39.357 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 14:47:39.359 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 14:47:39.363 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 14:47:39.365 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 14:47:39.689 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 14:47:39.794 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 14:47:39.796 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 14:47:39.797 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 14:47:39.799 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 14:47:39.801 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 14:47:39.802 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 14:47:39.803 +03:00 [INF] Hosting environment: Development
2024-08-23 14:47:39.805 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 14:47:39.807 +03:00 [DBG] Hosting started
2024-08-23 14:47:39.833 +03:00 [DBG] Connection id "0HN63D5I1N7J0" accepted.
2024-08-23 14:47:39.833 +03:00 [DBG] Connection id "0HN63D5I1N7J1" accepted.
2024-08-23 14:47:39.839 +03:00 [DBG] Connection id "0HN63D5I1N7J0" started.
2024-08-23 14:47:39.839 +03:00 [DBG] Connection id "0HN63D5I1N7J1" started.
2024-08-23 14:47:42.321 +03:00 [DBG] Connection id "0HN63D5I1N7J2" accepted.
2024-08-23 14:47:42.323 +03:00 [DBG] Connection id "0HN63D5I1N7J2" started.
2024-08-23 14:47:42.339 +03:00 [DBG] Connection id "0HN63D5I1N7J3" accepted.
2024-08-23 14:47:42.341 +03:00 [DBG] Connection id "0HN63D5I1N7J3" started.
2024-08-23 14:47:42.393 +03:00 [DBG] Connection id "0HN63D5I1N7J2" received FIN.
2024-08-23 14:47:42.432 +03:00 [DBG] Connection 0HN63D5I1N7J3 established using the following protocol: "Tls13"
2024-08-23 14:47:42.432 +03:00 [DBG] Connection 0HN63D5I1N7J2 established using the following protocol: "Tls13"
2024-08-23 14:47:42.466 +03:00 [DBG] Connection id "0HN63D5I1N7J2" is closed. The last processed stream ID was 0.
2024-08-23 14:47:42.476 +03:00 [DBG] Connection id "0HN63D5I1N7J2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:47:42.496 +03:00 [DBG] Connection id "0HN63D5I1N7J2" stopped.
2024-08-23 14:47:42.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-23 14:47:42.816 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 14:47:42.865 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-23 14:47:42.869 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:42.939 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 375.1172ms
2024-08-23 14:47:42.940 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 14:47:42.948 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 14:47:42.952 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:43.171 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 14:47:43.198 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 14:47:43.201 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 260.6912ms
2024-08-23 14:47:43.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-23 14:47:43.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-23 14:47:43.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-23 14:47:43.225 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-23 14:47:43.226 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-23 14:47:43.227 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-23 14:47:43.228 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:43.229 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:43.231 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:43.258 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-23 14:47:43.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 38.2692ms
2024-08-23 14:47:43.261 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-23 14:47:43.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 14:47:43.266 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 42.5049ms
2024-08-23 14:47:43.278 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.9897ms
2024-08-23 14:47:43.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 14:47:43.386 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-23 14:47:43.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 178.5471ms
2024-08-23 14:47:43.526 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 200.7636ms
2024-08-23 14:47:45.140 +03:00 [DBG] Connection id "0HN63D5I1N7J3" received FIN.
2024-08-23 14:47:45.144 +03:00 [DBG] Connection id "0HN63D5I1N7J3" is closed. The last processed stream ID was 13.
2024-08-23 14:47:45.148 +03:00 [DBG] Connection id "0HN63D5I1N7J3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:47:45.155 +03:00 [DBG] Connection id "0HN63D5I1N7J3" stopped.
2024-08-23 14:47:45.402 +03:00 [DBG] Connection id "0HN63D5I1N7J4" accepted.
2024-08-23 14:47:45.405 +03:00 [DBG] Connection id "0HN63D5I1N7J4" started.
2024-08-23 14:47:45.415 +03:00 [DBG] Connection 0HN63D5I1N7J4 established using the following protocol: "Tls13"
2024-08-23 14:47:45.420 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 14:47:45.422 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 14:47:45.423 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:45.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-23 14:47:45.529 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-23 14:47:45.536 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:47:45.538 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-23 14:47:45.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 15.5490ms
2024-08-23 14:47:45.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 429.4205ms
2024-08-23 14:47:49.902 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-23 14:47:49.902 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-23 14:47:49.905 +03:00 [DBG] Connection id "0HN63D5I1N7J0" stopped.
2024-08-23 14:47:49.907 +03:00 [DBG] Connection id "0HN63D5I1N7J1" stopped.
2024-08-23 14:47:49.909 +03:00 [DBG] Connection id "0HN63D5I1N7J0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:47:49.911 +03:00 [DBG] Connection id "0HN63D5I1N7J1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:47:50.145 +03:00 [DBG] Connection id "0HN63D5I1N7J4" received FIN.
2024-08-23 14:47:50.147 +03:00 [DBG] Connection id "0HN63D5I1N7J4" is closed. The last processed stream ID was 3.
2024-08-23 14:47:50.149 +03:00 [DBG] Connection id "0HN63D5I1N7J4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:47:50.158 +03:00 [DBG] Connection id "0HN63D5I1N7J4" stopped.
2024-08-23 14:48:05.076 +03:00 [DBG] Connection id "0HN63D5I1N7J5" accepted.
2024-08-23 14:48:05.084 +03:00 [DBG] Connection id "0HN63D5I1N7J5" started.
2024-08-23 14:48:05.095 +03:00 [DBG] Connection 0HN63D5I1N7J5 established using the following protocol: "Tls13"
2024-08-23 14:48:05.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/34 - -
2024-08-23 14:48:05.111 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/34'
2024-08-23 14:48:05.129 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/34'
2024-08-23 14:48:05.132 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 14:48:05.133 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:48:05.242 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:48:05.249 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 14:48:05.327 +03:00 [INF] Route matched with {action = "GetHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotel(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 14:48:05.334 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:48:05.335 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:48:05.337 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 14:48:05.341 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:48:05.345 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:48:05.351 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:48:05.659 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 14:48:06.001 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:48:06.015 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 14:48:06.019 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 14:48:06.022 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:48:06.027 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:48:06.029 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 14:48:06.074 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 14:48:07.082 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 14:48:07.086 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 14:48:07.099 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 14:48:07.100 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 14:48:07.102 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 14:48:07.218 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:48:07.223 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:48:07.226 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:48:07.277 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:48:07.279 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:48:07.281 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:48:07.541 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:48:07.721 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 14:48:07.877 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 14:48:07.882 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 14:48:07.885 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 14:48:08.268 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 14:48:08.362 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:48:08.442 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (80ms).
2024-08-23 14:48:08.476 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:08.975 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:09.001 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 14:48:09.161 +03:00 [INF] Executed DbCommand (170ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 14:48:09.289 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:48:09.335 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:48:09.367 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:48:09.398 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:48:09.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:48:09.402 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 14:48:09.447 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 14:48:09.468 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:48:09.477 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:48:09.482 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:09.497 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:09.528 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 14:48:09.536 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 14:48:09.539 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 14:48:09.540 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 14:48:09.542 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 14:48:09.543 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 14:48:09.601 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API) in 4245.8692ms
2024-08-23 14:48:09.608 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 14:48:09.620 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:48:09.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/34 - - - 200 - application/json;+charset=utf-8 4532.7519ms
2024-08-23 14:48:10.164 +03:00 [DBG] Connection id "0HN63D5I1N7J5" received FIN.
2024-08-23 14:48:10.167 +03:00 [DBG] Connection id "0HN63D5I1N7J5" is closed. The last processed stream ID was 1.
2024-08-23 14:48:10.170 +03:00 [DBG] Connection id "0HN63D5I1N7J5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:48:10.179 +03:00 [DBG] Connection id "0HN63D5I1N7J5" stopped.
2024-08-23 14:48:35.112 +03:00 [DBG] Connection id "0HN63D5I1N7J6" accepted.
2024-08-23 14:48:35.121 +03:00 [DBG] Connection id "0HN63D5I1N7J6" started.
2024-08-23 14:48:35.139 +03:00 [DBG] Connection 0HN63D5I1N7J6 established using the following protocol: "Tls13"
2024-08-23 14:48:35.147 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/34/rooms - -
2024-08-23 14:48:35.171 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/34/rooms'
2024-08-23 14:48:35.174 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/rooms' is valid for the request path '/api/Hotel/34/rooms'
2024-08-23 14:48:35.176 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:48:35.177 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:48:35.180 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:48:35.183 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:48:35.189 +03:00 [INF] Route matched with {action = "GetRoomsByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByHotelIdAsync(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 14:48:35.193 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:48:35.196 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:48:35.200 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 14:48:35.201 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:48:35.203 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:48:35.204 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:48:35.206 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:48:35.221 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 14:48:35.224 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 14:48:35.226 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:48:35.229 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:48:35.230 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 14:48:35.232 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:48:35.254 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:48:35.266 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.RoomClasses)
    .ThenInclude(rc => rc.Rooms)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-23 14:48:35.269 +03:00 [DBG] Including navigation: 'Hotel.RoomClasses'.
2024-08-23 14:48:35.270 +03:00 [DBG] Including navigation: 'RoomClass.Rooms'.
2024-08-23 14:48:35.296 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 14:48:35.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:48:35.303 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:48:35.306 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:35.312 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:35.315 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 14:48:35.319 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 14:48:35.322 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 14:48:35.324 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 14:48:35.325 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 14:48:35.327 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 14:48:35.330 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Threading.Tasks.Task`1[[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 14:48:35.340 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 14:48:35.346 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:48:35.350 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:48:35.352 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:48:35.354 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:48:35.368 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:48:35.373 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:48:35.373 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:48:35.374 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:35.376 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:48:35.388 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API) in 183.5335ms
2024-08-23 14:48:35.391 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:48:35.393 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:48:35.396 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/34/rooms - - - 200 - application/json;+charset=utf-8 249.5735ms
2024-08-23 14:48:45.203 +03:00 [DBG] Connection id "0HN63D5I1N7J6" received FIN.
2024-08-23 14:48:45.206 +03:00 [DBG] Connection id "0HN63D5I1N7J6" is closed. The last processed stream ID was 1.
2024-08-23 14:48:45.211 +03:00 [DBG] Connection id "0HN63D5I1N7J6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:48:45.221 +03:00 [DBG] Connection id "0HN63D5I1N7J6" stopped.
2024-08-23 14:49:02.348 +03:00 [DBG] Connection id "0HN63D5I1N7J7" accepted.
2024-08-23 14:49:02.357 +03:00 [DBG] Connection id "0HN63D5I1N7J7" started.
2024-08-23 14:49:02.365 +03:00 [DBG] Connection 0HN63D5I1N7J7 established using the following protocol: "Tls13"
2024-08-23 14:49:02.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Room/by-price?minPrice=100&maxPrice=200 - -
2024-08-23 14:49:02.372 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Room/by-price'
2024-08-23 14:49:02.376 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomController.GetRoomsByPriceRange (HotelBookingPlatform.API)' with route pattern 'api/Room/by-price' is valid for the request path '/api/Room/by-price'
2024-08-23 14:49:02.379 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomController.GetRoom (HotelBookingPlatform.API)' with route pattern 'api/Room/{id}' is valid for the request path '/api/Room/by-price'
2024-08-23 14:49:02.381 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomController.GetRoomsByPriceRange (HotelBookingPlatform.API)'
2024-08-23 14:49:02.385 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:49:02.391 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:49:02.394 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomController.GetRoomsByPriceRange (HotelBookingPlatform.API)'
2024-08-23 14:49:02.398 +03:00 [INF] Route matched with {action = "GetRoomsByPriceRange", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByPriceRange(System.Decimal, System.Decimal) on controller HotelBookingPlatform.API.Controllers.RoomController (HotelBookingPlatform.API).
2024-08-23 14:49:02.403 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:49:02.407 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:49:02.408 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 14:49:02.411 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:49:02.412 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:49:02.414 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomController (HotelBookingPlatform.API)
2024-08-23 14:49:02.424 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomController (HotelBookingPlatform.API)
2024-08-23 14:49:02.436 +03:00 [DBG] Attempting to bind parameter 'minPrice' of type 'System.Decimal' ...
2024-08-23 14:49:02.440 +03:00 [DBG] Attempting to bind parameter 'minPrice' of type 'System.Decimal' using the name 'minPrice' in request data ...
2024-08-23 14:49:02.443 +03:00 [DBG] Done attempting to bind parameter 'minPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.444 +03:00 [DBG] Done attempting to bind parameter 'minPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.445 +03:00 [DBG] Attempting to validate the bound parameter 'minPrice' of type 'System.Decimal' ...
2024-08-23 14:49:02.447 +03:00 [DBG] Done attempting to validate the bound parameter 'minPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.449 +03:00 [DBG] Attempting to bind parameter 'maxPrice' of type 'System.Decimal' ...
2024-08-23 14:49:02.453 +03:00 [DBG] Attempting to bind parameter 'maxPrice' of type 'System.Decimal' using the name 'maxPrice' in request data ...
2024-08-23 14:49:02.455 +03:00 [DBG] Done attempting to bind parameter 'maxPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.457 +03:00 [DBG] Done attempting to bind parameter 'maxPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.458 +03:00 [DBG] Attempting to validate the bound parameter 'maxPrice' of type 'System.Decimal' ...
2024-08-23 14:49:02.460 +03:00 [DBG] Done attempting to validate the bound parameter 'maxPrice' of type 'System.Decimal'.
2024-08-23 14:49:02.523 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:49:02.540 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(rc => rc.RoomClass)
    .Where(r => r.PricePerNight >= __minPrice_0 && r.PricePerNight <= __maxPrice_1)'
2024-08-23 14:49:02.543 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-23 14:49:02.551 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Room>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
        SELECT r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
        FROM Rooms AS r
        INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
        WHERE (r.PricePerNight >= @__minPrice_0) && (r.PricePerNight <= @__maxPrice_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 14:49:02.564 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:49:02.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 14:49:02.572 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:49:02.575 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:49:02.578 +03:00 [DBG] Executing DbCommand [Parameters=[@__minPrice_0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__maxPrice_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE ([r].[PricePerNight] >= @__minPrice_0) AND ([r].[PricePerNight] <= @__maxPrice_1)
2024-08-23 14:49:02.623 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__minPrice_0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__maxPrice_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE ([r].[PricePerNight] >= @__minPrice_0) AND ([r].[PricePerNight] <= @__maxPrice_1)
2024-08-23 14:49:02.654 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.698 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.702 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.705 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.707 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.708 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.709 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.711 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.712 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.713 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.718 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.719 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.720 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.723 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.725 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.727 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.728 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.730 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.733 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.735 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.737 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.738 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.740 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.741 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.742 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.743 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.744 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.746 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.747 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.749 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.752 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.761 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.764 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.766 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.769 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.772 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.775 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:49:02.778 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:49:02.780 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:49:02.781 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:49:02.788 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 14:49:02.793 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 14:49:02.794 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 14:49:02.796 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 14:49:02.796 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 14:49:02.797 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 14:49:02.799 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 14:49:02.813 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomController.GetRoomsByPriceRange (HotelBookingPlatform.API) in 398.6742ms
2024-08-23 14:49:02.816 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomController.GetRoomsByPriceRange (HotelBookingPlatform.API)'
2024-08-23 14:49:02.820 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:49:02.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Room/by-price?minPrice=100&maxPrice=200 - - - 200 - application/json;+charset=utf-8 451.4509ms
2024-08-23 14:49:05.231 +03:00 [DBG] Connection id "0HN63D5I1N7J7" received FIN.
2024-08-23 14:49:05.235 +03:00 [DBG] Connection id "0HN63D5I1N7J7" is closed. The last processed stream ID was 1.
2024-08-23 14:49:05.238 +03:00 [DBG] Connection id "0HN63D5I1N7J7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:49:05.246 +03:00 [DBG] Connection id "0HN63D5I1N7J7" stopped.
2024-08-23 14:53:10.056 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 14:53:10.299 +03:00 [DBG] Hosting starting
2024-08-23 14:53:10.375 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 14:53:10.384 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 14:53:10.429 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 14:53:10.433 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 14:53:10.437 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 14:53:10.460 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 14:53:10.480 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 14:53:10.483 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 14:53:10.485 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 14:53:10.499 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 14:53:10.510 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:53:10.519 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 14:53:10.525 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:53:10.542 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 14:53:10.560 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 14:53:10.577 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 14:53:10.596 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 14:53:11.316 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 14:53:11.440 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 14:53:11.443 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 14:53:11.446 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 14:53:11.448 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 14:53:11.450 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 14:53:11.451 +03:00 [DBG] Connection id "0HN63D8KS9LP6" received FIN.
2024-08-23 14:53:11.452 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 14:53:11.453 +03:00 [DBG] Connection id "0HN63D8KS9LP6" accepted.
2024-08-23 14:53:11.455 +03:00 [INF] Hosting environment: Development
2024-08-23 14:53:11.458 +03:00 [DBG] Connection id "0HN63D8KS9LP6" started.
2024-08-23 14:53:11.458 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 14:53:11.461 +03:00 [DBG] Hosting started
2024-08-23 14:53:11.503 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 14:53:11.629 +03:00 [DBG] Connection id "0HN63D8KS9LP6" stopped.
2024-08-23 14:53:11.635 +03:00 [DBG] Connection id "0HN63D8KS9LP6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:53:14.298 +03:00 [DBG] Connection id "0HN63D8KS9LP7" accepted.
2024-08-23 14:53:14.312 +03:00 [DBG] Connection id "0HN63D8KS9LP7" started.
2024-08-23 14:53:14.467 +03:00 [DBG] Connection 0HN63D8KS9LP7 established using the following protocol: "Tls13"
2024-08-23 14:53:14.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 14:53:14.842 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 14:53:14.942 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 14:53:14.945 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:53:15.271 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 14:53:15.313 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 14:53:15.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 14:53:15.337 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 744.2608ms
2024-08-23 14:53:15.346 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 9.3014ms
2024-08-23 14:53:15.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 14:53:15.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 139.5360ms
2024-08-23 14:53:15.622 +03:00 [DBG] Connection id "0HN63D8KS9LP7" received FIN.
2024-08-23 14:53:15.644 +03:00 [DBG] Connection id "0HN63D8KS9LP7" is closed. The last processed stream ID was 5.
2024-08-23 14:53:15.652 +03:00 [DBG] Connection id "0HN63D8KS9LP7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:53:15.662 +03:00 [DBG] Connection id "0HN63D8KS9LP7" stopped.
2024-08-23 14:53:17.267 +03:00 [DBG] Connection id "0HN63D8KS9LP8" accepted.
2024-08-23 14:53:17.270 +03:00 [DBG] Connection id "0HN63D8KS9LP8" started.
2024-08-23 14:53:17.287 +03:00 [DBG] Connection 0HN63D8KS9LP8 established using the following protocol: "Tls13"
2024-08-23 14:53:17.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 14:53:17.295 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 14:53:17.297 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:53:17.750 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 457.8803ms
2024-08-23 14:53:20.629 +03:00 [DBG] Connection id "0HN63D8KS9LP8" received FIN.
2024-08-23 14:53:20.636 +03:00 [DBG] Connection id "0HN63D8KS9LP8" is closed. The last processed stream ID was 1.
2024-08-23 14:53:20.644 +03:00 [DBG] Connection id "0HN63D8KS9LP8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:53:20.661 +03:00 [DBG] Connection id "0HN63D8KS9LP8" stopped.
2024-08-23 14:54:19.973 +03:00 [DBG] Connection id "0HN63D8KS9LP9" accepted.
2024-08-23 14:54:19.983 +03:00 [DBG] Connection id "0HN63D8KS9LP9" started.
2024-08-23 14:54:20.035 +03:00 [DBG] Connection 0HN63D8KS9LP9 established using the following protocol: "Tls13"
2024-08-23 14:54:20.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/28/rating - -
2024-08-23 14:54:20.067 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/28/rating'
2024-08-23 14:54:20.081 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}/rating' is valid for the request path '/api/Hotel/28/rating'
2024-08-23 14:54:20.084 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:20.087 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:54:20.191 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:54:20.198 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:20.269 +03:00 [INF] Route matched with {action = "GetHotelReviewRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelReviewRating(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 14:54:20.275 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:54:20.280 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:54:20.281 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 14:54:20.284 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:54:20.285 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:54:20.287 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:54:20.571 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 14:54:20.926 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:54:20.938 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 14:54:20.943 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 14:54:20.947 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:20.948 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:20.949 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 14:54:20.991 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:22.118 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 14:54:22.124 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 14:54:22.127 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 14:54:22.129 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 14:54:22.130 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 14:54:22.251 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:54:22.256 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:54:22.259 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:54:22.310 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:54:22.313 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:54:22.315 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:54:22.553 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:54:22.698 +03:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Include(r => r.User)
    .Include(r => r.Hotel)
    .AsSplitQuery()
    .Where(r => r.HotelId == __hotelId_0)'
2024-08-23 14:54:22.897 +03:00 [DBG] Including navigation: 'Review.User'.
2024-08-23 14:54:22.900 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 14:54:22.905 +03:00 [DBG] Including navigation: 'Review.Hotel'.
2024-08-23 14:54:23.284 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Review>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Review.ReviewID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Content (string) Required, 1], [Property: Review.CreatedAtUtc (DateTime) Required, 2], [Property: Review.HotelId (int) Required FK Index, 3], [Property: Review.ModifiedAtUtc (DateTime?), 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (string) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 7], [Property: LocalUser.AccessFailedCount (int) Required, 8], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 9], [Property: LocalUser.Email (string) MaxLength(256), 10], [Property: LocalUser.EmailConfirmed (bool) Required, 11], [Property: LocalUser.FirstName (string) Required, 12], [Property: LocalUser.LastName (string) Required, 13], [Property: LocalUser.LockoutEnabled (bool) Required, 14], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 15], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 16], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 17], [Property: LocalUser.PasswordHash (string), 18], [Property: LocalUser.PhoneNumber (string), 19], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 20], [Property: LocalUser.SecurityStamp (string), 21], [Property: LocalUser.TwoFactorEnabled (bool) Required, 22], [Property: LocalUser.UserName (string) MaxLength(256), 23] }
            2 -> 0
            3 -> 7
            4 -> 24
            5 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 24], [Property: Hotel.CityID (int) Required FK Index, 25], [Property: Hotel.CreatedAtUtc (DateTime) Required, 26], [Property: Hotel.Description (string) MaxLength(500), 27], [Property: Hotel.Name (string) Required MaxLength(100), 28], [Property: Hotel.OwnerID (int) Required FK Index, 29], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 30], [Property: Hotel.StarRating (int) Required, 31] }
        SELECT r.ReviewID, r.Content, r.CreatedAtUtc, r.HotelId, r.ModifiedAtUtc, r.Rating, r.UserId, a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
        FROM Reviews AS r
        INNER JOIN AspNetUsers AS a ON r.UserId == a.Id
        INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
        WHERE r.HotelId == @__hotelId_0
        ORDER BY r.ReviewID ASC, a.Id ASC, h.HotelId ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Review>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 14:54:23.367 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:54:23.444 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (78ms).
2024-08-23 14:54:23.475 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:23.958 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:23.985 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:24.151 +03:00 [INF] Executed DbCommand (176ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:24.215 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:54:24.231 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:24.249 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:24.444 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API) in 4150.6911ms
2024-08-23 14:54:24.451 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:24.718 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:54:24.728 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/28/rating - - - 404 - application/json 4675.8691ms
2024-08-23 14:54:25.716 +03:00 [DBG] Connection id "0HN63D8KS9LP9" received FIN.
2024-08-23 14:54:25.720 +03:00 [DBG] Connection id "0HN63D8KS9LP9" is closed. The last processed stream ID was 1.
2024-08-23 14:54:25.721 +03:00 [DBG] Connection id "0HN63D8KS9LP9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:54:25.731 +03:00 [DBG] Connection id "0HN63D8KS9LP9" stopped.
2024-08-23 14:54:42.696 +03:00 [DBG] Connection id "0HN63D8KS9LPA" accepted.
2024-08-23 14:54:42.703 +03:00 [DBG] Connection id "0HN63D8KS9LPA" started.
2024-08-23 14:54:42.772 +03:00 [DBG] Connection 0HN63D8KS9LPA established using the following protocol: "Tls13"
2024-08-23 14:54:42.778 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/26/rating - -
2024-08-23 14:54:42.786 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/26/rating'
2024-08-23 14:54:42.789 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}/rating' is valid for the request path '/api/Hotel/26/rating'
2024-08-23 14:54:42.790 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:42.791 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:54:42.792 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:54:42.793 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:42.795 +03:00 [INF] Route matched with {action = "GetHotelReviewRating", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelReviewRating(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 14:54:42.798 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:54:42.802 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:54:42.805 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 14:54:42.810 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:54:42.812 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:54:42.815 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:54:42.821 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:54:42.841 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 14:54:42.854 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 14:54:42.858 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:42.859 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:42.861 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 14:54:42.863 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 14:54:42.867 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:54:42.874 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:54:42.877 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 14:54:42.878 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:42.883 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:42.886 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:42.906 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:42.974 +03:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:54:43.039 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:54:43.109 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:54:43.142 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:54:43.144 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:54:43.146 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:43.165 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[LocalUserId], [r0].[Id], [r0].[CreatedOn], [r0].[ExpiresOn], [r0].[RevokedOn], [r0].[Token], [r].[ReviewID], [a].[Id], [h].[HotelId]
FROM [Reviews] AS [r]
INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
INNER JOIN [RefreshToken] AS [r0] ON [a].[Id] = [r0].[LocalUserId]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[ReviewID], [a].[Id], [h].[HotelId]
2024-08-23 14:54:43.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:54:43.204 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:54:43.206 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:54:43.208 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:43.211 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:54:43.218 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 14:54:43.224 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 14:54:43.226 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 14:54:43.227 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 14:54:43.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 14:54:43.230 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Review.ReviewRatingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 14:54:43.258 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API) in 443.1176ms
2024-08-23 14:54:43.261 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotelReviewRating (HotelBookingPlatform.API)'
2024-08-23 14:54:43.263 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:54:43.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/26/rating - - - 200 - application/json;+charset=utf-8 487.1253ms
2024-08-23 14:54:45.739 +03:00 [DBG] Connection id "0HN63D8KS9LPA" received FIN.
2024-08-23 14:54:45.742 +03:00 [DBG] Connection id "0HN63D8KS9LPA" is closed. The last processed stream ID was 1.
2024-08-23 14:54:45.745 +03:00 [DBG] Connection id "0HN63D8KS9LPA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:54:45.755 +03:00 [DBG] Connection id "0HN63D8KS9LPA" stopped.
2024-08-23 14:54:57.649 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 14:54:57.796 +03:00 [DBG] Hosting starting
2024-08-23 14:54:57.843 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 14:54:57.848 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 14:54:57.858 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 14:54:57.860 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 14:54:57.861 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 14:54:57.870 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 14:54:57.880 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 14:54:57.882 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 14:54:57.884 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 14:54:57.897 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 14:54:57.903 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:54:57.910 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 14:54:57.915 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:54:57.923 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 14:54:57.931 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 14:54:57.937 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 14:54:57.941 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 14:54:58.152 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 14:54:58.223 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 14:54:58.226 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 14:54:58.228 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 14:54:58.229 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 14:54:58.230 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 14:54:58.232 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 14:54:58.233 +03:00 [INF] Hosting environment: Development
2024-08-23 14:54:58.234 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 14:54:58.235 +03:00 [DBG] Hosting started
2024-08-23 14:54:58.409 +03:00 [DBG] Connection id "0HN63D9KOA6V2" accepted.
2024-08-23 14:54:58.410 +03:00 [DBG] Connection id "0HN63D9KOA6V3" accepted.
2024-08-23 14:54:58.415 +03:00 [DBG] Connection id "0HN63D9KOA6V2" started.
2024-08-23 14:54:58.415 +03:00 [DBG] Connection id "0HN63D9KOA6V3" started.
2024-08-23 14:54:58.454 +03:00 [DBG] Connection id "0HN63D9KOA6V2" received FIN.
2024-08-23 14:54:58.454 +03:00 [DBG] Connection id "0HN63D9KOA6V3" received FIN.
2024-08-23 14:54:58.487 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 14:54:58.487 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 14:54:58.560 +03:00 [DBG] Connection id "0HN63D9KOA6V3" stopped.
2024-08-23 14:54:58.560 +03:00 [DBG] Connection id "0HN63D9KOA6V2" stopped.
2024-08-23 14:54:58.566 +03:00 [DBG] Connection id "0HN63D9KOA6V3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:54:58.566 +03:00 [DBG] Connection id "0HN63D9KOA6V2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:55:01.496 +03:00 [DBG] Connection id "0HN63D9KOA6V4" accepted.
2024-08-23 14:55:01.506 +03:00 [DBG] Connection id "0HN63D9KOA6V4" started.
2024-08-23 14:55:01.569 +03:00 [DBG] Connection 0HN63D9KOA6V4 established using the following protocol: "Tls13"
2024-08-23 14:55:01.695 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 14:55:01.869 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 14:55:01.914 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 14:55:01.917 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:55:02.175 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 14:55:02.207 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 14:55:02.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 542.3565ms
2024-08-23 14:55:02.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 14:55:02.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 11.1004ms
2024-08-23 14:55:02.260 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 14:55:02.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 150.4156ms
2024-08-23 14:55:03.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 14:55:03.777 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 14:55:03.779 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:55:04.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 311.5552ms
2024-08-23 14:55:10.786 +03:00 [DBG] Connection id "0HN63D9KOA6V4" received FIN.
2024-08-23 14:55:10.799 +03:00 [DBG] Connection id "0HN63D9KOA6V4" is closed. The last processed stream ID was 7.
2024-08-23 14:55:10.806 +03:00 [DBG] Connection id "0HN63D9KOA6V4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:55:10.817 +03:00 [DBG] Connection id "0HN63D9KOA6V4" stopped.
2024-08-23 14:55:54.009 +03:00 [DBG] Connection id "0HN63D9KOA6V5" accepted.
2024-08-23 14:55:54.018 +03:00 [DBG] Connection id "0HN63D9KOA6V5" started.
2024-08-23 14:55:54.038 +03:00 [DBG] Connection 0HN63D9KOA6V5 established using the following protocol: "Tls13"
2024-08-23 14:55:54.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/rooms - -
2024-08-23 14:55:54.078 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/rooms'
2024-08-23 14:55:54.088 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/rooms' is valid for the request path '/api/Hotel/19/rooms'
2024-08-23 14:55:54.093 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:55:54.095 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 14:55:54.195 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 14:55:54.201 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:55:54.285 +03:00 [INF] Route matched with {action = "GetRoomsByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByHotelIdAsync(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 14:55:54.292 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 14:55:54.295 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 14:55:54.297 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 14:55:54.299 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 14:55:54.301 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 14:55:54.307 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:55:54.590 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 14:55:54.987 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 14:55:54.998 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 14:55:55.005 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 14:55:55.009 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:55:55.012 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:55:55.013 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 14:55:55.064 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 14:55:56.069 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 14:55:56.072 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 14:55:56.074 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 14:55:56.075 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 14:55:56.077 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 14:55:56.190 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:55:56.194 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:55:56.195 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 14:55:56.250 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:55:56.253 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:55:56.255 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 14:55:56.506 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 14:55:56.699 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.RoomClasses)
    .ThenInclude(rc => rc.Rooms)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-23 14:55:56.832 +03:00 [DBG] Including navigation: 'Hotel.RoomClasses'.
2024-08-23 14:55:56.872 +03:00 [DBG] Including navigation: 'RoomClass.Rooms'.
2024-08-23 14:55:57.339 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 14:55:57.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:55:57.494 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2024-08-23 14:55:57.526 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:55:57.590 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 14:55:57.607 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 14:55:57.610 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 14:55:57.611 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 14:55:57.612 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 14:55:57.614 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Threading.Tasks.Task`1[[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 14:55:58.028 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:55:58.060 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 14:55:58.191 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 14:55:58.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:55:58.376 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:55:58.378 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:55:58.390 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:55:58.424 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.456 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 14:55:58.458 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 14:55:58.459 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID], [t].[HotelId], [r].[RoomClassID]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:55:58.475 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID], [t].[HotelId], [r].[RoomClassID]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 14:55:58.496 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.519 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.523 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.524 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.525 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.526 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.528 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.537 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.540 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.541 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.543 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.544 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.545 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.546 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.550 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.552 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.554 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.555 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.557 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.558 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.559 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.560 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 14:55:58.573 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:55:58.589 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:55:58.591 +03:00 [DBG] A data reader was disposed.
2024-08-23 14:55:58.594 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:55:58.610 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 14:55:58.666 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API) in 4350.1037ms
2024-08-23 14:55:58.688 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 14:55:58.708 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 14:55:58.720 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/rooms - - - 200 - application/json;+charset=utf-8 4675.4199ms
2024-08-23 14:56:00.880 +03:00 [DBG] Connection id "0HN63D9KOA6V5" received FIN.
2024-08-23 14:56:00.883 +03:00 [DBG] Connection id "0HN63D9KOA6V5" is closed. The last processed stream ID was 1.
2024-08-23 14:56:00.886 +03:00 [DBG] Connection id "0HN63D9KOA6V5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:56:00.898 +03:00 [DBG] Connection id "0HN63D9KOA6V5" stopped.
2024-08-23 14:57:45.347 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 14:57:45.483 +03:00 [DBG] Hosting starting
2024-08-23 14:57:45.524 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 14:57:45.529 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 14:57:45.535 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 14:57:45.536 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 14:57:45.537 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 14:57:45.544 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 14:57:45.551 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 14:57:45.553 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 14:57:45.554 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 14:57:45.564 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 14:57:45.570 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:57:45.576 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 14:57:45.579 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 14:57:45.586 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 14:57:45.594 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 14:57:45.601 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 14:57:45.603 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 14:57:45.783 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 14:57:45.856 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 14:57:45.860 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 14:57:45.862 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 14:57:45.863 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 14:57:45.863 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 14:57:45.864 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 14:57:45.865 +03:00 [INF] Hosting environment: Development
2024-08-23 14:57:45.866 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 14:57:45.867 +03:00 [DBG] Hosting started
2024-08-23 14:57:46.109 +03:00 [DBG] Connection id "0HN63DB6NK91R" accepted.
2024-08-23 14:57:46.109 +03:00 [DBG] Connection id "0HN63DB6NK91S" accepted.
2024-08-23 14:57:46.114 +03:00 [DBG] Connection id "0HN63DB6NK91R" started.
2024-08-23 14:57:46.114 +03:00 [DBG] Connection id "0HN63DB6NK91S" started.
2024-08-23 14:57:46.127 +03:00 [DBG] Connection id "0HN63DB6NK91S" received FIN.
2024-08-23 14:57:46.127 +03:00 [DBG] Connection id "0HN63DB6NK91R" received FIN.
2024-08-23 14:57:46.155 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 14:57:46.155 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 14:57:46.207 +03:00 [DBG] Connection id "0HN63DB6NK91S" stopped.
2024-08-23 14:57:46.207 +03:00 [DBG] Connection id "0HN63DB6NK91R" stopped.
2024-08-23 14:57:46.211 +03:00 [DBG] Connection id "0HN63DB6NK91S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:57:46.211 +03:00 [DBG] Connection id "0HN63DB6NK91R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:57:49.409 +03:00 [DBG] Connection id "0HN63DB6NK91T" accepted.
2024-08-23 14:57:49.479 +03:00 [DBG] Connection id "0HN63DB6NK91T" started.
2024-08-23 14:57:49.545 +03:00 [DBG] Connection 0HN63DB6NK91T established using the following protocol: "Tls13"
2024-08-23 14:57:49.684 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 14:57:49.936 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 14:57:50.015 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 14:57:50.017 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:57:50.291 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 14:57:50.328 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 14:57:50.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 670.2173ms
2024-08-23 14:57:50.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 14:57:50.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 8.6662ms
2024-08-23 14:57:50.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 14:57:50.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 81.1754ms
2024-08-23 14:57:51.696 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 14:57:51.698 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 14:57:51.700 +03:00 [DBG] Request did not match any endpoints
2024-08-23 14:57:52.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 335.3696ms
2024-08-23 14:57:56.028 +03:00 [DBG] Connection id "0HN63DB6NK91T" received FIN.
2024-08-23 14:57:56.039 +03:00 [DBG] Connection id "0HN63DB6NK91T" is closed. The last processed stream ID was 7.
2024-08-23 14:57:56.044 +03:00 [DBG] Connection id "0HN63DB6NK91T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 14:57:56.054 +03:00 [DBG] Connection id "0HN63DB6NK91T" stopped.
2024-08-23 15:05:36.413 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:05:36.625 +03:00 [DBG] Hosting starting
2024-08-23 15:05:36.688 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:05:36.696 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:05:36.733 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:05:36.737 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:05:36.740 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:05:36.754 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:05:36.769 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:05:36.772 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:05:36.773 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:05:36.783 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:05:36.791 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:05:36.797 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:05:36.801 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:05:36.810 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:05:36.818 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:05:36.827 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:05:36.830 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:05:37.234 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:05:37.380 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:05:37.383 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:05:37.386 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:05:37.387 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:05:37.389 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:05:37.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:05:37.391 +03:00 [INF] Hosting environment: Development
2024-08-23 15:05:37.392 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:05:37.392 +03:00 [DBG] Hosting started
2024-08-23 15:05:37.646 +03:00 [DBG] Connection id "0HN63DFJ8J4CL" received FIN.
2024-08-23 15:05:37.664 +03:00 [DBG] Connection id "0HN63DFJ8J4CL" accepted.
2024-08-23 15:05:37.667 +03:00 [DBG] Connection id "0HN63DFJ8J4CL" started.
2024-08-23 15:05:37.699 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:05:37.824 +03:00 [DBG] Connection id "0HN63DFJ8J4CL" stopped.
2024-08-23 15:05:37.848 +03:00 [DBG] Connection id "0HN63DFJ8J4CL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:05:41.048 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" accepted.
2024-08-23 15:05:41.060 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" started.
2024-08-23 15:05:41.145 +03:00 [DBG] Connection 0HN63DFJ8J4CM established using the following protocol: "Tls13"
2024-08-23 15:05:41.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:05:41.640 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:05:41.731 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:05:41.733 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:05:42.117 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:05:42.150 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:05:42.162 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 872.5047ms
2024-08-23 15:05:42.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:05:42.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 8.2314ms
2024-08-23 15:05:42.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:05:42.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 102.9840ms
2024-08-23 15:05:43.632 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:05:43.635 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:05:43.639 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:05:44.001 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 369.4045ms
2024-08-23 15:05:46.643 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" received FIN.
2024-08-23 15:05:46.653 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" is closed. The last processed stream ID was 7.
2024-08-23 15:05:46.657 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:05:46.675 +03:00 [DBG] Connection id "0HN63DFJ8J4CM" stopped.
2024-08-23 15:07:17.726 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" accepted.
2024-08-23 15:07:17.734 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" started.
2024-08-23 15:07:17.801 +03:00 [DBG] Connection 0HN63DFJ8J4CN established using the following protocol: "Tls13"
2024-08-23 15:07:17.805 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/roomclasses/19 - -
2024-08-23 15:07:17.816 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/roomclasses/19'
2024-08-23 15:07:17.824 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassById (HotelBookingPlatform.API)' with route pattern 'api/Hotel/roomclasses/{id}' is valid for the request path '/api/Hotel/roomclasses/19'
2024-08-23 15:07:17.829 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassById (HotelBookingPlatform.API)'
2024-08-23 15:07:17.837 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:07:17.930 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:07:17.938 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassById (HotelBookingPlatform.API)'
2024-08-23 15:07:18.008 +03:00 [INF] Route matched with {action = "GetRoomClassById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomClassById(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 15:07:18.015 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:07:18.018 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:07:18.021 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 15:07:18.023 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:07:18.024 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:07:18.026 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:07:18.307 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:07:18.696 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:07:18.709 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 15:07:18.716 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 15:07:18.720 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 15:07:18.721 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 15:07:18.723 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 15:07:18.773 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 15:07:19.788 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:07:19.792 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:07:19.796 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:07:19.798 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:07:19.799 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:07:19.922 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:07:19.926 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:07:19.929 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:07:19.981 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:07:19.984 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:07:19.986 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:07:20.222 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:07:20.425 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 15:07:20.627 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-23 15:07:21.064 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 15:07:21.184 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:07:21.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (83ms).
2024-08-23 15:07:21.298 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:07:21.808 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:07:21.839 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 15:07:21.963 +03:00 [INF] Executed DbCommand (137ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 15:07:22.045 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:07:22.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:07:22.163 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:07:22.180 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:07:22.203 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:07:22.230 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:07:22.238 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 15:07:22.240 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:07:22.241 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:07:22.244 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:07:22.247 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 15:07:22.281 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassById (HotelBookingPlatform.API) in 4249.3207ms
2024-08-23 15:07:22.289 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassById (HotelBookingPlatform.API)'
2024-08-23 15:07:22.304 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:07:22.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/roomclasses/19 - - - 200 - application/json;+charset=utf-8 4507.8236ms
2024-08-23 15:07:26.779 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" received FIN.
2024-08-23 15:07:26.787 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" is closed. The last processed stream ID was 1.
2024-08-23 15:07:26.792 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:07:26.808 +03:00 [DBG] Connection id "0HN63DFJ8J4CN" stopped.
2024-08-23 15:14:33.709 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:14:33.860 +03:00 [DBG] Hosting starting
2024-08-23 15:14:33.909 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:14:33.913 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:14:33.933 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:14:33.935 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:14:33.938 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:14:33.948 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:14:33.964 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:14:33.967 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:14:33.969 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:14:33.978 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:14:33.984 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:14:33.991 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:14:33.995 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:14:34.003 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:14:34.010 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:14:34.017 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:14:34.021 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:14:34.300 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:14:34.381 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:14:34.383 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:14:34.385 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:14:34.387 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:14:34.388 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:14:34.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:14:34.391 +03:00 [INF] Hosting environment: Development
2024-08-23 15:14:34.392 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:14:34.393 +03:00 [DBG] Hosting started
2024-08-23 15:14:34.487 +03:00 [DBG] Connection id "0HN63DKJ87J60" accepted.
2024-08-23 15:14:34.488 +03:00 [DBG] Connection id "0HN63DKJ87J61" received FIN.
2024-08-23 15:14:34.493 +03:00 [DBG] Connection id "0HN63DKJ87J60" started.
2024-08-23 15:14:34.493 +03:00 [DBG] Connection id "0HN63DKJ87J60" received FIN.
2024-08-23 15:14:34.494 +03:00 [DBG] Connection id "0HN63DKJ87J61" accepted.
2024-08-23 15:14:34.498 +03:00 [DBG] Connection id "0HN63DKJ87J61" started.
2024-08-23 15:14:34.525 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:14:34.525 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:14:35.078 +03:00 [DBG] Connection id "0HN63DKJ87J61" stopped.
2024-08-23 15:14:35.078 +03:00 [DBG] Connection id "0HN63DKJ87J60" stopped.
2024-08-23 15:14:35.081 +03:00 [DBG] Connection id "0HN63DKJ87J61" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:14:35.081 +03:00 [DBG] Connection id "0HN63DKJ87J60" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:14:35.188 +03:00 [DBG] Connection id "0HN63DKJ87J62" accepted.
2024-08-23 15:14:35.199 +03:00 [DBG] Connection id "0HN63DKJ87J62" started.
2024-08-23 15:14:35.268 +03:00 [DBG] Connection 0HN63DKJ87J62 established using the following protocol: "Tls13"
2024-08-23 15:14:35.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:14:35.675 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:14:35.721 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:14:35.726 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:14:35.989 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:14:36.024 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:14:36.052 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 644.5282ms
2024-08-23 15:14:36.053 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:14:36.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.6312ms
2024-08-23 15:14:36.101 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:14:36.201 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.6454ms
2024-08-23 15:14:38.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:14:38.043 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:14:38.046 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:14:38.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 341.0535ms
2024-08-23 15:14:42.398 +03:00 [DBG] Connection id "0HN63DKJ87J62" received FIN.
2024-08-23 15:14:42.408 +03:00 [DBG] Connection id "0HN63DKJ87J62" is closed. The last processed stream ID was 7.
2024-08-23 15:14:42.412 +03:00 [DBG] Connection id "0HN63DKJ87J62" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:14:42.429 +03:00 [DBG] Connection id "0HN63DKJ87J62" stopped.
2024-08-23 15:14:57.787 +03:00 [DBG] Connection id "0HN63DKJ87J63" accepted.
2024-08-23 15:14:57.799 +03:00 [DBG] Connection id "0HN63DKJ87J63" started.
2024-08-23 15:14:57.825 +03:00 [DBG] Connection 0HN63DKJ87J63 established using the following protocol: "Tls13"
2024-08-23 15:14:57.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/roomclasses - -
2024-08-23 15:14:57.839 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/roomclasses'
2024-08-23 15:14:57.850 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/roomclasses' is valid for the request path '/api/Hotel/19/roomclasses'
2024-08-23 15:14:57.856 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 15:14:57.858 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:14:57.949 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:14:57.957 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 15:14:58.045 +03:00 [INF] Route matched with {action = "GetRoomClassesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomClassesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 15:14:58.053 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:14:58.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:14:58.058 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 15:14:58.061 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:14:58.065 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:14:58.067 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:14:58.401 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:14:58.898 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:14:58.908 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 15:14:58.914 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 15:14:58.920 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:14:58.921 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:14:58.922 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 15:14:58.968 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:15:00.071 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:15:00.075 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:15:00.079 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:15:00.080 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:15:00.082 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:15:00.204 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:15:00.207 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:15:00.208 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:15:00.264 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:15:00.267 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:15:00.269 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:15:00.540 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:15:00.734 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 15:15:00.923 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 15:15:00.931 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 15:15:00.935 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 15:15:01.406 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 15:15:01.500 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:15:01.569 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2024-08-23 15:15:01.604 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.096 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.123 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 15:15:02.257 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 15:15:02.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.447 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.478 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.502 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:15:02.505 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 15:15:02.506 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 15:15:02.543 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 15:15:02.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.590 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:15:02.603 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:15:02.607 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.624 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.644 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Where(rc => rc.HotelId == __hotelId_0)'
2024-08-23 15:15:02.650 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoomClass>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
        SELECT r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
        FROM RoomClasses AS r
        WHERE r.HotelId == @__hotelId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:15:02.662 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:15:02.664 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 15:15:02.665 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.668 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.670 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
FROM [RoomClasses] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2024-08-23 15:15:02.691 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
FROM [RoomClasses] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2024-08-23 15:15:02.716 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.732 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.736 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.737 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:15:02.739 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:15:02.739 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.741 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:15:02.768 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:15:02.774 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 15:15:02.776 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:15:02.779 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:15:02.782 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:15:02.784 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:15:02.816 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API) in 4743.2959ms
2024-08-23 15:15:02.820 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 15:15:02.838 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:15:02.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/roomclasses - - - 200 - application/json;+charset=utf-8 5020.7733ms
2024-08-23 15:15:43.457 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:15:43.585 +03:00 [DBG] Hosting starting
2024-08-23 15:15:43.625 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:15:43.630 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:15:43.637 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:15:43.639 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:15:43.641 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:15:43.651 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:15:43.661 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:15:43.665 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:15:43.667 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:15:43.679 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:15:43.685 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:15:43.691 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:15:43.693 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:15:43.701 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:15:43.706 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:15:43.714 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:15:43.716 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:15:43.888 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:15:43.960 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:15:43.963 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:15:43.965 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:15:43.967 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:15:43.967 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:15:43.968 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:15:43.969 +03:00 [INF] Hosting environment: Development
2024-08-23 15:15:43.970 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:15:43.971 +03:00 [DBG] Hosting started
2024-08-23 15:15:44.357 +03:00 [DBG] Connection id "0HN63DL82KL29" received FIN.
2024-08-23 15:15:44.357 +03:00 [DBG] Connection id "0HN63DL82KL2A" received FIN.
2024-08-23 15:15:44.373 +03:00 [DBG] Connection id "0HN63DL82KL2A" accepted.
2024-08-23 15:15:44.374 +03:00 [DBG] Connection id "0HN63DL82KL29" accepted.
2024-08-23 15:15:44.378 +03:00 [DBG] Connection id "0HN63DL82KL2A" started.
2024-08-23 15:15:44.380 +03:00 [DBG] Connection id "0HN63DL82KL29" started.
2024-08-23 15:15:44.398 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:15:44.398 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:15:44.446 +03:00 [DBG] Connection id "0HN63DL82KL2A" stopped.
2024-08-23 15:15:44.446 +03:00 [DBG] Connection id "0HN63DL82KL29" stopped.
2024-08-23 15:15:44.451 +03:00 [DBG] Connection id "0HN63DL82KL29" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:15:44.451 +03:00 [DBG] Connection id "0HN63DL82KL2A" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:15:47.319 +03:00 [DBG] Connection id "0HN63DL82KL2B" accepted.
2024-08-23 15:15:47.321 +03:00 [DBG] Connection id "0HN63DL82KL2B" started.
2024-08-23 15:15:47.395 +03:00 [DBG] Connection 0HN63DL82KL2B established using the following protocol: "Tls13"
2024-08-23 15:15:47.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:15:47.695 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:15:47.749 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:15:47.752 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:15:48.000 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:15:48.039 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:15:48.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 573.9285ms
2024-08-23 15:15:48.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:15:48.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 6.5754ms
2024-08-23 15:15:48.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:15:48.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 102.5940ms
2024-08-23 15:15:49.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:15:49.392 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:15:49.395 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:15:49.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 343.0536ms
2024-08-23 15:15:52.494 +03:00 [DBG] Connection id "0HN63DL82KL2B" received FIN.
2024-08-23 15:15:52.504 +03:00 [DBG] Connection id "0HN63DL82KL2B" is closed. The last processed stream ID was 7.
2024-08-23 15:15:52.508 +03:00 [DBG] Connection id "0HN63DL82KL2B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:15:52.529 +03:00 [DBG] Connection id "0HN63DL82KL2B" stopped.
2024-08-23 15:16:08.159 +03:00 [DBG] Connection id "0HN63DL82KL2C" accepted.
2024-08-23 15:16:08.162 +03:00 [DBG] Connection id "0HN63DL82KL2C" started.
2024-08-23 15:16:08.182 +03:00 [DBG] Connection 0HN63DL82KL2C established using the following protocol: "Tls13"
2024-08-23 15:16:08.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/26/hotels - -
2024-08-23 15:16:08.203 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/26/hotels'
2024-08-23 15:16:08.212 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/26/hotels'
2024-08-23 15:16:08.216 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 15:16:08.221 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:16:08.293 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:16:08.299 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 15:16:08.347 +03:00 [INF] Route matched with {action = "GetHotelsForCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsForCity(Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 15:16:08.353 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:16:08.358 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:16:08.361 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:16:08.363 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:16:08.365 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:16:08.369 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 15:16:08.594 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:16:08.921 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 15:16:08.929 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 15:16:08.935 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 15:16:08.939 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 15:16:08.941 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 15:16:08.942 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 15:16:08.967 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 15:16:09.955 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:16:09.958 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:16:09.960 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:16:09.962 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:16:09.963 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:16:10.083 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:16:10.086 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:16:10.089 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:16:10.161 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:16:10.165 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:16:10.169 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:16:10.403 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:16:10.499 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => h.CityID == __cityId_0)
    .Include(h => h.Owner)'
2024-08-23 15:16:10.672 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 15:16:10.955 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Owner.Email (string) Required, 9], [Property: Owner.FirstName (string) Required, 10], [Property: Owner.LastName (string) Required, 11], [Property: Owner.PhoneNumber (string) Required, 12] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM Hotels AS h
        INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
        WHERE h.CityID == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:16:11.035 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:16:11.086 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (51ms).
2024-08-23 15:16:11.111 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:11.495 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:11.526 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 15:16:11.652 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 15:16:11.691 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:16:11.706 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:11.721 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:11.764 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:16:11.772 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 15:16:11.774 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:16:11.775 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:16:11.776 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:16:11.777 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelBasicResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:16:11.807 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API) in 3434.1587ms
2024-08-23 15:16:11.813 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 15:16:11.827 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:16:11.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/26/hotels - - - 200 - application/json;+charset=utf-8 3650.5278ms
2024-08-23 15:16:12.528 +03:00 [DBG] Connection id "0HN63DL82KL2C" received FIN.
2024-08-23 15:16:12.534 +03:00 [DBG] Connection id "0HN63DL82KL2C" is closed. The last processed stream ID was 1.
2024-08-23 15:16:12.534 +03:00 [DBG] Connection id "0HN63DL82KL2C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:16:12.541 +03:00 [DBG] Connection id "0HN63DL82KL2C" stopped.
2024-08-23 15:16:28.409 +03:00 [DBG] Connection id "0HN63DL82KL2D" accepted.
2024-08-23 15:16:28.419 +03:00 [DBG] Connection id "0HN63DL82KL2D" started.
2024-08-23 15:16:28.428 +03:00 [DBG] Connection 0HN63DL82KL2D established using the following protocol: "Tls13"
2024-08-23 15:16:28.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount - -
2024-08-23 15:16:28.439 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-23 15:16:28.441 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetAllDiscounts (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-23 15:16:28.446 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetAllDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:28.449 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:16:28.450 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:16:28.452 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetAllDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:28.456 +03:00 [INF] Route matched with {action = "GetAllDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDiscounts() on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:16:28.461 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:16:28.464 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:16:28.466 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:16:28.469 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:16:28.471 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:16:28.472 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:28.490 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:28.520 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:16:28.528 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)'
2024-08-23 15:16:28.534 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-23 15:16:28.546 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM Discounts AS d
        INNER JOIN Rooms AS r ON d.RoomID == r.RoomID), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:16:28.552 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:16:28.555 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 15:16:28.556 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:28.563 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:28.566 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:28.610 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:28.669 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.730 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.766 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.771 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.774 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.777 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.781 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.783 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.784 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.785 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.787 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.788 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.789 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.791 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.794 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.799 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.802 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.805 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.811 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.815 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.816 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.817 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.818 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.820 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.822 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.823 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.825 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.830 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.831 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.833 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.834 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.835 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.837 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.838 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.839 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:28.841 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:16:28.843 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:28.847 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:28.853 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:16:28.858 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:16:28.864 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:16:28.867 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:16:28.868 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:16:28.868 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:16:28.870 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:16:28.898 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetAllDiscounts (HotelBookingPlatform.API) in 425.7038ms
2024-08-23 15:16:28.902 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetAllDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:28.903 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:16:28.904 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount - - - 200 - application/json;+charset=utf-8 472.3219ms
2024-08-23 15:16:32.541 +03:00 [DBG] Connection id "0HN63DL82KL2D" received FIN.
2024-08-23 15:16:32.548 +03:00 [DBG] Connection id "0HN63DL82KL2D" is closed. The last processed stream ID was 1.
2024-08-23 15:16:32.554 +03:00 [DBG] Connection id "0HN63DL82KL2D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:16:32.573 +03:00 [DBG] Connection id "0HN63DL82KL2D" stopped.
2024-08-23 15:16:44.330 +03:00 [DBG] Connection id "0HN63DL82KL2E" accepted.
2024-08-23 15:16:44.333 +03:00 [DBG] Connection id "0HN63DL82KL2E" started.
2024-08-23 15:16:44.344 +03:00 [DBG] Connection 0HN63DL82KL2E established using the following protocol: "Tls13"
2024-08-23 15:16:44.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/active - -
2024-08-23 15:16:44.355 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/active'
2024-08-23 15:16:44.357 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)' with route pattern 'api/Discount/active' is valid for the request path '/api/Discount/active'
2024-08-23 15:16:44.361 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/active'
2024-08-23 15:16:44.365 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:44.367 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:16:44.374 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:16:44.377 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:44.381 +03:00 [INF] Route matched with {action = "GetActiveDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActiveDiscounts() on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:16:44.383 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:16:44.385 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:16:44.389 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:16:44.393 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:16:44.396 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:16:44.399 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:44.405 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:44.478 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:16:44.488 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:16:44.492 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 15:16:44.493 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:44.495 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:44.496 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:44.525 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:44.529 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.534 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.536 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.540 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.543 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.544 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.545 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.547 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.549 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.551 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.554 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.557 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.559 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.561 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.563 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.564 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.565 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.566 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.568 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.576 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.577 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.579 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.580 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.581 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.583 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.586 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.590 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.594 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.595 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.596 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.598 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.599 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:44.600 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:16:44.601 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:44.605 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:44.610 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:16:44.615 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:16:44.616 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:16:44.618 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:16:44.620 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:16:44.622 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:16:44.626 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:16:44.628 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API) in 228.8327ms
2024-08-23 15:16:44.629 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 15:16:44.630 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:16:44.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/active - - - 200 - application/json;+charset=utf-8 284.5316ms
2024-08-23 15:16:52.549 +03:00 [DBG] Connection id "0HN63DL82KL2E" received FIN.
2024-08-23 15:16:52.552 +03:00 [DBG] Connection id "0HN63DL82KL2E" is closed. The last processed stream ID was 1.
2024-08-23 15:16:52.556 +03:00 [DBG] Connection id "0HN63DL82KL2E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:16:52.564 +03:00 [DBG] Connection id "0HN63DL82KL2E" stopped.
2024-08-23 15:16:54.262 +03:00 [DBG] Connection id "0HN63DL82KL2F" accepted.
2024-08-23 15:16:54.266 +03:00 [DBG] Connection id "0HN63DL82KL2F" started.
2024-08-23 15:16:54.272 +03:00 [DBG] Connection 0HN63DL82KL2F established using the following protocol: "Tls13"
2024-08-23 15:16:54.276 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 15:16:54.279 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 15:16:54.281 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:16:54.285 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:16:54.290 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:16:54.292 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:16:54.293 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:16:54.294 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:16:54.299 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:16:54.304 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:16:54.306 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:16:54.307 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:16:54.309 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:16:54.311 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:16:54.312 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:54.324 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:16:54.340 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:16:54.343 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 15:16:54.345 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:16:54.346 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:16:54.349 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:16:54.353 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 15:16:54.357 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:16:54.360 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:16:54.361 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 15:16:54.363 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:54.365 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:54.368 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:54.385 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:16:54.389 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.390 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.393 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.394 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.395 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.397 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.400 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.401 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.404 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.405 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.406 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.407 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.409 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.410 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.411 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.412 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.414 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.417 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.420 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.422 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.423 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.424 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.425 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.427 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.428 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.429 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.431 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.435 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.437 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.438 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.440 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.441 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.442 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.443 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.445 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:16:54.448 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:16:54.451 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:54.454 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:16:54.455 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:16:54.457 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:16:54.459 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:16:54.460 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:16:54.461 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:16:54.462 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:16:54.463 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:16:54.466 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 153.5682ms
2024-08-23 15:16:54.469 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:16:54.471 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:16:54.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 197.7522ms
2024-08-23 15:17:02.562 +03:00 [DBG] Connection id "0HN63DL82KL2F" received FIN.
2024-08-23 15:17:02.567 +03:00 [DBG] Connection id "0HN63DL82KL2F" is closed. The last processed stream ID was 1.
2024-08-23 15:17:02.572 +03:00 [DBG] Connection id "0HN63DL82KL2F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:17:02.578 +03:00 [DBG] Connection id "0HN63DL82KL2F" stopped.
2024-08-23 15:17:23.740 +03:00 [DBG] Connection id "0HN63DL82KL2G" accepted.
2024-08-23 15:17:23.748 +03:00 [DBG] Connection id "0HN63DL82KL2G" started.
2024-08-23 15:17:23.761 +03:00 [DBG] Connection 0HN63DL82KL2G established using the following protocol: "Tls13"
2024-08-23 15:17:23.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/HomePage/trending-destinations - -
2024-08-23 15:17:23.785 +03:00 [DBG] 1 candidate(s) found for the request path '/api/HomePage/trending-destinations'
2024-08-23 15:17:23.787 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HomePageController.GetTrendingDestinations (HotelBookingPlatform.API)' with route pattern 'api/HomePage/trending-destinations' is valid for the request path '/api/HomePage/trending-destinations'
2024-08-23 15:17:23.792 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HomePageController.GetTrendingDestinations (HotelBookingPlatform.API)'
2024-08-23 15:17:23.793 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:17:23.794 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:17:23.795 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HomePageController.GetTrendingDestinations (HotelBookingPlatform.API)'
2024-08-23 15:17:23.799 +03:00 [INF] Route matched with {action = "GetTrendingDestinations", controller = "HomePage"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[HotelBookingPlatform.Domain.DTOs.City.CityResponseDto]]] GetTrendingDestinations() on controller HotelBookingPlatform.API.Controllers.HomePageController (HotelBookingPlatform.API).
2024-08-23 15:17:23.803 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:17:23.807 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:17:23.809 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 15:17:23.811 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:17:23.812 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:17:23.814 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HomePageController (HotelBookingPlatform.API)
2024-08-23 15:17:23.816 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HomePageController (HotelBookingPlatform.API)
2024-08-23 15:17:23.829 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:17:23.836 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderByDescending(c => c.VisitCount)
    .Take(__p_0)'
2024-08-23 15:17:23.849 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
        SELECT TOP(@__p_0) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
        FROM Cities AS c
        ORDER BY c.VisitCount DESC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:17:23.855 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:17:23.859 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 15:17:23.861 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:23.862 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:23.864 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
ORDER BY [c].[VisitCount] DESC
2024-08-23 15:17:23.892 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
ORDER BY [c].[VisitCount] DESC
2024-08-23 15:17:23.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:23.916 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:23.918 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:23.920 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:23.923 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:23.926 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:17:23.927 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:23.928 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:23.935 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:17:23.939 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:17:23.943 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:17:23.945 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:17:23.946 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:17:23.947 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:17:23.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.City.CityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 15:17:23.951 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HomePageController.GetTrendingDestinations (HotelBookingPlatform.API) in 137.5048ms
2024-08-23 15:17:23.953 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HomePageController.GetTrendingDestinations (HotelBookingPlatform.API)'
2024-08-23 15:17:23.956 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:17:23.959 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/HomePage/trending-destinations - - - 200 - application/json;+charset=utf-8 190.0066ms
2024-08-23 15:17:32.598 +03:00 [DBG] Connection id "0HN63DL82KL2G" received FIN.
2024-08-23 15:17:32.602 +03:00 [DBG] Connection id "0HN63DL82KL2G" is closed. The last processed stream ID was 1.
2024-08-23 15:17:32.604 +03:00 [DBG] Connection id "0HN63DL82KL2G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:17:32.612 +03:00 [DBG] Connection id "0HN63DL82KL2G" stopped.
2024-08-23 15:17:36.224 +03:00 [DBG] Connection id "0HN63DL82KL2H" accepted.
2024-08-23 15:17:36.227 +03:00 [DBG] Connection id "0HN63DL82KL2H" started.
2024-08-23 15:17:36.239 +03:00 [DBG] Connection 0HN63DL82KL2H established using the following protocol: "Tls13"
2024-08-23 15:17:36.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/19/rooms - -
2024-08-23 15:17:36.245 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/19/rooms'
2024-08-23 15:17:36.247 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/rooms' is valid for the request path '/api/Hotel/19/rooms'
2024-08-23 15:17:36.250 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 15:17:36.252 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:17:36.253 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:17:36.254 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 15:17:36.258 +03:00 [INF] Route matched with {action = "GetRoomsByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByHotelIdAsync(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 15:17:36.262 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:17:36.263 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:17:36.267 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 15:17:36.270 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:17:36.272 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:17:36.273 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:17:36.275 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 15:17:36.276 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 15:17:36.278 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 15:17:36.279 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:17:36.280 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:17:36.284 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 15:17:36.288 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 15:17:36.293 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:17:36.302 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.RoomClasses)
    .ThenInclude(rc => rc.Rooms)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-23 15:17:36.307 +03:00 [DBG] Including navigation: 'Hotel.RoomClasses'.
2024-08-23 15:17:36.309 +03:00 [DBG] Including navigation: 'RoomClass.Rooms'.
2024-08-23 15:17:36.417 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 15:17:36.436 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:17:36.439 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 15:17:36.440 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:36.441 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:36.443 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 15:17:36.452 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 15:17:36.453 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:17:36.460 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 15:17:36.460 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:17:36.461 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:17:36.462 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:17:36.464 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Threading.Tasks.Task`1[[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:17:36.498 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.529 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:17:36.532 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 15:17:36.535 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 15:17:36.547 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 15:17:36.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.598 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:17:36.600 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 15:17:36.603 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID], [t].[HotelId], [r].[RoomClassID]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 15:17:36.621 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID], [t].[HotelId], [r].[RoomClassID]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [RoomClasses] AS [r] ON [t].[HotelId] = [r].[HotelId]
INNER JOIN [Rooms] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[HotelId], [r].[RoomClassID]
2024-08-23 15:17:36.626 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.629 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.630 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.633 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.635 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.637 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.639 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.642 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.643 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.646 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.647 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.650 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.652 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.653 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.655 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.657 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.658 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.660 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.661 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.662 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.664 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.666 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.668 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:17:36.679 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:17:36.681 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:17:36.684 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:17:36.686 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:36.688 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:17:36.707 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API) in 434.2361ms
2024-08-23 15:17:36.710 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomsByHotelIdAsync (HotelBookingPlatform.API)'
2024-08-23 15:17:36.712 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:17:36.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/19/rooms - - - 200 - application/json;+charset=utf-8 470.3636ms
2024-08-23 15:17:42.625 +03:00 [DBG] Connection id "0HN63DL82KL2H" received FIN.
2024-08-23 15:17:42.632 +03:00 [DBG] Connection id "0HN63DL82KL2H" is closed. The last processed stream ID was 1.
2024-08-23 15:17:42.637 +03:00 [DBG] Connection id "0HN63DL82KL2H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:17:42.643 +03:00 [DBG] Connection id "0HN63DL82KL2H" stopped.
2024-08-23 15:18:03.828 +03:00 [DBG] Connection id "0HN63DL82KL2I" accepted.
2024-08-23 15:18:03.836 +03:00 [DBG] Connection id "0HN63DL82KL2I" started.
2024-08-23 15:18:03.853 +03:00 [DBG] Connection 0HN63DL82KL2I established using the following protocol: "Tls13"
2024-08-23 15:18:03.859 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 15:18:03.866 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 15:18:03.869 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:18:03.872 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:18:03.875 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:18:03.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:18:03.877 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:18:03.878 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:18:03.879 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:18:03.880 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:18:03.882 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:18:03.883 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:18:03.885 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:18:03.889 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:18:03.892 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:18:03.895 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:18:03.896 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:18:03.897 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 15:18:03.899 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:18:03.900 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:18:03.902 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:18:03.904 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 15:18:03.908 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:18:03.911 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:18:03.912 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 15:18:03.914 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:18:03.915 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:18:03.916 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:18:03.925 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:18:03.935 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.937 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.939 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.941 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.943 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.945 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.947 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.949 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.950 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.951 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.952 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.954 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.959 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.962 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.963 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.965 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.966 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.968 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.969 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.971 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.974 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.976 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.978 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.981 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.983 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.986 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.989 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.992 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.995 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.997 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.998 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:03.999 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:04.000 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:04.002 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:04.004 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:18:04.006 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:18:04.007 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:18:04.009 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:18:04.011 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:18:04.014 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:18:04.016 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:18:04.017 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:18:04.018 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:18:04.019 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:18:04.020 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:18:04.022 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 130.0227ms
2024-08-23 15:18:04.024 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:18:04.027 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:18:04.030 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 170.3743ms
2024-08-23 15:18:12.651 +03:00 [DBG] Connection id "0HN63DL82KL2I" received FIN.
2024-08-23 15:18:12.654 +03:00 [DBG] Connection id "0HN63DL82KL2I" is closed. The last processed stream ID was 1.
2024-08-23 15:18:12.656 +03:00 [DBG] Connection id "0HN63DL82KL2I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:18:12.658 +03:00 [DBG] Connection id "0HN63DL82KL2I" stopped.
2024-08-23 15:27:39.018 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:27:39.159 +03:00 [DBG] Hosting starting
2024-08-23 15:27:39.204 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:27:39.209 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:27:39.216 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:27:39.218 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:27:39.219 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:27:39.226 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:27:39.234 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:27:39.236 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:27:39.237 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:27:39.247 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:27:39.252 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:27:39.259 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:27:39.263 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:27:39.270 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:27:39.279 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:27:39.285 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:27:39.288 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:27:39.466 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:27:39.538 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:27:39.541 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:27:39.543 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:27:39.544 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:27:39.545 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:27:39.546 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:27:39.547 +03:00 [INF] Hosting environment: Development
2024-08-23 15:27:39.548 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:27:39.549 +03:00 [DBG] Hosting started
2024-08-23 15:27:39.808 +03:00 [DBG] Connection id "0HN63DRT9LMSC" accepted.
2024-08-23 15:27:39.808 +03:00 [DBG] Connection id "0HN63DRT9LMSD" accepted.
2024-08-23 15:27:39.813 +03:00 [DBG] Connection id "0HN63DRT9LMSC" started.
2024-08-23 15:27:39.813 +03:00 [DBG] Connection id "0HN63DRT9LMSD" started.
2024-08-23 15:27:39.828 +03:00 [DBG] Connection id "0HN63DRT9LMSD" received FIN.
2024-08-23 15:27:39.828 +03:00 [DBG] Connection id "0HN63DRT9LMSC" received FIN.
2024-08-23 15:27:39.839 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:27:39.839 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:27:39.892 +03:00 [DBG] Connection id "0HN63DRT9LMSD" stopped.
2024-08-23 15:27:39.892 +03:00 [DBG] Connection id "0HN63DRT9LMSC" stopped.
2024-08-23 15:27:39.897 +03:00 [DBG] Connection id "0HN63DRT9LMSD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:27:39.897 +03:00 [DBG] Connection id "0HN63DRT9LMSC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:27:41.480 +03:00 [DBG] Connection id "0HN63DRT9LMSE" accepted.
2024-08-23 15:27:41.497 +03:00 [DBG] Connection id "0HN63DRT9LMSE" started.
2024-08-23 15:27:41.616 +03:00 [DBG] Connection 0HN63DRT9LMSE established using the following protocol: "Tls13"
2024-08-23 15:27:41.746 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:27:41.929 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:27:42.008 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:27:42.012 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:27:42.244 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:27:42.276 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:27:42.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 552.2017ms
2024-08-23 15:27:42.298 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:27:42.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 6.8811ms
2024-08-23 15:27:42.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:27:42.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 98.2749ms
2024-08-23 15:27:43.691 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:27:43.694 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:27:43.696 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:27:44.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 331.5237ms
2024-08-23 15:27:48.320 +03:00 [DBG] Connection id "0HN63DRT9LMSE" received FIN.
2024-08-23 15:27:48.329 +03:00 [DBG] Connection id "0HN63DRT9LMSE" is closed. The last processed stream ID was 7.
2024-08-23 15:27:48.333 +03:00 [DBG] Connection id "0HN63DRT9LMSE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:27:48.335 +03:00 [DBG] Connection id "0HN63DRT9LMSE" stopped.
2024-08-23 15:27:51.849 +03:00 [DBG] Connection id "0HN63DRT9LMSF" accepted.
2024-08-23 15:27:51.851 +03:00 [DBG] Connection id "0HN63DRT9LMSF" started.
2024-08-23 15:27:51.857 +03:00 [DBG] Connection 0HN63DRT9LMSF established using the following protocol: "Tls13"
2024-08-23 15:27:51.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 15:27:51.879 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 15:27:51.894 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:27:51.896 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:27:51.899 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:27:51.901 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:27:51.985 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:27:51.992 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:27:52.039 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:27:52.047 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:27:52.050 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:27:52.052 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:27:52.056 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:27:52.057 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:27:52.060 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:27:52.322 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:27:52.649 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:27:52.663 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:27:52.668 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 15:27:52.672 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:27:52.674 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:27:52.675 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:27:52.713 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 15:27:53.734 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:27:53.739 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:27:53.741 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:27:53.743 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:27:53.744 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:27:53.860 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:27:53.863 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:27:53.864 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:27:53.914 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:27:53.920 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:27:53.923 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:27:54.150 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:27:54.272 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)'
2024-08-23 15:27:54.447 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-23 15:27:54.727 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM Discounts AS d
        INNER JOIN Rooms AS r ON d.RoomID == r.RoomID), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:27:54.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:27:54.878 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2024-08-23 15:27:54.897 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:27:55.369 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:27:55.388 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:27:55.493 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 15:27:55.587 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.669 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.709 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.713 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.716 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.718 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.720 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.725 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.726 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.728 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.731 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.733 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.736 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.738 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.739 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.740 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.742 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.743 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.744 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.746 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.748 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.749 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.752 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.753 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.754 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.756 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.757 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.758 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.760 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.767 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.770 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.771 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.773 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:27:55.784 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:27:55.798 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:27:55.812 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:27:55.840 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:27:55.847 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:27:55.850 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:27:55.852 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:27:55.853 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:27:55.855 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:27:55.856 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:27:55.907 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 3841.4004ms
2024-08-23 15:27:55.913 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:27:55.927 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:27:55.934 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 4072.5612ms
2024-08-23 15:27:58.323 +03:00 [DBG] Connection id "0HN63DRT9LMSF" received FIN.
2024-08-23 15:27:58.326 +03:00 [DBG] Connection id "0HN63DRT9LMSF" is closed. The last processed stream ID was 1.
2024-08-23 15:27:58.328 +03:00 [DBG] Connection id "0HN63DRT9LMSF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:27:58.332 +03:00 [DBG] Connection id "0HN63DRT9LMSF" stopped.
2024-08-23 15:38:30.167 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:38:30.320 +03:00 [DBG] Hosting starting
2024-08-23 15:38:30.371 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:38:30.377 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:38:30.387 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:38:30.390 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:38:30.391 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:38:30.398 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:38:30.406 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:38:30.409 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:38:30.410 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:38:30.419 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:38:30.424 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:38:30.431 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:38:30.435 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:38:30.442 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:38:30.449 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:38:30.456 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:38:30.458 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:38:30.658 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:38:30.755 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:38:30.758 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:38:30.761 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:38:30.764 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:38:30.765 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:38:30.769 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:38:30.770 +03:00 [INF] Hosting environment: Development
2024-08-23 15:38:30.772 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:38:30.773 +03:00 [DBG] Hosting started
2024-08-23 15:38:31.017 +03:00 [DBG] Connection id "0HN63E1VC4BO9" received FIN.
2024-08-23 15:38:31.031 +03:00 [DBG] Connection id "0HN63E1VC4BO9" accepted.
2024-08-23 15:38:31.035 +03:00 [DBG] Connection id "0HN63E1VC4BO9" started.
2024-08-23 15:38:31.053 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:38:31.110 +03:00 [DBG] Connection id "0HN63E1VC4BO9" stopped.
2024-08-23 15:38:31.117 +03:00 [DBG] Connection id "0HN63E1VC4BO9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:38:32.978 +03:00 [DBG] Connection id "0HN63E1VC4BOA" accepted.
2024-08-23 15:38:32.985 +03:00 [DBG] Connection id "0HN63E1VC4BOA" started.
2024-08-23 15:38:33.136 +03:00 [DBG] Connection 0HN63E1VC4BOA established using the following protocol: "Tls13"
2024-08-23 15:38:33.259 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:38:33.533 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:38:33.610 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:38:33.612 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:38:33.910 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:38:33.955 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:38:33.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 739.4084ms
2024-08-23 15:38:33.995 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:38:34.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.3447ms
2024-08-23 15:38:34.013 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:38:34.159 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 145.8714ms
2024-08-23 15:44:16.729 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:44:16.860 +03:00 [DBG] Hosting starting
2024-08-23 15:44:16.910 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:44:16.915 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:44:16.924 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:44:16.928 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:44:16.929 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:44:16.936 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:44:16.945 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:44:16.948 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:44:16.949 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:44:16.959 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:44:16.965 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:44:16.971 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:44:16.973 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:44:16.981 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:44:16.987 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:44:16.995 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:44:16.998 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:44:17.190 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:44:17.265 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:44:17.268 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:44:17.270 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:44:17.271 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:44:17.272 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:44:17.273 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:44:17.274 +03:00 [INF] Hosting environment: Development
2024-08-23 15:44:17.275 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:44:17.276 +03:00 [DBG] Hosting started
2024-08-23 15:44:17.593 +03:00 [DBG] Connection id "0HN63E56L90DQ" accepted.
2024-08-23 15:44:17.593 +03:00 [DBG] Connection id "0HN63E56L90DR" accepted.
2024-08-23 15:44:17.598 +03:00 [DBG] Connection id "0HN63E56L90DQ" started.
2024-08-23 15:44:17.599 +03:00 [DBG] Connection id "0HN63E56L90DR" started.
2024-08-23 15:44:17.635 +03:00 [DBG] Connection id "0HN63E56L90DQ" received FIN.
2024-08-23 15:44:17.635 +03:00 [DBG] Connection id "0HN63E56L90DR" received FIN.
2024-08-23 15:44:17.661 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:44:17.661 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:44:17.723 +03:00 [DBG] Connection id "0HN63E56L90DR" stopped.
2024-08-23 15:44:17.723 +03:00 [DBG] Connection id "0HN63E56L90DQ" stopped.
2024-08-23 15:44:17.727 +03:00 [DBG] Connection id "0HN63E56L90DR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:44:17.727 +03:00 [DBG] Connection id "0HN63E56L90DQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:44:20.444 +03:00 [DBG] Connection id "0HN63E56L90DS" accepted.
2024-08-23 15:44:20.466 +03:00 [DBG] Connection id "0HN63E56L90DS" started.
2024-08-23 15:44:20.541 +03:00 [DBG] Connection 0HN63E56L90DS established using the following protocol: "Tls13"
2024-08-23 15:44:20.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:44:20.907 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:44:20.995 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:44:20.996 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:44:21.326 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:44:21.367 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:44:21.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 754.1656ms
2024-08-23 15:44:21.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:44:21.409 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 8.2904ms
2024-08-23 15:44:21.413 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:44:21.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 86.6990ms
2024-08-23 15:44:22.801 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:44:22.806 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:44:22.809 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:44:23.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 392.3216ms
2024-08-23 15:44:29.419 +03:00 [DBG] Connection id "0HN63E56L90DS" received FIN.
2024-08-23 15:44:29.431 +03:00 [DBG] Connection id "0HN63E56L90DS" is closed. The last processed stream ID was 7.
2024-08-23 15:44:29.435 +03:00 [DBG] Connection id "0HN63E56L90DS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:44:29.438 +03:00 [DBG] Connection id "0HN63E56L90DS" stopped.
2024-08-23 15:44:34.432 +03:00 [DBG] Connection id "0HN63E56L90DT" accepted.
2024-08-23 15:44:34.435 +03:00 [DBG] Connection id "0HN63E56L90DT" started.
2024-08-23 15:44:34.441 +03:00 [DBG] Connection 0HN63E56L90DT established using the following protocol: "Tls13"
2024-08-23 15:44:34.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 15:44:34.460 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 15:44:34.470 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:44:34.474 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:44:34.477 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:44:34.483 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:44:34.602 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:44:34.608 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:44:34.675 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:44:34.680 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:44:34.682 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:44:34.685 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:44:34.689 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:44:34.692 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:44:34.695 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:44:34.973 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:44:35.333 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:44:35.353 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:44:35.359 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 15:44:35.362 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:44:35.363 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:44:35.365 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:44:35.410 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 15:44:36.496 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:44:36.498 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:44:36.501 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:44:36.503 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:44:36.505 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:44:36.634 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:44:36.638 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:44:36.639 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:44:36.694 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:44:36.698 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:44:36.701 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:44:36.947 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:44:37.096 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.StartDateUtc <= __now_0 && d.EndDateUtc >= __now_0)
    .OrderByDescending(d => d.Percentage)
    .Take(__p_1)'
2024-08-23 15:44:37.534 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
        SELECT TOP(@__p_1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
        FROM Discounts AS d
        WHERE (d.StartDateUtc <= @__now_0) && (d.EndDateUtc >= @__now_0)
        ORDER BY d.Percentage DESC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:44:37.607 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:44:37.688 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (83ms).
2024-08-23 15:44:37.722 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:44:38.234 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:44:38.269 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
ORDER BY [d].[Percentage] DESC
2024-08-23 15:44:38.433 +03:00 [INF] Executed DbCommand (180ms) [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
ORDER BY [d].[Percentage] DESC
2024-08-23 15:44:38.564 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:44:38.644 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:44:38.648 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:44:38.650 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:44:38.653 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:44:38.681 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:44:38.700 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:44:38.722 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:44:38.765 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:44:38.776 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:44:38.779 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:44:38.780 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:44:38.781 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:44:38.783 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:44:38.787 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:44:38.843 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 4142.8084ms
2024-08-23 15:44:38.849 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:44:38.864 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:44:38.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 4425.2972ms
2024-08-23 15:44:39.434 +03:00 [DBG] Connection id "0HN63E56L90DT" received FIN.
2024-08-23 15:44:39.443 +03:00 [DBG] Connection id "0HN63E56L90DT" is closed. The last processed stream ID was 1.
2024-08-23 15:44:39.454 +03:00 [DBG] Connection id "0HN63E56L90DT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:44:39.480 +03:00 [DBG] Connection id "0HN63E56L90DT" stopped.
2024-08-23 15:45:28.351 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 15:45:28.530 +03:00 [DBG] Hosting starting
2024-08-23 15:45:28.583 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 15:45:28.588 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 15:45:28.603 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 15:45:28.606 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 15:45:28.608 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 15:45:28.618 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 15:45:28.632 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 15:45:28.635 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 15:45:28.636 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 15:45:28.647 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 15:45:28.654 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:45:28.661 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 15:45:28.665 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 15:45:28.677 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 15:45:28.687 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 15:45:28.696 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 15:45:28.700 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 15:45:28.943 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 15:45:29.018 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 15:45:29.021 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 15:45:29.022 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 15:45:29.023 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 15:45:29.024 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 15:45:29.026 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 15:45:29.026 +03:00 [INF] Hosting environment: Development
2024-08-23 15:45:29.027 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 15:45:29.028 +03:00 [DBG] Hosting started
2024-08-23 15:45:29.188 +03:00 [DBG] Connection id "0HN63E5S03PG2" received FIN.
2024-08-23 15:45:29.188 +03:00 [DBG] Connection id "0HN63E5S03PG1" received FIN.
2024-08-23 15:45:29.204 +03:00 [DBG] Connection id "0HN63E5S03PG1" accepted.
2024-08-23 15:45:29.204 +03:00 [DBG] Connection id "0HN63E5S03PG2" accepted.
2024-08-23 15:45:29.208 +03:00 [DBG] Connection id "0HN63E5S03PG1" started.
2024-08-23 15:45:29.208 +03:00 [DBG] Connection id "0HN63E5S03PG2" started.
2024-08-23 15:45:29.234 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:45:29.234 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 15:45:29.332 +03:00 [DBG] Connection id "0HN63E5S03PG2" stopped.
2024-08-23 15:45:29.332 +03:00 [DBG] Connection id "0HN63E5S03PG1" stopped.
2024-08-23 15:45:29.340 +03:00 [DBG] Connection id "0HN63E5S03PG1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:45:29.340 +03:00 [DBG] Connection id "0HN63E5S03PG2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:45:31.587 +03:00 [DBG] Connection id "0HN63E5S03PG3" accepted.
2024-08-23 15:45:31.592 +03:00 [DBG] Connection id "0HN63E5S03PG3" started.
2024-08-23 15:45:31.671 +03:00 [DBG] Connection 0HN63E5S03PG3 established using the following protocol: "Tls13"
2024-08-23 15:45:31.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 15:45:32.075 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 15:45:32.126 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 15:45:32.128 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:45:32.381 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 15:45:32.407 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 15:45:32.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 628.2583ms
2024-08-23 15:45:32.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 15:45:32.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 11.4052ms
2024-08-23 15:45:32.452 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 15:45:32.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 90.8604ms
2024-08-23 15:45:34.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 15:45:34.014 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 15:45:34.018 +03:00 [DBG] Request did not match any endpoints
2024-08-23 15:45:34.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 435.9442ms
2024-08-23 15:45:39.500 +03:00 [DBG] Connection id "0HN63E5S03PG3" received FIN.
2024-08-23 15:45:39.510 +03:00 [DBG] Connection id "0HN63E5S03PG3" is closed. The last processed stream ID was 7.
2024-08-23 15:45:39.516 +03:00 [DBG] Connection id "0HN63E5S03PG3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:45:39.537 +03:00 [DBG] Connection id "0HN63E5S03PG3" stopped.
2024-08-23 15:45:39.950 +03:00 [DBG] Connection id "0HN63E5S03PG4" accepted.
2024-08-23 15:45:39.954 +03:00 [DBG] Connection id "0HN63E5S03PG4" started.
2024-08-23 15:45:39.969 +03:00 [DBG] Connection 0HN63E5S03PG4 established using the following protocol: "Tls13"
2024-08-23 15:45:39.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 15:45:39.986 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 15:45:39.999 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:45:40.002 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 15:45:40.006 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:45:40.014 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 15:45:40.108 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 15:45:40.115 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:45:40.180 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 15:45:40.185 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 15:45:40.187 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 15:45:40.189 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 15:45:40.192 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 15:45:40.195 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 15:45:40.198 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:45:40.503 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 15:45:40.843 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 15:45:40.863 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:45:40.867 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 15:45:40.870 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:45:40.871 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 15:45:40.873 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 15:45:40.912 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 15:45:41.895 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 15:45:41.897 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 15:45:41.900 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 15:45:41.901 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 15:45:41.903 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 15:45:42.038 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:45:42.041 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:45:42.045 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 15:45:42.095 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:45:42.099 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:45:42.101 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 15:45:42.340 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 15:45:42.517 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(r => r.Room)
    .Where(d => d.StartDateUtc <= __now_0 && d.EndDateUtc >= __now_0)
    .OrderByDescending(d => d.Percentage)
    .Take(__p_1)'
2024-08-23 15:45:42.713 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-23 15:45:43.048 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT t.DiscountID, t.CreatedAtUtc, t.EndDateUtc, t.IsActive, t.Percentage, t.RoomClassID, t.RoomID, t.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM 
        (
            SELECT TOP(@__p_1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE (d.StartDateUtc <= @__now_0) && (d.EndDateUtc >= @__now_0)
            ORDER BY d.Percentage DESC
        ) AS t
        INNER JOIN Rooms AS r ON t.RoomID == r.RoomID
        ORDER BY t.Percentage DESC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 15:45:43.133 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 15:45:43.205 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (74ms).
2024-08-23 15:45:43.237 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:45:43.726 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:45:43.754 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-23 15:45:43.894 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-23 15:45:43.972 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.034 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.072 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.076 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.079 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.081 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.088 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.097 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 15:45:44.122 +03:00 [DBG] A data reader was disposed.
2024-08-23 15:45:44.136 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:45:44.151 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 15:45:44.188 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 15:45:44.200 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 15:45:44.204 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 15:45:44.207 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 15:45:44.209 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 15:45:44.211 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 15:45:44.213 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 15:45:44.267 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 4064.1041ms
2024-08-23 15:45:44.273 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 15:45:44.288 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 15:45:44.296 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 4322.6888ms
2024-08-23 15:45:44.504 +03:00 [DBG] Connection id "0HN63E5S03PG4" received FIN.
2024-08-23 15:45:44.508 +03:00 [DBG] Connection id "0HN63E5S03PG4" is closed. The last processed stream ID was 1.
2024-08-23 15:45:44.538 +03:00 [DBG] Connection id "0HN63E5S03PG4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 15:45:44.550 +03:00 [DBG] Connection id "0HN63E5S03PG4" stopped.
2024-08-23 16:13:01.423 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 16:13:01.600 +03:00 [DBG] Hosting starting
2024-08-23 16:13:01.661 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 16:13:01.667 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 16:13:01.709 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 16:13:01.713 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 16:13:01.714 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 16:13:01.727 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 16:13:01.743 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 16:13:01.746 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 16:13:01.747 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 16:13:01.757 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 16:13:01.763 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 16:13:01.772 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 16:13:01.776 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 16:13:01.785 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 16:13:01.793 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 16:13:01.801 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 16:13:01.804 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 16:13:02.130 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 16:13:02.237 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 16:13:02.240 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 16:13:02.243 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 16:13:02.244 +03:00 [DBG] Connection id "0HN63EL8KSI65" received FIN.
2024-08-23 16:13:02.244 +03:00 [DBG] Connection id "0HN63EL8KSI66" received FIN.
2024-08-23 16:13:02.246 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 16:13:02.250 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 16:13:02.252 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 16:13:02.253 +03:00 [INF] Hosting environment: Development
2024-08-23 16:13:02.256 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 16:13:02.258 +03:00 [DBG] Hosting started
2024-08-23 16:13:02.262 +03:00 [DBG] Connection id "0HN63EL8KSI65" accepted.
2024-08-23 16:13:02.262 +03:00 [DBG] Connection id "0HN63EL8KSI66" accepted.
2024-08-23 16:13:02.267 +03:00 [DBG] Connection id "0HN63EL8KSI65" started.
2024-08-23 16:13:02.268 +03:00 [DBG] Connection id "0HN63EL8KSI66" started.
2024-08-23 16:13:02.310 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 16:13:02.310 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 16:13:02.897 +03:00 [DBG] Connection id "0HN63EL8KSI65" stopped.
2024-08-23 16:13:02.897 +03:00 [DBG] Connection id "0HN63EL8KSI66" stopped.
2024-08-23 16:13:02.910 +03:00 [DBG] Connection id "0HN63EL8KSI65" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:13:02.910 +03:00 [DBG] Connection id "0HN63EL8KSI66" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:13:03.053 +03:00 [DBG] Connection id "0HN63EL8KSI67" accepted.
2024-08-23 16:13:03.072 +03:00 [DBG] Connection id "0HN63EL8KSI67" started.
2024-08-23 16:13:03.306 +03:00 [DBG] Connection 0HN63EL8KSI67 established using the following protocol: "Tls13"
2024-08-23 16:13:03.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 16:13:03.966 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 16:13:04.054 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 16:13:04.056 +03:00 [DBG] Request did not match any endpoints
2024-08-23 16:13:04.583 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 16:13:04.621 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 16:13:04.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1133.0763ms
2024-08-23 16:13:04.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 16:13:04.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 16:13:04.695 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 18.8712ms
2024-08-23 16:13:04.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 153.7858ms
2024-08-23 16:13:06.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 16:13:06.508 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 16:13:06.511 +03:00 [DBG] Request did not match any endpoints
2024-08-23 16:13:07.081 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 576.2674ms
2024-08-23 16:13:12.090 +03:00 [DBG] Connection id "0HN63EL8KSI67" received FIN.
2024-08-23 16:13:12.107 +03:00 [DBG] Connection id "0HN63EL8KSI67" is closed. The last processed stream ID was 7.
2024-08-23 16:13:12.111 +03:00 [DBG] Connection id "0HN63EL8KSI67" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:13:12.116 +03:00 [DBG] Connection id "0HN63EL8KSI67" stopped.
2024-08-23 16:13:16.024 +03:00 [DBG] Connection id "0HN63EL8KSI68" accepted.
2024-08-23 16:13:16.027 +03:00 [DBG] Connection id "0HN63EL8KSI68" started.
2024-08-23 16:13:16.039 +03:00 [DBG] Connection 0HN63EL8KSI68 established using the following protocol: "Tls13"
2024-08-23 16:13:16.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/50/hotels - -
2024-08-23 16:13:16.055 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/50/hotels'
2024-08-23 16:13:16.063 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/50/hotels'
2024-08-23 16:13:16.066 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:13:16.071 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 16:13:16.172 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 16:13:16.178 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:13:16.256 +03:00 [INF] Route matched with {action = "GetHotelsForCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsForCity(Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 16:13:16.262 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 16:13:16.264 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 16:13:16.268 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 16:13:16.272 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 16:13:16.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 16:13:16.276 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 16:13:16.576 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 16:13:17.004 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API) in 719.8187ms
2024-08-23 16:13:17.011 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:13:17.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/50/hotels - - - 500 - application/json 1156.0492ms
2024-08-23 16:13:22.102 +03:00 [DBG] Connection id "0HN63EL8KSI68" received FIN.
2024-08-23 16:13:22.110 +03:00 [DBG] Connection id "0HN63EL8KSI68" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:13:22.110 +03:00 [DBG] Connection id "0HN63EL8KSI68" is closed. The last processed stream ID was 1.
2024-08-23 16:13:22.121 +03:00 [DBG] Connection id "0HN63EL8KSI68" stopped.
2024-08-23 16:16:10.226 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 16:16:10.368 +03:00 [DBG] Hosting starting
2024-08-23 16:16:10.419 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 16:16:10.425 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 16:16:10.435 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 16:16:10.439 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 16:16:10.440 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 16:16:10.450 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 16:16:10.458 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 16:16:10.461 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 16:16:10.463 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 16:16:10.472 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 16:16:10.479 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 16:16:10.487 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 16:16:10.491 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 16:16:10.500 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 16:16:10.506 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 16:16:10.516 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 16:16:10.519 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 16:16:10.717 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 16:16:10.798 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 16:16:10.800 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 16:16:10.803 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 16:16:10.804 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 16:16:10.805 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 16:16:10.806 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 16:16:10.807 +03:00 [INF] Hosting environment: Development
2024-08-23 16:16:10.809 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 16:16:10.809 +03:00 [DBG] Hosting started
2024-08-23 16:16:10.871 +03:00 [DBG] Connection id "0HN63EN0RO150" accepted.
2024-08-23 16:16:10.871 +03:00 [DBG] Connection id "0HN63EN0RO151" accepted.
2024-08-23 16:16:10.879 +03:00 [DBG] Connection id "0HN63EN0RO151" started.
2024-08-23 16:16:10.879 +03:00 [DBG] Connection id "0HN63EN0RO150" started.
2024-08-23 16:16:10.884 +03:00 [DBG] Connection id "0HN63EN0RO150" received FIN.
2024-08-23 16:16:10.884 +03:00 [DBG] Connection id "0HN63EN0RO151" received FIN.
2024-08-23 16:16:10.921 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 16:16:10.921 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 16:16:10.987 +03:00 [DBG] Connection id "0HN63EN0RO151" stopped.
2024-08-23 16:16:10.987 +03:00 [DBG] Connection id "0HN63EN0RO150" stopped.
2024-08-23 16:16:10.992 +03:00 [DBG] Connection id "0HN63EN0RO151" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:16:10.992 +03:00 [DBG] Connection id "0HN63EN0RO150" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:16:11.138 +03:00 [DBG] Connection id "0HN63EN0RO152" accepted.
2024-08-23 16:16:11.146 +03:00 [DBG] Connection id "0HN63EN0RO152" started.
2024-08-23 16:16:11.238 +03:00 [DBG] Connection 0HN63EN0RO152 established using the following protocol: "Tls13"
2024-08-23 16:16:11.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 16:16:11.542 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 16:16:11.594 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 16:16:11.598 +03:00 [DBG] Request did not match any endpoints
2024-08-23 16:16:11.831 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 16:16:11.872 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 16:16:11.891 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 543.9445ms
2024-08-23 16:16:11.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 16:16:11.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 8.1797ms
2024-08-23 16:16:11.919 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 16:16:12.035 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 116.2774ms
2024-08-23 16:16:13.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 16:16:13.290 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 16:16:13.293 +03:00 [DBG] Request did not match any endpoints
2024-08-23 16:16:13.636 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 348.4766ms
2024-08-23 16:16:17.326 +03:00 [DBG] Connection id "0HN63EN0RO152" received FIN.
2024-08-23 16:16:17.338 +03:00 [DBG] Connection id "0HN63EN0RO152" is closed. The last processed stream ID was 7.
2024-08-23 16:16:17.343 +03:00 [DBG] Connection id "0HN63EN0RO152" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:16:17.363 +03:00 [DBG] Connection id "0HN63EN0RO152" stopped.
2024-08-23 16:16:27.967 +03:00 [DBG] Connection id "0HN63EN0RO153" accepted.
2024-08-23 16:16:27.969 +03:00 [DBG] Connection id "0HN63EN0RO153" started.
2024-08-23 16:16:27.987 +03:00 [DBG] Connection 0HN63EN0RO153 established using the following protocol: "Tls13"
2024-08-23 16:16:27.990 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/50/hotels - -
2024-08-23 16:16:28.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/50/hotels'
2024-08-23 16:16:28.012 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/50/hotels'
2024-08-23 16:16:28.015 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:16:28.019 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 16:16:28.098 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 16:16:28.106 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:16:28.149 +03:00 [INF] Route matched with {action = "GetHotelsForCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsForCity(Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 16:16:28.155 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 16:16:28.157 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 16:16:28.159 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 16:16:28.161 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 16:16:28.163 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 16:16:28.165 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 16:16:28.359 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 16:16:28.713 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 16:16:28.728 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 16:16:28.733 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 16:16:28.736 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 16:16:28.739 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 16:16:28.742 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 16:16:28.783 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 16:16:29.925 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 16:16:29.928 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 16:16:29.930 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 16:16:29.932 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 16:16:29.933 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 16:16:30.057 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 16:16:30.060 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 16:16:30.063 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 16:16:30.116 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 16:16:30.121 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 16:16:30.124 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 16:16:30.376 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 16:16:30.544 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => h.CityID == __cityId_0)
    .Include(h => h.Owner)'
2024-08-23 16:16:30.726 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 16:16:31.037 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Owner.Email (string) Required, 9], [Property: Owner.FirstName (string) Required, 10], [Property: Owner.LastName (string) Required, 11], [Property: Owner.PhoneNumber (string) Required, 12] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM Hotels AS h
        INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
        WHERE h.CityID == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 16:16:31.119 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 16:16:31.177 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2024-08-23 16:16:31.209 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 16:16:31.704 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 16:16:31.733 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 16:16:31.875 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 16:16:31.967 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 16:16:32.010 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 16:16:32.039 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 16:16:32.044 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 16:16:32.063 +03:00 [DBG] A data reader was disposed.
2024-08-23 16:16:32.075 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 16:16:32.088 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 16:16:32.148 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 16:16:32.156 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 16:16:32.159 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 16:16:32.160 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 16:16:32.161 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 16:16:32.163 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelBasicResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 16:16:32.194 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API) in 4023.9981ms
2024-08-23 16:16:32.200 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 16:16:32.214 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 16:16:32.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/50/hotels - - - 200 - application/json;+charset=utf-8 4231.1305ms
2024-08-23 16:16:37.354 +03:00 [DBG] Connection id "0HN63EN0RO153" received FIN.
2024-08-23 16:16:37.357 +03:00 [DBG] Connection id "0HN63EN0RO153" is closed. The last processed stream ID was 1.
2024-08-23 16:16:37.360 +03:00 [DBG] Connection id "0HN63EN0RO153" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 16:16:37.365 +03:00 [DBG] Connection id "0HN63EN0RO153" stopped.
2024-08-23 22:08:35.727 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:08:35.923 +03:00 [DBG] Hosting starting
2024-08-23 22:08:36.011 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:08:36.020 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:08:36.042 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:08:36.047 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:08:36.084 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:08:36.105 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:08:36.120 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:08:36.123 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:08:36.124 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:08:36.135 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:08:36.143 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:08:36.150 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:08:36.154 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:08:36.164 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:08:36.173 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:08:36.180 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:08:36.184 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:08:36.505 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:08:36.605 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:08:36.609 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:08:36.610 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:08:36.612 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:08:36.613 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:08:36.615 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:08:36.616 +03:00 [INF] Hosting environment: Development
2024-08-23 22:08:36.617 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:08:36.619 +03:00 [DBG] Hosting started
2024-08-23 22:08:36.713 +03:00 [DBG] Connection id "0HN63KRUQ6GI7" accepted.
2024-08-23 22:08:36.719 +03:00 [DBG] Connection id "0HN63KRUQ6GI7" started.
2024-08-23 22:08:36.758 +03:00 [DBG] Connection id "0HN63KRUQ6GI8" accepted.
2024-08-23 22:08:36.762 +03:00 [DBG] Connection id "0HN63KRUQ6GI8" started.
2024-08-23 22:08:38.944 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" accepted.
2024-08-23 22:08:38.947 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" started.
2024-08-23 22:08:39.070 +03:00 [DBG] Connection 0HN63KRUQ6GI9 established using the following protocol: "Tls13"
2024-08-23 22:08:39.195 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:08:39.516 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:08:39.614 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:08:39.619 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:08:39.984 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:08:40.028 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:08:40.050 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:08:40.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 864.4069ms
2024-08-23 22:08:40.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.2628ms
2024-08-23 22:08:40.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:08:40.243 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 167.1770ms
2024-08-23 22:08:42.070 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:08:42.075 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:08:42.077 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:08:42.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 472.7262ms
2024-08-23 22:08:42.932 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" received FIN.
2024-08-23 22:08:42.945 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" is closed. The last processed stream ID was 7.
2024-08-23 22:08:42.951 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:08:42.974 +03:00 [DBG] Connection id "0HN63KRUQ6GI9" stopped.
2024-08-23 22:08:46.782 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-23 22:08:46.782 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-23 22:08:46.785 +03:00 [DBG] Connection id "0HN63KRUQ6GI7" stopped.
2024-08-23 22:08:46.786 +03:00 [DBG] Connection id "0HN63KRUQ6GI8" stopped.
2024-08-23 22:08:46.788 +03:00 [DBG] Connection id "0HN63KRUQ6GI7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:08:46.789 +03:00 [DBG] Connection id "0HN63KRUQ6GI8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:09:26.360 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" accepted.
2024-08-23 22:09:26.363 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" started.
2024-08-23 22:09:26.388 +03:00 [DBG] Connection 0HN63KRUQ6GIA established using the following protocol: "Tls13"
2024-08-23 22:09:26.397 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Owner application/json 122
2024-08-23 22:09:26.422 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Owner'
2024-08-23 22:09:26.433 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)' with route pattern 'api/Owner' is valid for the request path '/api/Owner'
2024-08-23 22:09:26.439 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)'
2024-08-23 22:09:26.447 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:09:26.455 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:09:26.964 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:09:26.980 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-08-23 22:09:26.996 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-23 22:09:27.002 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Owner application/json 122 - 401 0 - 605.2635ms
2024-08-23 22:09:27.005 +03:00 [DBG] Connection id "0HN63KRUQ6GIA", Request id "0HN63KRUQ6GIA:00000001": started reading request body.
2024-08-23 22:09:27.008 +03:00 [DBG] Connection id "0HN63KRUQ6GIA", Request id "0HN63KRUQ6GIA:00000001": done reading request body.
2024-08-23 22:09:28.004 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" received FIN.
2024-08-23 22:09:28.007 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" is closed. The last processed stream ID was 1.
2024-08-23 22:09:28.009 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:09:28.013 +03:00 [DBG] Connection id "0HN63KRUQ6GIA" stopped.
2024-08-23 22:10:03.400 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" accepted.
2024-08-23 22:10:03.403 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" started.
2024-08-23 22:10:03.413 +03:00 [DBG] Connection 0HN63KRUQ6GIB established using the following protocol: "Tls13"
2024-08-23 22:10:03.426 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-23 22:10:03.440 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:10:03.443 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:10:03.446 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:10:03.447 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:10:03.447 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:10:03.450 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:10:03.452 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:10:03.524 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:10:03.530 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:10:03.531 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:10:03.533 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:10:03.535 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:10:03.539 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:10:03.543 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:10:03.895 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:10:03.991 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:10:04.003 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:10:04.009 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:10:04.011 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:10:04.025 +03:00 [DBG] Connection id "0HN63KRUQ6GIB", Request id "0HN63KRUQ6GIB:00000001": started reading request body.
2024-08-23 22:10:04.028 +03:00 [DBG] Connection id "0HN63KRUQ6GIB", Request id "0HN63KRUQ6GIB:00000001": done reading request body.
2024-08-23 22:10:04.057 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:10:04.060 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:10:04.063 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:10:04.065 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:10:04.116 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:10:05.159 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:10:05.163 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:10:05.165 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:10:05.167 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:10:05.170 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:10:05.305 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:10:05.308 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:10:05.310 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:10:05.365 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:10:05.368 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:10:05.372 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:10:05.631 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:10:05.811 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-23 22:10:05.936 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 22:10:06.349 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:10:06.449 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:06.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2024-08-23 22:10:06.558 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:07.153 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:07.178 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:10:07.574 +03:00 [INF] Executed DbCommand (403ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:10:07.659 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:07.782 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:07.819 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:07.822 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:07.844 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:07.861 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:07.877 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.311 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-23 22:10:08.331 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:10:08.336 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:08.339 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:10:08.342 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.347 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.349 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:10:08.389 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:10:08.396 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:08.397 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.399 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.426 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-23 22:10:08.472 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:10:08.479 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:08.482 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:10:08.484 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.488 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:10:08.527 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:10:08.531 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:08.531 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.533 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.565 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:08.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:10:08.570 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.574 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.577 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:10:08.607 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:10:08.615 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:08.616 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.619 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:08.830 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:10:08.839 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:10:08.841 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:10:08.843 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:10:08.844 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:10:08.846 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:10:08.905 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 5352.5656ms
2024-08-23 22:10:08.912 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:10:08.929 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:10:08.939 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 5513.1016ms
2024-08-23 22:10:18.067 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" received FIN.
2024-08-23 22:10:18.069 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" is closed. The last processed stream ID was 1.
2024-08-23 22:10:18.074 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:10:18.085 +03:00 [DBG] Connection id "0HN63KRUQ6GIB" stopped.
2024-08-23 22:10:24.573 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" accepted.
2024-08-23 22:10:24.576 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" started.
2024-08-23 22:10:24.587 +03:00 [DBG] Connection 0HN63KRUQ6GIC established using the following protocol: "Tls13"
2024-08-23 22:10:24.590 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Owner application/json 122
2024-08-23 22:10:24.591 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Owner'
2024-08-23 22:10:24.593 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)' with route pattern 'api/Owner' is valid for the request path '/api/Owner'
2024-08-23 22:10:24.595 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:24.596 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:10:24.598 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:10:24.721 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:10:24.727 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:10:24.730 +03:00 [DBG] Authorization was successful.
2024-08-23 22:10:24.732 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:24.736 +03:00 [INF] Route matched with {action = "CreateOwner", controller = "Owner"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOwner(HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto) on controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API).
2024-08-23 22:10:24.740 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:10:24.741 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:10:24.743 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:10:24.748 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:10:24.749 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:10:24.751 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:25.011 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:25.015 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto' ...
2024-08-23 22:10:25.017 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto' using the name '' in request data ...
2024-08-23 22:10:25.019 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:10:25.021 +03:00 [DBG] Connection id "0HN63KRUQ6GIC", Request id "0HN63KRUQ6GIC:00000001": started reading request body.
2024-08-23 22:10:25.022 +03:00 [DBG] Connection id "0HN63KRUQ6GIC", Request id "0HN63KRUQ6GIC:00000001": done reading request body.
2024-08-23 22:10:25.024 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto'
2024-08-23 22:10:25.026 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto'.
2024-08-23 22:10:25.027 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto'.
2024-08-23 22:10:25.029 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto' ...
2024-08-23 22:10:25.068 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Owner.OwnerCreateDto'.
2024-08-23 22:10:25.132 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:10:25.187 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'OwnerID.Owner'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:25.223 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:25.237 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:10:25.241 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:10:25.253 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:10:25.286 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:25.289 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:25.294 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:10:25.315 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:10:25.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:25.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:10:25.384 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [owners] ([Email], [FirstName], [LastName], [PhoneNumber])
VALUES (@p0, @p1, @p2, @p3);
SELECT [OwnerID]
FROM [owners]
WHERE @@ROWCOUNT = 1 AND [OwnerID] = scope_identity();
2024-08-23 22:10:25.504 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [owners] ([Email], [FirstName], [LastName], [PhoneNumber])
VALUES (@p0, @p1, @p2, @p3);
SELECT [OwnerID]
FROM [owners]
WHERE @@ROWCOUNT = 1 AND [OwnerID] = scope_identity();
2024-08-23 22:10:25.534 +03:00 [DBG] The foreign key property 'Owner.OwnerID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:10:25.547 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:25.557 +03:00 [DBG] Committing transaction.
2024-08-23 22:10:25.570 +03:00 [DBG] Committed transaction.
2024-08-23 22:10:25.579 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:25.582 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:25.588 +03:00 [DBG] Disposing transaction.
2024-08-23 22:10:25.606 +03:00 [DBG] An entity of type 'Owner' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:25.615 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:10:25.633 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:10:25.636 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:10:25.637 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:10:25.638 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:10:25.638 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:10:25.640 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Owner.OwnerDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:10:25.645 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API) in 894.0079ms
2024-08-23 22:10:25.648 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.CreateOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:25.650 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:10:25.651 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Owner application/json 122 - 201 - application/json;+charset=utf-8 1061.0924ms
2024-08-23 22:10:28.078 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" received FIN.
2024-08-23 22:10:28.080 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" is closed. The last processed stream ID was 1.
2024-08-23 22:10:28.081 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:10:28.088 +03:00 [DBG] Connection id "0HN63KRUQ6GIC" stopped.
2024-08-23 22:10:39.330 +03:00 [DBG] Connection id "0HN63KRUQ6GID" accepted.
2024-08-23 22:10:39.334 +03:00 [DBG] Connection id "0HN63KRUQ6GID" started.
2024-08-23 22:10:39.370 +03:00 [DBG] Connection 0HN63KRUQ6GID established using the following protocol: "Tls13"
2024-08-23 22:10:39.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Owner - -
2024-08-23 22:10:39.379 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Owner'
2024-08-23 22:10:39.380 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetAllOwners (HotelBookingPlatform.API)' with route pattern 'api/Owner' is valid for the request path '/api/Owner'
2024-08-23 22:10:39.382 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetAllOwners (HotelBookingPlatform.API)'
2024-08-23 22:10:39.384 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:10:39.386 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:10:39.388 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:10:39.392 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetAllOwners (HotelBookingPlatform.API)'
2024-08-23 22:10:39.397 +03:00 [INF] Route matched with {action = "GetAllOwners", controller = "Owner"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOwners() on controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API).
2024-08-23 22:10:39.400 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:10:39.401 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:10:39.403 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:10:39.407 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:10:39.410 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:10:39.412 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:39.419 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:39.436 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:10:39.447 +03:00 [DBG] Compiling query expression: 
'DbSet<Owner>()
    .AsNoTracking()'
2024-08-23 22:10:39.459 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Owner>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Owner.Email (string) Required, 1], [Property: Owner.FirstName (string) Required, 2], [Property: Owner.LastName (string) Required, 3], [Property: Owner.PhoneNumber (string) Required, 4] }
        SELECT o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM owners AS o), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Owner>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:10:39.463 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:39.464 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:10:39.465 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:39.467 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:39.468 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [owners] AS [o]
2024-08-23 22:10:39.492 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [owners] AS [o]
2024-08-23 22:10:39.496 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:39.496 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:39.498 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:39.512 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:10:39.516 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:10:39.516 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:10:39.517 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:10:39.518 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:10:39.520 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Owner.OwnerDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:10:39.525 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.OwnerController.GetAllOwners (HotelBookingPlatform.API) in 113.4381ms
2024-08-23 22:10:39.529 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetAllOwners (HotelBookingPlatform.API)'
2024-08-23 22:10:39.530 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:10:39.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Owner - - - 200 - application/json;+charset=utf-8 156.3877ms
2024-08-23 22:10:48.090 +03:00 [DBG] Connection id "0HN63KRUQ6GID" received FIN.
2024-08-23 22:10:48.092 +03:00 [DBG] Connection id "0HN63KRUQ6GID" is closed. The last processed stream ID was 1.
2024-08-23 22:10:48.096 +03:00 [DBG] Connection id "0HN63KRUQ6GID" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:10:48.105 +03:00 [DBG] Connection id "0HN63KRUQ6GID" stopped.
2024-08-23 22:10:58.322 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" accepted.
2024-08-23 22:10:58.325 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" started.
2024-08-23 22:10:58.342 +03:00 [DBG] Connection 0HN63KRUQ6GIE established using the following protocol: "Tls13"
2024-08-23 22:10:58.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Owner/26 - -
2024-08-23 22:10:58.346 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Owner/26'
2024-08-23 22:10:58.348 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetOwner (HotelBookingPlatform.API)' with route pattern 'api/Owner/{id}' is valid for the request path '/api/Owner/26'
2024-08-23 22:10:58.351 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:58.352 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:10:58.353 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:10:58.354 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:10:58.355 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:58.360 +03:00 [INF] Route matched with {action = "GetOwner", controller = "Owner"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOwner(Int32) on controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API).
2024-08-23 22:10:58.363 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:10:58.367 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:10:58.370 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:10:58.372 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:10:58.373 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:10:58.375 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:58.386 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.OwnerController (HotelBookingPlatform.API)
2024-08-23 22:10:58.388 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:10:58.390 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:10:58.393 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:10:58.394 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:10:58.396 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:10:58.399 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:10:58.407 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:10:58.433 +03:00 [DBG] Compiling query expression: 
'DbSet<Owner>()
    .FirstOrDefault(e => EF.Property<int>(e, "OwnerID") == __p_0)'
2024-08-23 22:10:58.441 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Owner>(
    asyncEnumerable: new SingleQueryingEnumerable<Owner>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Owner.Email (string) Required, 1], [Property: Owner.FirstName (string) Required, 2], [Property: Owner.LastName (string) Required, 3], [Property: Owner.PhoneNumber (string) Required, 4] }
            SELECT TOP(1) o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM owners AS o
            WHERE o.OwnerID == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Owner>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:10:58.444 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:10:58.445 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:10:58.448 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:58.450 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:58.454 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [owners] AS [o]
WHERE [o].[OwnerID] = @__p_0
2024-08-23 22:10:58.470 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [owners] AS [o]
WHERE [o].[OwnerID] = @__p_0
2024-08-23 22:10:58.475 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:10:58.477 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:10:58.477 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:58.479 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:10:58.483 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:10:58.486 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:10:58.487 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:10:58.489 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:10:58.490 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:10:58.493 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Owner.OwnerDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:10:58.497 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.OwnerController.GetOwner (HotelBookingPlatform.API) in 121.8608ms
2024-08-23 22:10:58.501 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.OwnerController.GetOwner (HotelBookingPlatform.API)'
2024-08-23 22:10:58.502 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:10:58.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Owner/26 - - - 200 - application/json;+charset=utf-8 160.1199ms
2024-08-23 22:11:08.119 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" received FIN.
2024-08-23 22:11:08.122 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" is closed. The last processed stream ID was 1.
2024-08-23 22:11:08.124 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:11:08.134 +03:00 [DBG] Connection id "0HN63KRUQ6GIE" stopped.
2024-08-23 22:12:24.681 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" accepted.
2024-08-23 22:12:24.744 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" started.
2024-08-23 22:12:24.765 +03:00 [DBG] Connection 0HN63KRUQ6GIF established using the following protocol: "Tls13"
2024-08-23 22:12:24.770 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City application/json 200
2024-08-23 22:12:24.774 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City'
2024-08-23 22:12:24.778 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddCity (HotelBookingPlatform.API)' with route pattern 'api/City' is valid for the request path '/api/City'
2024-08-23 22:12:24.781 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddCity (HotelBookingPlatform.API)'
2024-08-23 22:12:24.782 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:12:24.784 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:12:24.785 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:12:24.786 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:12:24.787 +03:00 [DBG] Authorization was successful.
2024-08-23 22:12:24.788 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddCity (HotelBookingPlatform.API)'
2024-08-23 22:12:24.791 +03:00 [INF] Route matched with {action = "AddCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCity(HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:12:24.795 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:12:24.798 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:12:24.799 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:12:24.802 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:12:24.803 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:12:24.804 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:12:24.821 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:12:24.831 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest' ...
2024-08-23 22:12:24.841 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest' using the name '' in request data ...
2024-08-23 22:12:24.852 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:12:24.863 +03:00 [DBG] Connection id "0HN63KRUQ6GIF", Request id "0HN63KRUQ6GIF:00000001": started reading request body.
2024-08-23 22:12:24.868 +03:00 [DBG] Connection id "0HN63KRUQ6GIF", Request id "0HN63KRUQ6GIF:00000001": done reading request body.
2024-08-23 22:12:24.874 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest'
2024-08-23 22:12:24.876 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest'.
2024-08-23 22:12:24.879 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest'.
2024-08-23 22:12:24.882 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest' ...
2024-08-23 22:12:24.890 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.City.CityCreateRequest'.
2024-08-23 22:12:24.902 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:12:24.907 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'CityID.City'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:24.924 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:24.928 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:12:24.930 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:12:24.938 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:12:24.941 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:24.942 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:24.943 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:12:24.949 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:12:24.953 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:12:24.954 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:12:24.956 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Cities] ([Country], [CreatedAtUtc], [Description], [Name], [PostOffice], [VisitCount])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CityID]
FROM [Cities]
WHERE @@ROWCOUNT = 1 AND [CityID] = scope_identity();
2024-08-23 22:12:24.999 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Cities] ([Country], [CreatedAtUtc], [Description], [Name], [PostOffice], [VisitCount])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [CityID]
FROM [Cities]
WHERE @@ROWCOUNT = 1 AND [CityID] = scope_identity();
2024-08-23 22:12:25.005 +03:00 [DBG] The foreign key property 'City.CityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:12:25.006 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:12:25.007 +03:00 [DBG] Committing transaction.
2024-08-23 22:12:25.009 +03:00 [DBG] Committed transaction.
2024-08-23 22:12:25.009 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:25.011 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:25.013 +03:00 [DBG] Disposing transaction.
2024-08-23 22:12:25.017 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:25.020 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:12:25.024 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:12:25.026 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:12:25.028 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:12:25.029 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:12:25.030 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:12:25.033 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.City.CityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:12:25.038 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.AddCity (HotelBookingPlatform.API) in 233.291ms
2024-08-23 22:12:25.039 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddCity (HotelBookingPlatform.API)'
2024-08-23 22:12:25.041 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:12:25.043 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City application/json 200 - 201 - application/json;+charset=utf-8 272.9765ms
2024-08-23 22:12:28.207 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" received FIN.
2024-08-23 22:12:28.216 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" is closed. The last processed stream ID was 1.
2024-08-23 22:12:28.224 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:12:28.236 +03:00 [DBG] Connection id "0HN63KRUQ6GIF" stopped.
2024-08-23 22:12:59.169 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" accepted.
2024-08-23 22:12:59.176 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" started.
2024-08-23 22:12:59.188 +03:00 [DBG] Connection 0HN63KRUQ6GIG established using the following protocol: "Tls13"
2024-08-23 22:12:59.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City?CityName=Vegas&Description=renowned%20&pageSize=10&pageNumber=1 - -
2024-08-23 22:12:59.210 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City'
2024-08-23 22:12:59.221 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCities (HotelBookingPlatform.API)' with route pattern 'api/City' is valid for the request path '/api/City'
2024-08-23 22:12:59.224 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCities (HotelBookingPlatform.API)'
2024-08-23 22:12:59.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:12:59.226 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:12:59.227 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:12:59.228 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCities (HotelBookingPlatform.API)'
2024-08-23 22:12:59.238 +03:00 [INF] Route matched with {action = "GetCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities(System.String, System.String, Int32, Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:12:59.241 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:12:59.243 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:12:59.245 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:12:59.247 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:12:59.249 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:12:59.252 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:12:59.255 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:12:59.276 +03:00 [DBG] Attempting to bind parameter 'CityName' of type 'System.String' ...
2024-08-23 22:12:59.279 +03:00 [DBG] Attempting to bind parameter 'CityName' of type 'System.String' using the name 'CityName' in request data ...
2024-08-23 22:12:59.283 +03:00 [DBG] Done attempting to bind parameter 'CityName' of type 'System.String'.
2024-08-23 22:12:59.284 +03:00 [DBG] Done attempting to bind parameter 'CityName' of type 'System.String'.
2024-08-23 22:12:59.286 +03:00 [DBG] Attempting to validate the bound parameter 'CityName' of type 'System.String' ...
2024-08-23 22:12:59.288 +03:00 [DBG] Done attempting to validate the bound parameter 'CityName' of type 'System.String'.
2024-08-23 22:12:59.290 +03:00 [DBG] Attempting to bind parameter 'Description' of type 'System.String' ...
2024-08-23 22:12:59.291 +03:00 [DBG] Attempting to bind parameter 'Description' of type 'System.String' using the name 'Description' in request data ...
2024-08-23 22:12:59.293 +03:00 [DBG] Done attempting to bind parameter 'Description' of type 'System.String'.
2024-08-23 22:12:59.294 +03:00 [DBG] Done attempting to bind parameter 'Description' of type 'System.String'.
2024-08-23 22:12:59.295 +03:00 [DBG] Attempting to validate the bound parameter 'Description' of type 'System.String' ...
2024-08-23 22:12:59.297 +03:00 [DBG] Done attempting to validate the bound parameter 'Description' of type 'System.String'.
2024-08-23 22:12:59.300 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-08-23 22:12:59.302 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2024-08-23 22:12:59.304 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-23 22:12:59.307 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-08-23 22:12:59.309 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-08-23 22:12:59.311 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-08-23 22:12:59.314 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-08-23 22:12:59.316 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2024-08-23 22:12:59.320 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-23 22:12:59.322 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-08-23 22:12:59.324 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-08-23 22:12:59.325 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-08-23 22:12:59.331 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:12:59.345 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => True && c.Name.Contains(__cityName_0) || True && c.Description.Contains(__description_1))
    .Skip(__p_2)
    .Take(__p_3)'
2024-08-23 22:12:59.362 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-23 22:12:59.365 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-23 22:12:59.390 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
        SELECT c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
        FROM Cities AS c
        WHERE (CAST(1 AS bit) && ((@__cityName_0 LIKE N'') || (CHARINDEX(@__cityName_0, c.Name) > 0))) || (CAST(1 AS bit) && ((@__description_1 LIKE N'') || (CHARINDEX(@__description_1, c.Description) > 0)))
        ORDER BY (SELECT 1)
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:12:59.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:12:59.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:12:59.405 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.407 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.408 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityName_0='?' (Size = 4000), @__description_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE ((@__cityName_0 LIKE N'') OR (CHARINDEX(@__cityName_0, [c].[Name]) > 0)) OR ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [c].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-23 22:12:59.457 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__cityName_0='?' (Size = 4000), @__description_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE ((@__cityName_0 LIKE N'') OR (CHARINDEX(@__cityName_0, [c].[Name]) > 0)) OR ((@__description_1 LIKE N'') OR (CHARINDEX(@__description_1, [c].[Description]) > 0))
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2024-08-23 22:12:59.461 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.462 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.464 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.466 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:12:59.467 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.469 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.476 +03:00 [DBG] The unchanged property 'City.VisitCount' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:12:59.479 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.485 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.487 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.493 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:12:59.497 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.500 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.501 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:12:59.503 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:12:59.509 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:12:59.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:12:59.514 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.556 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.563 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:12:59.564 +03:00 [DBG] Committing transaction.
2024-08-23 22:12:59.566 +03:00 [DBG] Committed transaction.
2024-08-23 22:12:59.568 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.572 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.573 +03:00 [DBG] Disposing transaction.
2024-08-23 22:12:59.574 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.577 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:12:59.578 +03:00 [DBG] The unchanged property 'City.VisitCount' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:12:59.579 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.581 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.583 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.585 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:12:59.587 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.589 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.590 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:12:59.591 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:12:59.592 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:12:59.593 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:12:59.594 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.597 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.602 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:12:59.604 +03:00 [DBG] Committing transaction.
2024-08-23 22:12:59.606 +03:00 [DBG] Committed transaction.
2024-08-23 22:12:59.607 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.608 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.609 +03:00 [DBG] Disposing transaction.
2024-08-23 22:12:59.610 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.612 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:12:59.613 +03:00 [DBG] The unchanged property 'City.VisitCount' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:12:59.615 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.618 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.621 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:12:59.622 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:12:59.623 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.625 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.626 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:12:59.627 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:12:59.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:12:59.629 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:12:59.631 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.655 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:12:59.658 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:12:59.659 +03:00 [DBG] Committing transaction.
2024-08-23 22:12:59.660 +03:00 [DBG] Committed transaction.
2024-08-23 22:12:59.661 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.662 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:12:59.663 +03:00 [DBG] Disposing transaction.
2024-08-23 22:12:59.665 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:12:59.670 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:12:59.674 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:12:59.677 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:12:59.677 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:12:59.678 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:12:59.679 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:12:59.681 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.City.CityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:12:59.685 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetCities (HotelBookingPlatform.API) in 432.915ms
2024-08-23 22:12:59.687 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCities (HotelBookingPlatform.API)'
2024-08-23 22:12:59.689 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:12:59.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City?CityName=Vegas&Description=renowned%20&pageSize=10&pageNumber=1 - - - 200 - application/json;+charset=utf-8 489.5785ms
2024-08-23 22:13:08.245 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" received FIN.
2024-08-23 22:13:08.247 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" is closed. The last processed stream ID was 1.
2024-08-23 22:13:08.249 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:13:08.260 +03:00 [DBG] Connection id "0HN63KRUQ6GIG" stopped.
2024-08-23 22:13:28.613 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" accepted.
2024-08-23 22:13:28.622 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" started.
2024-08-23 22:13:28.666 +03:00 [DBG] Connection 0HN63KRUQ6GIH established using the following protocol: "Tls13"
2024-08-23 22:13:28.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=false - -
2024-08-23 22:13:28.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58'
2024-08-23 22:13:28.699 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)' with route pattern 'api/City/{id}' is valid for the request path '/api/City/58'
2024-08-23 22:13:28.701 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:13:28.704 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:13:28.706 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:13:28.707 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:13:28.708 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:13:28.716 +03:00 [INF] Route matched with {action = "GetCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:13:28.719 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:13:28.721 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:13:28.724 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:13:28.726 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:13:28.727 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:13:28.729 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:13:28.734 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:13:28.736 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:13:28.738 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:13:28.741 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:13:28.743 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:13:28.746 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:13:28.747 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:13:28.749 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:13:28.750 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' using the name 'includeHotels' in request data ...
2024-08-23 22:13:28.752 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:13:28.754 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:13:28.757 +03:00 [DBG] Attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:13:28.759 +03:00 [DBG] Done attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:13:28.772 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:13:28.777 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .AsNoTracking()
    .SingleOrDefault(c => c.CityID == __cityId_0)'
2024-08-23 22:13:28.782 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
            SELECT TOP(2) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
            FROM Cities AS c
            WHERE c.CityID == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:13:28.786 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:13:28.790 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:13:28.792 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.794 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.795 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__cityId_0
2024-08-23 22:13:28.814 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__cityId_0
2024-08-23 22:13:28.826 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:13:28.827 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.828 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.829 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .FirstOrDefault(e => EF.Property<int>(e, "CityID") == __p_0)'
2024-08-23 22:13:28.833 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
            SELECT TOP(1) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
            FROM Cities AS c
            WHERE c.CityID == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:13:28.836 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:13:28.840 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:13:28.842 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.844 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.845 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:13:28.851 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:13:28.857 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:13:28.860 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:13:28.860 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.862 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.863 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:13:28.865 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:13:28.866 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:13:28.867 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:13:28.868 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.871 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.874 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:13:28.876 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:13:28.877 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:13:28.878 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:13:28.879 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:13:28.886 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:13:28.892 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:13:28.893 +03:00 [DBG] Committing transaction.
2024-08-23 22:13:28.894 +03:00 [DBG] Committed transaction.
2024-08-23 22:13:28.895 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.896 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:13:28.898 +03:00 [DBG] Disposing transaction.
2024-08-23 22:13:28.898 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:13:28.900 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:13:28.909 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:13:28.912 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:13:28.913 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:13:28.914 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:13:28.914 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:13:28.916 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.City.CityWithHotelsResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:13:28.929 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API) in 200.1695ms
2024-08-23 22:13:28.933 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:13:28.934 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:13:28.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=false - - - 200 - application/json;+charset=utf-8 250.7275ms
2024-08-23 22:13:38.284 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" received FIN.
2024-08-23 22:13:38.289 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" is closed. The last processed stream ID was 1.
2024-08-23 22:13:38.292 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:13:38.297 +03:00 [DBG] Connection id "0HN63KRUQ6GIH" stopped.
2024-08-23 22:14:20.000 +03:00 [DBG] Connection id "0HN63KRUQ6GII" accepted.
2024-08-23 22:14:20.002 +03:00 [DBG] Connection id "0HN63KRUQ6GII" started.
2024-08-23 22:14:20.029 +03:00 [DBG] Connection 0HN63KRUQ6GII established using the following protocol: "Tls13"
2024-08-23 22:14:20.043 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 208
2024-08-23 22:14:20.061 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/hotels'
2024-08-23 22:14:20.063 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/58/hotels'
2024-08-23 22:14:20.065 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:14:20.067 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:14:20.069 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:14:20.070 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:14:20.071 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:14:20.073 +03:00 [DBG] Authorization was successful.
2024-08-23 22:14:20.074 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:14:20.078 +03:00 [INF] Route matched with {action = "AddHotelToCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHotelToCity(Int32, HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:14:20.082 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:14:20.086 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:14:20.088 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:14:20.090 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:14:20.092 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:14:20.093 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:14:20.094 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:14:20.095 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:14:20.097 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:14:20.099 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:14:20.101 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:14:20.102 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:14:20.103 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:14:20.106 +03:00 [DBG] Attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' ...
2024-08-23 22:14:20.107 +03:00 [DBG] Attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' using the name '' in request data ...
2024-08-23 22:14:20.109 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:14:20.110 +03:00 [DBG] Connection id "0HN63KRUQ6GII", Request id "0HN63KRUQ6GII:00000001": started reading request body.
2024-08-23 22:14:20.111 +03:00 [DBG] Connection id "0HN63KRUQ6GII", Request id "0HN63KRUQ6GII:00000001": done reading request body.
2024-08-23 22:14:20.120 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'
2024-08-23 22:14:20.122 +03:00 [DBG] Done attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:14:20.126 +03:00 [DBG] Done attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:14:20.128 +03:00 [DBG] Attempting to validate the bound parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' ...
2024-08-23 22:14:20.152 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:14:20.159 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:14:20.163 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:14:20.165 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:14:20.166 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.169 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.170 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:14:20.185 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:14:20.188 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:14:20.189 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:14:20.189 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.191 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.194 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'HotelId.Hotel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:14:20.225 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:14:20.228 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:14:20.230 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:14:20.235 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:14:20.238 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.240 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.241 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:14:20.242 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:14:20.244 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:14:20.245 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:14:20.246 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (DbType = Int32), @p5='?' (Size = 15), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hotels] ([CityID], [CreatedAtUtc], [Description], [Name], [OwnerID], [PhoneNumber], [StarRating])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [HotelId]
FROM [Hotels]
WHERE @@ROWCOUNT = 1 AND [HotelId] = scope_identity();
2024-08-23 22:14:20.281 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (DbType = Int32), @p5='?' (Size = 15), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hotels] ([CityID], [CreatedAtUtc], [Description], [Name], [OwnerID], [PhoneNumber], [StarRating])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [HotelId]
FROM [Hotels]
WHERE @@ROWCOUNT = 1 AND [HotelId] = scope_identity();
2024-08-23 22:14:20.289 +03:00 [DBG] The foreign key property 'Hotel.HotelId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:14:20.293 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:14:20.294 +03:00 [DBG] Committing transaction.
2024-08-23 22:14:20.295 +03:00 [DBG] Committed transaction.
2024-08-23 22:14:20.296 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.297 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:14:20.298 +03:00 [DBG] Disposing transaction.
2024-08-23 22:14:20.300 +03:00 [DBG] An entity of type 'Hotel' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:14:20.304 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:14:20.307 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:14:20.308 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:14:20.318 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.Hotels'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:14:20.325 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:14:20.328 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:14:20.330 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:14:20.334 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:14:20.335 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:14:20.337 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:14:20.338 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:14:20.342 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:14:20.344 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API) in 251.5041ms
2024-08-23 22:14:20.346 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:14:20.347 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:14:20.349 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 208 - 200 - application/json;+charset=utf-8 305.9968ms
2024-08-23 22:14:28.337 +03:00 [DBG] Connection id "0HN63KRUQ6GII" received FIN.
2024-08-23 22:14:28.339 +03:00 [DBG] Connection id "0HN63KRUQ6GII" is closed. The last processed stream ID was 1.
2024-08-23 22:14:28.342 +03:00 [DBG] Connection id "0HN63KRUQ6GII" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:14:28.345 +03:00 [DBG] Connection id "0HN63KRUQ6GII" stopped.
2024-08-23 22:15:46.031 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" accepted.
2024-08-23 22:15:46.039 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" started.
2024-08-23 22:15:46.046 +03:00 [DBG] Connection 0HN63KRUQ6GIJ established using the following protocol: "Tls13"
2024-08-23 22:15:46.058 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 205
2024-08-23 22:15:46.082 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/hotels'
2024-08-23 22:15:46.089 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/58/hotels'
2024-08-23 22:15:46.091 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:15:46.092 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:15:46.093 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:15:46.101 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:10:08 PM', Current time (UTC): '8/23/2024 7:15:46 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:15:46.211 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:10:08 PM', Current time (UTC): '8/23/2024 7:15:46 PM'.
2024-08-23 22:15:46.212 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-08-23 22:15:46.219 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-23 22:15:46.221 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 205 - 401 0 - 163.3412ms
2024-08-23 22:15:46.223 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000001": started reading request body.
2024-08-23 22:15:46.225 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000001": done reading request body.
2024-08-23 22:15:53.330 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-23 22:15:53.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:15:53.336 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:15:53.338 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:15:53.341 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:15:53.342 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:15:53.346 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:10:08 PM', Current time (UTC): '8/23/2024 7:15:53 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:15:53.351 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:10:08 PM', Current time (UTC): '8/23/2024 7:15:53 PM'.
2024-08-23 22:15:53.352 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:15:53.353 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:15:53.356 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:15:53.358 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:15:53.360 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:15:53.362 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:15:53.365 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:15:53.367 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:15:53.368 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:15:53.370 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:15:53.371 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:15:53.372 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:15:53.373 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000003": started reading request body.
2024-08-23 22:15:53.374 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000003": done reading request body.
2024-08-23 22:15:53.376 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:15:53.377 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:15:53.378 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:15:53.380 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:15:53.382 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:15:53.384 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:15:53.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:15:53.387 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:15:53.388 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.389 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.390 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:15:53.404 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:15:53.408 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:15:53.409 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:15:53.410 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:15:53.412 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:15:53.414 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:15:53.415 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.417 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.425 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:15:53.428 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:15:53.431 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.434 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.435 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:15:53.440 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:15:53.443 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:15:53.443 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.445 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.447 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:15:53.448 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:15:53.450 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.451 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.452 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:15:53.461 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:15:53.466 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:15:53.466 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.467 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.469 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:15:53.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:15:53.471 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.472 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.473 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:15:53.476 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:15:53.480 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:15:53.482 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.483 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:15:53.485 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:15:53.487 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:15:53.487 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:15:53.488 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:15:53.489 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:15:53.490 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:15:53.492 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 124.9695ms
2024-08-23 22:15:53.495 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:15:53.500 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:15:53.503 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 172.7013ms
2024-08-23 22:16:15.354 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 205
2024-08-23 22:16:15.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/hotels'
2024-08-23 22:16:15.359 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/58/hotels'
2024-08-23 22:16:15.362 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:16:15.364 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:16:15.366 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:16:15.367 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:16:15.368 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:16:15.370 +03:00 [DBG] Authorization was successful.
2024-08-23 22:16:15.372 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:16:15.373 +03:00 [INF] Route matched with {action = "AddHotelToCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHotelToCity(Int32, HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:16:15.375 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:16:15.377 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:16:15.380 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:16:15.384 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:16:15.386 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:16:15.390 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:16:15.391 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:16:15.392 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:16:15.394 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:16:15.395 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:15.396 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:15.398 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:16:15.399 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:15.400 +03:00 [DBG] Attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' ...
2024-08-23 22:16:15.401 +03:00 [DBG] Attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' using the name '' in request data ...
2024-08-23 22:16:15.404 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:16:15.406 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000005": started reading request body.
2024-08-23 22:16:15.407 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000005": done reading request body.
2024-08-23 22:16:15.408 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'
2024-08-23 22:16:15.409 +03:00 [DBG] Done attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:16:15.411 +03:00 [DBG] Done attempting to bind parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:16:15.412 +03:00 [DBG] Attempting to validate the bound parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest' ...
2024-08-23 22:16:15.414 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelRequest' of type 'HotelBookingPlatform.Domain.DTOs.Hotel.HotelCreateRequest'.
2024-08-23 22:16:15.415 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:16:15.418 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:16:15.419 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:16:15.423 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.425 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.427 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:16:15.437 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:16:15.448 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:15.450 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:16:15.450 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.452 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.456 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'HotelId.Hotel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:15.459 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:15.460 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:16:15.461 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:16:15.462 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:16:15.463 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.465 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.466 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:16:15.467 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:16:15.468 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:16:15.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:16:15.475 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (DbType = Int32), @p5='?' (Size = 15), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hotels] ([CityID], [CreatedAtUtc], [Description], [Name], [OwnerID], [PhoneNumber], [StarRating])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [HotelId]
FROM [Hotels]
WHERE @@ROWCOUNT = 1 AND [HotelId] = scope_identity();
2024-08-23 22:16:15.483 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (DbType = Int32), @p5='?' (Size = 15), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hotels] ([CityID], [CreatedAtUtc], [Description], [Name], [OwnerID], [PhoneNumber], [StarRating])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [HotelId]
FROM [Hotels]
WHERE @@ROWCOUNT = 1 AND [HotelId] = scope_identity();
2024-08-23 22:16:15.502 +03:00 [DBG] The foreign key property 'Hotel.HotelId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:16:15.504 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:16:15.506 +03:00 [DBG] Committing transaction.
2024-08-23 22:16:15.507 +03:00 [DBG] Committed transaction.
2024-08-23 22:16:15.508 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.510 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:15.511 +03:00 [DBG] Disposing transaction.
2024-08-23 22:16:15.512 +03:00 [DBG] An entity of type 'Hotel' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:15.514 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:16:15.515 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:16:15.516 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:16:15.517 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.Hotels'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:15.519 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:16:15.521 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:16:15.523 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:16:15.526 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:16:15.526 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:16:15.527 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:16:15.528 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:16:15.529 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:16:15.531 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API) in 141.0505ms
2024-08-23 22:16:15.532 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.AddHotelToCity (HotelBookingPlatform.API)'
2024-08-23 22:16:15.533 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:16:15.540 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City/58/hotels application/json 205 - 200 - application/json;+charset=utf-8 186.2310ms
2024-08-23 22:16:43.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58/hotels - -
2024-08-23 22:16:43.662 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/hotels'
2024-08-23 22:16:43.667 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/hotels' is valid for the request path '/api/City/58/hotels'
2024-08-23 22:16:43.671 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 22:16:43.673 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:16:43.679 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:16:43.681 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:16:43.683 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 22:16:43.688 +03:00 [INF] Route matched with {action = "GetHotelsForCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelsForCity(Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:16:43.692 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:16:43.695 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:16:43.698 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:16:43.700 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:16:43.701 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:16:43.702 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:16:43.704 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:16:43.705 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:16:43.706 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:16:43.708 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:43.710 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:43.712 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:16:43.713 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:16:43.719 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:16:43.727 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Where(h => h.CityID == __cityId_0)
    .Include(h => h.Owner)'
2024-08-23 22:16:43.746 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:16:43.757 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Hotel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Owner.Email (string) Required, 9], [Property: Owner.FirstName (string) Required, 10], [Property: Owner.LastName (string) Required, 11], [Property: Owner.PhoneNumber (string) Required, 12] }
        SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
        FROM Hotels AS h
        INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
        WHERE h.CityID == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Hotel>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:16:43.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:16:43.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:16:43.766 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:43.767 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:43.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 22:16:43.777 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[CityID] = @__cityId_0
2024-08-23 22:16:43.784 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:43.785 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:43.790 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:16:43.793 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:16:43.796 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:43.797 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:16:43.801 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:16:43.805 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:16:43.806 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:16:43.807 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:16:43.808 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:16:43.810 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Hotel.HotelBasicResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:16:43.814 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API) in 111.8631ms
2024-08-23 22:16:43.821 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetHotelsForCity (HotelBookingPlatform.API)'
2024-08-23 22:16:43.861 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:16:43.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58/hotels - - - 200 - application/json;+charset=utf-8 241.1635ms
2024-08-23 22:17:11.793 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=true - -
2024-08-23 22:17:11.802 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58'
2024-08-23 22:17:11.804 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)' with route pattern 'api/City/{id}' is valid for the request path '/api/City/58'
2024-08-23 22:17:11.807 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:17:11.808 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:17:11.810 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:17:11.811 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:17:11.813 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:17:11.815 +03:00 [INF] Route matched with {action = "GetCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:17:11.819 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:17:11.820 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:17:11.823 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:17:11.829 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:17:11.831 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:17:11.836 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:17:11.838 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:17:11.840 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:17:11.842 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:17:11.843 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:17:11.845 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:17:11.847 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:17:11.850 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:17:11.854 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:17:11.856 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' using the name 'includeHotels' in request data ...
2024-08-23 22:17:11.858 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:17:11.860 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:17:11.861 +03:00 [DBG] Attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:17:11.863 +03:00 [DBG] Done attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:17:11.866 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:17:11.872 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .AsNoTracking()
    .Include(c => c.Hotels)
    .ThenInclude(h => h.Owner)
    .SingleOrDefault(c => c.CityID == __cityId_0)'
2024-08-23 22:17:11.875 +03:00 [DBG] Including navigation: 'City.Hotels'.
2024-08-23 22:17:11.877 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:17:11.891 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Hotel.CityID (int) Required FK Index, 8], [Property: Hotel.CreatedAtUtc (DateTime) Required, 9], [Property: Hotel.Description (string) MaxLength(500), 10], [Property: Hotel.Name (string) Required MaxLength(100), 11], [Property: Hotel.OwnerID (int) Required FK Index, 12], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 13], [Property: Hotel.StarRating (int) Required, 14] }
                3 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                4 -> 7
                5 -> 15
            SELECT t.CityID, t.Country, t.CreatedAtUtc, t.Description, t.Name, t.PostOffice, t.VisitCount, t0.HotelId, t0.CityID, t0.CreatedAtUtc, t0.Description, t0.Name, t0.OwnerID, t0.PhoneNumber, t0.StarRating, t0.OwnerID0, t0.Email, t0.FirstName, t0.LastName, t0.PhoneNumber0
            FROM 
            (
                SELECT TOP(2) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
                FROM Cities AS c
                WHERE c.CityID == @__cityId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, o.OwnerID AS OwnerID0, o.Email, o.FirstName, o.LastName, o.PhoneNumber AS PhoneNumber0
                FROM Hotels AS h
                INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            ) AS t0 ON t.CityID == t0.CityID
            ORDER BY t.CityID ASC, t0.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:17:11.895 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:17:11.897 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:17:11.900 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.903 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.905 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[CityID], [t].[Country], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[PostOffice], [t].[VisitCount], [t0].[HotelId], [t0].[CityID], [t0].[CreatedAtUtc], [t0].[Description], [t0].[Name], [t0].[OwnerID], [t0].[PhoneNumber], [t0].[StarRating], [t0].[OwnerID0], [t0].[Email], [t0].[FirstName], [t0].[LastName], [t0].[PhoneNumber0]
FROM (
    SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
    FROM [Cities] AS [c]
    WHERE [c].[CityID] = @__cityId_0
) AS [t]
LEFT JOIN (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID] AS [OwnerID0], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber] AS [PhoneNumber0]
    FROM [Hotels] AS [h]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
) AS [t0] ON [t].[CityID] = [t0].[CityID]
ORDER BY [t].[CityID], [t0].[HotelId]
2024-08-23 22:17:11.924 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[CityID], [t].[Country], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[PostOffice], [t].[VisitCount], [t0].[HotelId], [t0].[CityID], [t0].[CreatedAtUtc], [t0].[Description], [t0].[Name], [t0].[OwnerID], [t0].[PhoneNumber], [t0].[StarRating], [t0].[OwnerID0], [t0].[Email], [t0].[FirstName], [t0].[LastName], [t0].[PhoneNumber0]
FROM (
    SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
    FROM [Cities] AS [c]
    WHERE [c].[CityID] = @__cityId_0
) AS [t]
LEFT JOIN (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID] AS [OwnerID0], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber] AS [PhoneNumber0]
    FROM [Hotels] AS [h]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
) AS [t0] ON [t].[CityID] = [t0].[CityID]
ORDER BY [t].[CityID], [t0].[HotelId]
2024-08-23 22:17:11.934 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:17:11.936 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.938 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.942 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:17:11.945 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:17:11.946 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.948 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.951 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:17:11.956 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:17:11.959 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:17:11.960 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:17:11.961 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.962 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.964 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:17:11.967 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:17:11.969 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:17:11.970 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:17:11.971 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.972 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:11.973 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:17:11.974 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:17:11.975 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:17:11.976 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:17:11.977 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:17:11.990 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:17:12.013 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:17:12.015 +03:00 [DBG] Committing transaction.
2024-08-23 22:17:12.019 +03:00 [DBG] Committed transaction.
2024-08-23 22:17:12.021 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:12.023 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:17:12.025 +03:00 [DBG] Disposing transaction.
2024-08-23 22:17:12.025 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:17:12.027 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:17:12.042 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:17:12.046 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:17:12.047 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:17:12.049 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:17:12.050 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:17:12.052 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.City.CityWithHotelsResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:17:12.057 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API) in 221.6624ms
2024-08-23 22:17:12.066 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:17:12.069 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:17:12.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=true - - - 200 - application/json;+charset=utf-8 277.8989ms
2024-08-23 22:17:58.951 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City/58/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryFrcBEDxfN0gALmWi 12647
2024-08-23 22:17:58.960 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/upload-image'
2024-08-23 22:17:58.969 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/upload-image' is valid for the request path '/api/City/58/upload-image'
2024-08-23 22:17:58.971 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:17:58.972 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:17:58.973 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:17:58.974 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:17:58.975 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:17:58.976 +03:00 [DBG] Authorization was successful.
2024-08-23 22:17:58.977 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:17:58.988 +03:00 [INF] Route matched with {action = "UploadCityImage", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadCityImage(Int32, Microsoft.AspNetCore.Http.IFormFile) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:17:58.992 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:17:58.994 +03:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-23 22:17:58.997 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:17:59.002 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:17:59.005 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:17:59.009 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:17:59.012 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:17:59.029 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000000B": started reading request body.
2024-08-23 22:17:59.033 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000000B": done reading request body.
2024-08-23 22:17:59.051 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:17:59.055 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:17:59.057 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:17:59.058 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:17:59.059 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:17:59.061 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:17:59.063 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:17:59.069 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'file' in request data ...
2024-08-23 22:17:59.074 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:17:59.076 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:17:59.077 +03:00 [DBG] Attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:17:59.081 +03:00 [DBG] Done attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:18:00.977 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:18:00.983 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:00.998 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:01.000 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:18:01.001 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:18:01.005 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:18:01.006 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:01.008 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:01.009 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:18:01.011 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:18:01.015 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:18:01.016 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:18:01.018 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:18:01.033 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:18:01.037 +03:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:18:01.039 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:18:01.040 +03:00 [DBG] Committing transaction.
2024-08-23 22:18:01.041 +03:00 [DBG] Committed transaction.
2024-08-23 22:18:01.042 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:01.043 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:01.045 +03:00 [DBG] Disposing transaction.
2024-08-23 22:18:01.047 +03:00 [DBG] An entity of type 'Image' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:01.051 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:18:01.053 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:18:01.054 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:18:01.055 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:18:01.056 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:18:01.060 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:18:01.063 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:18:01.064 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:18:01.065 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:18:01.066 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:18:01.067 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:18:01.074 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API) in 2066.3706ms
2024-08-23 22:18:01.075 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:18:01.079 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:18:01.083 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City/58/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryFrcBEDxfN0gALmWi 12647 - 200 - application/json;+charset=utf-8 2131.5489ms
2024-08-23 22:18:08.080 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/City/58/upload-image multipart/form-data;+boundary=----WebKitFormBoundarysqOhTAD1l19yXhMN 12989
2024-08-23 22:18:08.082 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/upload-image'
2024-08-23 22:18:08.084 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/upload-image' is valid for the request path '/api/City/58/upload-image'
2024-08-23 22:18:08.086 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:18:08.087 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:18:08.087 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:18:08.089 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:18:08.091 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:18:08.093 +03:00 [DBG] Authorization was successful.
2024-08-23 22:18:08.094 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:18:08.095 +03:00 [INF] Route matched with {action = "UploadCityImage", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadCityImage(Int32, Microsoft.AspNetCore.Http.IFormFile) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:18:08.097 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:18:08.100 +03:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-23 22:18:08.102 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:18:08.107 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:18:08.110 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:18:08.114 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:18:08.116 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:18:08.118 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000000D": started reading request body.
2024-08-23 22:18:08.119 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000000D": done reading request body.
2024-08-23 22:18:08.121 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:18:08.122 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:18:08.124 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:08.127 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:08.130 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:18:08.131 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:08.133 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:18:08.134 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'file' in request data ...
2024-08-23 22:18:08.135 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:18:08.137 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:18:08.138 +03:00 [DBG] Attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:18:08.139 +03:00 [DBG] Done attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:18:08.687 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:18:08.696 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:08.700 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:08.701 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:18:08.702 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:18:08.703 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:18:08.704 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:08.706 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:08.708 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:18:08.710 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:18:08.711 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:18:08.712 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:18:08.713 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:18:08.716 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:18:08.718 +03:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:18:08.719 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:18:08.720 +03:00 [DBG] Committing transaction.
2024-08-23 22:18:08.721 +03:00 [DBG] Committed transaction.
2024-08-23 22:18:08.722 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:08.723 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:08.725 +03:00 [DBG] Disposing transaction.
2024-08-23 22:18:08.726 +03:00 [DBG] An entity of type 'Image' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:08.730 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:18:08.733 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:18:08.734 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:18:08.735 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:18:08.736 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:18:08.738 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:18:08.740 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:18:08.741 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:18:08.743 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:18:08.744 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:18:08.745 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:18:08.747 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API) in 633.199ms
2024-08-23 22:18:08.748 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.UploadCityImage (HotelBookingPlatform.API)'
2024-08-23 22:18:08.749 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:18:08.751 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/City/58/upload-image multipart/form-data;+boundary=----WebKitFormBoundarysqOhTAD1l19yXhMN 12989 - 200 - application/json;+charset=utf-8 671.9029ms
2024-08-23 22:18:15.956 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58/images - -
2024-08-23 22:18:15.958 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58/images'
2024-08-23 22:18:15.962 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetImagesForCity (HotelBookingPlatform.API)' with route pattern 'api/City/{cityId}/images' is valid for the request path '/api/City/58/images'
2024-08-23 22:18:15.964 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:18:15.966 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:18:15.967 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:18:15.968 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:18:15.970 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:18:15.977 +03:00 [INF] Route matched with {action = "GetImagesForCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetImagesForCity(Int32) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:18:15.981 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:18:15.983 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:18:15.985 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:18:15.987 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:18:15.990 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:18:15.994 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:18:15.996 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:18:15.997 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:18:15.999 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-08-23 22:18:16.000 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:16.001 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:16.003 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-08-23 22:18:16.005 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-08-23 22:18:16.012 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:18:16.017 +03:00 [DBG] Compiling query expression: 
'DbSet<Image>()
    .Where(img => img.Type == __type_0)'
2024-08-23 22:18:16.021 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Image>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Image.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Image.CreatedAt (DateTime) Required, 1], [Property: Image.EntityId (int) Required, 2], [Property: Image.PublicId (string) Required, 3], [Property: Image.Type (string) Required, 4], [Property: Image.Url (string) Required, 5] }
        SELECT i.Id, i.CreatedAt, i.EntityId, i.PublicId, i.Type, i.Url
        FROM Images AS i
        WHERE i.Type == @__type_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Image>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:18:16.026 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:18:16.029 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:18:16.030 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:16.031 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:16.033 +03:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:18:16.044 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:18:16.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.057 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.061 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.064 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.067 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.068 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.069 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:16.071 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:18:16.074 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:16.076 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:16.078 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:18:16.081 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:18:16.082 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:18:16.082 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:18:16.083 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:18:16.084 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.Entities.Image, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:18:16.091 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetImagesForCity (HotelBookingPlatform.API) in 96.9451ms
2024-08-23 22:18:16.095 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:18:16.097 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:18:16.099 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58/images - - - 200 - application/json;+charset=utf-8 142.3252ms
2024-08-23 22:18:34.940 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48 - -
2024-08-23 22:18:34.942 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48'
2024-08-23 22:18:34.945 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{id}' is valid for the request path '/api/Hotel/48'
2024-08-23 22:18:34.946 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 22:18:34.948 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:18:34.950 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:18:34.951 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:18:34.954 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 22:18:34.959 +03:00 [INF] Route matched with {action = "GetHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotel(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:18:34.963 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:18:34.966 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:18:34.968 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:18:34.972 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:18:34.973 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:18:34.975 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:18:34.977 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:18:34.979 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:18:34.981 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:18:34.984 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:18:34.986 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:18:34.988 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:18:34.989 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:18:35.001 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:18:35.007 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 22:18:35.009 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 22:18:35.011 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:18:35.013 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 22:18:35.059 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:18:35.075 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:18:35.078 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:18:35.079 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:35.083 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:35.086 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:18:35.100 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:18:35.139 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:35.142 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:35.144 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:18:35.167 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:18:35.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:18:35.171 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:18:35.193 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:18:35.210 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:18:35.213 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:18:35.215 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:35.218 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:18:35.222 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:18:35.226 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:18:35.227 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:18:35.227 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:18:35.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:18:35.230 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Hotel.HotelResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:18:35.235 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API) in 260.2081ms
2024-08-23 22:18:35.239 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetHotel (HotelBookingPlatform.API)'
2024-08-23 22:18:35.241 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:18:35.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48 - - - 200 - application/json;+charset=utf-8 302.0395ms
2024-08-23 22:19:09.218 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 126
2024-08-23 22:19:09.227 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:19:09.229 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:19:09.247 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:09.248 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:19:09.249 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:19:09.250 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:19:09.252 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:19:09.257 +03:00 [DBG] Authorization was successful.
2024-08-23 22:19:09.258 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:09.264 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:19:09.269 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:19:09.272 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:19:09.274 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:19:09.277 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:19:09.279 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:19:09.283 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:19:09.287 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:19:09.310 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:19:09.313 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:19:09.315 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:09.316 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:09.320 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:19:09.322 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:09.324 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:19:09.325 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:19:09.327 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:19:09.328 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000013": started reading request body.
2024-08-23 22:19:09.330 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000013": done reading request body.
2024-08-23 22:19:09.332 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:19:09.334 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:09.337 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:09.339 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:19:09.341 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:09.348 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:19:09.353 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:09.356 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:19:09.358 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.359 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.360 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:19:09.369 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:19:09.374 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.375 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.377 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:09.379 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:19:09.380 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:19:09.389 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:19:09.394 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:09.394 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:09.395 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.396 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.399 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.413 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.440 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.443 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:19:09.444 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:19:09.446 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:19:09.447 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.448 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.450 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:19:09.452 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:19:09.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:09.455 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:19:09.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:19:09.469 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:19:09.475 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:19:09.477 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:09.478 +03:00 [DBG] Committing transaction.
2024-08-23 22:19:09.479 +03:00 [DBG] Committed transaction.
2024-08-23 22:19:09.480 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.481 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:09.484 +03:00 [DBG] Disposing transaction.
2024-08-23 22:19:09.486 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:09.490 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:19:09.491 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:19:09.492 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:19:09.493 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:19:09.494 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:19:09.498 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:19:09.503 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:19:09.504 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:19:09.505 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:19:09.505 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:19:09.506 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:19:09.509 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 226.8363ms
2024-08-23 22:19:09.511 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:09.512 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:19:09.520 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 126 - 201 - application/json;+charset=utf-8 301.7717ms
2024-08-23 22:19:40.651 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 140
2024-08-23 22:19:40.663 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:19:40.674 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:19:40.675 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:40.676 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:19:40.677 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:19:40.678 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:19:40.678 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:19:40.680 +03:00 [DBG] Authorization was successful.
2024-08-23 22:19:40.682 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:40.705 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:19:40.709 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:19:40.712 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:19:40.713 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:19:40.715 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:19:40.717 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:19:40.721 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:19:40.731 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:19:40.733 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:19:40.735 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:19:40.737 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:40.739 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:40.741 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:19:40.744 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:19:40.745 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:19:40.746 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:19:40.748 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:19:40.749 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000015": started reading request body.
2024-08-23 22:19:40.750 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000015": done reading request body.
2024-08-23 22:19:40.751 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:19:40.753 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:40.754 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:40.757 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:19:40.759 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:19:40.761 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:19:40.763 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:40.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:19:40.765 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.766 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.767 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:19:40.777 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:19:40.780 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.782 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.783 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.784 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:40.785 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:19:40.787 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:19:40.797 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:19:40.800 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:40.801 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:40.802 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.803 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.807 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.810 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.815 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:19:40.816 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:19:40.817 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:19:40.818 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.819 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.821 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:19:40.824 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:19:40.826 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:19:40.828 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:19:40.829 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:19:40.835 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:19:40.838 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:19:40.841 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:19:40.842 +03:00 [DBG] Committing transaction.
2024-08-23 22:19:40.848 +03:00 [DBG] Committed transaction.
2024-08-23 22:19:40.850 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.852 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:19:40.853 +03:00 [DBG] Disposing transaction.
2024-08-23 22:19:40.854 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:19:40.858 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:19:40.860 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:19:40.862 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:19:40.864 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:19:40.865 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:19:40.867 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:19:40.869 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:19:40.870 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:19:40.871 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:19:40.872 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:19:40.875 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:19:40.878 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 156.3706ms
2024-08-23 22:19:40.880 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:19:40.881 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:19:40.887 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 140 - 201 - application/json;+charset=utf-8 232.8147ms
2024-08-23 22:20:01.919 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 115
2024-08-23 22:20:01.934 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:01.938 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:01.941 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:01.942 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:20:01.943 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:20:01.944 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:20:01.945 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:20:01.948 +03:00 [DBG] Authorization was successful.
2024-08-23 22:20:01.950 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:01.951 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:20:01.954 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:20:01.955 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:20:01.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:20:01.958 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:20:01.959 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:20:01.962 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:01.964 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:01.968 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:01.969 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:20:01.971 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:01.973 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:01.974 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:01.975 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:01.976 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:20:01.978 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:20:01.981 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:20:01.983 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000017": started reading request body.
2024-08-23 22:20:01.986 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000017": done reading request body.
2024-08-23 22:20:01.987 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:20:01.988 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:01.990 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:01.991 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:20:01.992 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:01.996 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:20:01.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:02.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:20:02.002 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.003 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.004 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:02.011 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:02.017 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.019 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.020 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:02.023 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:20:02.024 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:02.033 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:02.037 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:02.037 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:02.038 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.039 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.041 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.042 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.044 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.046 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:20:02.049 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:20:02.050 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:20:02.052 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.053 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.054 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:20:02.055 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:20:02.057 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:02.058 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:20:02.059 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:20:02.067 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:20:02.072 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:20:02.075 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:02.076 +03:00 [DBG] Committing transaction.
2024-08-23 22:20:02.080 +03:00 [DBG] Committed transaction.
2024-08-23 22:20:02.082 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.083 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:02.085 +03:00 [DBG] Disposing transaction.
2024-08-23 22:20:02.086 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:02.088 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:20:02.090 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:20:02.091 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:20:02.092 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:20:02.092 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:20:02.094 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:20:02.097 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:20:02.099 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:20:02.101 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:20:02.101 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:20:02.103 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:20:02.104 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 142.7718ms
2024-08-23 22:20:02.106 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:02.107 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:20:02.113 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 115 - 201 - application/json;+charset=utf-8 193.2383ms
2024-08-23 22:20:11.548 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 118
2024-08-23 22:20:11.551 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:11.554 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:11.555 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:11.556 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:20:11.560 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:20:11.562 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:20:11.564 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:20:11.566 +03:00 [DBG] Authorization was successful.
2024-08-23 22:20:11.567 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:11.568 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:20:11.571 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:20:11.574 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:20:11.578 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:20:11.582 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:20:11.584 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:20:11.586 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:11.587 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:11.589 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:11.590 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:20:11.592 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:11.595 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:11.599 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:11.601 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:11.605 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:20:11.606 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:20:11.608 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:20:11.611 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000019": started reading request body.
2024-08-23 22:20:11.614 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000019": done reading request body.
2024-08-23 22:20:11.616 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:20:11.617 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:11.618 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:11.619 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:20:11.621 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:20:11.622 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:20:11.625 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:11.628 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:20:11.630 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.631 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:11.636 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:11.639 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.641 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.643 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.645 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:11.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:20:11.649 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:11.651 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:11.654 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:11.654 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:11.655 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.657 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.659 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.663 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.665 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.666 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:20:11.667 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:20:11.668 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:20:11.669 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.671 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.672 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:20:11.673 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:20:11.675 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:11.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:20:11.679 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:20:11.682 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:20:11.685 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:20:11.686 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:11.687 +03:00 [DBG] Committing transaction.
2024-08-23 22:20:11.692 +03:00 [DBG] Committed transaction.
2024-08-23 22:20:11.696 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.703 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:11.707 +03:00 [DBG] Disposing transaction.
2024-08-23 22:20:11.708 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:11.712 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:20:11.713 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:20:11.714 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:20:11.715 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:20:11.716 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:20:11.718 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:20:11.720 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:20:11.721 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:20:11.721 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:20:11.722 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:20:11.723 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:20:11.726 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 139.6795ms
2024-08-23 22:20:11.728 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:20:11.732 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:20:11.735 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/amenities application/json 118 - 201 - application/json;+charset=utf-8 186.3893ms
2024-08-23 22:20:19.493 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - -
2024-08-23 22:20:19.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:19.499 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:20:19.501 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:20:19.502 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:20:19.503 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:20:19.505 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:20:19.507 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:20:19.515 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:20:19.518 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:20:19.519 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:20:19.522 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:20:19.526 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:20:19.530 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:20:19.532 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:19.535 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:20:19.538 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:19.541 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:20:19.544 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:19.546 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:19.547 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:20:19.548 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:20:19.551 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:20:19.553 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:19.554 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:20:19.558 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:19.562 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:19.563 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:19.574 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:20:19.580 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:19.581 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:19.582 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:20:19.584 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:20:19.585 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:20:19.586 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:19.596 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:20:19.600 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:19.601 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:20:19.601 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:19.602 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:20:19.607 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:20:19.611 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:20:19.612 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:20:19.614 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:20:19.615 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:20:19.616 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:20:19.618 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 86.3802ms
2024-08-23 22:20:19.620 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:20:19.622 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:20:19.625 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - - - 200 - application/json;+charset=utf-8 131.8175ms
2024-08-23 22:21:03.023 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 118
2024-08-23 22:21:03.053 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:03.064 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:03.081 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:03.083 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:21:03.085 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:21:03.086 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:15:53 PM', Current time (UTC): '8/23/2024 7:21:03 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:21:03.095 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:15:53 PM', Current time (UTC): '8/23/2024 7:21:03 PM'.
2024-08-23 22:21:03.097 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-08-23 22:21:03.099 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-23 22:21:03.101 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 118 - 401 0 - 78.8493ms
2024-08-23 22:21:03.103 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000001D": started reading request body.
2024-08-23 22:21:03.105 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000001D": done reading request body.
2024-08-23 22:21:08.454 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-23 22:21:08.456 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:21:08.460 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:21:08.463 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:21:08.464 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:21:08.466 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:21:08.469 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:15:53 PM', Current time (UTC): '8/23/2024 7:21:08 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:21:08.476 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:15:53 PM', Current time (UTC): '8/23/2024 7:21:08 PM'.
2024-08-23 22:21:08.478 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:21:08.479 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:21:08.481 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:21:08.482 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:21:08.483 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:21:08.485 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:21:08.489 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:21:08.492 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:21:08.497 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:21:08.499 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:21:08.500 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:21:08.502 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:21:08.506 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000001F": started reading request body.
2024-08-23 22:21:08.508 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000001F": done reading request body.
2024-08-23 22:21:08.509 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:21:08.510 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:21:08.511 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:21:08.512 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:21:08.514 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:21:08.515 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:21:08.517 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:08.518 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:21:08.522 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.524 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.525 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:21:08.549 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:21:08.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:08.558 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:08.559 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:08.561 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:08.562 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:08.563 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.564 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.573 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:08.576 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:21:08.577 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.578 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.580 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:21:08.584 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:21:08.596 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:08.597 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.598 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.599 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:08.600 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:21:08.602 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.605 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.607 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:21:08.614 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:21:08.617 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:08.618 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.620 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.622 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:08.624 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:21:08.625 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.626 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.628 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:21:08.630 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:21:08.633 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:08.634 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.635 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:08.638 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:21:08.642 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:21:08.643 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:21:08.643 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:21:08.644 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:21:08.645 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:21:08.647 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 154.859ms
2024-08-23 22:21:08.649 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:21:08.650 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:21:08.651 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 197.7116ms
2024-08-23 22:21:27.589 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 118
2024-08-23 22:21:27.592 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:27.595 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:27.596 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:27.597 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:21:27.599 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:21:27.637 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:21:27.639 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:21:27.642 +03:00 [DBG] Authorization was successful.
2024-08-23 22:21:27.643 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:27.652 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:21:27.657 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:21:27.658 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:21:27.659 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:21:27.662 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:21:27.666 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:21:27.669 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:21:27.671 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:21:27.673 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:21:27.674 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:21:27.676 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:27.677 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:27.679 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:21:27.681 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:27.683 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:21:27.684 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:21:27.685 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:21:27.686 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000021": started reading request body.
2024-08-23 22:21:27.688 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000021": done reading request body.
2024-08-23 22:21:27.689 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:21:27.690 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:27.691 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:27.692 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:21:27.694 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:27.698 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:21:27.702 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:27.703 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:21:27.705 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.706 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:21:27.723 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:21:27.726 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.732 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:27.735 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:21:27.736 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:21:27.744 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:21:27.749 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:27.751 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:27.752 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.754 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.755 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.757 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.758 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.760 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:21:27.761 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:21:27.765 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:21:27.767 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.769 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.770 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:21:27.771 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:21:27.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:27.773 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:21:27.775 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:21:27.781 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:21:27.785 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:21:27.787 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:27.787 +03:00 [DBG] Committing transaction.
2024-08-23 22:21:27.788 +03:00 [DBG] Committed transaction.
2024-08-23 22:21:27.790 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.791 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:27.792 +03:00 [DBG] Disposing transaction.
2024-08-23 22:21:27.793 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:27.796 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:21:27.798 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:21:27.800 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:21:27.801 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:21:27.802 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:21:27.803 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:21:27.805 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:21:27.806 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:21:27.807 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:21:27.807 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:21:27.809 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:21:27.811 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 141.7557ms
2024-08-23 22:21:27.813 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:27.817 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:21:27.820 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 118 - 201 - application/json;+charset=utf-8 230.1486ms
2024-08-23 22:21:49.457 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 145
2024-08-23 22:21:49.465 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:49.468 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/49/amenities'
2024-08-23 22:21:49.470 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:49.473 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:21:49.474 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:21:49.475 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:21:49.476 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:21:49.478 +03:00 [DBG] Authorization was successful.
2024-08-23 22:21:49.480 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:49.482 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:21:49.484 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:21:49.486 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:21:49.490 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:21:49.493 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:21:49.495 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:21:49.496 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:21:49.498 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:21:49.499 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:21:49.500 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:21:49.502 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:49.504 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:49.508 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:21:49.511 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:21:49.514 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:21:49.517 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:21:49.521 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:21:49.524 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000023": started reading request body.
2024-08-23 22:21:49.525 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000023": done reading request body.
2024-08-23 22:21:49.527 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:21:49.528 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:49.530 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:49.531 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:21:49.532 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:21:49.534 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:21:49.536 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:49.539 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:21:49.540 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.542 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.544 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:21:49.548 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:21:49.551 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.552 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.555 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.556 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:49.558 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:21:49.561 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:21:49.564 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:21:49.567 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:49.567 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:49.568 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.570 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.572 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.575 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.577 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.578 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:21:49.579 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:21:49.580 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:21:49.581 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.582 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.583 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:21:49.584 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:21:49.587 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:21:49.589 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:21:49.591 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:21:49.596 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:21:49.598 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:21:49.599 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:21:49.600 +03:00 [DBG] Committing transaction.
2024-08-23 22:21:49.605 +03:00 [DBG] Committed transaction.
2024-08-23 22:21:49.607 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.610 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:21:49.611 +03:00 [DBG] Disposing transaction.
2024-08-23 22:21:49.612 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:21:49.613 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:21:49.614 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:21:49.615 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:21:49.617 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:21:49.617 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:21:49.619 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:21:49.622 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:21:49.623 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:21:49.624 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:21:49.626 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:21:49.627 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:21:49.628 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 131.9268ms
2024-08-23 22:21:49.630 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:21:49.631 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:21:49.636 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 145 - 201 - application/json;+charset=utf-8 179.4045ms
2024-08-23 22:22:10.476 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 148
2024-08-23 22:22:10.490 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/49/amenities'
2024-08-23 22:22:10.494 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/49/amenities'
2024-08-23 22:22:10.499 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:22:10.502 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:22:10.504 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:22:10.506 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:22:10.506 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:22:10.507 +03:00 [DBG] Authorization was successful.
2024-08-23 22:22:10.508 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:22:10.509 +03:00 [INF] Route matched with {action = "AddAmenityToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToHotel(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:22:10.512 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:22:10.515 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:22:10.517 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:22:10.520 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:22:10.521 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:22:10.523 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:10.524 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:10.525 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:10.527 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:22:10.529 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:10.534 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:10.535 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:10.537 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:10.538 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:22:10.539 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' using the name '' in request data ...
2024-08-23 22:22:10.541 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:22:10.543 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000025": started reading request body.
2024-08-23 22:22:10.545 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000025": done reading request body.
2024-08-23 22:22:10.548 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'
2024-08-23 22:22:10.550 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:22:10.552 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:22:10.553 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest' ...
2024-08-23 22:22:10.555 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateRequest'.
2024-08-23 22:22:10.556 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:22:10.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:10.560 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:22:10.561 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.564 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.566 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:22:10.599 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:22:10.604 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.606 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.607 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.608 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:10.609 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:22:10.612 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:22:10.625 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:22:10.639 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:10.639 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:10.640 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.642 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.643 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Hotel.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.646 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'AmenityID.Amenity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.649 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.651 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:10.652 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:10.653 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:10.654 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.655 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.656 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:22:10.657 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:22:10.658 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:10.659 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:22:10.661 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:22:10.667 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Amenities] ([Description], [HotelId], [Name])
VALUES (@p0, @p1, @p2);
SELECT [AmenityID]
FROM [Amenities]
WHERE @@ROWCOUNT = 1 AND [AmenityID] = scope_identity();
2024-08-23 22:22:10.671 +03:00 [DBG] The foreign key property 'Amenity.AmenityID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:22:10.672 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:10.673 +03:00 [DBG] Committing transaction.
2024-08-23 22:22:10.674 +03:00 [DBG] Committed transaction.
2024-08-23 22:22:10.675 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.676 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:10.678 +03:00 [DBG] Disposing transaction.
2024-08-23 22:22:10.679 +03:00 [DBG] An entity of type 'Amenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:10.682 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:22:10.684 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:10.685 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:10.686 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:10.687 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:22:10.688 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:22:10.691 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:22:10.691 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:22:10.692 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:22:10.694 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:22:10.696 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:22:10.701 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API) in 178.1243ms
2024-08-23 22:22:10.703 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddAmenityToHotel (HotelBookingPlatform.API)'
2024-08-23 22:22:10.704 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:22:10.709 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/49/amenities application/json 148 - 201 - application/json;+charset=utf-8 233.1400ms
2024-08-23 22:22:27.811 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/49/amenities - -
2024-08-23 22:22:27.813 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/49/amenities'
2024-08-23 22:22:27.816 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/49/amenities'
2024-08-23 22:22:27.819 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:22:27.824 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:22:27.859 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:22:27.861 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:22:27.863 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:22:27.864 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:22:27.868 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:22:27.874 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:22:27.879 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:22:27.883 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:22:27.885 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:22:27.887 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:27.890 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:27.894 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:27.895 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:22:27.897 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:27.899 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:27.900 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:27.901 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:27.904 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:22:27.909 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:27.912 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:22:27.914 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:27.915 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:27.917 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:22:27.924 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:22:27.928 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:27.930 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:27.931 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:27.932 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:27.933 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:22:27.936 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:22:27.941 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:22:27.946 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:27.947 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:27.947 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:27.949 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:27.950 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:22:27.953 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:22:27.954 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:22:27.957 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:22:27.959 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:22:27.961 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:22:27.963 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 76.2909ms
2024-08-23 22:22:27.968 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:22:27.971 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:22:27.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/49/amenities - - - 200 - application/json;+charset=utf-8 162.6361ms
2024-08-23 22:22:46.609 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/upload-image multipart/form-data;+boundary=----WebKitFormBoundarybh2REMxRHwj7vIBK 9914
2024-08-23 22:22:46.611 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/upload-image'
2024-08-23 22:22:46.614 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/upload-image' is valid for the request path '/api/Hotel/48/upload-image'
2024-08-23 22:22:46.615 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:46.619 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:22:46.620 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:22:46.621 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:22:46.623 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:22:46.624 +03:00 [DBG] Authorization was successful.
2024-08-23 22:22:46.625 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:46.632 +03:00 [INF] Route matched with {action = "UploadHotelImage", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadHotelImage(Int32, Microsoft.AspNetCore.Http.IFormFile) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:22:46.635 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:22:46.637 +03:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-23 22:22:46.639 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:22:46.641 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:22:46.642 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:22:46.644 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:46.645 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:46.649 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000029": started reading request body.
2024-08-23 22:22:46.651 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000029": done reading request body.
2024-08-23 22:22:46.653 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:46.654 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:22:46.655 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:46.657 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:46.658 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:46.659 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:46.661 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:22:46.662 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'file' in request data ...
2024-08-23 22:22:46.666 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:46.668 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:46.669 +03:00 [DBG] Attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:22:46.671 +03:00 [DBG] Done attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:47.681 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:22:47.685 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:47.687 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:47.689 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:47.690 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:47.691 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:47.692 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:47.693 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:47.694 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:22:47.696 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:22:47.698 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:47.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:22:47.700 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:22:47.709 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:22:47.714 +03:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:22:47.715 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:47.716 +03:00 [DBG] Committing transaction.
2024-08-23 22:22:47.717 +03:00 [DBG] Committed transaction.
2024-08-23 22:22:47.718 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:47.719 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:47.721 +03:00 [DBG] Disposing transaction.
2024-08-23 22:22:47.721 +03:00 [DBG] An entity of type 'Image' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:47.723 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:22:47.724 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:47.725 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:47.726 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:47.727 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:22:47.730 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:22:47.732 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:22:47.733 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:22:47.734 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:22:47.735 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:22:47.736 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:22:47.738 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API) in 1093.9506ms
2024-08-23 22:22:47.739 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:47.740 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:22:47.742 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/upload-image multipart/form-data;+boundary=----WebKitFormBoundarybh2REMxRHwj7vIBK 9914 - 200 - application/json;+charset=utf-8 1133.4766ms
2024-08-23 22:22:54.084 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryhdwyFS9HBlafeUL9 8200
2024-08-23 22:22:54.086 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/upload-image'
2024-08-23 22:22:54.090 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/upload-image' is valid for the request path '/api/Hotel/48/upload-image'
2024-08-23 22:22:54.092 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:54.107 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:22:54.135 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:22:54.137 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:22:54.138 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:22:54.141 +03:00 [DBG] Authorization was successful.
2024-08-23 22:22:54.142 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:54.148 +03:00 [INF] Route matched with {action = "UploadHotelImage", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadHotelImage(Int32, Microsoft.AspNetCore.Http.IFormFile) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:22:54.151 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:22:54.155 +03:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-23 22:22:54.158 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:22:54.160 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:22:54.165 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:22:54.167 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:54.169 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:22:54.170 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000002B": started reading request body.
2024-08-23 22:22:54.172 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000002B": done reading request body.
2024-08-23 22:22:54.173 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:54.174 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:22:54.176 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:54.179 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:54.182 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:22:54.183 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:22:54.185 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:22:54.186 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'file' in request data ...
2024-08-23 22:22:54.187 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:54.189 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:54.190 +03:00 [DBG] Attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:22:54.191 +03:00 [DBG] Done attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:22:55.059 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:22:55.073 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:55.083 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:55.088 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:55.093 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:55.096 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:55.099 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:55.101 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:55.102 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:22:55.103 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:22:55.104 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:22:55.105 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:22:55.106 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:22:55.109 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:22:55.114 +03:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:22:55.117 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:22:55.117 +03:00 [DBG] Committing transaction.
2024-08-23 22:22:55.122 +03:00 [DBG] Committed transaction.
2024-08-23 22:22:55.125 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:55.126 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:22:55.130 +03:00 [DBG] Disposing transaction.
2024-08-23 22:22:55.132 +03:00 [DBG] An entity of type 'Image' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:22:55.135 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:22:55.137 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:22:55.138 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:22:55.138 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:22:55.139 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:22:55.141 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:22:55.144 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:22:55.147 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:22:55.150 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:22:55.151 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:22:55.152 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:22:55.154 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API) in 986.7525ms
2024-08-23 22:22:55.155 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.UploadHotelImage (HotelBookingPlatform.API)'
2024-08-23 22:22:55.157 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:22:55.159 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryhdwyFS9HBlafeUL9 8200 - 200 - application/json;+charset=utf-8 1074.9079ms
2024-08-23 22:23:01.586 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/images - -
2024-08-23 22:23:01.588 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/images'
2024-08-23 22:23:01.589 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetImagesForCity (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/images' is valid for the request path '/api/Hotel/48/images'
2024-08-23 22:23:01.592 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:23:01.594 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:23:01.596 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:23:01.597 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:23:01.598 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:23:01.603 +03:00 [INF] Route matched with {action = "GetImagesForCity", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetImagesForCity(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:23:01.607 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:23:01.610 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:23:01.612 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:23:01.614 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:23:01.615 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:23:01.617 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:23:01.619 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:23:01.620 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:23:01.621 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:23:01.622 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:23:01.624 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:23:01.627 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:23:01.629 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:23:01.633 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:23:01.636 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:23:01.637 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:23:01.638 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:23:01.640 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:23:01.642 +03:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:23:01.662 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:23:01.672 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:23:01.674 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:23:01.676 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:23:01.677 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:23:01.679 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:23:01.681 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:23:01.682 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:23:01.683 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:23:01.684 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:23:01.686 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:23:01.687 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:23:01.688 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:23:01.689 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:23:01.691 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`2[[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.Entities.Image, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:23:01.696 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetImagesForCity (HotelBookingPlatform.API) in 78.838ms
2024-08-23 22:23:01.699 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetImagesForCity (HotelBookingPlatform.API)'
2024-08-23 22:23:01.701 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:23:01.702 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/images - - - 200 - application/json;+charset=utf-8 116.6755ms
2024-08-23 22:24:47.578 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Hotel/48/roomclasses application/json 178
2024-08-23 22:24:47.588 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/roomclasses'
2024-08-23 22:24:47.601 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddRoomClassToHotel (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/roomclasses' is valid for the request path '/api/Hotel/48/roomclasses'
2024-08-23 22:24:47.607 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddRoomClassToHotel (HotelBookingPlatform.API)'
2024-08-23 22:24:47.608 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:24:47.609 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:24:47.610 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:24:47.611 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:24:47.612 +03:00 [DBG] Authorization was successful.
2024-08-23 22:24:47.613 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddRoomClassToHotel (HotelBookingPlatform.API)'
2024-08-23 22:24:47.620 +03:00 [INF] Route matched with {action = "AddRoomClassToHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomClassToHotel(Int32, HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:24:47.624 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:24:47.626 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:24:47.627 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:24:47.629 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:24:47.630 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:24:47.632 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:24:47.636 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:24:47.639 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:24:47.640 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:24:47.642 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:24:47.643 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:24:47.644 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:24:47.645 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:24:47.647 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto' ...
2024-08-23 22:24:47.648 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto' using the name '' in request data ...
2024-08-23 22:24:47.652 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:24:47.658 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000002F": started reading request body.
2024-08-23 22:24:47.661 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000002F": done reading request body.
2024-08-23 22:24:47.665 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto'
2024-08-23 22:24:47.669 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto'.
2024-08-23 22:24:47.671 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto'.
2024-08-23 22:24:47.672 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto' ...
2024-08-23 22:24:47.677 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassRequestDto'.
2024-08-23 22:24:47.687 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:24:47.691 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:24:47.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:24:47.693 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.695 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.696 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:24:47.725 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:24:47.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.731 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.734 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:24:47.739 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:24:47.740 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:24:47.751 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:24:47.761 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:24:47.761 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:24:47.762 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.763 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.770 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RoomClassID.RoomClass'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.806 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.809 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:24:47.810 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:24:47.817 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:24:47.821 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.824 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.825 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:24:47.826 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:24:47.827 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:24:47.828 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:24:47.833 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClasses] ([CreatedAtUtc], [Description], [HotelId], [Name], [RoomType])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [RoomClassID]
FROM [RoomClasses]
WHERE @@ROWCOUNT = 1 AND [RoomClassID] = scope_identity();
2024-08-23 22:24:47.849 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClasses] ([CreatedAtUtc], [Description], [HotelId], [Name], [RoomType])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [RoomClassID]
FROM [RoomClasses]
WHERE @@ROWCOUNT = 1 AND [RoomClassID] = scope_identity();
2024-08-23 22:24:47.857 +03:00 [DBG] The foreign key property 'RoomClass.RoomClassID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:24:47.862 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:24:47.863 +03:00 [DBG] Committing transaction.
2024-08-23 22:24:47.867 +03:00 [DBG] Committed transaction.
2024-08-23 22:24:47.870 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.873 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:24:47.875 +03:00 [DBG] Disposing transaction.
2024-08-23 22:24:47.878 +03:00 [DBG] An entity of type 'RoomClass' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:24:47.880 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:24:47.885 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:24:47.892 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:24:47.892 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:24:47.893 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:24:47.894 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:24:47.895 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:24:47.901 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.AddRoomClassToHotel (HotelBookingPlatform.API) in 268.7099ms
2024-08-23 22:24:47.905 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.AddRoomClassToHotel (HotelBookingPlatform.API)'
2024-08-23 22:24:47.908 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:24:47.910 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Hotel/48/roomclasses application/json 178 - 201 - application/json;+charset=utf-8 332.8301ms
2024-08-23 22:25:03.107 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/roomclasses - -
2024-08-23 22:25:03.109 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/roomclasses'
2024-08-23 22:25:03.112 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/roomclasses' is valid for the request path '/api/Hotel/48/roomclasses'
2024-08-23 22:25:03.113 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:25:03.115 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:25:03.117 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:25:03.118 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:25:03.119 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:25:03.124 +03:00 [INF] Route matched with {action = "GetRoomClassesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomClassesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:25:03.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:25:03.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:25:03.134 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:25:03.136 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:25:03.137 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:25:03.139 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:25:03.140 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:25:03.142 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:25:03.146 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:25:03.148 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:25:03.150 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:25:03.151 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:25:03.152 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:25:03.155 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:25:03.158 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:03.161 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:25:03.165 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.166 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.167 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:25:03.170 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:25:03.173 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:03.175 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:03.177 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:03.180 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:03.182 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:03.184 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:25:03.186 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:25:03.189 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:03.189 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:03.190 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.192 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.197 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Where(rc => rc.HotelId == __hotelId_0)'
2024-08-23 22:25:03.202 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RoomClass>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
        SELECT r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
        FROM RoomClasses AS r
        WHERE r.HotelId == @__hotelId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:25:03.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:03.208 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:03.209 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.213 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.217 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
FROM [RoomClasses] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2024-08-23 22:25:03.222 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
FROM [RoomClasses] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2024-08-23 22:25:03.227 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:03.229 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:03.230 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.231 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:03.235 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:25:03.238 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:25:03.239 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:25:03.240 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:25:03.240 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:25:03.243 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.RoomClass.RoomClassResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:25:03.248 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API) in 108.8735ms
2024-08-23 22:25:03.250 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetRoomClassesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:25:03.251 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:25:03.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/roomclasses - - - 200 - application/json;+charset=utf-8 145.0888ms
2024-08-23 22:25:47.757 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21
2024-08-23 22:25:47.783 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:25:47.789 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/addamenity' is valid for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:25:47.791 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:47.793 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:25:47.796 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:25:47.799 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:25:47.800 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:25:47.802 +03:00 [DBG] Authorization was successful.
2024-08-23 22:25:47.804 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:47.813 +03:00 [INF] Route matched with {action = "AddAmenityToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:25:47.818 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:25:47.819 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:25:47.821 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:25:47.822 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:25:47.825 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:25:47.829 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:25:47.833 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:25:47.834 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:25:47.836 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:25:47.837 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:47.839 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:47.841 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:25:47.845 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:47.847 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:25:47.848 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' using the name '' in request data ...
2024-08-23 22:25:47.850 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:25:47.856 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000033": started reading request body.
2024-08-23 22:25:47.858 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000033": done reading request body.
2024-08-23 22:25:47.863 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'
2024-08-23 22:25:47.865 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:47.867 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:47.868 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:25:47.870 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:47.880 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:25:47.884 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 22:25:47.886 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-23 22:25:47.895 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:25:47.899 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:47.900 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:47.902 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.904 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.905 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:25:47.932 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:25:47.942 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:47.946 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:47.948 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:47.950 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.951 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.954 +03:00 [DBG] Compiling query expression: 
'DbSet<Amenity>()
    .FirstOrDefault(e => EF.Property<int>(e, "AmenityID") == __p_0)'
2024-08-23 22:25:47.961 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Amenity>(
    asyncEnumerable: new SingleQueryingEnumerable<Amenity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Amenity.AmenityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Amenity.Description (string) Required, 1], [Property: Amenity.HotelId (int) Required FK Index, 2], [Property: Amenity.Name (string) Required, 3] }
            SELECT TOP(1) a.AmenityID, a.Description, a.HotelId, a.Name
            FROM Amenities AS a
            WHERE a.AmenityID == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Amenity>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:25:47.966 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:47.967 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:47.970 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.971 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.972 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:25:47.981 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:25:47.985 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:47.986 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:47.987 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.989 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:47.996 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'RoomClass.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:48.015 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:48.019 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:25:48.022 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:25:48.025 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:25:48.028 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:48.031 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:48.032 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:25:48.034 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:25:48.036 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:48.037 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:48.039 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:25:48.055 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:25:48.059 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:48.062 +03:00 [DBG] Committing transaction.
2024-08-23 22:25:48.065 +03:00 [DBG] Committed transaction.
2024-08-23 22:25:48.066 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:48.067 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:48.068 +03:00 [DBG] Disposing transaction.
2024-08-23 22:25:48.069 +03:00 [DBG] An entity of type 'RoomClassAmenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:48.070 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:25:48.072 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:25:48.076 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:25:48.079 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:25:48.081 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:25:48.084 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:25:48.086 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:25:48.089 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API) in 259.3149ms
2024-08-23 22:25:48.091 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:48.095 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:25:48.099 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21 - 201 - application/json;+charset=utf-8 342.7196ms
2024-08-23 22:25:56.605 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21
2024-08-23 22:25:56.610 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:25:56.612 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/addamenity' is valid for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:25:56.616 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:56.618 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:25:56.620 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:25:56.622 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:25:56.625 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:25:56.627 +03:00 [DBG] Authorization was successful.
2024-08-23 22:25:56.629 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:56.630 +03:00 [INF] Route matched with {action = "AddAmenityToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:25:56.635 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:25:56.637 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:25:56.639 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:25:56.642 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:25:56.644 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:25:56.646 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:25:56.648 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:25:56.650 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:25:56.651 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:25:56.652 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:56.654 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:56.656 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:25:56.659 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:25:56.661 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:25:56.663 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' using the name '' in request data ...
2024-08-23 22:25:56.665 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:25:56.666 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000035": started reading request body.
2024-08-23 22:25:56.667 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000035": done reading request body.
2024-08-23 22:25:56.668 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'
2024-08-23 22:25:56.669 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:56.671 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:56.674 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:25:56.675 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:25:56.677 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:25:56.680 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:56.681 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:25:56.682 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.684 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.685 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:25:56.689 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:25:56.694 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.695 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.697 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:56.698 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.699 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.700 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:56.701 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:25:56.703 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.704 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:25:56.710 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:25:56.713 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.714 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:56.715 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.716 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.717 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'RoomClass.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.719 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.720 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:25:56.722 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:25:56.723 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:25:56.725 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.726 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.728 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:25:56.730 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:25:56.731 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:25:56.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:25:56.733 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:25:56.736 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:25:56.739 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:25:56.740 +03:00 [DBG] Committing transaction.
2024-08-23 22:25:56.745 +03:00 [DBG] Committed transaction.
2024-08-23 22:25:56.746 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.747 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:25:56.748 +03:00 [DBG] Disposing transaction.
2024-08-23 22:25:56.749 +03:00 [DBG] An entity of type 'RoomClassAmenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:25:56.751 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:25:56.752 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:25:56.756 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:25:56.757 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:25:56.758 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:25:56.759 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:25:56.761 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:25:56.763 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API) in 116.9125ms
2024-08-23 22:25:56.764 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:25:56.765 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:25:56.767 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21 - 201 - application/json;+charset=utf-8 162.1391ms
2024-08-23 22:26:01.183 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21
2024-08-23 22:26:01.185 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:26:01.188 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/addamenity' is valid for the request path '/api/RoomClass/44/addamenity'
2024-08-23 22:26:01.190 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:26:01.213 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:26:01.228 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:26:01.232 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:26:01.233 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:26:01.243 +03:00 [DBG] Authorization was successful.
2024-08-23 22:26:01.244 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:26:01.246 +03:00 [INF] Route matched with {action = "AddAmenityToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAmenityToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:26:01.250 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:26:01.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:26:01.256 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:26:01.260 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:26:01.263 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:26:01.266 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:01.269 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:01.272 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:01.274 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:26:01.276 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:01.277 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:01.278 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:01.279 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:01.281 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:26:01.282 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' using the name '' in request data ...
2024-08-23 22:26:01.283 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:26:01.285 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000037": started reading request body.
2024-08-23 22:26:01.287 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000037": done reading request body.
2024-08-23 22:26:01.289 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'
2024-08-23 22:26:01.290 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:26:01.291 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:26:01.293 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto' ...
2024-08-23 22:26:01.294 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Amenity.AmenityCreateDto'.
2024-08-23 22:26:01.295 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:26:01.297 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:01.298 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:26:01.300 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.301 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.303 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:26:01.309 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:26:01.312 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.313 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.314 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:01.315 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.316 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.318 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:01.319 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:26:01.322 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.324 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.326 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:26:01.328 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[AmenityID] = @__p_0
2024-08-23 22:26:01.331 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.332 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:01.333 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.335 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.337 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'RoomClass.Amenities'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.341 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.343 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:26:01.344 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:26:01.345 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:26:01.346 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.348 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.349 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:26:01.351 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:26:01.352 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:01.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:26:01.357 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:26:01.361 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoomClassAmenity] ([AmenityID], [RoomClassID])
VALUES (@p0, @p1);
2024-08-23 22:26:01.363 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:01.364 +03:00 [DBG] Committing transaction.
2024-08-23 22:26:01.369 +03:00 [DBG] Committed transaction.
2024-08-23 22:26:01.370 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.374 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:01.375 +03:00 [DBG] Disposing transaction.
2024-08-23 22:26:01.376 +03:00 [DBG] An entity of type 'RoomClassAmenity' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:01.378 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:26:01.379 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:26:01.381 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:26:01.381 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:26:01.382 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:26:01.383 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:26:01.385 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:26:01.387 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API) in 120.6996ms
2024-08-23 22:26:01.390 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddAmenityToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:26:01.392 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:26:01.393 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/addamenity application/json 21 - 201 - application/json;+charset=utf-8 209.5293ms
2024-08-23 22:26:07.432 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/48/amenities - -
2024-08-23 22:26:07.433 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/48/amenities'
2024-08-23 22:26:07.437 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/amenities' is valid for the request path '/api/RoomClass/48/amenities'
2024-08-23 22:26:07.438 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:07.440 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:26:07.442 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:26:07.443 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:26:07.444 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:07.451 +03:00 [INF] Route matched with {action = "GetAmenitiesByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:26:07.455 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:26:07.458 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:26:07.459 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:26:07.461 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:26:07.462 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:26:07.464 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:07.466 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:07.468 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:07.473 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:26:07.475 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:07.476 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:07.477 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:07.478 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:07.483 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:26:07.489 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Amenities)
    .FirstOrDefault(rc => rc.RoomClassID == __roomClassId_0)'
2024-08-23 22:26:07.495 +03:00 [DBG] Including navigation: 'RoomClass.Amenities'.
2024-08-23 22:26:07.538 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RoomClassAmenity (Dictionary<string, object>).AmenityID (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: RoomClassAmenity (Dictionary<string, object>).RoomClassID (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
                3 -> Dictionary<IProperty, int> { [Property: Amenity.AmenityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Amenity.Description (string) Required, 9], [Property: Amenity.HotelId (int) Required FK Index, 10], [Property: Amenity.Name (string) Required, 11] }
                4 -> 6
                5 -> 7
                6 -> 8
            SELECT t.RoomClassID, t.CreatedAtUtc, t.Description, t.HotelId, t.Name, t.RoomType, t0.AmenityID, t0.RoomClassID, t0.AmenityID0, t0.Description, t0.HotelId, t0.Name
            FROM 
            (
                SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
                FROM RoomClasses AS r
                WHERE r.RoomClassID == @__roomClassId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT r0.AmenityID, r0.RoomClassID, a.AmenityID AS AmenityID0, a.Description, a.HotelId, a.Name
                FROM RoomClassAmenity AS r0
                INNER JOIN Amenities AS a ON r0.AmenityID == a.AmenityID
            ) AS t0 ON t.RoomClassID == t0.RoomClassID
            ORDER BY t.RoomClassID ASC, t0.AmenityID ASC, t0.RoomClassID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:26:07.543 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:07.544 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:26:07.545 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:07.547 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:07.548 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-23 22:26:07.559 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-23 22:26:07.563 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:07.564 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:07.566 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:07.788 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API) in 324.805ms
2024-08-23 22:26:07.794 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:08.005 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:26:08.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/48/amenities - - - 404 - application/json 576.0177ms
2024-08-23 22:26:16.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/44/amenities - -
2024-08-23 22:26:16.304 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/amenities'
2024-08-23 22:26:16.307 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/amenities' is valid for the request path '/api/RoomClass/44/amenities'
2024-08-23 22:26:16.309 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:16.310 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:26:16.314 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:16 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:26:16.322 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:16 PM'.
2024-08-23 22:26:16.324 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:16.326 +03:00 [INF] Route matched with {action = "GetAmenitiesByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:26:16.328 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:26:16.330 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:26:16.333 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:26:16.337 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:26:16.338 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:26:16.339 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:16.341 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:26:16.342 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:16.343 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:26:16.344 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:16.346 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:16.348 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:26:16.350 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:26:16.352 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:26:16.354 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:16.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:26:16.356 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:16.357 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:16.358 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-23 22:26:16.362 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roomClassId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [t0].[AmenityID], [t0].[RoomClassID], [t0].[AmenityID0], [t0].[Description], [t0].[HotelId], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__roomClassId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[AmenityID], [r0].[RoomClassID], [a].[AmenityID] AS [AmenityID0], [a].[Description], [a].[HotelId], [a].[Name]
    FROM [RoomClassAmenity] AS [r0]
    INNER JOIN [Amenities] AS [a] ON [r0].[AmenityID] = [a].[AmenityID]
) AS [t0] ON [t].[RoomClassID] = [t0].[RoomClassID]
ORDER BY [t].[RoomClassID], [t0].[AmenityID], [t0].[RoomClassID]
2024-08-23 22:26:16.367 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.368 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.370 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.372 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.373 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.374 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClassAmenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.375 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:16.377 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:16.378 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:16.380 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:16.383 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:26:16.388 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:26:16.390 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:26:16.391 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:26:16.391 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:26:16.393 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:26:16.394 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API) in 54.7958ms
2024-08-23 22:26:16.403 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetAmenitiesByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:26:16.405 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:26:16.407 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/44/amenities - - - 200 - application/json;+charset=utf-8 142.9297ms
2024-08-23 22:26:45.903 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95
2024-08-23 22:26:45.910 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:26:45.915 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:26:45.917 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:26:45.920 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:26:45.922 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:26:45.925 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:45 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:26:45.932 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:45 PM'.
2024-08-23 22:26:45.934 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-08-23 22:26:45.936 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-23 22:26:45.940 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95 - 401 0 - 37.1901ms
2024-08-23 22:26:45.942 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000003D": started reading request body.
2024-08-23 22:26:45.944 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000003D": done reading request body.
2024-08-23 22:26:50.828 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-23 22:26:50.874 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:26:50.876 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:26:50.880 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:26:50.889 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:26:50.890 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:26:50.892 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:50 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:26:50.896 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:21:08 PM', Current time (UTC): '8/23/2024 7:26:50 PM'.
2024-08-23 22:26:50.898 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:26:50.900 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:26:50.905 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:26:50.906 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:26:50.907 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:26:50.910 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:26:50.911 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:26:50.913 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:26:50.918 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:26:50.922 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:26:50.923 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:26:50.925 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:26:50.926 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000003F": started reading request body.
2024-08-23 22:26:50.928 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:0000003F": done reading request body.
2024-08-23 22:26:50.929 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:26:50.931 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:26:50.933 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:26:50.934 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:26:50.937 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:26:50.939 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:26:50.942 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:50.943 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:26:50.944 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:50.946 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:50.948 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:26:50.979 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:26:50.984 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:50.988 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:50.990 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:50.994 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:26:50.996 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:50.996 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:50.997 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.006 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:51.010 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:26:51.011 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.013 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.014 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:26:51.021 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:26:51.025 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:51.026 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.027 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:51.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:26:51.031 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.033 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.035 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:26:51.042 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:26:51.046 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:51.046 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.048 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:26:51.052 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:26:51.053 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.055 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.057 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:26:51.060 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:26:51.063 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:26:51.063 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.065 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:26:51.068 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:26:51.071 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:26:51.072 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:26:51.073 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:26:51.074 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:26:51.075 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:26:51.078 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 165.0287ms
2024-08-23 22:26:51.080 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:26:51.081 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:26:51.084 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 255.6972ms
2024-08-23 22:27:22.958 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95
2024-08-23 22:27:22.965 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:23.002 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:23.005 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:23.010 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:27:23.011 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:27:23.013 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:27:23.014 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:27:23.016 +03:00 [DBG] Authorization was successful.
2024-08-23 22:27:23.018 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:23.029 +03:00 [INF] Route matched with {action = "AddRoomToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:27:23.032 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:27:23.035 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:27:23.038 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:27:23.041 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:27:23.043 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:27:23.044 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:23.046 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:23.047 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:23.048 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:27:23.050 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:23.051 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:23.054 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:23.058 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:23.061 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:27:23.063 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' using the name '' in request data ...
2024-08-23 22:27:23.065 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:27:23.074 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000041": started reading request body.
2024-08-23 22:27:23.077 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000041": done reading request body.
2024-08-23 22:27:23.088 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'
2024-08-23 22:27:23.090 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:23.094 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:23.095 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:27:23.098 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:23.101 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:27:23.105 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:27:23.108 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:27:23.110 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:23.111 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:23.113 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:27:23.138 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:27:23.143 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:27:23.145 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:27:23.146 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:27:23.147 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:23.148 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:23.260 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API) in 216.152ms
2024-08-23 22:27:23.264 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:23.374 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:27:23.382 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95 - 500 - application/json 424.2570ms
2024-08-23 22:27:33.684 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95
2024-08-23 22:27:33.685 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:33.688 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:33.731 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:33.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:27:33.737 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:27:33.739 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:27:33.740 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:27:33.742 +03:00 [DBG] Authorization was successful.
2024-08-23 22:27:33.743 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:33.744 +03:00 [INF] Route matched with {action = "AddRoomToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:27:33.746 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:27:33.749 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:27:33.753 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:27:33.757 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:27:33.759 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:27:33.760 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:33.762 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:33.763 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:33.765 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:27:33.770 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:33.773 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:33.776 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:33.778 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:33.781 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:27:33.783 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' using the name '' in request data ...
2024-08-23 22:27:33.787 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:27:33.789 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000043": started reading request body.
2024-08-23 22:27:33.790 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ", Request id "0HN63KRUQ6GIJ:00000043": done reading request body.
2024-08-23 22:27:33.792 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'
2024-08-23 22:27:33.793 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:33.794 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:33.795 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:27:33.797 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:27:33.800 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:27:33.805 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:27:33.806 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:27:33.807 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:33.809 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:33.810 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:27:33.830 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:27:33.835 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:27:33.839 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:27:33.841 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:27:33.842 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:33.843 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:33.952 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API) in 192.3231ms
2024-08-23 22:27:33.956 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:27:34.082 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:27:34.085 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 95 - 500 - application/json 401.1456ms
2024-08-23 22:27:56.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/44/rooms - -
2024-08-23 22:27:56.628 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:56.630 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:27:56.632 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:27:56.634 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:27:56.635 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:27:56.636 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:27:56.637 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:27:56.643 +03:00 [INF] Route matched with {action = "GetRoomsByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:27:56.647 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:27:56.649 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:27:56.650 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:27:56.652 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:27:56.653 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:27:56.655 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:56.659 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:27:56.661 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:56.663 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:27:56.664 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:56.666 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:56.667 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:27:56.668 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:27:56.673 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:27:56.679 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Rooms)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 22:27:56.680 +03:00 [DBG] Including navigation: 'RoomClass.Rooms'.
2024-08-23 22:27:56.689 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Room.AdultsCapacity (int) Required, 7], [Property: Room.ChildrenCapacity (int) Required, 8], [Property: Room.CreatedAtUtc (DateTime) Required, 9], [Property: Room.Number (string) Required MaxLength(50), 10], [Property: Room.PricePerNight (decimal) Required, 11], [Property: Room.RoomClassID (int) Required FK Index, 12] }
                3 -> 6
            SELECT t.RoomClassID, t.CreatedAtUtc, t.Description, t.HotelId, t.Name, t.RoomType, r0.RoomID, r0.AdultsCapacity, r0.ChildrenCapacity, r0.CreatedAtUtc, r0.Number, r0.PricePerNight, r0.RoomClassID
            FROM 
            (
                SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
                FROM RoomClasses AS r
                WHERE r.RoomClassID == @__id_0
            ) AS t
            LEFT JOIN Rooms AS r0 ON t.RoomClassID == r0.RoomClassID
            ORDER BY t.RoomClassID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:27:56.693 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:27:56.694 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:27:56.695 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:56.697 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:56.698 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:27:56.735 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:27:56.742 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:27:56.745 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:27:56.746 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:56.747 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:27:56.841 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API) in 186.4643ms
2024-08-23 22:27:56.846 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:27:56.932 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:27:56.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/44/rooms - - - 400 - application/json 326.2686ms
2024-08-23 22:28:04.245 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" received FIN.
2024-08-23 22:28:04.248 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" is closed. The last processed stream ID was 69.
2024-08-23 22:28:04.251 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:28:04.260 +03:00 [DBG] Connection id "0HN63KRUQ6GIJ" stopped.
2024-08-23 22:28:07.215 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" accepted.
2024-08-23 22:28:07.218 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" started.
2024-08-23 22:28:07.267 +03:00 [DBG] Connection 0HN63KRUQ6GIK established using the following protocol: "Tls13"
2024-08-23 22:28:07.275 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryHHtQnEp9bx4LAb8e 9631
2024-08-23 22:28:07.276 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/upload-image'
2024-08-23 22:28:07.278 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.UploadRoomClassImage (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/upload-image' is valid for the request path '/api/RoomClass/44/upload-image'
2024-08-23 22:28:07.282 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.UploadRoomClassImage (HotelBookingPlatform.API)'
2024-08-23 22:28:07.285 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:28:07.286 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:28:07.289 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:28:07.292 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:28:07.293 +03:00 [DBG] Authorization was successful.
2024-08-23 22:28:07.293 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.UploadRoomClassImage (HotelBookingPlatform.API)'
2024-08-23 22:28:07.297 +03:00 [INF] Route matched with {action = "UploadRoomClassImage", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadRoomClassImage(Int32, Microsoft.AspNetCore.Http.IFormFile) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:28:07.300 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:28:07.302 +03:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-23 22:28:07.306 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:28:07.309 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:28:07.311 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:28:07.312 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:28:07.314 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:28:07.315 +03:00 [DBG] Connection id "0HN63KRUQ6GIK", Request id "0HN63KRUQ6GIK:00000001": started reading request body.
2024-08-23 22:28:07.316 +03:00 [DBG] Connection id "0HN63KRUQ6GIK", Request id "0HN63KRUQ6GIK:00000001": done reading request body.
2024-08-23 22:28:07.317 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:28:07.319 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:28:07.324 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:07.326 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:07.327 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:28:07.328 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:07.330 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:28:07.331 +03:00 [DBG] Attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'file' in request data ...
2024-08-23 22:28:07.332 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:28:07.333 +03:00 [DBG] Done attempting to bind parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:28:07.336 +03:00 [DBG] Attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-23 22:28:07.340 +03:00 [DBG] Done attempting to validate the bound parameter 'file' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-23 22:28:08.448 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:28:08.455 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:08.458 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:08.459 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:28:08.461 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:28:08.462 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:28:08.463 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:08.464 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:08.466 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:28:08.467 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:28:08.472 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:28:08.475 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:28:08.476 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:28:08.493 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Images] ([CreatedAt], [EntityId], [PublicId], [Type], [Url])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Images]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-08-23 22:28:08.505 +03:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:28:08.508 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:28:08.509 +03:00 [DBG] Committing transaction.
2024-08-23 22:28:08.511 +03:00 [DBG] Committed transaction.
2024-08-23 22:28:08.512 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:08.514 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:08.517 +03:00 [DBG] Disposing transaction.
2024-08-23 22:28:08.518 +03:00 [DBG] An entity of type 'Image' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:08.521 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:28:08.523 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:28:08.524 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:28:08.525 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:28:08.526 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:28:08.527 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:28:08.529 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:28:08.530 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:28:08.531 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:28:08.532 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:28:08.533 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], HotelBookingPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:28:08.536 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.UploadRoomClassImage (HotelBookingPlatform.API) in 1223.3739ms
2024-08-23 22:28:08.538 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.UploadRoomClassImage (HotelBookingPlatform.API)'
2024-08-23 22:28:08.541 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:28:08.543 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/upload-image multipart/form-data;+boundary=----WebKitFormBoundaryHHtQnEp9bx4LAb8e 9631 - 200 - application/json;+charset=utf-8 1269.0208ms
2024-08-23 22:28:13.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/44/images - -
2024-08-23 22:28:13.324 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/images'
2024-08-23 22:28:13.328 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/images' is valid for the request path '/api/RoomClass/44/images'
2024-08-23 22:28:13.329 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:28:13.330 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:28:13.331 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:28:13.333 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:28:13.335 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:28:13.340 +03:00 [INF] Route matched with {action = "GetImagesForRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetImagesForRoomClass(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:28:13.344 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:28:13.345 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:28:13.346 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:28:13.348 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:28:13.351 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:28:13.356 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:28:13.359 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:28:13.362 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:28:13.364 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:28:13.365 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:13.368 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:13.370 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:28:13.372 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:28:13.375 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:28:13.377 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:28:13.378 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:28:13.379 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:13.380 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:13.382 +03:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:28:13.411 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__type_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[EntityId], [i].[PublicId], [i].[Type], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[Type] = @__type_0
2024-08-23 22:28:13.415 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.418 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.423 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.426 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.427 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.428 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.429 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.430 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.433 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.436 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.439 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.441 +03:00 [DBG] Context 'AppDbContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:28:13.442 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:28:13.442 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:13.444 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:28:13.445 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:28:13.447 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:28:13.448 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:28:13.449 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:28:13.451 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:28:13.453 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.Entities.Image, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:28:13.455 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API) in 99.6033ms
2024-08-23 22:28:13.457 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetImagesForRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:28:13.458 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:28:13.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/44/images - - - 200 - application/json;+charset=utf-8 138.1151ms
2024-08-23 22:28:19.283 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" received FIN.
2024-08-23 22:28:19.285 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" is closed. The last processed stream ID was 3.
2024-08-23 22:28:19.290 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:28:19.294 +03:00 [DBG] Connection id "0HN63KRUQ6GIK" stopped.
2024-08-23 22:38:17.350 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:38:17.497 +03:00 [DBG] Hosting starting
2024-08-23 22:38:17.558 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:38:17.564 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:38:17.601 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:38:17.605 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:38:17.606 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:38:17.619 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:38:17.642 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:38:17.644 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:38:17.645 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:38:17.654 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:38:17.660 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:38:17.667 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:38:17.671 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:38:17.679 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:38:17.686 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:38:17.692 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:38:17.695 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:38:17.998 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:38:18.102 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:38:18.105 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:38:18.108 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:38:18.109 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:38:18.110 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:38:18.111 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:38:18.112 +03:00 [INF] Hosting environment: Development
2024-08-23 22:38:18.113 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:38:18.114 +03:00 [DBG] Hosting started
2024-08-23 22:38:18.369 +03:00 [DBG] Connection id "0HN63LCHPE5IF" received FIN.
2024-08-23 22:38:18.369 +03:00 [DBG] Connection id "0HN63LCHPE5IG" received FIN.
2024-08-23 22:38:18.387 +03:00 [DBG] Connection id "0HN63LCHPE5IF" accepted.
2024-08-23 22:38:18.387 +03:00 [DBG] Connection id "0HN63LCHPE5IG" accepted.
2024-08-23 22:38:18.391 +03:00 [DBG] Connection id "0HN63LCHPE5IG" started.
2024-08-23 22:38:18.391 +03:00 [DBG] Connection id "0HN63LCHPE5IF" started.
2024-08-23 22:38:18.433 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:38:18.433 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:38:18.546 +03:00 [DBG] Connection id "0HN63LCHPE5IG" stopped.
2024-08-23 22:38:18.546 +03:00 [DBG] Connection id "0HN63LCHPE5IF" stopped.
2024-08-23 22:38:18.551 +03:00 [DBG] Connection id "0HN63LCHPE5IF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:38:18.551 +03:00 [DBG] Connection id "0HN63LCHPE5IG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:38:21.084 +03:00 [DBG] Connection id "0HN63LCHPE5IH" accepted.
2024-08-23 22:38:21.087 +03:00 [DBG] Connection id "0HN63LCHPE5IH" started.
2024-08-23 22:38:21.249 +03:00 [DBG] Connection 0HN63LCHPE5IH established using the following protocol: "Tls13"
2024-08-23 22:38:21.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:38:21.734 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:38:21.788 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:38:21.791 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:38:22.084 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:38:22.124 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:38:22.144 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:38:22.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 660.1132ms
2024-08-23 22:38:22.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 8.9691ms
2024-08-23 22:38:22.164 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:38:22.259 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 95.6022ms
2024-08-23 22:38:23.664 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:38:23.668 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:38:23.672 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:38:24.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 386.2666ms
2024-08-23 22:38:30.056 +03:00 [DBG] Connection id "0HN63LCHPE5IH" received FIN.
2024-08-23 22:38:30.072 +03:00 [DBG] Connection id "0HN63LCHPE5IH" is closed. The last processed stream ID was 7.
2024-08-23 22:38:30.077 +03:00 [DBG] Connection id "0HN63LCHPE5IH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:38:30.096 +03:00 [DBG] Connection id "0HN63LCHPE5IH" stopped.
2024-08-23 22:38:33.399 +03:00 [DBG] Connection id "0HN63LCHPE5II" accepted.
2024-08-23 22:38:33.401 +03:00 [DBG] Connection id "0HN63LCHPE5II" started.
2024-08-23 22:38:33.417 +03:00 [DBG] Connection 0HN63LCHPE5II established using the following protocol: "Tls13"
2024-08-23 22:38:33.424 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - -
2024-08-23 22:38:33.433 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:38:33.448 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:38:33.452 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:38:33.459 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:38:33.557 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:38:33.564 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:38:33.621 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:38:33.627 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:38:33.630 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:38:33.632 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:38:33.634 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:38:33.636 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:38:33.638 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:38:33.935 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:38:34.350 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:38:34.362 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:38:34.366 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:38:34.370 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:38:34.374 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:38:34.376 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:38:34.420 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:38:35.466 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:38:35.472 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:38:35.475 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:38:35.477 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:38:35.478 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:38:35.620 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:38:35.623 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:38:35.625 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:38:35.698 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:38:35.701 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:38:35.704 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:38:35.978 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:38:36.178 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 22:38:36.341 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 22:38:36.346 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:38:36.351 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 22:38:36.763 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:38:36.850 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:38:36.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2024-08-23 22:38:36.948 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:38:37.443 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:38:37.479 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:38:37.619 +03:00 [INF] Executed DbCommand (157ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:38:37.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:38:37.785 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:38:37.822 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:38:37.850 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:38:37.853 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:38:37.856 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:38:37.891 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:38:37.912 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:38:37.922 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:38:37.927 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:38:37.940 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:38:37.966 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:38:37.977 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:38:37.978 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:38:37.979 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:38:37.981 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:38:37.983 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:38:38.029 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 4384.426ms
2024-08-23 22:38:38.032 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:38:38.045 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:38:38.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - - - 200 - application/json;+charset=utf-8 4629.6570ms
2024-08-23 22:38:40.075 +03:00 [DBG] Connection id "0HN63LCHPE5II" received FIN.
2024-08-23 22:38:40.078 +03:00 [DBG] Connection id "0HN63LCHPE5II" is closed. The last processed stream ID was 1.
2024-08-23 22:38:40.082 +03:00 [DBG] Connection id "0HN63LCHPE5II" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:38:40.099 +03:00 [DBG] Connection id "0HN63LCHPE5II" stopped.
2024-08-23 22:39:27.823 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:39:27.995 +03:00 [DBG] Hosting starting
2024-08-23 22:39:28.050 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:39:28.057 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:39:28.067 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:39:28.070 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:39:28.073 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:39:28.081 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:39:28.090 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:39:28.093 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:39:28.094 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:39:28.110 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:39:28.120 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:39:28.131 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:39:28.138 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:39:28.153 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:39:28.162 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:39:28.176 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:39:28.180 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:39:28.444 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:39:28.549 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:39:28.552 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:39:28.556 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:39:28.558 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:39:28.560 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:39:28.562 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:39:28.563 +03:00 [INF] Hosting environment: Development
2024-08-23 22:39:28.565 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:39:28.568 +03:00 [DBG] Hosting started
2024-08-23 22:39:28.817 +03:00 [DBG] Connection id "0HN63LD6P6V13" accepted.
2024-08-23 22:39:28.819 +03:00 [DBG] Connection id "0HN63LD6P6V13" received FIN.
2024-08-23 22:39:28.827 +03:00 [DBG] Connection id "0HN63LD6P6V13" started.
2024-08-23 22:39:28.860 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:39:28.938 +03:00 [DBG] Connection id "0HN63LD6P6V13" stopped.
2024-08-23 22:39:28.943 +03:00 [DBG] Connection id "0HN63LD6P6V13" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:39:31.149 +03:00 [DBG] Connection id "0HN63LD6P6V14" accepted.
2024-08-23 22:39:31.152 +03:00 [DBG] Connection id "0HN63LD6P6V14" started.
2024-08-23 22:39:31.228 +03:00 [DBG] Connection 0HN63LD6P6V14 established using the following protocol: "Tls13"
2024-08-23 22:39:31.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:39:31.517 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:39:31.557 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:39:31.562 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:39:31.813 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:39:31.851 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:39:31.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:39:31.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 527.3466ms
2024-08-23 22:39:31.880 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 7.3780ms
2024-08-23 22:39:31.894 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:39:32.006 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 112.1759ms
2024-08-23 22:39:33.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:39:33.775 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:39:33.778 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:39:34.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 440.3443ms
2024-08-23 22:39:35.145 +03:00 [DBG] Connection id "0HN63LD6P6V14" received FIN.
2024-08-23 22:39:35.165 +03:00 [DBG] Connection id "0HN63LD6P6V14" is closed. The last processed stream ID was 7.
2024-08-23 22:39:35.171 +03:00 [DBG] Connection id "0HN63LD6P6V14" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:39:35.189 +03:00 [DBG] Connection id "0HN63LD6P6V14" stopped.
2024-08-23 22:39:50.636 +03:00 [DBG] Connection id "0HN63LD6P6V15" accepted.
2024-08-23 22:39:50.639 +03:00 [DBG] Connection id "0HN63LD6P6V15" started.
2024-08-23 22:39:50.653 +03:00 [DBG] Connection 0HN63LD6P6V15 established using the following protocol: "Tls13"
2024-08-23 22:39:50.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - -
2024-08-23 22:39:50.668 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:39:50.680 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:39:50.683 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:39:50.685 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:39:50.775 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:39:50.781 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:39:50.830 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:39:50.836 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:39:50.838 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:39:50.842 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:39:50.846 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:39:50.847 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:39:50.849 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:39:51.115 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:39:51.566 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:39:51.577 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:39:51.581 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:39:51.583 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:39:51.585 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:39:51.586 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:39:51.625 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:39:52.622 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:39:52.625 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:39:52.627 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:39:52.629 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:39:52.630 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:39:52.820 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:39:52.822 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:39:52.827 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:39:52.891 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:39:52.896 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:39:52.898 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:39:53.160 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:39:53.342 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 22:39:53.573 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 22:39:53.578 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:39:53.582 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 22:39:54.096 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:39:54.179 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:39:54.259 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2024-08-23 22:39:54.289 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:39:54.744 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:39:54.770 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:39:54.906 +03:00 [INF] Executed DbCommand (143ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:39:55.046 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:39:55.117 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:39:55.154 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:39:55.183 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:39:55.186 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:39:55.189 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:39:55.201 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:39:55.228 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:39:55.241 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:39:55.245 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:39:55.263 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:39:55.310 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:39:55.322 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:39:55.325 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:39:55.328 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:39:55.330 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:39:55.332 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:39:55.376 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 4517.0568ms
2024-08-23 22:39:55.383 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:39:55.406 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:39:55.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - - - 200 - application/json;+charset=utf-8 4758.9075ms
2024-08-23 22:40:30.361 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:40:30.500 +03:00 [DBG] Hosting starting
2024-08-23 22:40:30.550 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:40:30.554 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:40:30.561 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:40:30.564 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:40:30.565 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:40:30.571 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:40:30.580 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:40:30.583 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:40:30.586 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:40:30.598 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:40:30.603 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:40:30.611 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:40:30.614 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:40:30.621 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:40:30.628 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:40:30.634 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:40:30.637 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:40:30.840 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:40:30.915 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:40:30.918 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:40:30.922 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:40:30.923 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:40:30.924 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:40:30.926 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:40:30.927 +03:00 [INF] Hosting environment: Development
2024-08-23 22:40:30.928 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:40:30.929 +03:00 [DBG] Hosting started
2024-08-23 22:40:31.220 +03:00 [DBG] Connection id "0HN63LDPCC2NG" accepted.
2024-08-23 22:40:31.225 +03:00 [DBG] Connection id "0HN63LDPCC2NG" started.
2024-08-23 22:40:31.250 +03:00 [DBG] Connection id "0HN63LDPCC2NG" received FIN.
2024-08-23 22:40:31.265 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:40:31.317 +03:00 [DBG] Connection id "0HN63LDPCC2NG" stopped.
2024-08-23 22:40:31.321 +03:00 [DBG] Connection id "0HN63LDPCC2NG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:40:33.884 +03:00 [DBG] Connection id "0HN63LDPCC2NH" accepted.
2024-08-23 22:40:33.889 +03:00 [DBG] Connection id "0HN63LDPCC2NH" started.
2024-08-23 22:40:33.967 +03:00 [DBG] Connection 0HN63LDPCC2NH established using the following protocol: "Tls13"
2024-08-23 22:40:34.041 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:40:34.214 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:40:34.268 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:40:34.272 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:40:34.590 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:40:34.625 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:40:34.644 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 610.2532ms
2024-08-23 22:40:34.648 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:40:34.655 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 7.5750ms
2024-08-23 22:40:34.668 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:40:34.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 102.1893ms
2024-08-23 22:40:36.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:40:36.188 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:40:36.190 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:40:36.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 391.4485ms
2024-08-23 22:40:40.203 +03:00 [DBG] Connection id "0HN63LDPCC2NH" received FIN.
2024-08-23 22:40:40.212 +03:00 [DBG] Connection id "0HN63LDPCC2NH" is closed. The last processed stream ID was 7.
2024-08-23 22:40:40.216 +03:00 [DBG] Connection id "0HN63LDPCC2NH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:40:40.226 +03:00 [DBG] Connection id "0HN63LDPCC2NH" stopped.
2024-08-23 22:40:44.024 +03:00 [DBG] Connection id "0HN63LDPCC2NI" accepted.
2024-08-23 22:40:44.026 +03:00 [DBG] Connection id "0HN63LDPCC2NI" started.
2024-08-23 22:40:44.031 +03:00 [DBG] Connection 0HN63LDPCC2NI established using the following protocol: "Tls13"
2024-08-23 22:40:44.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - -
2024-08-23 22:40:44.043 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Hotel/48/amenities'
2024-08-23 22:40:44.057 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)' with route pattern 'api/Hotel/{hotelId}/amenities' is valid for the request path '/api/Hotel/48/amenities'
2024-08-23 22:40:44.060 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:40:44.064 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:40:44.137 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:40:44.143 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:40:44.181 +03:00 [INF] Route matched with {action = "GetAmenitiesByHotelId", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAmenitiesByHotelId(Int32) on controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API).
2024-08-23 22:40:44.186 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:40:44.188 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:40:44.190 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:40:44.192 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:40:44.194 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:40:44.195 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:40:44.390 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:40:44.714 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.HotelController (HotelBookingPlatform.API)
2024-08-23 22:40:44.724 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:40:44.728 +03:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int32' using the name 'hotelId' in request data ...
2024-08-23 22:40:44.731 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:40:44.732 +03:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:40:44.734 +03:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int32' ...
2024-08-23 22:40:44.763 +03:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int32'.
2024-08-23 22:40:45.712 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:40:45.716 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:40:45.718 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:40:45.719 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:40:45.722 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:40:45.835 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:40:45.838 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:40:45.840 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:40:45.895 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:40:45.897 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:40:45.900 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:40:46.151 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:40:46.284 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.Amenities)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __hotelId_0)'
2024-08-23 22:40:46.401 +03:00 [DBG] Including navigation: 'Hotel.Amenities'.
2024-08-23 22:40:46.841 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> 0
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM Hotels AS h
            WHERE h.HotelId == @__hotelId_0
            ORDER BY h.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:40:46.939 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:40:47.036 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (92ms).
2024-08-23 22:40:47.088 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:40:47.627 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:40:47.676 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 22:40:47.813 +03:00 [INF] Executed DbCommand (155ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__hotelId_0
ORDER BY [h].[HotelId]
2024-08-23 22:40:47.990 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:40:48.102 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:40:48.105 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:40:48.108 +03:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-23 22:40:48.128 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AmenityID], [a].[Description], [a].[HotelId], [a].[Name], [t].[HotelId]
FROM (
    SELECT TOP(1) [h].[HotelId]
    FROM [Hotels] AS [h]
    WHERE [h].[HotelId] = @__hotelId_0
) AS [t]
INNER JOIN [Amenities] AS [a] ON [t].[HotelId] = [a].[HotelId]
ORDER BY [t].[HotelId]
2024-08-23 22:40:48.168 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:40:48.198 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:40:48.202 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:40:48.204 +03:00 [DBG] Context 'AppDbContext' started tracking 'Amenity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:40:48.225 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:40:48.236 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:40:48.242 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:40:48.272 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:40:48.337 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:40:48.346 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:40:48.348 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:40:48.350 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:40:48.355 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:40:48.359 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Amenity.AmenityResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:40:48.412 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API) in 4208.2912ms
2024-08-23 22:40:48.423 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.HotelController.GetAmenitiesByHotelId (HotelBookingPlatform.API)'
2024-08-23 22:40:48.443 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:40:48.455 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Hotel/48/amenities - - - 200 - application/json;+charset=utf-8 4420.1404ms
2024-08-23 22:40:50.215 +03:00 [DBG] Connection id "0HN63LDPCC2NI" received FIN.
2024-08-23 22:40:50.218 +03:00 [DBG] Connection id "0HN63LDPCC2NI" is closed. The last processed stream ID was 1.
2024-08-23 22:40:50.221 +03:00 [DBG] Connection id "0HN63LDPCC2NI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:40:50.231 +03:00 [DBG] Connection id "0HN63LDPCC2NI" stopped.
2024-08-23 22:42:36.552 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:42:36.687 +03:00 [DBG] Hosting starting
2024-08-23 22:42:36.729 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:42:36.734 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:42:36.741 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:42:36.744 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:42:36.745 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:42:36.751 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:42:36.759 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:42:36.761 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:42:36.762 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:42:36.772 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:42:36.778 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:42:36.784 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:42:36.786 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:42:36.793 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:42:36.799 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:42:36.807 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:42:36.810 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:42:36.987 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:42:37.062 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:42:37.064 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:42:37.065 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:42:37.067 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:42:37.068 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:42:37.069 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:42:37.070 +03:00 [INF] Hosting environment: Development
2024-08-23 22:42:37.072 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:42:37.073 +03:00 [DBG] Hosting started
2024-08-23 22:42:37.302 +03:00 [DBG] Connection id "0HN63LEUUPB79" accepted.
2024-08-23 22:42:37.308 +03:00 [DBG] Connection id "0HN63LEUUPB79" started.
2024-08-23 22:42:37.318 +03:00 [DBG] Connection id "0HN63LEUUPB7A" accepted.
2024-08-23 22:42:37.320 +03:00 [DBG] Connection id "0HN63LEUUPB7A" started.
2024-08-23 22:42:37.337 +03:00 [DBG] Connection id "0HN63LEUUPB79" received FIN.
2024-08-23 22:42:37.337 +03:00 [DBG] Connection id "0HN63LEUUPB7A" received FIN.
2024-08-23 22:42:37.349 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:42:37.349 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:42:37.399 +03:00 [DBG] Connection id "0HN63LEUUPB7A" stopped.
2024-08-23 22:42:37.399 +03:00 [DBG] Connection id "0HN63LEUUPB79" stopped.
2024-08-23 22:42:37.402 +03:00 [DBG] Connection id "0HN63LEUUPB7A" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:42:37.403 +03:00 [DBG] Connection id "0HN63LEUUPB79" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:42:40.398 +03:00 [DBG] Connection id "0HN63LEUUPB7B" accepted.
2024-08-23 22:42:40.434 +03:00 [DBG] Connection id "0HN63LEUUPB7B" started.
2024-08-23 22:42:40.538 +03:00 [DBG] Connection 0HN63LEUUPB7B established using the following protocol: "Tls13"
2024-08-23 22:42:40.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:42:40.877 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:42:40.940 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:42:40.942 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:42:41.218 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:42:41.252 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:42:41.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 655.0740ms
2024-08-23 22:42:41.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:42:41.286 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 7.6921ms
2024-08-23 22:42:41.298 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:42:41.410 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 112.9048ms
2024-08-23 22:42:42.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:42:42.665 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:42:42.666 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:42:43.136 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 473.9093ms
2024-08-23 22:42:45.436 +03:00 [DBG] Connection id "0HN63LEUUPB7B" received FIN.
2024-08-23 22:42:45.447 +03:00 [DBG] Connection id "0HN63LEUUPB7B" is closed. The last processed stream ID was 7.
2024-08-23 22:42:45.451 +03:00 [DBG] Connection id "0HN63LEUUPB7B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:42:45.467 +03:00 [DBG] Connection id "0HN63LEUUPB7B" stopped.
2024-08-23 22:42:55.848 +03:00 [DBG] Connection id "0HN63LEUUPB7C" accepted.
2024-08-23 22:42:55.852 +03:00 [DBG] Connection id "0HN63LEUUPB7C" started.
2024-08-23 22:42:55.856 +03:00 [DBG] Connection 0HN63LEUUPB7C established using the following protocol: "Tls13"
2024-08-23 22:42:55.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=false - -
2024-08-23 22:42:55.873 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58'
2024-08-23 22:42:55.885 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)' with route pattern 'api/City/{id}' is valid for the request path '/api/City/58'
2024-08-23 22:42:55.889 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:42:55.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:42:55.969 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:42:55.975 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:42:56.017 +03:00 [INF] Route matched with {action = "GetCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:42:56.022 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:42:56.024 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:42:56.026 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:42:56.028 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:42:56.030 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:42:56.034 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:42:56.237 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:42:56.515 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:42:56.531 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:42:56.536 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:42:56.538 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:42:56.539 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:42:56.541 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:42:56.568 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:42:56.574 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:42:56.577 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' using the name 'includeHotels' in request data ...
2024-08-23 22:42:56.580 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:42:56.582 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:42:56.583 +03:00 [DBG] Attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:42:56.584 +03:00 [DBG] Done attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:42:57.560 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:42:57.566 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:42:57.568 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:42:57.570 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:42:57.571 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:42:57.709 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:42:57.713 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:42:57.717 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:42:57.780 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:42:57.783 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:42:57.785 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:42:58.018 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:42:58.160 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .AsNoTracking()
    .SingleOrDefault(c => c.CityID == __cityId_0)'
2024-08-23 22:42:58.543 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
            SELECT TOP(2) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
            FROM Cities AS c
            WHERE c.CityID == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:42:58.636 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:42:58.688 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (55ms).
2024-08-23 22:42:58.720 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.117 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.148 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__cityId_0
2024-08-23 22:42:59.281 +03:00 [INF] Executed DbCommand (145ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__cityId_0
2024-08-23 22:42:59.335 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:42:59.349 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.363 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.395 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .FirstOrDefault(e => EF.Property<int>(e, "CityID") == __p_0)'
2024-08-23 22:42:59.422 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
            SELECT TOP(1) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
            FROM Cities AS c
            WHERE c.CityID == @__p_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:42:59.425 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:42:59.426 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:42:59.428 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.432 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.435 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:42:59.454 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:42:59.505 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:42:59.559 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:42:59.563 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.568 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.626 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:42:59.641 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:42:59.649 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:42:59.658 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:42:59.702 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.707 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.717 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:42:59.736 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:42:59.814 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:42:59.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:42:59.819 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:42:59.842 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:42:59.854 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:42:59.866 +03:00 [DBG] Committing transaction.
2024-08-23 22:42:59.875 +03:00 [DBG] Committed transaction.
2024-08-23 22:42:59.885 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.888 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:42:59.894 +03:00 [DBG] Disposing transaction.
2024-08-23 22:42:59.906 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:42:59.915 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:42:59.954 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:42:59.965 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:42:59.967 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:42:59.969 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:42:59.971 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:42:59.974 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.City.CityWithHotelsResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:43:00.051 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API) in 4011.8365ms
2024-08-23 22:43:00.056 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:43:00.071 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:43:00.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=false - - - 200 - application/json;+charset=utf-8 4215.7639ms
2024-08-23 22:43:00.445 +03:00 [DBG] Connection id "0HN63LEUUPB7C" received FIN.
2024-08-23 22:43:00.448 +03:00 [DBG] Connection id "0HN63LEUUPB7C" is closed. The last processed stream ID was 1.
2024-08-23 22:43:00.451 +03:00 [DBG] Connection id "0HN63LEUUPB7C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:43:00.460 +03:00 [DBG] Connection id "0HN63LEUUPB7C" stopped.
2024-08-23 22:43:04.938 +03:00 [DBG] Connection id "0HN63LEUUPB7D" accepted.
2024-08-23 22:43:04.941 +03:00 [DBG] Connection id "0HN63LEUUPB7D" started.
2024-08-23 22:43:04.983 +03:00 [DBG] Connection 0HN63LEUUPB7D established using the following protocol: "Tls13"
2024-08-23 22:43:04.988 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=true - -
2024-08-23 22:43:04.992 +03:00 [DBG] 1 candidate(s) found for the request path '/api/City/58'
2024-08-23 22:43:04.994 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)' with route pattern 'api/City/{id}' is valid for the request path '/api/City/58'
2024-08-23 22:43:04.999 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:43:05.000 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:43:05.002 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:43:05.003 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:43:05.004 +03:00 [INF] Route matched with {action = "GetCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API).
2024-08-23 22:43:05.006 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:43:05.007 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:43:05.009 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:43:05.013 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:43:05.016 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:43:05.018 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:43:05.024 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.CityController (HotelBookingPlatform.API)
2024-08-23 22:43:05.042 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-23 22:43:05.043 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-23 22:43:05.047 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:43:05.049 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-23 22:43:05.051 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-23 22:43:05.053 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-23 22:43:05.054 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:43:05.055 +03:00 [DBG] Attempting to bind parameter 'includeHotels' of type 'System.Boolean' using the name 'includeHotels' in request data ...
2024-08-23 22:43:05.057 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:43:05.059 +03:00 [DBG] Done attempting to bind parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:43:05.061 +03:00 [DBG] Attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean' ...
2024-08-23 22:43:05.063 +03:00 [DBG] Done attempting to validate the bound parameter 'includeHotels' of type 'System.Boolean'.
2024-08-23 22:43:05.067 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:43:05.074 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .AsNoTracking()
    .Include(c => c.Hotels)
    .ThenInclude(h => h.Owner)
    .SingleOrDefault(c => c.CityID == __cityId_0)'
2024-08-23 22:43:05.095 +03:00 [DBG] Including navigation: 'City.Hotels'.
2024-08-23 22:43:05.111 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:43:05.256 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Country (string) Required, 1], [Property: City.CreatedAtUtc (DateTime) Required, 2], [Property: City.Description (string) Required, 3], [Property: City.Name (string) Required, 4], [Property: City.PostOffice (string) Required, 5], [Property: City.VisitCount (int) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Hotel.CityID (int) Required FK Index, 8], [Property: Hotel.CreatedAtUtc (DateTime) Required, 9], [Property: Hotel.Description (string) MaxLength(500), 10], [Property: Hotel.Name (string) Required MaxLength(100), 11], [Property: Hotel.OwnerID (int) Required FK Index, 12], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 13], [Property: Hotel.StarRating (int) Required, 14] }
                3 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                4 -> 7
                5 -> 15
            SELECT t.CityID, t.Country, t.CreatedAtUtc, t.Description, t.Name, t.PostOffice, t.VisitCount, t0.HotelId, t0.CityID, t0.CreatedAtUtc, t0.Description, t0.Name, t0.OwnerID, t0.PhoneNumber, t0.StarRating, t0.OwnerID0, t0.Email, t0.FirstName, t0.LastName, t0.PhoneNumber0
            FROM 
            (
                SELECT TOP(2) c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount
                FROM Cities AS c
                WHERE c.CityID == @__cityId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, o.OwnerID AS OwnerID0, o.Email, o.FirstName, o.LastName, o.PhoneNumber AS PhoneNumber0
                FROM Hotels AS h
                INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            ) AS t0 ON t.CityID == t0.CityID
            ORDER BY t.CityID ASC, t0.HotelId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:43:05.266 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:05.269 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:43:05.270 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.271 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.273 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[CityID], [t].[Country], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[PostOffice], [t].[VisitCount], [t0].[HotelId], [t0].[CityID], [t0].[CreatedAtUtc], [t0].[Description], [t0].[Name], [t0].[OwnerID], [t0].[PhoneNumber], [t0].[StarRating], [t0].[OwnerID0], [t0].[Email], [t0].[FirstName], [t0].[LastName], [t0].[PhoneNumber0]
FROM (
    SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
    FROM [Cities] AS [c]
    WHERE [c].[CityID] = @__cityId_0
) AS [t]
LEFT JOIN (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID] AS [OwnerID0], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber] AS [PhoneNumber0]
    FROM [Hotels] AS [h]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
) AS [t0] ON [t].[CityID] = [t0].[CityID]
ORDER BY [t].[CityID], [t0].[HotelId]
2024-08-23 22:43:05.303 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[CityID], [t].[Country], [t].[CreatedAtUtc], [t].[Description], [t].[Name], [t].[PostOffice], [t].[VisitCount], [t0].[HotelId], [t0].[CityID], [t0].[CreatedAtUtc], [t0].[Description], [t0].[Name], [t0].[OwnerID], [t0].[PhoneNumber], [t0].[StarRating], [t0].[OwnerID0], [t0].[Email], [t0].[FirstName], [t0].[LastName], [t0].[PhoneNumber0]
FROM (
    SELECT TOP(2) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
    FROM [Cities] AS [c]
    WHERE [c].[CityID] = @__cityId_0
) AS [t]
LEFT JOIN (
    SELECT [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [o].[OwnerID] AS [OwnerID0], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber] AS [PhoneNumber0]
    FROM [Hotels] AS [h]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
) AS [t0] ON [t].[CityID] = [t0].[CityID]
ORDER BY [t].[CityID], [t0].[HotelId]
2024-08-23 22:43:05.321 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:05.322 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.325 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.331 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:05.334 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:43:05.336 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.337 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:43:05.343 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount]
FROM [Cities] AS [c]
WHERE [c].[CityID] = @__p_0
2024-08-23 22:43:05.350 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:05.351 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:05.352 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.353 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.354 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:05.356 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:43:05.357 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:43:05.358 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:43:05.359 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.362 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.365 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:43:05.366 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:43:05.367 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:05.368 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:43:05.370 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:43:05.374 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cities] SET [VisitCount] = @p0
WHERE [CityID] = @p1;
SELECT @@ROWCOUNT;
2024-08-23 22:43:05.376 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:05.377 +03:00 [DBG] Committing transaction.
2024-08-23 22:43:05.380 +03:00 [DBG] Committed transaction.
2024-08-23 22:43:05.383 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.384 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:05.386 +03:00 [DBG] Disposing transaction.
2024-08-23 22:43:05.386 +03:00 [DBG] An entity of type 'City' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:05.388 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:43:05.403 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:43:05.406 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:43:05.407 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:43:05.408 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:43:05.409 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:43:05.411 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.City.CityWithHotelsResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:43:05.418 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API) in 400.1182ms
2024-08-23 22:43:05.421 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.CityController.GetCity (HotelBookingPlatform.API)'
2024-08-23 22:43:05.422 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:43:05.424 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/City/58?includeHotels=true - - - 200 - application/json;+charset=utf-8 436.3883ms
2024-08-23 22:43:05.450 +03:00 [DBG] Connection id "0HN63LEUUPB7D" received FIN.
2024-08-23 22:43:05.452 +03:00 [DBG] Connection id "0HN63LEUUPB7D" is closed. The last processed stream ID was 1.
2024-08-23 22:43:05.454 +03:00 [DBG] Connection id "0HN63LEUUPB7D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:43:05.457 +03:00 [DBG] Connection id "0HN63LEUUPB7D" stopped.
2024-08-23 22:43:29.574 +03:00 [DBG] Connection id "0HN63LEUUPB7E" accepted.
2024-08-23 22:43:29.577 +03:00 [DBG] Connection id "0HN63LEUUPB7E" started.
2024-08-23 22:43:29.594 +03:00 [DBG] Connection 0HN63LEUUPB7E established using the following protocol: "Tls13"
2024-08-23 22:43:29.599 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 72
2024-08-23 22:43:29.616 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:43:29.622 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:43:29.625 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:43:29.626 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:43:29.633 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:43:29.638 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:43:29.641 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:43:29.645 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:43:29.648 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:43:29.650 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:43:29.654 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:43:29.656 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:43:29.659 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:43:29.660 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:43:29.666 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:43:29.671 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:43:29.676 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:43:29.678 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:43:29.695 +03:00 [DBG] Connection id "0HN63LEUUPB7E", Request id "0HN63LEUUPB7E:00000001": started reading request body.
2024-08-23 22:43:29.698 +03:00 [DBG] Connection id "0HN63LEUUPB7E", Request id "0HN63LEUUPB7E:00000001": done reading request body.
2024-08-23 22:43:29.729 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:43:29.732 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:43:29.736 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:43:29.740 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:43:29.747 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:43:29.828 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:43:29.838 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-23 22:43:29.843 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 22:43:29.875 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:43:29.889 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:29.892 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:43:29.895 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:29.896 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:29.897 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:43:29.927 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:43:29.962 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:30.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:30.113 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:30.115 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:43:30.117 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:30.120 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.123 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.191 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-23 22:43:30.206 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:43:30.209 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:30.210 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:43:30.211 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.213 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.214 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:43:30.232 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:43:30.253 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:30.257 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.260 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.280 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-23 22:43:30.292 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:43:30.295 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:30.296 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:43:30.298 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.299 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.302 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:43:30.327 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:43:30.330 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:30.331 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.333 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:43:30.358 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:43:30.359 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.360 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.361 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:43:30.370 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:43:30.374 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:43:30.376 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.378 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:43:30.546 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:43:30.551 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:43:30.552 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:43:30.554 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:43:30.556 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:43:30.557 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:43:30.566 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 905.4421ms
2024-08-23 22:43:30.569 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:43:30.572 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:43:30.574 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 72 - 200 - application/json;+charset=utf-8 975.6860ms
2024-08-23 22:43:40.500 +03:00 [DBG] Connection id "0HN63LEUUPB7E" received FIN.
2024-08-23 22:43:40.503 +03:00 [DBG] Connection id "0HN63LEUUPB7E" is closed. The last processed stream ID was 1.
2024-08-23 22:43:40.504 +03:00 [DBG] Connection id "0HN63LEUUPB7E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:43:40.510 +03:00 [DBG] Connection id "0HN63LEUUPB7E" stopped.
2024-08-23 22:44:37.438 +03:00 [DBG] Connection id "0HN63LEUUPB7F" accepted.
2024-08-23 22:44:37.449 +03:00 [DBG] Connection id "0HN63LEUUPB7F" started.
2024-08-23 22:44:37.472 +03:00 [DBG] Connection 0HN63LEUUPB7F established using the following protocol: "Tls13"
2024-08-23 22:44:37.482 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 99
2024-08-23 22:44:37.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:44:37.503 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:44:37.505 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:44:37.507 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:44:37.509 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:44:37.648 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:44:37.652 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:44:37.666 +03:00 [DBG] Authorization was successful.
2024-08-23 22:44:37.669 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:44:37.679 +03:00 [INF] Route matched with {action = "AddRoomToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:44:37.683 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:44:37.685 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:44:37.687 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:44:37.692 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:44:37.694 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:44:37.696 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:44:37.704 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:44:37.707 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:44:37.709 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:44:37.713 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:44:37.714 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:44:37.715 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:44:37.717 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:44:37.718 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:44:37.719 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' using the name '' in request data ...
2024-08-23 22:44:37.721 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:44:37.734 +03:00 [DBG] Connection id "0HN63LEUUPB7F", Request id "0HN63LEUUPB7F:00000001": started reading request body.
2024-08-23 22:44:37.737 +03:00 [DBG] Connection id "0HN63LEUUPB7F", Request id "0HN63LEUUPB7F:00000001": done reading request body.
2024-08-23 22:44:37.752 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'
2024-08-23 22:44:37.755 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:44:37.756 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:44:37.760 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:44:37.767 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:44:37.777 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:44:37.782 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 22:44:37.785 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-23 22:44:37.793 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:44:37.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:44:37.797 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:44:37.799 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:44:37.800 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:44:37.801 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:44:37.815 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:44:37.835 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:44:37.860 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:44:37.879 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:44:37.882 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:44:37.883 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:44:38.086 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API) in 389.1905ms
2024-08-23 22:44:38.092 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:44:38.348 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:44:38.351 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 99 - 500 - application/json 869.4571ms
2024-08-23 22:44:45.573 +03:00 [DBG] Connection id "0HN63LEUUPB7F" received FIN.
2024-08-23 22:44:45.580 +03:00 [DBG] Connection id "0HN63LEUUPB7F" is closed. The last processed stream ID was 1.
2024-08-23 22:44:45.586 +03:00 [DBG] Connection id "0HN63LEUUPB7F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:44:45.593 +03:00 [DBG] Connection id "0HN63LEUUPB7F" stopped.
2024-08-23 22:46:07.021 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 22:46:07.216 +03:00 [DBG] Hosting starting
2024-08-23 22:46:07.282 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 22:46:07.289 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 22:46:07.326 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 22:46:07.329 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 22:46:07.331 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 22:46:07.347 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 22:46:07.364 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 22:46:07.368 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 22:46:07.370 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 22:46:07.387 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 22:46:07.394 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:46:07.403 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 22:46:07.406 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 22:46:07.423 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 22:46:07.432 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 22:46:07.446 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 22:46:07.455 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 22:46:07.831 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 22:46:07.918 +03:00 [DBG] Connection id "0HN63LGTNCRA0" received FIN.
2024-08-23 22:46:07.934 +03:00 [DBG] Connection id "0HN63LGTNCRA0" accepted.
2024-08-23 22:46:07.936 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 22:46:07.938 +03:00 [DBG] Connection id "0HN63LGTNCRA0" started.
2024-08-23 22:46:07.939 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 22:46:07.945 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 22:46:07.946 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 22:46:07.947 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 22:46:07.950 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 22:46:07.952 +03:00 [INF] Hosting environment: Development
2024-08-23 22:46:07.953 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 22:46:07.955 +03:00 [DBG] Hosting started
2024-08-23 22:46:08.009 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 22:46:08.132 +03:00 [DBG] Connection id "0HN63LGTNCRA0" stopped.
2024-08-23 22:46:08.141 +03:00 [DBG] Connection id "0HN63LGTNCRA0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:46:08.241 +03:00 [DBG] Connection id "0HN63LGTNCRA1" accepted.
2024-08-23 22:46:08.279 +03:00 [DBG] Connection id "0HN63LGTNCRA1" started.
2024-08-23 22:46:08.419 +03:00 [DBG] Connection 0HN63LGTNCRA1 established using the following protocol: "Tls13"
2024-08-23 22:46:08.611 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 22:46:09.031 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 22:46:09.141 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 22:46:09.143 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:46:09.648 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 22:46:09.704 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 22:46:09.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 22:46:09.732 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1134.6832ms
2024-08-23 22:46:09.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 14.0088ms
2024-08-23 22:46:09.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 22:46:09.917 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 152.5332ms
2024-08-23 22:46:10.704 +03:00 [DBG] Connection id "0HN63LGTNCRA1" received FIN.
2024-08-23 22:46:10.740 +03:00 [DBG] Connection id "0HN63LGTNCRA1" is closed. The last processed stream ID was 5.
2024-08-23 22:46:10.745 +03:00 [DBG] Connection id "0HN63LGTNCRA1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:46:10.754 +03:00 [DBG] Connection id "0HN63LGTNCRA1" stopped.
2024-08-23 22:46:11.657 +03:00 [DBG] Connection id "0HN63LGTNCRA2" accepted.
2024-08-23 22:46:11.659 +03:00 [DBG] Connection id "0HN63LGTNCRA2" started.
2024-08-23 22:46:11.675 +03:00 [DBG] Connection 0HN63LGTNCRA2 established using the following protocol: "Tls13"
2024-08-23 22:46:11.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 22:46:11.682 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 22:46:11.683 +03:00 [DBG] Request did not match any endpoints
2024-08-23 22:46:12.143 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 463.8503ms
2024-08-23 22:46:15.702 +03:00 [DBG] Connection id "0HN63LGTNCRA2" received FIN.
2024-08-23 22:46:15.707 +03:00 [DBG] Connection id "0HN63LGTNCRA2" is closed. The last processed stream ID was 1.
2024-08-23 22:46:15.713 +03:00 [DBG] Connection id "0HN63LGTNCRA2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:46:15.717 +03:00 [DBG] Connection id "0HN63LGTNCRA2" stopped.
2024-08-23 22:46:34.965 +03:00 [DBG] Connection id "0HN63LGTNCRA3" accepted.
2024-08-23 22:46:34.974 +03:00 [DBG] Connection id "0HN63LGTNCRA3" started.
2024-08-23 22:46:34.985 +03:00 [DBG] Connection 0HN63LGTNCRA3 established using the following protocol: "Tls13"
2024-08-23 22:46:34.988 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 73
2024-08-23 22:46:34.999 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:46:35.007 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:46:35.012 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:46:35.017 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:46:35.020 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:46:35.105 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 22:46:35.114 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:46:35.187 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:46:35.194 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:46:35.199 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:46:35.200 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:46:35.203 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:46:35.204 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:46:35.206 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:46:35.495 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 22:46:35.591 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:46:35.604 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:46:35.609 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:46:35.613 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:46:35.631 +03:00 [DBG] Connection id "0HN63LGTNCRA3", Request id "0HN63LGTNCRA3:00000001": started reading request body.
2024-08-23 22:46:35.635 +03:00 [DBG] Connection id "0HN63LGTNCRA3", Request id "0HN63LGTNCRA3:00000001": done reading request body.
2024-08-23 22:46:35.662 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:46:35.666 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:46:35.669 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:46:35.671 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:46:35.723 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:46:36.810 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 22:46:36.815 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 22:46:36.818 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 22:46:36.820 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 22:46:36.821 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 22:46:36.964 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:46:36.967 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:46:36.969 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 22:46:37.025 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:46:37.029 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:46:37.031 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 22:46:37.318 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:46:37.490 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-23 22:46:37.614 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 22:46:38.079 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:46:38.172 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:46:38.256 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (85ms).
2024-08-23 22:46:38.290 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:38.839 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:38.867 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:46:39.013 +03:00 [INF] Executed DbCommand (156ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:46:39.110 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:46:39.199 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:46:39.244 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:46:39.249 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:46:39.272 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:46:39.286 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.302 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.366 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-23 22:46:39.382 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:46:39.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:46:39.387 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:46:39.388 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.393 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.397 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:46:39.416 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:46:39.421 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:46:39.422 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.423 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.438 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-23 22:46:39.464 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:46:39.468 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:46:39.469 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:46:39.470 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.472 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.473 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:46:39.485 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:46:39.497 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:46:39.497 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.499 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.517 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:46:39.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:46:39.520 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.522 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.523 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:46:39.536 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:46:39.538 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:46:39.539 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.541 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:46:39.736 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:46:39.744 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:46:39.746 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:46:39.747 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:46:39.749 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:46:39.750 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:46:39.815 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 4601.3958ms
2024-08-23 22:46:39.821 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:46:39.842 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:46:39.856 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 73 - 200 - application/json;+charset=utf-8 4867.3005ms
2024-08-23 22:46:45.743 +03:00 [DBG] Connection id "0HN63LGTNCRA3" received FIN.
2024-08-23 22:46:45.745 +03:00 [DBG] Connection id "0HN63LGTNCRA3" is closed. The last processed stream ID was 1.
2024-08-23 22:46:45.747 +03:00 [DBG] Connection id "0HN63LGTNCRA3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:46:45.762 +03:00 [DBG] Connection id "0HN63LGTNCRA3" stopped.
2024-08-23 22:47:28.614 +03:00 [DBG] Connection id "0HN63LGTNCRA4" accepted.
2024-08-23 22:47:28.621 +03:00 [DBG] Connection id "0HN63LGTNCRA4" started.
2024-08-23 22:47:28.657 +03:00 [DBG] Connection 0HN63LGTNCRA4 established using the following protocol: "Tls13"
2024-08-23 22:47:28.677 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 98
2024-08-23 22:47:28.687 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:47:28.688 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:47:28.692 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:28.694 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:47:28.696 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:47:28.801 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:47:28.808 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:47:28.816 +03:00 [DBG] Authorization was successful.
2024-08-23 22:47:28.819 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:28.827 +03:00 [INF] Route matched with {action = "AddRoomToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:47:28.830 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:47:28.832 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:47:28.833 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:47:28.835 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:47:28.836 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:47:28.838 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:47:29.105 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:47:29.108 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:47:29.113 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:47:29.117 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:29.120 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:29.122 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:47:29.126 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:29.128 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:47:29.130 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' using the name '' in request data ...
2024-08-23 22:47:29.131 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:47:29.140 +03:00 [DBG] Connection id "0HN63LGTNCRA4", Request id "0HN63LGTNCRA4:00000001": started reading request body.
2024-08-23 22:47:29.143 +03:00 [DBG] Connection id "0HN63LGTNCRA4", Request id "0HN63LGTNCRA4:00000001": done reading request body.
2024-08-23 22:47:29.152 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'
2024-08-23 22:47:29.155 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:29.158 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:29.160 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:47:29.164 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:29.234 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:47:29.246 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Hotel)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 22:47:29.266 +03:00 [DBG] Including navigation: 'RoomClass.Hotel'.
2024-08-23 22:47:29.278 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Hotel.CityID (int) Required FK Index, 7], [Property: Hotel.CreatedAtUtc (DateTime) Required, 8], [Property: Hotel.Description (string) MaxLength(500), 9], [Property: Hotel.Name (string) Required MaxLength(100), 10], [Property: Hotel.OwnerID (int) Required FK Index, 11], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 12], [Property: Hotel.StarRating (int) Required, 13] }
            SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType, h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating
            FROM RoomClasses AS r
            INNER JOIN Hotels AS h ON r.HotelId == h.HotelId
            WHERE r.RoomClassID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:47:29.283 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:47:29.284 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:47:29.285 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.287 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.292 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:47:29.317 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:47:29.353 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.383 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.414 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:47:29.417 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.418 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.473 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'RoomClass.Rooms'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.509 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RoomID.Room'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.551 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.570 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:47:29.577 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:47:29.595 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:47:29.633 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.636 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.644 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:47:29.660 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:47:29.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:47:29.739 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:47:29.752 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rooms] ([AdultsCapacity], [ChildrenCapacity], [CreatedAtUtc], [Number], [PricePerNight], [RoomClassID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [RoomID]
FROM [Rooms]
WHERE @@ROWCOUNT = 1 AND [RoomID] = scope_identity();
2024-08-23 22:47:29.796 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rooms] ([AdultsCapacity], [ChildrenCapacity], [CreatedAtUtc], [Number], [PricePerNight], [RoomClassID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [RoomID]
FROM [Rooms]
WHERE @@ROWCOUNT = 1 AND [RoomID] = scope_identity();
2024-08-23 22:47:29.828 +03:00 [DBG] The foreign key property 'Room.RoomID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:47:29.837 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:47:29.848 +03:00 [DBG] Committing transaction.
2024-08-23 22:47:29.859 +03:00 [DBG] Committed transaction.
2024-08-23 22:47:29.867 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.869 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:29.876 +03:00 [DBG] Disposing transaction.
2024-08-23 22:47:29.897 +03:00 [DBG] An entity of type 'Room' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:29.905 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:47:29.913 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:47:29.917 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:47:29.918 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:47:29.918 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:47:29.919 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:47:29.921 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:47:29.935 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API) in 1096.9932ms
2024-08-23 22:47:29.938 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:29.942 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:47:29.945 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 98 - 201 - application/json;+charset=utf-8 1267.9512ms
2024-08-23 22:47:35.787 +03:00 [DBG] Connection id "0HN63LGTNCRA4" received FIN.
2024-08-23 22:47:35.790 +03:00 [DBG] Connection id "0HN63LGTNCRA4" is closed. The last processed stream ID was 1.
2024-08-23 22:47:35.793 +03:00 [DBG] Connection id "0HN63LGTNCRA4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:47:35.802 +03:00 [DBG] Connection id "0HN63LGTNCRA4" stopped.
2024-08-23 22:47:49.237 +03:00 [DBG] Connection id "0HN63LGTNCRA5" accepted.
2024-08-23 22:47:49.239 +03:00 [DBG] Connection id "0HN63LGTNCRA5" started.
2024-08-23 22:47:49.291 +03:00 [DBG] Connection 0HN63LGTNCRA5 established using the following protocol: "Tls13"
2024-08-23 22:47:49.309 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 99
2024-08-23 22:47:49.322 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:47:49.325 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:47:49.327 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:49.328 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:47:49.334 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:47:49.338 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:47:49.341 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:47:49.342 +03:00 [DBG] Authorization was successful.
2024-08-23 22:47:49.343 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:49.344 +03:00 [INF] Route matched with {action = "AddRoomToRoomClass", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRoomToRoomClass(Int32, HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:47:49.346 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:47:49.349 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:47:49.352 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:47:49.354 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:47:49.356 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:47:49.357 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:47:49.361 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:47:49.373 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:47:49.375 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:47:49.378 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:49.380 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:49.383 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:47:49.385 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:47:49.386 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:47:49.388 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' using the name '' in request data ...
2024-08-23 22:47:49.389 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:47:49.390 +03:00 [DBG] Connection id "0HN63LGTNCRA5", Request id "0HN63LGTNCRA5:00000001": started reading request body.
2024-08-23 22:47:49.391 +03:00 [DBG] Connection id "0HN63LGTNCRA5", Request id "0HN63LGTNCRA5:00000001": done reading request body.
2024-08-23 22:47:49.393 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'
2024-08-23 22:47:49.394 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:49.395 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:49.397 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest' ...
2024-08-23 22:47:49.399 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Room.RoomCreateRequest'.
2024-08-23 22:47:49.412 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:47:49.419 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:47:49.421 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:47:49.423 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.425 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.426 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:47:49.448 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType], [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating]
FROM [RoomClasses] AS [r]
INNER JOIN [Hotels] AS [h] ON [r].[HotelId] = [h].[HotelId]
WHERE [r].[RoomClassID] = @__id_0
2024-08-23 22:47:49.452 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.453 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.455 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:47:49.455 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.457 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.458 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'RoomClass.Rooms'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.460 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RoomID.Room'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.462 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.463 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:47:49.465 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:47:49.466 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:47:49.468 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.469 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.471 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:47:49.472 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:47:49.473 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:47:49.474 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:47:49.475 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rooms] ([AdultsCapacity], [ChildrenCapacity], [CreatedAtUtc], [Number], [PricePerNight], [RoomClassID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [RoomID]
FROM [Rooms]
WHERE @@ROWCOUNT = 1 AND [RoomID] = scope_identity();
2024-08-23 22:47:49.482 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rooms] ([AdultsCapacity], [ChildrenCapacity], [CreatedAtUtc], [Number], [PricePerNight], [RoomClassID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [RoomID]
FROM [Rooms]
WHERE @@ROWCOUNT = 1 AND [RoomID] = scope_identity();
2024-08-23 22:47:49.487 +03:00 [DBG] The foreign key property 'Room.RoomID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:47:49.489 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:47:49.489 +03:00 [DBG] Committing transaction.
2024-08-23 22:47:49.490 +03:00 [DBG] Committed transaction.
2024-08-23 22:47:49.491 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.492 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:47:49.493 +03:00 [DBG] Disposing transaction.
2024-08-23 22:47:49.494 +03:00 [DBG] An entity of type 'Room' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:47:49.496 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:47:49.499 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:47:49.501 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:47:49.502 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:47:49.503 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:47:49.503 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:47:49.505 +03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:47:49.506 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API) in 149.3267ms
2024-08-23 22:47:49.508 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.AddRoomToRoomClass (HotelBookingPlatform.API)'
2024-08-23 22:47:49.509 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:47:49.511 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/RoomClass/44/rooms application/json 99 - 201 - application/json;+charset=utf-8 201.8160ms
2024-08-23 22:47:55.821 +03:00 [DBG] Connection id "0HN63LGTNCRA5" received FIN.
2024-08-23 22:47:55.823 +03:00 [DBG] Connection id "0HN63LGTNCRA5" is closed. The last processed stream ID was 1.
2024-08-23 22:47:55.826 +03:00 [DBG] Connection id "0HN63LGTNCRA5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:47:55.834 +03:00 [DBG] Connection id "0HN63LGTNCRA5" stopped.
2024-08-23 22:48:09.574 +03:00 [DBG] Connection id "0HN63LGTNCRA6" accepted.
2024-08-23 22:48:09.576 +03:00 [DBG] Connection id "0HN63LGTNCRA6" started.
2024-08-23 22:48:09.583 +03:00 [DBG] Connection 0HN63LGTNCRA6 established using the following protocol: "Tls13"
2024-08-23 22:48:09.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/44/rooms - -
2024-08-23 22:48:09.633 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:48:09.645 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/44/rooms'
2024-08-23 22:48:09.657 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:09.660 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:48:09.662 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:48:09.663 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:48:09.665 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:09.669 +03:00 [INF] Route matched with {action = "GetRoomsByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:48:09.671 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:48:09.675 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:48:09.677 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:48:09.679 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:48:09.681 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:48:09.682 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:48:09.696 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:48:09.698 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:48:09.699 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:48:09.701 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:09.702 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:09.703 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:48:09.705 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:09.712 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:48:09.715 +03:00 [DBG] Compiling query expression: 
'DbSet<RoomClass>()
    .Include(rc => rc.Rooms)
    .FirstOrDefault(rc => rc.RoomClassID == __id_0)'
2024-08-23 22:48:09.718 +03:00 [DBG] Including navigation: 'RoomClass.Rooms'.
2024-08-23 22:48:09.732 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RoomClass>(
    asyncEnumerable: new SingleQueryingEnumerable<RoomClass>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 1], [Property: RoomClass.Description (string) MaxLength(500), 2], [Property: RoomClass.HotelId (int) Required FK Index, 3], [Property: RoomClass.Name (string) Required, 4], [Property: RoomClass.RoomType (RoomType) Required, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Room.AdultsCapacity (int) Required, 7], [Property: Room.ChildrenCapacity (int) Required, 8], [Property: Room.CreatedAtUtc (DateTime) Required, 9], [Property: Room.Number (string) Required MaxLength(50), 10], [Property: Room.PricePerNight (decimal) Required, 11], [Property: Room.RoomClassID (int) Required FK Index, 12] }
                3 -> 6
            SELECT t.RoomClassID, t.CreatedAtUtc, t.Description, t.HotelId, t.Name, t.RoomType, r0.RoomID, r0.AdultsCapacity, r0.ChildrenCapacity, r0.CreatedAtUtc, r0.Number, r0.PricePerNight, r0.RoomClassID
            FROM 
            (
                SELECT TOP(1) r.RoomClassID, r.CreatedAtUtc, r.Description, r.HotelId, r.Name, r.RoomType
                FROM RoomClasses AS r
                WHERE r.RoomClassID == @__id_0
            ) AS t
            LEFT JOIN Rooms AS r0 ON t.RoomClassID == r0.RoomClassID
            ORDER BY t.RoomClassID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RoomClass>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:48:09.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:48:09.737 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:48:09.739 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:09.741 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:09.743 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:48:09.760 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:48:09.765 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:48:09.768 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:48:09.770 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:48:09.772 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:48:09.774 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:09.779 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:09.801 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:48:09.805 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:48:09.807 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:48:09.809 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:48:09.810 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:48:09.812 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[HotelBookingPlatform.Domain.DTOs.Room.RoomResponseDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:48:09.815 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API) in 132.663ms
2024-08-23 22:48:09.817 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:09.818 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:48:09.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/44/rooms - - - 200 - application/json;+charset=utf-8 193.4927ms
2024-08-23 22:48:15.833 +03:00 [DBG] Connection id "0HN63LGTNCRA6" received FIN.
2024-08-23 22:48:15.837 +03:00 [DBG] Connection id "0HN63LGTNCRA6" is closed. The last processed stream ID was 1.
2024-08-23 22:48:15.841 +03:00 [DBG] Connection id "0HN63LGTNCRA6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:48:15.849 +03:00 [DBG] Connection id "0HN63LGTNCRA6" stopped.
2024-08-23 22:48:17.855 +03:00 [DBG] Connection id "0HN63LGTNCRA7" accepted.
2024-08-23 22:48:17.858 +03:00 [DBG] Connection id "0HN63LGTNCRA7" started.
2024-08-23 22:48:17.865 +03:00 [DBG] Connection 0HN63LGTNCRA7 established using the following protocol: "Tls13"
2024-08-23 22:48:17.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/RoomClass/100/rooms - -
2024-08-23 22:48:17.873 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoomClass/100/rooms'
2024-08-23 22:48:17.876 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)' with route pattern 'api/RoomClass/{roomClassId}/rooms' is valid for the request path '/api/RoomClass/100/rooms'
2024-08-23 22:48:17.878 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:17.879 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:48:17.880 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:48:17.881 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:48:17.882 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:17.883 +03:00 [INF] Route matched with {action = "GetRoomsByRoomClassId", controller = "RoomClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsByRoomClassId(Int32) on controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API).
2024-08-23 22:48:17.885 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:48:17.889 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:48:17.892 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:48:17.894 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:48:17.895 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:48:17.897 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:48:17.898 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.RoomClassController (HotelBookingPlatform.API)
2024-08-23 22:48:17.899 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:48:17.901 +03:00 [DBG] Attempting to bind parameter 'roomClassId' of type 'System.Int32' using the name 'roomClassId' in request data ...
2024-08-23 22:48:17.904 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:17.906 +03:00 [DBG] Done attempting to bind parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:17.907 +03:00 [DBG] Attempting to validate the bound parameter 'roomClassId' of type 'System.Int32' ...
2024-08-23 22:48:17.909 +03:00 [DBG] Done attempting to validate the bound parameter 'roomClassId' of type 'System.Int32'.
2024-08-23 22:48:17.910 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:48:17.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:48:17.914 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:48:17.915 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:17.916 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:17.918 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:48:17.940 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoomClassID], [t].[CreatedAtUtc], [t].[Description], [t].[HotelId], [t].[Name], [t].[RoomType], [r0].[RoomID], [r0].[AdultsCapacity], [r0].[ChildrenCapacity], [r0].[CreatedAtUtc], [r0].[Number], [r0].[PricePerNight], [r0].[RoomClassID]
FROM (
    SELECT TOP(1) [r].[RoomClassID], [r].[CreatedAtUtc], [r].[Description], [r].[HotelId], [r].[Name], [r].[RoomType]
    FROM [RoomClasses] AS [r]
    WHERE [r].[RoomClassID] = @__id_0
) AS [t]
LEFT JOIN [Rooms] AS [r0] ON [t].[RoomClassID] = [r0].[RoomClassID]
ORDER BY [t].[RoomClassID]
2024-08-23 22:48:17.944 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:48:17.945 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:17.946 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:48:18.129 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API) in 232.5937ms
2024-08-23 22:48:18.133 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.RoomClassController.GetRoomsByRoomClassId (HotelBookingPlatform.API)'
2024-08-23 22:48:18.331 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:48:18.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/RoomClass/100/rooms - - - 404 - application/json 463.9832ms
2024-08-23 22:48:25.840 +03:00 [DBG] Connection id "0HN63LGTNCRA7" received FIN.
2024-08-23 22:48:25.849 +03:00 [DBG] Connection id "0HN63LGTNCRA7" is closed. The last processed stream ID was 1.
2024-08-23 22:48:25.858 +03:00 [DBG] Connection id "0HN63LGTNCRA7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:48:25.883 +03:00 [DBG] Connection id "0HN63LGTNCRA7" stopped.
2024-08-23 22:49:06.875 +03:00 [DBG] Connection id "0HN63LGTNCRA8" accepted.
2024-08-23 22:49:06.881 +03:00 [DBG] Connection id "0HN63LGTNCRA8" started.
2024-08-23 22:49:06.896 +03:00 [DBG] Connection 0HN63LGTNCRA8 established using the following protocol: "Tls13"
2024-08-23 22:49:06.915 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 132
2024-08-23 22:49:06.917 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-23 22:49:06.920 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-23 22:49:06.923 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:06.925 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:49:06.926 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:49:06.927 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:49:06.927 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:49:06.929 +03:00 [DBG] Authorization was successful.
2024-08-23 22:49:06.930 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:06.939 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 22:49:06.942 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:49:06.944 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:49:06.945 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:49:06.947 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:49:06.951 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:49:06.953 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:06.956 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:06.959 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-23 22:49:06.960 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-23 22:49:06.962 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:49:06.963 +03:00 [DBG] Connection id "0HN63LGTNCRA8", Request id "0HN63LGTNCRA8:00000001": started reading request body.
2024-08-23 22:49:06.965 +03:00 [DBG] Connection id "0HN63LGTNCRA8", Request id "0HN63LGTNCRA8:00000001": done reading request body.
2024-08-23 22:49:06.975 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-23 22:49:06.978 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:06.979 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:06.980 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-23 22:49:06.985 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:07.002 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:49:07.011 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-23 22:49:07.014 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-23 22:49:07.023 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:49:07.028 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:07.030 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:49:07.031 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.034 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.037 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:49:07.045 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:49:07.049 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:07.053 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:07.055 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:07.056 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.058 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.103 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:07.123 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:07.126 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:49:07.127 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:49:07.135 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:49:07.138 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.141 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.142 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:49:07.143 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:49:07.144 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:07.145 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:49:07.147 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-23 22:49:07.160 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-23 22:49:07.166 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:49:07.171 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:07.173 +03:00 [DBG] Committing transaction.
2024-08-23 22:49:07.174 +03:00 [DBG] Committed transaction.
2024-08-23 22:49:07.175 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.177 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:07.178 +03:00 [DBG] Disposing transaction.
2024-08-23 22:49:07.179 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:07.181 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:49:07.185 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:49:07.187 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:49:07.189 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:49:07.190 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:49:07.194 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:49:07.199 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 22:49:07.203 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 22:49:07.204 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:49:07.205 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:49:07.207 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:49:07.208 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:49:07.212 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 258.3364ms
2024-08-23 22:49:07.214 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:07.217 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:49:07.220 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 132 - 200 - application/json;+charset=utf-8 304.6963ms
2024-08-23 22:49:15.886 +03:00 [DBG] Connection id "0HN63LGTNCRA8" received FIN.
2024-08-23 22:49:15.889 +03:00 [DBG] Connection id "0HN63LGTNCRA8" is closed. The last processed stream ID was 1.
2024-08-23 22:49:15.891 +03:00 [DBG] Connection id "0HN63LGTNCRA8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:49:15.895 +03:00 [DBG] Connection id "0HN63LGTNCRA8" stopped.
2024-08-23 22:49:22.953 +03:00 [DBG] Connection id "0HN63LGTNCRA9" accepted.
2024-08-23 22:49:22.961 +03:00 [DBG] Connection id "0HN63LGTNCRA9" started.
2024-08-23 22:49:23.010 +03:00 [DBG] Connection 0HN63LGTNCRA9 established using the following protocol: "Tls13"
2024-08-23 22:49:23.018 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Discount application/json 132
2024-08-23 22:49:23.020 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount'
2024-08-23 22:49:23.021 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)' with route pattern 'api/Discount' is valid for the request path '/api/Discount'
2024-08-23 22:49:23.024 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:23.028 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:49:23.030 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:49:23.032 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:49:23.033 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:49:23.035 +03:00 [DBG] Authorization was successful.
2024-08-23 22:49:23.035 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:23.036 +03:00 [INF] Route matched with {action = "AddDiscount", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDiscount(HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 22:49:23.038 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:49:23.039 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:49:23.041 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:49:23.047 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:49:23.050 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:49:23.052 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:23.054 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:23.056 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-23 22:49:23.057 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' using the name '' in request data ...
2024-08-23 22:49:23.060 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:49:23.063 +03:00 [DBG] Connection id "0HN63LGTNCRA9", Request id "0HN63LGTNCRA9:00000001": started reading request body.
2024-08-23 22:49:23.064 +03:00 [DBG] Connection id "0HN63LGTNCRA9", Request id "0HN63LGTNCRA9:00000001": done reading request body.
2024-08-23 22:49:23.066 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'
2024-08-23 22:49:23.067 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:23.068 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:23.070 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest' ...
2024-08-23 22:49:23.071 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Discount.DiscountCreateRequest'.
2024-08-23 22:49:23.073 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:49:23.076 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:23.079 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:49:23.081 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.082 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.083 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:49:23.089 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:49:23.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:23.093 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:23.095 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:23.097 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.098 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.100 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'DiscountID.Discount'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:23.101 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:23.103 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:49:23.104 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:49:23.105 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:49:23.107 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.109 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.112 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:49:23.114 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:49:23.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:23.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:49:23.118 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-23 22:49:23.123 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Discounts] ([CreatedAtUtc], [EndDateUtc], [IsActive], [Percentage], [RoomClassID], [RoomID], [StartDateUtc])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [DiscountID]
FROM [Discounts]
WHERE @@ROWCOUNT = 1 AND [DiscountID] = scope_identity();
2024-08-23 22:49:23.136 +03:00 [DBG] The foreign key property 'Discount.DiscountID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:49:23.137 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:23.138 +03:00 [DBG] Committing transaction.
2024-08-23 22:49:23.142 +03:00 [DBG] Committed transaction.
2024-08-23 22:49:23.145 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.148 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:23.150 +03:00 [DBG] Disposing transaction.
2024-08-23 22:49:23.151 +03:00 [DBG] An entity of type 'Discount' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:23.153 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:49:23.154 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:49:23.155 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:49:23.156 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:49:23.158 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:49:23.159 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:49:23.164 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 22:49:23.166 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 22:49:23.167 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:49:23.168 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:49:23.169 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:49:23.170 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:49:23.172 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API) in 119.6011ms
2024-08-23 22:49:23.174 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.AddDiscount (HotelBookingPlatform.API)'
2024-08-23 22:49:23.176 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:49:23.178 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Discount application/json 132 - 200 - application/json;+charset=utf-8 159.8281ms
2024-08-23 22:49:25.892 +03:00 [DBG] Connection id "0HN63LGTNCRA9" received FIN.
2024-08-23 22:49:25.898 +03:00 [DBG] Connection id "0HN63LGTNCRA9" is closed. The last processed stream ID was 1.
2024-08-23 22:49:25.905 +03:00 [DBG] Connection id "0HN63LGTNCRA9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:49:25.923 +03:00 [DBG] Connection id "0HN63LGTNCRA9" stopped.
2024-08-23 22:49:31.182 +03:00 [DBG] Connection id "0HN63LGTNCRAA" accepted.
2024-08-23 22:49:31.185 +03:00 [DBG] Connection id "0HN63LGTNCRAA" started.
2024-08-23 22:49:31.190 +03:00 [DBG] Connection 0HN63LGTNCRAA established using the following protocol: "Tls13"
2024-08-23 22:49:31.195 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/active - -
2024-08-23 22:49:31.196 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/active'
2024-08-23 22:49:31.198 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)' with route pattern 'api/Discount/active' is valid for the request path '/api/Discount/active'
2024-08-23 22:49:31.200 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/active'
2024-08-23 22:49:31.202 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 22:49:31.203 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:49:31.204 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:49:31.205 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:49:31.206 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 22:49:31.214 +03:00 [INF] Route matched with {action = "GetActiveDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActiveDiscounts() on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 22:49:31.218 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:49:31.219 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:49:31.220 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:49:31.223 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:49:31.227 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:49:31.231 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:31.235 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:31.245 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:49:31.250 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)'
2024-08-23 22:49:31.252 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-23 22:49:31.260 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM Discounts AS d
        INNER JOIN Rooms AS r ON d.RoomID == r.RoomID), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:49:31.265 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:31.266 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:49:31.267 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:31.269 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:31.270 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 22:49:31.289 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
2024-08-23 22:49:31.294 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.296 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.298 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.299 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.300 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.302 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.303 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.304 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.306 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.311 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.313 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.314 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.316 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.317 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.318 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.319 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.321 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.323 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.326 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.328 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.330 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.331 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.332 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.333 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.335 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.336 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.338 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.340 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.342 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.344 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.346 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.347 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.348 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.349 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.350 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.352 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.353 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.354 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.356 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.359 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:31.361 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:31.362 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:31.363 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:31.369 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:49:31.375 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 22:49:31.379 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 22:49:31.381 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:49:31.382 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:49:31.382 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:49:31.384 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:49:31.387 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API) in 155.6121ms
2024-08-23 22:49:31.389 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetActiveDiscounts (HotelBookingPlatform.API)'
2024-08-23 22:49:31.392 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:49:31.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/active - - - 200 - application/json;+charset=utf-8 200.9087ms
2024-08-23 22:49:35.896 +03:00 [DBG] Connection id "0HN63LGTNCRAA" received FIN.
2024-08-23 22:49:35.898 +03:00 [DBG] Connection id "0HN63LGTNCRAA" is closed. The last processed stream ID was 1.
2024-08-23 22:49:35.903 +03:00 [DBG] Connection id "0HN63LGTNCRAA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:49:35.911 +03:00 [DBG] Connection id "0HN63LGTNCRAA" stopped.
2024-08-23 22:49:39.066 +03:00 [DBG] Connection id "0HN63LGTNCRAB" accepted.
2024-08-23 22:49:39.068 +03:00 [DBG] Connection id "0HN63LGTNCRAB" started.
2024-08-23 22:49:39.078 +03:00 [DBG] Connection 0HN63LGTNCRAB established using the following protocol: "Tls13"
2024-08-23 22:49:39.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-23 22:49:39.085 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-23 22:49:39.089 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 22:49:39.093 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-23 22:49:39.095 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 22:49:39.097 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:49:39.098 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:49:39.098 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:49:39.100 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 22:49:39.109 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-23 22:49:39.112 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:49:39.114 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:49:39.115 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:49:39.118 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:49:39.120 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:49:39.125 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:39.128 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-23 22:49:39.145 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-23 22:49:39.149 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-23 22:49:39.151 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 22:49:39.153 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-23 22:49:39.155 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-23 22:49:39.158 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-23 22:49:39.162 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:49:39.166 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(r => r.Room)
    .Where(d => d.StartDateUtc <= __now_0 && d.EndDateUtc >= __now_0)
    .OrderByDescending(d => d.Percentage)
    .Take(__p_1)'
2024-08-23 22:49:39.173 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-23 22:49:39.188 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT t.DiscountID, t.CreatedAtUtc, t.EndDateUtc, t.IsActive, t.Percentage, t.RoomClassID, t.RoomID, t.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM 
        (
            SELECT TOP(@__p_1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE (d.StartDateUtc <= @__now_0) && (d.EndDateUtc >= @__now_0)
            ORDER BY d.Percentage DESC
        ) AS t
        INNER JOIN Rooms AS r ON t.RoomID == r.RoomID
        ORDER BY t.Percentage DESC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 22:49:39.194 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:49:39.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:49:39.197 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:39.199 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:39.200 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-23 22:49:39.212 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-23 22:49:39.215 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.217 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.219 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.221 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.223 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.226 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.227 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.230 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.231 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:49:39.233 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:49:39.234 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:39.236 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:49:39.240 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:49:39.245 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-23 22:49:39.247 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-23 22:49:39.248 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:49:39.249 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:49:39.250 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:49:39.252 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-23 22:49:39.255 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 130.0427ms
2024-08-23 22:49:39.260 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-23 22:49:39.263 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:49:39.264 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 181.9833ms
2024-08-23 22:49:50.905 +03:00 [DBG] Connection id "0HN63LGTNCRAB" received FIN.
2024-08-23 22:49:50.908 +03:00 [DBG] Connection id "0HN63LGTNCRAB" is closed. The last processed stream ID was 1.
2024-08-23 22:49:50.910 +03:00 [DBG] Connection id "0HN63LGTNCRAB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:49:50.914 +03:00 [DBG] Connection id "0HN63LGTNCRAB" stopped.
2024-08-23 22:50:45.831 +03:00 [DBG] Connection id "0HN63LGTNCRAC" accepted.
2024-08-23 22:50:45.864 +03:00 [DBG] Connection id "0HN63LGTNCRAC" started.
2024-08-23 22:50:45.871 +03:00 [DBG] Connection 0HN63LGTNCRAC established using the following protocol: "Tls13"
2024-08-23 22:50:45.880 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/register application/json 119
2024-08-23 22:50:45.888 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2024-08-23 22:50:45.896 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.RegisterAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/register' is valid for the request path '/api/auth/register'
2024-08-23 22:50:45.900 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.RegisterAsync (HotelBookingPlatform.API)'
2024-08-23 22:50:45.901 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:50:45.902 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:50:45.903 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:50:45.903 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:50:45.905 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.RegisterAsync (HotelBookingPlatform.API)'
2024-08-23 22:50:45.908 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(HotelBookingPlatform.Domain.Helpers.RegisterModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:50:45.913 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:50:45.916 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:50:45.918 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:50:45.919 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:50:45.921 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:50:45.923 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:50:45.924 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:50:45.939 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel' ...
2024-08-23 22:50:45.955 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel' using the name '' in request data ...
2024-08-23 22:50:45.958 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:50:45.961 +03:00 [DBG] Connection id "0HN63LGTNCRAC", Request id "0HN63LGTNCRAC:00000001": started reading request body.
2024-08-23 22:50:45.963 +03:00 [DBG] Connection id "0HN63LGTNCRAC", Request id "0HN63LGTNCRAC:00000001": done reading request body.
2024-08-23 22:50:45.965 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.RegisterModel'
2024-08-23 22:50:45.966 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel'.
2024-08-23 22:50:45.967 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel'.
2024-08-23 22:50:45.969 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel' ...
2024-08-23 22:50:46.018 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.RegisterModel'.
2024-08-23 22:50:46.025 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:50:46.031 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:50:46.033 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.035 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.036 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.046 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.050 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.051 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.052 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.112 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2024-08-23 22:50:46.116 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 22:50:46.125 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedUserName == @__normalizedUserName_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:50:46.130 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.133 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.134 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.135 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.137 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.150 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.155 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.156 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.157 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.190 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.191 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.201 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:50:46.204 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.205 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.206 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:50:46.207 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:50:46.212 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.215 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:50:46.216 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2024-08-23 22:50:46.244 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2024-08-23 22:50:46.249 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.250 +03:00 [DBG] Committing transaction.
2024-08-23 22:50:46.251 +03:00 [DBG] Committed transaction.
2024-08-23 22:50:46.251 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.253 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.254 +03:00 [DBG] Disposing transaction.
2024-08-23 22:50:46.255 +03:00 [DBG] An entity of type 'LocalUser' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.257 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2024-08-23 22:50:46.270 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2024-08-23 22:50:46.276 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:50:46.280 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.283 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.284 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.286 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.287 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-08-23 22:50:46.295 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-08-23 22:50:46.304 +03:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.315 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.317 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.318 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.334 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2024-08-23 22:50:46.340 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:50:46.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.349 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.350 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.351 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.353 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2024-08-23 22:50:46.358 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2024-08-23 22:50:46.364 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.366 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.367 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.373 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.376 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.379 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.383 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.386 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-08-23 22:50:46.390 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-08-23 22:50:46.393 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.395 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.397 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.403 +03:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole<string>' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.411 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:50:46.415 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.417 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.418 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.425 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.431 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.431 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.433 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.441 +03:00 [DBG] An entity of type 'LocalUser' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.447 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.448 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.450 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:50:46.451 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.452 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.453 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:50:46.455 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:50:46.468 +03:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2024-08-23 22:50:46.472 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.473 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:50:46.474 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-23 22:50:46.486 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-23 22:50:46.490 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.496 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.500 +03:00 [DBG] Executing DbCommand [Parameters=[@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2024-08-23 22:50:46.521 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2024-08-23 22:50:46.528 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.529 +03:00 [DBG] Committing transaction.
2024-08-23 22:50:46.531 +03:00 [DBG] Committed transaction.
2024-08-23 22:50:46.532 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.533 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.535 +03:00 [DBG] Disposing transaction.
2024-08-23 22:50:46.536 +03:00 [DBG] An entity of type 'IdentityUserRole<string>' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.537 +03:00 [DBG] An entity of type 'LocalUser' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.539 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-23 22:50:46.543 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.546 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:50:46.548 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.549 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.550 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:50:46.553 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:50:46.555 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.556 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.557 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.561 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:50:46.562 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.563 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.564 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:50:46.568 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:50:46.571 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.572 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.573 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.577 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.579 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:50:46.581 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.582 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.586 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:50:46.588 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.589 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.590 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.592 +03:00 [DBG] An entity of type 'LocalUser' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.596 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.597 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:50:46.598 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'LocalUser.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.602 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.606 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.607 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:50:46.609 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.611 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.612 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:50:46.614 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:50:46.615 +03:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2024-08-23 22:50:46.616 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.618 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:50:46.619 +03:00 [DBG] Executing DbCommand [Parameters=[@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2024-08-23 22:50:46.622 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2024-08-23 22:50:46.625 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:50:46.634 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:50:46.635 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([LocalUserId], [CreatedOn], [ExpiresOn], [RevokedOn], [Token])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity() AND [LocalUserId] = @p0;
2024-08-23 22:50:46.640 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([LocalUserId], [CreatedOn], [ExpiresOn], [RevokedOn], [Token])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity() AND [LocalUserId] = @p0;
2024-08-23 22:50:46.645 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:50:46.650 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:50:46.651 +03:00 [DBG] Committing transaction.
2024-08-23 22:50:46.655 +03:00 [DBG] Committed transaction.
2024-08-23 22:50:46.657 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.659 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:50:46.662 +03:00 [DBG] Disposing transaction.
2024-08-23 22:50:46.663 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.665 +03:00 [DBG] An entity of type 'LocalUser' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:50:46.667 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-23 22:50:46.668 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:50:46.671 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:50:46.671 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:50:46.672 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:50:46.673 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:50:46.674 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:50:46.677 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.RegisterAsync (HotelBookingPlatform.API) in 754.2136ms
2024-08-23 22:50:46.681 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.RegisterAsync (HotelBookingPlatform.API)'
2024-08-23 22:50:46.683 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:50:46.685 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/register application/json 119 - 200 - application/json;+charset=utf-8 804.2464ms
2024-08-23 22:50:50.994 +03:00 [DBG] Connection id "0HN63LGTNCRAC" received FIN.
2024-08-23 22:50:50.998 +03:00 [DBG] Connection id "0HN63LGTNCRAC" is closed. The last processed stream ID was 1.
2024-08-23 22:50:51.003 +03:00 [DBG] Connection id "0HN63LGTNCRAC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:50:51.007 +03:00 [DBG] Connection id "0HN63LGTNCRAC" stopped.
2024-08-23 22:51:02.035 +03:00 [DBG] Connection id "0HN63LGTNCRAD" accepted.
2024-08-23 22:51:02.043 +03:00 [DBG] Connection id "0HN63LGTNCRAD" started.
2024-08-23 22:51:02.049 +03:00 [DBG] Connection 0HN63LGTNCRAD established using the following protocol: "Tls13"
2024-08-23 22:51:02.051 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 75
2024-08-23 22:51:02.054 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:51:02.057 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:51:02.060 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:51:02.062 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:51:02.063 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:51:02.064 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:51:02.065 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:51:02.066 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:51:02.067 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:51:02.069 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:51:02.071 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:51:02.074 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:51:02.076 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:51:02.078 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:51:02.079 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:51:02.085 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:51:02.087 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:51:02.091 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:51:02.093 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:51:02.094 +03:00 [DBG] Connection id "0HN63LGTNCRAD", Request id "0HN63LGTNCRAD:00000001": started reading request body.
2024-08-23 22:51:02.095 +03:00 [DBG] Connection id "0HN63LGTNCRAD", Request id "0HN63LGTNCRAD:00000001": done reading request body.
2024-08-23 22:51:02.097 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:51:02.098 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:51:02.099 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:51:02.100 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:51:02.102 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:51:02.107 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:51:02.111 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:51:02.113 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:51:02.116 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.119 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.121 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:51:02.131 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:51:02.134 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:51:02.136 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:51:02.139 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:51:02.142 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.144 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:51:02.157 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:51:02.159 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.161 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.162 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:51:02.172 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:51:02.178 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:51:02.179 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.180 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.181 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:51:02.182 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:51:02.183 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.185 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.187 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:51:02.195 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:51:02.199 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:51:02.199 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.201 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.203 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:51:02.205 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:51:02.209 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.212 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.213 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:51:02.219 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:51:02.224 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:51:02.227 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.229 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:51:02.231 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:51:02.233 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:51:02.234 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:51:02.235 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:51:02.236 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:51:02.239 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:51:02.242 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 163.47ms
2024-08-23 22:51:02.246 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:51:02.249 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:51:02.250 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 75 - 200 - application/json;+charset=utf-8 198.8260ms
2024-08-23 22:51:11.011 +03:00 [DBG] Connection id "0HN63LGTNCRAD" received FIN.
2024-08-23 22:51:11.013 +03:00 [DBG] Connection id "0HN63LGTNCRAD" is closed. The last processed stream ID was 1.
2024-08-23 22:51:11.016 +03:00 [DBG] Connection id "0HN63LGTNCRAD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:51:11.021 +03:00 [DBG] Connection id "0HN63LGTNCRAD" stopped.
2024-08-23 22:52:17.454 +03:00 [DBG] Connection id "0HN63LGTNCRAE" accepted.
2024-08-23 22:52:17.462 +03:00 [DBG] Connection id "0HN63LGTNCRAE" started.
2024-08-23 22:52:17.502 +03:00 [DBG] Connection 0HN63LGTNCRAE established using the following protocol: "Tls13"
2024-08-23 22:52:17.519 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162
2024-08-23 22:52:17.537 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-23 22:52:17.547 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-23 22:52:17.550 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:17.551 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:52:17.551 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:52:17.566 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:46:39 PM', Current time (UTC): '8/23/2024 7:52:17 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:52:17.579 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:46:39 PM', Current time (UTC): '8/23/2024 7:52:17 PM'.
2024-08-23 22:52:17.582 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:17.585 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-23 22:52:17.588 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:52:17.590 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:52:17.594 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:52:17.599 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:52:17.603 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:52:17.605 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 22:52:17.609 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 22:52:17.612 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 22:52:17.614 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-23 22:52:17.615 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:52:17.622 +03:00 [DBG] Connection id "0HN63LGTNCRAE", Request id "0HN63LGTNCRAE:00000001": started reading request body.
2024-08-23 22:52:17.626 +03:00 [DBG] Connection id "0HN63LGTNCRAE", Request id "0HN63LGTNCRAE:00000001": done reading request body.
2024-08-23 22:52:17.636 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-23 22:52:17.638 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:17.640 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:17.643 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 22:52:17.649 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:17.657 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:52:17.668 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:52:17.670 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:52:17.671 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:52:17.672 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-08-23 22:52:17.674 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-08-23 22:52:17.677 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 72.2734ms
2024-08-23 22:52:17.679 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:17.682 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162 - 401 - text/plain;+charset=utf-8 162.7596ms
2024-08-23 22:52:21.071 +03:00 [DBG] Connection id "0HN63LGTNCRAE" received FIN.
2024-08-23 22:52:21.072 +03:00 [DBG] Connection id "0HN63LGTNCRAE" is closed. The last processed stream ID was 1.
2024-08-23 22:52:21.076 +03:00 [DBG] Connection id "0HN63LGTNCRAE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:52:21.086 +03:00 [DBG] Connection id "0HN63LGTNCRAE" stopped.
2024-08-23 22:52:26.466 +03:00 [DBG] Connection id "0HN63LGTNCRAF" accepted.
2024-08-23 22:52:26.475 +03:00 [DBG] Connection id "0HN63LGTNCRAF" started.
2024-08-23 22:52:26.487 +03:00 [DBG] Connection 0HN63LGTNCRAF established using the following protocol: "Tls13"
2024-08-23 22:52:26.493 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 75
2024-08-23 22:52:26.496 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 22:52:26.497 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 22:52:26.499 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:52:26.500 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:52:26.501 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:52:26.503 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:46:39 PM', Current time (UTC): '8/23/2024 7:52:26 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-08-23 22:52:26.508 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/23/2024 7:46:39 PM', Current time (UTC): '8/23/2024 7:52:26 PM'.
2024-08-23 22:52:26.511 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:52:26.512 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 22:52:26.514 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:52:26.515 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:52:26.516 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 22:52:26.518 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:52:26.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:52:26.524 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:52:26.527 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 22:52:26.528 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:52:26.530 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 22:52:26.531 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:52:26.532 +03:00 [DBG] Connection id "0HN63LGTNCRAF", Request id "0HN63LGTNCRAF:00000001": started reading request body.
2024-08-23 22:52:26.534 +03:00 [DBG] Connection id "0HN63LGTNCRAF", Request id "0HN63LGTNCRAF:00000001": done reading request body.
2024-08-23 22:52:26.536 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 22:52:26.538 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:52:26.541 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:52:26.544 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 22:52:26.545 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 22:52:26.547 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:52:26.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:26.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:52:26.551 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.553 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.555 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:52:26.570 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:52:26.577 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:26.578 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:26.579 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:26.580 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.581 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:26.593 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:52:26.595 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.596 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.597 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:52:26.601 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 22:52:26.605 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:26.607 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.609 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.610 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:26.611 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:52:26.613 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.614 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.615 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:52:26.623 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:52:26.627 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:26.628 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.629 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:26.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 22:52:26.633 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.634 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.636 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:52:26.639 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 22:52:26.643 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:26.644 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.646 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:26.647 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:52:26.649 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:52:26.650 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:52:26.651 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:52:26.652 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:52:26.653 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:52:26.655 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 130.9905ms
2024-08-23 22:52:26.658 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 22:52:26.660 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:52:26.663 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 75 - 200 - application/json;+charset=utf-8 170.0297ms
2024-08-23 22:52:31.085 +03:00 [DBG] Connection id "0HN63LGTNCRAF" received FIN.
2024-08-23 22:52:31.090 +03:00 [DBG] Connection id "0HN63LGTNCRAF" is closed. The last processed stream ID was 1.
2024-08-23 22:52:31.093 +03:00 [DBG] Connection id "0HN63LGTNCRAF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:52:31.098 +03:00 [DBG] Connection id "0HN63LGTNCRAF" stopped.
2024-08-23 22:52:42.587 +03:00 [DBG] Connection id "0HN63LGTNCRAG" accepted.
2024-08-23 22:52:42.590 +03:00 [DBG] Connection id "0HN63LGTNCRAG" started.
2024-08-23 22:52:42.595 +03:00 [DBG] Connection 0HN63LGTNCRAG established using the following protocol: "Tls13"
2024-08-23 22:52:42.603 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162
2024-08-23 22:52:42.609 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-23 22:52:42.612 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-23 22:52:42.615 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:42.617 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 22:52:42.619 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 22:52:42.620 +03:00 [DBG] Successfully validated the token.
2024-08-23 22:52:42.620 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 22:52:42.621 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:42.622 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-23 22:52:42.624 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 22:52:42.625 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 22:52:42.627 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 22:52:42.630 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 22:52:42.633 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 22:52:42.635 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 22:52:42.637 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 22:52:42.638 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 22:52:42.639 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-23 22:52:42.641 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 22:52:42.642 +03:00 [DBG] Connection id "0HN63LGTNCRAG", Request id "0HN63LGTNCRAG:00000001": started reading request body.
2024-08-23 22:52:42.643 +03:00 [DBG] Connection id "0HN63LGTNCRAG", Request id "0HN63LGTNCRAG:00000001": done reading request body.
2024-08-23 22:52:42.644 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-23 22:52:42.645 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:42.649 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:42.650 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 22:52:42.651 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 22:52:42.655 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 22:52:42.659 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.660 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:52:42.662 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.665 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.667 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:52:42.674 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 22:52:42.676 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.678 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.680 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.682 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.685 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.689 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:52:42.693 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.694 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.696 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:42.709 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:42.713 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.716 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.717 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.718 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.723 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.726 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:52:42.727 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.729 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.731 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:42.735 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:42.737 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.738 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.739 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.742 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-23 22:52:42.756 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:52:42.763 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.767 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:52:42.768 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.769 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.770 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 22:52:42.782 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 22:52:42.786 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.787 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.788 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.793 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 22:52:42.798 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 22:52:42.802 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 22:52:42.803 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 22:52:42.833 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 22:52:42.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 22:52:42.850 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.851 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.853 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:52:42.869 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 22:52:42.911 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.918 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.932 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:42.956 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.958 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 22:52:42.960 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:52:42.974 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 22:52:42.987 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.990 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:42.990 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.992 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:42.995 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:52:42.997 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:42.999 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.001 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:43.003 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 22:52:43.006 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:43.006 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.007 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.010 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:43.050 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:43.060 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:43.063 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:52:43.066 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:52:43.080 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:52:43.084 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.086 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.087 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 22:52:43.088 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 22:52:43.091 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:43.092 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:52:43.100 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 22:52:43.127 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 22:52:43.136 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:52:43.144 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 22:52:43.151 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:43.153 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 22:52:43.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 22:52:43.156 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 22:52:43.164 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 22:52:43.168 +03:00 [DBG] A data reader was disposed.
2024-08-23 22:52:43.169 +03:00 [DBG] Committing transaction.
2024-08-23 22:52:43.170 +03:00 [DBG] Committed transaction.
2024-08-23 22:52:43.171 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.172 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 22:52:43.174 +03:00 [DBG] Disposing transaction.
2024-08-23 22:52:43.178 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:43.182 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 22:52:43.185 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-23 22:52:43.187 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 22:52:43.188 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 22:52:43.190 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 22:52:43.191 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 22:52:43.198 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 22:52:43.203 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 22:52:43.205 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 22:52:43.206 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 22:52:43.207 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 22:52:43.209 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 22:52:43.226 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 590.6467ms
2024-08-23 22:52:43.228 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 22:52:43.231 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 22:52:43.233 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162 - 200 - application/json;+charset=utf-8 630.2957ms
2024-08-23 22:52:51.100 +03:00 [DBG] Connection id "0HN63LGTNCRAG" received FIN.
2024-08-23 22:52:51.106 +03:00 [DBG] Connection id "0HN63LGTNCRAG" is closed. The last processed stream ID was 1.
2024-08-23 22:52:51.110 +03:00 [DBG] Connection id "0HN63LGTNCRAG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 22:52:51.121 +03:00 [DBG] Connection id "0HN63LGTNCRAG" stopped.
2024-08-23 23:00:17.740 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 23:00:17.869 +03:00 [DBG] Hosting starting
2024-08-23 23:00:17.916 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 23:00:17.922 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 23:00:17.934 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 23:00:17.937 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 23:00:17.939 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 23:00:17.946 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 23:00:17.954 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 23:00:17.957 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 23:00:17.958 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 23:00:17.967 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 23:00:17.973 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 23:00:17.979 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 23:00:17.985 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 23:00:17.993 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 23:00:18.000 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 23:00:18.007 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 23:00:18.010 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 23:00:18.197 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 23:00:18.272 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 23:00:18.275 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 23:00:18.277 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 23:00:18.278 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 23:00:18.279 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 23:00:18.281 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 23:00:18.282 +03:00 [INF] Hosting environment: Development
2024-08-23 23:00:18.283 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 23:00:18.283 +03:00 [DBG] Hosting started
2024-08-23 23:00:18.661 +03:00 [DBG] Connection id "0HN63LOR8M984" accepted.
2024-08-23 23:00:18.661 +03:00 [DBG] Connection id "0HN63LOR8M985" accepted.
2024-08-23 23:00:18.667 +03:00 [DBG] Connection id "0HN63LOR8M984" started.
2024-08-23 23:00:18.667 +03:00 [DBG] Connection id "0HN63LOR8M985" started.
2024-08-23 23:00:18.688 +03:00 [DBG] Connection id "0HN63LOR8M984" received FIN.
2024-08-23 23:00:18.688 +03:00 [DBG] Connection id "0HN63LOR8M985" received FIN.
2024-08-23 23:00:18.719 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 23:00:18.719 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 23:00:18.785 +03:00 [DBG] Connection id "0HN63LOR8M984" stopped.
2024-08-23 23:00:18.785 +03:00 [DBG] Connection id "0HN63LOR8M985" stopped.
2024-08-23 23:00:18.791 +03:00 [DBG] Connection id "0HN63LOR8M985" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:00:18.791 +03:00 [DBG] Connection id "0HN63LOR8M984" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:00:21.390 +03:00 [DBG] Connection id "0HN63LOR8M986" accepted.
2024-08-23 23:00:21.398 +03:00 [DBG] Connection id "0HN63LOR8M986" started.
2024-08-23 23:00:21.475 +03:00 [DBG] Connection 0HN63LOR8M986 established using the following protocol: "Tls13"
2024-08-23 23:00:21.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 23:00:21.818 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 23:00:21.864 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 23:00:21.870 +03:00 [DBG] Request did not match any endpoints
2024-08-23 23:00:22.123 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 23:00:22.157 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 23:00:22.173 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 566.8819ms
2024-08-23 23:00:22.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 23:00:22.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 23:00:22.202 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.3392ms
2024-08-23 23:00:22.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 94.6089ms
2024-08-23 23:00:23.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 23:00:23.525 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 23:00:23.529 +03:00 [DBG] Request did not match any endpoints
2024-08-23 23:00:23.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 330.1280ms
2024-08-23 23:00:26.754 +03:00 [DBG] Connection id "0HN63LOR8M986" received FIN.
2024-08-23 23:00:26.765 +03:00 [DBG] Connection id "0HN63LOR8M986" is closed. The last processed stream ID was 7.
2024-08-23 23:00:26.770 +03:00 [DBG] Connection id "0HN63LOR8M986" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:00:26.781 +03:00 [DBG] Connection id "0HN63LOR8M986" stopped.
2024-08-23 23:00:48.963 +03:00 [DBG] Connection id "0HN63LOR8M987" accepted.
2024-08-23 23:00:48.971 +03:00 [DBG] Connection id "0HN63LOR8M987" started.
2024-08-23 23:00:48.983 +03:00 [DBG] Connection 0HN63LOR8M987 established using the following protocol: "Tls13"
2024-08-23 23:00:48.994 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-23 23:00:49.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 23:00:49.045 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 23:00:49.048 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:00:49.051 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 23:00:49.058 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 23:00:49.131 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 23:00:49.140 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:00:49.182 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 23:00:49.189 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 23:00:49.194 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 23:00:49.196 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 23:00:49.197 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 23:00:49.199 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 23:00:49.200 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 23:00:49.428 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 23:00:49.499 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 23:00:49.508 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 23:00:49.513 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 23:00:49.515 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 23:00:49.530 +03:00 [DBG] Connection id "0HN63LOR8M987", Request id "0HN63LOR8M987:00000001": started reading request body.
2024-08-23 23:00:49.533 +03:00 [DBG] Connection id "0HN63LOR8M987", Request id "0HN63LOR8M987:00000001": done reading request body.
2024-08-23 23:00:49.566 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 23:00:49.571 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:00:49.575 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:00:49.577 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 23:00:49.614 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:00:50.582 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 23:00:50.586 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 23:00:50.590 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 23:00:50.592 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 23:00:50.593 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 23:00:50.720 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:00:50.723 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:00:50.725 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:00:50.778 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:00:50.782 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:00:50.785 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:00:51.031 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 23:00:51.190 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-23 23:00:51.308 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 23:00:51.741 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:00:51.835 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:00:51.906 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2024-08-23 23:00:51.935 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.467 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.496 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:00:52.634 +03:00 [INF] Executed DbCommand (148ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:00:52.728 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:00:52.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:00:52.856 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:00:52.878 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:00:52.889 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.904 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.959 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-23 23:00:52.978 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 23:00:52.982 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:00:52.984 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:00:52.987 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.990 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:52.991 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 23:00:52.999 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 23:00:53.006 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:00:53.007 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.009 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.025 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-23 23:00:53.072 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 23:00:53.082 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:00:53.085 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:00:53.088 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.090 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.091 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:00:53.103 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:00:53.107 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:00:53.108 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.109 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.131 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:00:53.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:00:53.137 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.139 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.140 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:00:53.155 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:00:53.158 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:00:53.159 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.161 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:00:53.354 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 23:00:53.361 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 23:00:53.362 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 23:00:53.363 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 23:00:53.365 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 23:00:53.367 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 23:00:53.426 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 4220.5846ms
2024-08-23 23:00:53.431 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:00:53.446 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 23:00:53.454 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 4459.5166ms
2024-08-23 23:00:56.816 +03:00 [DBG] Connection id "0HN63LOR8M987" received FIN.
2024-08-23 23:00:56.823 +03:00 [DBG] Connection id "0HN63LOR8M987" is closed. The last processed stream ID was 1.
2024-08-23 23:00:56.826 +03:00 [DBG] Connection id "0HN63LOR8M987" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:00:56.831 +03:00 [DBG] Connection id "0HN63LOR8M987" stopped.
2024-08-23 23:01:22.960 +03:00 [DBG] Connection id "0HN63LOR8M988" accepted.
2024-08-23 23:01:22.967 +03:00 [DBG] Connection id "0HN63LOR8M988" started.
2024-08-23 23:01:22.980 +03:00 [DBG] Connection 0HN63LOR8M988 established using the following protocol: "Tls13"
2024-08-23 23:01:22.985 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162
2024-08-23 23:01:23.003 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-23 23:01:23.006 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-23 23:01:23.010 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:01:23.012 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 23:01:23.013 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 23:01:23.112 +03:00 [DBG] Successfully validated the token.
2024-08-23 23:01:23.116 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 23:01:23.119 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:01:23.124 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-23 23:01:23.127 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 23:01:23.129 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 23:01:23.130 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 23:01:23.132 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 23:01:23.134 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 23:01:23.136 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 23:01:23.392 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 23:01:23.396 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 23:01:23.398 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-23 23:01:23.399 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 23:01:23.406 +03:00 [DBG] Connection id "0HN63LOR8M988", Request id "0HN63LOR8M988:00000001": started reading request body.
2024-08-23 23:01:23.409 +03:00 [DBG] Connection id "0HN63LOR8M988", Request id "0HN63LOR8M988:00000001": done reading request body.
2024-08-23 23:01:23.431 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-23 23:01:23.433 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:01:23.436 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:01:23.437 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 23:01:23.444 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:01:23.497 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 23:01:23.503 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:23.504 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:01:23.506 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.509 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.511 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:01:23.535 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:01:23.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.543 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.545 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:23.546 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.547 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.561 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-23 23:01:23.584 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-23 23:01:23.606 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:01:23.611 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:23.612 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:01:23.614 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.615 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.617 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:23.634 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:23.656 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.682 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.707 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:23.709 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.710 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.716 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:23.719 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:01:23.720 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.721 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.723 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:23.730 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:23.734 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:23.734 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.736 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.740 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-23 23:01:23.754 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:01:23.766 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:23.768 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:01:23.773 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.776 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.778 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 23:01:23.792 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 23:01:23.796 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:23.797 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.798 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.803 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 23:01:23.807 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 23:01:23.811 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 23:01:23.812 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 23:01:23.849 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:01:23.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:23.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:01:23.871 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.875 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:23.877 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 23:01:23.897 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 23:01:23.958 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:23.998 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.018 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.048 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:24.051 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:01:24.052 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 23:01:24.082 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 23:01:24.096 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:24.098 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:24.099 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.100 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.102 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:24.103 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:01:24.105 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.108 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.110 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:24.128 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:01:24.131 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:24.132 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.134 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.211 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.278 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.296 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.309 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 23:01:24.316 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 23:01:24.393 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 23:01:24.432 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.435 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.440 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 23:01:24.457 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 23:01:24.530 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:24.533 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 23:01:24.542 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 23:01:24.570 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 23:01:24.601 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 23:01:24.614 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 23:01:24.624 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:24.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:01:24.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:01:24.632 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 23:01:24.650 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 23:01:24.653 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:01:24.663 +03:00 [DBG] Committing transaction.
2024-08-23 23:01:24.673 +03:00 [DBG] Committed transaction.
2024-08-23 23:01:24.681 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.683 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:01:24.691 +03:00 [DBG] Disposing transaction.
2024-08-23 23:01:24.709 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.713 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:01:24.718 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-23 23:01:24.723 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 23:01:24.724 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 23:01:24.726 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 23:01:24.727 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 23:01:24.746 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 23:01:24.749 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 23:01:24.751 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 23:01:24.752 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 23:01:24.752 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 23:01:24.754 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 23:01:24.775 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 1638.8235ms
2024-08-23 23:01:24.777 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:01:24.780 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 23:01:24.782 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162 - 200 - application/json;+charset=utf-8 1796.4913ms
2024-08-23 23:01:26.841 +03:00 [DBG] Connection id "0HN63LOR8M988" received FIN.
2024-08-23 23:01:26.845 +03:00 [DBG] Connection id "0HN63LOR8M988" is closed. The last processed stream ID was 1.
2024-08-23 23:01:26.847 +03:00 [DBG] Connection id "0HN63LOR8M988" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:01:26.849 +03:00 [DBG] Connection id "0HN63LOR8M988" stopped.
2024-08-23 23:05:16.227 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-23 23:05:16.375 +03:00 [DBG] Hosting starting
2024-08-23 23:05:16.423 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-23 23:05:16.428 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-23 23:05:16.435 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-23 23:05:16.438 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-23 23:05:16.439 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-23 23:05:16.446 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-23 23:05:16.454 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-23 23:05:16.457 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-23 23:05:16.458 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-23 23:05:16.469 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-23 23:05:16.474 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 23:05:16.482 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-23 23:05:16.486 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-23 23:05:16.493 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-23 23:05:16.500 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-23 23:05:16.507 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-23 23:05:16.511 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-23 23:05:16.696 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-23 23:05:16.785 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-23 23:05:16.788 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-23 23:05:16.789 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-23 23:05:16.791 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-23 23:05:16.793 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-23 23:05:16.794 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-23 23:05:16.795 +03:00 [INF] Hosting environment: Development
2024-08-23 23:05:16.796 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-23 23:05:16.798 +03:00 [DBG] Hosting started
2024-08-23 23:05:17.068 +03:00 [DBG] Connection id "0HN63LRK6HTBB" received FIN.
2024-08-23 23:05:17.068 +03:00 [DBG] Connection id "0HN63LRK6HTBC" received FIN.
2024-08-23 23:05:17.083 +03:00 [DBG] Connection id "0HN63LRK6HTBC" accepted.
2024-08-23 23:05:17.083 +03:00 [DBG] Connection id "0HN63LRK6HTBB" accepted.
2024-08-23 23:05:17.087 +03:00 [DBG] Connection id "0HN63LRK6HTBC" started.
2024-08-23 23:05:17.087 +03:00 [DBG] Connection id "0HN63LRK6HTBB" started.
2024-08-23 23:05:17.104 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 23:05:17.104 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-23 23:05:17.154 +03:00 [DBG] Connection id "0HN63LRK6HTBB" stopped.
2024-08-23 23:05:17.154 +03:00 [DBG] Connection id "0HN63LRK6HTBC" stopped.
2024-08-23 23:05:17.160 +03:00 [DBG] Connection id "0HN63LRK6HTBC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:05:17.160 +03:00 [DBG] Connection id "0HN63LRK6HTBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:05:19.838 +03:00 [DBG] Connection id "0HN63LRK6HTBD" accepted.
2024-08-23 23:05:19.840 +03:00 [DBG] Connection id "0HN63LRK6HTBD" started.
2024-08-23 23:05:19.917 +03:00 [DBG] Connection 0HN63LRK6HTBD established using the following protocol: "Tls13"
2024-08-23 23:05:20.020 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-23 23:05:20.244 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-23 23:05:20.302 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-23 23:05:20.306 +03:00 [DBG] Request did not match any endpoints
2024-08-23 23:05:20.566 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-23 23:05:20.606 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-23 23:05:20.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 617.0572ms
2024-08-23 23:05:20.645 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-23 23:05:20.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-23 23:05:20.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.2676ms
2024-08-23 23:05:20.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 173.0813ms
2024-08-23 23:05:22.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-23 23:05:22.083 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-23 23:05:22.086 +03:00 [DBG] Request did not match any endpoints
2024-08-23 23:05:22.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 368.1469ms
2024-08-23 23:05:32.155 +03:00 [DBG] Connection id "0HN63LRK6HTBD" received FIN.
2024-08-23 23:05:32.166 +03:00 [DBG] Connection id "0HN63LRK6HTBD" is closed. The last processed stream ID was 7.
2024-08-23 23:05:32.170 +03:00 [DBG] Connection id "0HN63LRK6HTBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:05:32.177 +03:00 [DBG] Connection id "0HN63LRK6HTBD" stopped.
2024-08-23 23:05:45.044 +03:00 [DBG] Connection id "0HN63LRK6HTBE" accepted.
2024-08-23 23:05:45.052 +03:00 [DBG] Connection id "0HN63LRK6HTBE" started.
2024-08-23 23:05:45.074 +03:00 [DBG] Connection 0HN63LRK6HTBE established using the following protocol: "Tls13"
2024-08-23 23:05:45.080 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-23 23:05:45.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-23 23:05:45.107 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-23 23:05:45.111 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:05:45.113 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 23:05:45.115 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 23:05:45.196 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-23 23:05:45.204 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:05:45.246 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-23 23:05:45.253 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 23:05:45.258 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 23:05:45.259 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-23 23:05:45.261 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 23:05:45.262 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 23:05:45.264 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 23:05:45.445 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-23 23:05:45.513 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-23 23:05:45.526 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 23:05:45.530 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-23 23:05:45.533 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 23:05:45.551 +03:00 [DBG] Connection id "0HN63LRK6HTBE", Request id "0HN63LRK6HTBE:00000001": started reading request body.
2024-08-23 23:05:45.556 +03:00 [DBG] Connection id "0HN63LRK6HTBE", Request id "0HN63LRK6HTBE:00000001": done reading request body.
2024-08-23 23:05:45.596 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-23 23:05:45.599 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:05:45.601 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:05:45.604 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-23 23:05:45.638 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-23 23:05:46.581 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-23 23:05:46.587 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-23 23:05:46.590 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-23 23:05:46.592 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-23 23:05:46.594 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-23 23:05:46.729 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:05:46.734 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:05:46.739 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-23 23:05:46.789 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:05:46.793 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:05:46.794 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-23 23:05:47.027 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 23:05:47.206 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-23 23:05:47.324 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-23 23:05:47.759 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:05:47.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:05:47.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (66ms).
2024-08-23 23:05:47.942 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.410 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.435 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:05:48.567 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:05:48.649 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:05:48.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:05:48.756 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:05:48.776 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:05:48.789 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.803 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.858 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-23 23:05:48.874 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 23:05:48.878 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:05:48.879 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:05:48.880 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.885 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.888 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 23:05:48.899 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-23 23:05:48.905 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:05:48.905 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.907 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.923 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-23 23:05:48.947 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-23 23:05:48.954 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:05:48.957 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-23 23:05:48.958 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.960 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.961 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:05:48.973 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:05:48.983 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:05:48.985 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:48.986 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:49.005 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:05:49.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:05:49.009 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:49.010 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:49.011 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:05:49.015 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-23 23:05:49.020 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:05:49.021 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:49.022 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:05:49.216 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 23:05:49.224 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 23:05:49.226 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 23:05:49.226 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 23:05:49.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 23:05:49.229 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 23:05:49.291 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 4021.9137ms
2024-08-23 23:05:49.296 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-23 23:05:49.308 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 23:05:49.317 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 4237.6958ms
2024-08-23 23:05:52.188 +03:00 [DBG] Connection id "0HN63LRK6HTBE" received FIN.
2024-08-23 23:05:52.201 +03:00 [DBG] Connection id "0HN63LRK6HTBE" is closed. The last processed stream ID was 1.
2024-08-23 23:05:52.209 +03:00 [DBG] Connection id "0HN63LRK6HTBE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:05:52.229 +03:00 [DBG] Connection id "0HN63LRK6HTBE" stopped.
2024-08-23 23:06:25.494 +03:00 [DBG] Connection id "0HN63LRK6HTBF" accepted.
2024-08-23 23:06:25.497 +03:00 [DBG] Connection id "0HN63LRK6HTBF" started.
2024-08-23 23:06:25.542 +03:00 [DBG] Connection 0HN63LRK6HTBF established using the following protocol: "Tls13"
2024-08-23 23:06:25.550 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162
2024-08-23 23:06:25.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-23 23:06:25.577 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-23 23:06:25.578 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:06:25.579 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-23 23:06:25.580 +03:00 [INF] No CORS policy found for the specified request.
2024-08-23 23:06:25.693 +03:00 [DBG] Successfully validated the token.
2024-08-23 23:06:25.696 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-23 23:06:25.699 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:06:25.707 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-23 23:06:25.711 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-23 23:06:25.713 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-23 23:06:25.714 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-23 23:06:25.717 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-23 23:06:25.719 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-23 23:06:25.722 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 23:06:25.998 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-23 23:06:26.004 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 23:06:26.007 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-23 23:06:26.009 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-23 23:06:26.015 +03:00 [DBG] Connection id "0HN63LRK6HTBF", Request id "0HN63LRK6HTBF:00000001": started reading request body.
2024-08-23 23:06:26.019 +03:00 [DBG] Connection id "0HN63LRK6HTBF", Request id "0HN63LRK6HTBF:00000001": done reading request body.
2024-08-23 23:06:26.044 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-23 23:06:26.046 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:06:26.047 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:06:26.049 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-23 23:06:26.062 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-23 23:06:26.115 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-23 23:06:26.123 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.124 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:06:26.126 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.127 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.129 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:06:26.149 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-23 23:06:26.154 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.156 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.158 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.159 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.159 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.161 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.173 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-23 23:06:26.194 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-23 23:06:26.210 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:06:26.213 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.214 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-23 23:06:26.215 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.218 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.221 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.229 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.251 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.280 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.306 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.308 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.309 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.314 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.317 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:06:26.320 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.322 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.323 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.325 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.328 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.329 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.330 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.338 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-23 23:06:26.355 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:06:26.362 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.364 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:06:26.366 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.369 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.372 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 23:06:26.391 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-23 23:06:26.394 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.395 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.396 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.405 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-23 23:06:26.409 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-23 23:06:26.411 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-23 23:06:26.413 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-23 23:06:26.450 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-23 23:06:26.463 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:06:26.466 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.469 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.471 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 23:06:26.492 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-23 23:06:26.538 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.558 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.574 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.600 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:06:26.604 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 23:06:26.624 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-23 23:06:26.637 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.639 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.640 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.641 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.643 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:26.644 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:06:26.646 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.647 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.648 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.664 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-23 23:06:26.668 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:26.670 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.671 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.740 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.792 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:26.820 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 23:06:26.825 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 23:06:26.883 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 23:06:26.918 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.921 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:26.927 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-23 23:06:26.943 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-23 23:06:27.014 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:27.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-08-23 23:06:27.024 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 23:06:27.053 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-23 23:06:27.086 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 23:06:27.098 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-23 23:06:27.110 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:27.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-23 23:06:27.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-08-23 23:06:27.117 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 23:06:27.131 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-23 23:06:27.134 +03:00 [DBG] A data reader was disposed.
2024-08-23 23:06:27.147 +03:00 [DBG] Committing transaction.
2024-08-23 23:06:27.160 +03:00 [DBG] Committed transaction.
2024-08-23 23:06:27.169 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:27.172 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-23 23:06:27.187 +03:00 [DBG] Disposing transaction.
2024-08-23 23:06:27.209 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:27.212 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-23 23:06:27.223 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-23 23:06:27.228 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-23 23:06:27.230 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-23 23:06:27.231 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-23 23:06:27.232 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-23 23:06:27.263 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-23 23:06:27.268 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-23 23:06:27.270 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-23 23:06:27.273 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-23 23:06:27.275 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-23 23:06:27.277 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-23 23:06:27.310 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 1588.1019ms
2024-08-23 23:06:27.313 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-23 23:06:27.316 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-23 23:06:27.318 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162 - 200 - application/json;+charset=utf-8 1767.3091ms
2024-08-23 23:06:32.260 +03:00 [DBG] Connection id "0HN63LRK6HTBF" received FIN.
2024-08-23 23:06:32.265 +03:00 [DBG] Connection id "0HN63LRK6HTBF" is closed. The last processed stream ID was 1.
2024-08-23 23:06:32.271 +03:00 [DBG] Connection id "0HN63LRK6HTBF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-23 23:06:32.289 +03:00 [DBG] Connection id "0HN63LRK6HTBF" stopped.
2024-08-24 20:49:07.765 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 20:49:08.178 +03:00 [DBG] Hosting starting
2024-08-24 20:49:08.468 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 20:49:08.481 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 20:49:08.598 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 20:49:08.631 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 20:49:08.659 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 20:49:08.719 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 20:49:08.746 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 20:49:08.749 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 20:49:08.752 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 20:49:08.778 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 20:49:08.788 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 20:49:08.801 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 20:49:08.807 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 20:49:08.827 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 20:49:08.845 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 20:49:08.860 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 20:49:08.866 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 20:49:09.921 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 20:49:10.139 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 20:49:10.142 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 20:49:10.145 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 20:49:10.148 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 20:49:10.150 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 20:49:10.154 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 20:49:10.157 +03:00 [INF] Hosting environment: Development
2024-08-24 20:49:10.161 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 20:49:10.164 +03:00 [DBG] Hosting started
2024-08-24 20:49:10.390 +03:00 [DBG] Connection id "0HN64CK7HI5QI" accepted.
2024-08-24 20:49:10.398 +03:00 [DBG] Connection id "0HN64CK7HI5QI" started.
2024-08-24 20:49:10.484 +03:00 [DBG] Connection id "0HN64CK7HI5QJ" accepted.
2024-08-24 20:49:10.488 +03:00 [DBG] Connection id "0HN64CK7HI5QJ" started.
2024-08-24 20:49:11.683 +03:00 [DBG] Connection id "0HN64CK7HI5QK" accepted.
2024-08-24 20:49:12.060 +03:00 [DBG] Connection id "0HN64CK7HI5QK" started.
2024-08-24 20:49:12.133 +03:00 [DBG] Connection id "0HN64CK7HI5QL" accepted.
2024-08-24 20:49:12.140 +03:00 [DBG] Connection id "0HN64CK7HI5QL" started.
2024-08-24 20:49:12.233 +03:00 [DBG] Connection id "0HN64CK7HI5QL" received FIN.
2024-08-24 20:49:12.315 +03:00 [DBG] Connection 0HN64CK7HI5QK established using the following protocol: "Tls13"
2024-08-24 20:49:12.315 +03:00 [DBG] Connection 0HN64CK7HI5QL established using the following protocol: "Tls13"
2024-08-24 20:49:12.374 +03:00 [DBG] Connection id "0HN64CK7HI5QL" is closed. The last processed stream ID was 0.
2024-08-24 20:49:12.382 +03:00 [DBG] Connection id "0HN64CK7HI5QL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:12.414 +03:00 [DBG] Connection id "0HN64CK7HI5QL" stopped.
2024-08-24 20:49:12.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger - -
2024-08-24 20:49:13.513 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 20:49:13.603 +03:00 [DBG] No candidates found for the request path '/swagger'
2024-08-24 20:49:13.607 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:13.730 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 20:49:13.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger - - - 301 0 - 1215.6213ms
2024-08-24 20:49:13.744 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 20:49:13.746 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:14.419 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 20:49:14.461 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 20:49:14.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 737.6089ms
2024-08-24 20:49:14.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - -
2024-08-24 20:49:14.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - -
2024-08-24 20:49:14.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - -
2024-08-24 20:49:14.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 20:49:14.494 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-08-24 20:49:14.496 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-08-24 20:49:14.498 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-08-24 20:49:14.503 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:14.506 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:14.509 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:14.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 19.1008ms
2024-08-24 20:49:14.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 20:49:14.649 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-24 20:49:14.649 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-24 20:49:14.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui.css - - - 200 144929 text/css 175.1320ms
2024-08-24 20:49:14.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 174.0656ms
2024-08-24 20:49:14.696 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-24 20:49:14.699 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 207.4919ms
2024-08-24 20:49:14.816 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 297.0202ms
2024-08-24 20:49:15.337 +03:00 [DBG] Connection id "0HN64CK7HI5QK" received FIN.
2024-08-24 20:49:15.341 +03:00 [DBG] Connection id "0HN64CK7HI5QK" is closed. The last processed stream ID was 13.
2024-08-24 20:49:15.345 +03:00 [DBG] Connection id "0HN64CK7HI5QK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:15.359 +03:00 [DBG] Connection id "0HN64CK7HI5QK" stopped.
2024-08-24 20:49:17.527 +03:00 [DBG] Connection id "0HN64CK7HI5QM" accepted.
2024-08-24 20:49:17.531 +03:00 [DBG] Connection id "0HN64CK7HI5QM" started.
2024-08-24 20:49:17.545 +03:00 [DBG] Connection 0HN64CK7HI5QM established using the following protocol: "Tls13"
2024-08-24 20:49:17.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 20:49:17.556 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 20:49:17.560 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:17.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - -
2024-08-24 20:49:17.633 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-08-24 20:49:17.638 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:49:17.644 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-24 20:49:17.663 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/favicon-32x32.png - - - 200 628 image/png 36.8588ms
2024-08-24 20:49:18.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 851.8234ms
2024-08-24 20:49:20.342 +03:00 [DBG] Connection id "0HN64CK7HI5QM" received FIN.
2024-08-24 20:49:20.346 +03:00 [DBG] Connection id "0HN64CK7HI5QM" is closed. The last processed stream ID was 3.
2024-08-24 20:49:20.351 +03:00 [DBG] Connection id "0HN64CK7HI5QM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:20.367 +03:00 [DBG] Connection id "0HN64CK7HI5QM" stopped.
2024-08-24 20:49:20.514 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-24 20:49:20.517 +03:00 [DBG] Connection id "0HN64CK7HI5QI" stopped.
2024-08-24 20:49:20.521 +03:00 [DBG] Connection id "0HN64CK7HI5QI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:20.530 +03:00 [DBG] Authentication of the HTTPS connection timed out.
2024-08-24 20:49:20.532 +03:00 [DBG] Connection id "0HN64CK7HI5QJ" stopped.
2024-08-24 20:49:20.536 +03:00 [DBG] Connection id "0HN64CK7HI5QJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:39.915 +03:00 [DBG] Connection id "0HN64CK7HI5QN" accepted.
2024-08-24 20:49:39.926 +03:00 [DBG] Connection id "0HN64CK7HI5QN" started.
2024-08-24 20:49:39.936 +03:00 [DBG] Connection 0HN64CK7HI5QN established using the following protocol: "Tls13"
2024-08-24 20:49:39.956 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 20:49:39.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 20:49:40.006 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 20:49:40.012 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:49:40.017 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:49:40.025 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 20:49:40.273 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 20:49:40.284 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:49:40.393 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 20:49:40.400 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:49:40.405 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:49:40.410 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 20:49:40.414 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:49:40.417 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:49:40.422 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 20:49:41.262 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 20:49:41.449 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 20:49:41.471 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 20:49:41.480 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 20:49:41.487 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 20:49:41.532 +03:00 [DBG] Connection id "0HN64CK7HI5QN", Request id "0HN64CK7HI5QN:00000001": started reading request body.
2024-08-24 20:49:41.539 +03:00 [DBG] Connection id "0HN64CK7HI5QN", Request id "0HN64CK7HI5QN:00000001": done reading request body.
2024-08-24 20:49:41.621 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 20:49:41.627 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:49:41.633 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:49:41.638 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 20:49:41.847 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:49:44.380 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 20:49:44.386 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 20:49:44.392 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 20:49:44.398 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 20:49:44.403 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 20:49:44.720 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:49:44.727 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:49:44.732 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:49:44.864 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:49:44.869 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:49:44.876 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:49:45.505 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:49:45.982 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 20:49:46.262 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 20:49:47.291 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:49:47.493 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:49:47.674 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (185ms).
2024-08-24 20:49:47.734 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:49.296 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:49.351 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:49:49.635 +03:00 [INF] Executed DbCommand (292ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:49:49.845 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:49:50.026 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:49:50.093 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:49:50.135 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:49:50.161 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.191 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.394 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 20:49:50.441 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 20:49:50.450 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:49:50.453 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:49:50.459 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.467 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.471 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 20:49:50.496 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 20:49:50.509 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:49:50.511 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.517 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.560 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 20:49:50.616 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 20:49:50.626 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:49:50.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:49:50.636 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.645 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.660 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:49:50.716 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:49:50.735 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:49:50.743 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.746 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:49:50.796 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:49:50.801 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.805 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.810 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:49:50.827 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:49:50.833 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:49:50.835 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:50.840 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:49:51.292 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:49:51.307 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 20:49:51.310 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:49:51.312 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:49:51.316 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:49:51.321 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 20:49:51.468 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 11031.5323ms
2024-08-24 20:49:51.479 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:49:51.504 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:49:51.518 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 11562.5554ms
2024-08-24 20:49:55.381 +03:00 [DBG] Connection id "0HN64CK7HI5QN" received FIN.
2024-08-24 20:49:55.388 +03:00 [DBG] Connection id "0HN64CK7HI5QN" is closed. The last processed stream ID was 1.
2024-08-24 20:49:55.397 +03:00 [DBG] Connection id "0HN64CK7HI5QN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:49:55.411 +03:00 [DBG] Connection id "0HN64CK7HI5QN" stopped.
2024-08-24 20:50:25.128 +03:00 [DBG] Connection id "0HN64CK7HI5QO" accepted.
2024-08-24 20:50:25.185 +03:00 [DBG] Connection id "0HN64CK7HI5QO" started.
2024-08-24 20:50:25.224 +03:00 [DBG] Connection 0HN64CK7HI5QO established using the following protocol: "Tls13"
2024-08-24 20:50:25.234 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161
2024-08-24 20:50:25.257 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-24 20:50:25.264 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-24 20:50:25.268 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:50:25.271 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:50:25.273 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 20:50:25.588 +03:00 [DBG] Successfully validated the token.
2024-08-24 20:50:25.596 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 20:50:25.600 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:50:25.615 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 20:50:25.621 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:50:25.628 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:50:25.634 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 20:50:25.642 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:50:25.648 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:50:25.654 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 20:50:26.438 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 20:50:26.445 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 20:50:26.450 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-24 20:50:26.456 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 20:50:26.473 +03:00 [DBG] Connection id "0HN64CK7HI5QO", Request id "0HN64CK7HI5QO:00000001": started reading request body.
2024-08-24 20:50:26.479 +03:00 [DBG] Connection id "0HN64CK7HI5QO", Request id "0HN64CK7HI5QO:00000001": done reading request body.
2024-08-24 20:50:26.532 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-24 20:50:26.536 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:50:26.540 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:50:26.545 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 20:50:26.563 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:50:26.714 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:50:26.724 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:26.728 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:50:26.732 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.737 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.742 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:50:26.769 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:50:26.778 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:26.783 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:26.787 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:26.793 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:26.796 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.800 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.831 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-24 20:50:26.882 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-24 20:50:26.917 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:50:26.924 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:26.928 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:50:26.933 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.937 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:26.945 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:26.966 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:27.020 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:27.107 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:27.191 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:27.195 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.200 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:27.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:50:27.232 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.236 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.240 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:27.253 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:27.262 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:27.265 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.269 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.289 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-24 20:50:27.331 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:50:27.356 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:27.361 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:50:27.369 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.375 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.381 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 20:50:27.404 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 20:50:27.415 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:27.418 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.423 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.448 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-24 20:50:27.455 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-24 20:50:27.464 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-24 20:50:27.471 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-24 20:50:27.558 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:50:27.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:27.594 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:50:27.599 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.604 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:27.609 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 20:50:27.635 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 20:50:27.761 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:27.802 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:27.846 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:27.928 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:27.932 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:50:27.938 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 20:50:27.966 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 20:50:27.996 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:27.999 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:28.002 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.006 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.012 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:28.015 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:50:28.019 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.023 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.028 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:28.042 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:50:28.049 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:28.052 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.056 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.229 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:28.350 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:28.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:28.418 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 20:50:28.431 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 20:50:28.566 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 20:50:28.629 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.635 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:28.646 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-24 20:50:28.701 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-24 20:50:28.895 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:28.899 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:50:28.919 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 20:50:28.955 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 20:50:29.036 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 20:50:29.069 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 20:50:29.086 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:29.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:50:29.097 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:50:29.101 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 20:50:29.118 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 20:50:29.125 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:50:29.146 +03:00 [DBG] Committing transaction.
2024-08-24 20:50:29.167 +03:00 [DBG] Committed transaction.
2024-08-24 20:50:29.182 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:29.188 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:50:29.212 +03:00 [DBG] Disposing transaction.
2024-08-24 20:50:29.270 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:29.278 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:50:29.295 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-24 20:50:29.303 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 20:50:29.307 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 20:50:29.311 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 20:50:29.316 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-24 20:50:29.363 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:50:29.373 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 20:50:29.376 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:50:29.379 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:50:29.381 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:50:29.386 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 20:50:29.444 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3789.9661ms
2024-08-24 20:50:29.450 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:50:29.454 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:50:29.458 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161 - 200 - application/json;+charset=utf-8 4224.5799ms
2024-08-24 20:50:35.423 +03:00 [DBG] Connection id "0HN64CK7HI5QO" received FIN.
2024-08-24 20:50:35.430 +03:00 [DBG] Connection id "0HN64CK7HI5QO" is closed. The last processed stream ID was 1.
2024-08-24 20:50:35.438 +03:00 [DBG] Connection id "0HN64CK7HI5QO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:50:35.462 +03:00 [DBG] Connection id "0HN64CK7HI5QO" stopped.
2024-08-24 20:55:01.426 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 20:55:01.768 +03:00 [DBG] Hosting starting
2024-08-24 20:55:01.871 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 20:55:01.881 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 20:55:01.929 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 20:55:01.934 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 20:55:01.939 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 20:55:01.967 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 20:55:01.993 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 20:55:01.997 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 20:55:02.001 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 20:55:02.027 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 20:55:02.039 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 20:55:02.051 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 20:55:02.057 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 20:55:02.076 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 20:55:02.091 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 20:55:02.106 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 20:55:02.111 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 20:55:02.653 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 20:55:02.823 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 20:55:02.826 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 20:55:02.829 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 20:55:02.832 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 20:55:02.835 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 20:55:02.838 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 20:55:02.840 +03:00 [INF] Hosting environment: Development
2024-08-24 20:55:02.843 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 20:55:02.845 +03:00 [DBG] Connection id "0HN64CNGIR1TP" accepted.
2024-08-24 20:55:02.846 +03:00 [DBG] Hosting started
2024-08-24 20:55:02.853 +03:00 [DBG] Connection id "0HN64CNGIR1TP" started.
2024-08-24 20:55:02.858 +03:00 [DBG] Connection id "0HN64CNGIR1TP" received FIN.
2024-08-24 20:55:02.904 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 20:55:03.331 +03:00 [DBG] Connection id "0HN64CNGIR1TP" stopped.
2024-08-24 20:55:03.341 +03:00 [DBG] Connection id "0HN64CNGIR1TP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:55:05.720 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" accepted.
2024-08-24 20:55:05.723 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" started.
2024-08-24 20:55:05.852 +03:00 [DBG] Connection 0HN64CNGIR1TQ established using the following protocol: "Tls13"
2024-08-24 20:55:06.009 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 20:55:06.414 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 20:55:06.508 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 20:55:06.514 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:55:07.136 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 20:55:07.203 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 20:55:07.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1235.4188ms
2024-08-24 20:55:07.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 20:55:07.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 18.5018ms
2024-08-24 20:55:07.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 20:55:07.467 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 167.4775ms
2024-08-24 20:55:10.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 20:55:10.310 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 20:55:10.314 +03:00 [DBG] Request did not match any endpoints
2024-08-24 20:55:11.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 913.9887ms
2024-08-24 20:55:15.785 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" received FIN.
2024-08-24 20:55:15.837 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" is closed. The last processed stream ID was 7.
2024-08-24 20:55:15.856 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:55:15.881 +03:00 [DBG] Connection id "0HN64CNGIR1TQ" stopped.
2024-08-24 20:55:23.493 +03:00 [DBG] Connection id "0HN64CNGIR1TR" accepted.
2024-08-24 20:55:23.497 +03:00 [DBG] Connection id "0HN64CNGIR1TR" started.
2024-08-24 20:55:23.540 +03:00 [DBG] Connection 0HN64CNGIR1TR established using the following protocol: "Tls13"
2024-08-24 20:55:23.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/60 - -
2024-08-24 20:55:23.576 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Discount/60'
2024-08-24 20:55:23.600 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/60'
2024-08-24 20:55:23.607 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)'
2024-08-24 20:55:23.619 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:55:23.800 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 20:55:23.812 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)'
2024-08-24 20:55:23.931 +03:00 [INF] Route matched with {action = "GetDiscountById", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDiscountById(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-24 20:55:23.940 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:55:23.946 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:55:23.952 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 20:55:23.960 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:55:23.965 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:55:23.971 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-24 20:55:24.553 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 20:55:25.393 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-24 20:55:25.414 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-24 20:55:25.423 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-24 20:55:25.430 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-24 20:55:25.434 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-24 20:55:25.439 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-24 20:55:25.525 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-24 20:55:28.076 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 20:55:28.081 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 20:55:28.085 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 20:55:28.091 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 20:55:28.096 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 20:55:28.443 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:55:28.449 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:55:28.453 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 20:55:28.574 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:55:28.579 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:55:28.583 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 20:55:29.155 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:55:29.523 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(d => d.Room)
    .FirstOrDefault(d => d.DiscountID == __id_0)'
2024-08-24 20:55:30.026 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-24 20:55:30.832 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
            FROM Discounts AS d
            INNER JOIN Rooms AS r ON d.RoomID == r.RoomID
            WHERE d.DiscountID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:55:31.092 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:55:31.232 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (139ms).
2024-08-24 20:55:31.310 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:32.343 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:32.403 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
WHERE [d].[DiscountID] = @__id_0
2024-08-24 20:55:32.466 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - -
2024-08-24 20:55:32.475 +03:00 [DBG] 2 candidate(s) found for the request path '/api/Discount/top-discounts'
2024-08-24 20:55:32.478 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)' with route pattern 'api/Discount/top-discounts' is valid for the request path '/api/Discount/top-discounts'
2024-08-24 20:55:32.482 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)' with route pattern 'api/Discount/{id}' is valid for the request path '/api/Discount/top-discounts'
2024-08-24 20:55:32.487 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-24 20:55:32.491 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:55:32.494 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 20:55:32.498 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-24 20:55:32.515 +03:00 [INF] Route matched with {action = "GetRoomsWithHighestDiscounts", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomsWithHighestDiscountsAsync(Int32) on controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API).
2024-08-24 20:55:32.523 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:55:32.527 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:55:32.531 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 20:55:32.541 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:55:32.545 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:55:32.549 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-24 20:55:32.561 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.DiscountController (HotelBookingPlatform.API)
2024-08-24 20:55:32.618 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' ...
2024-08-24 20:55:32.625 +03:00 [DBG] Attempting to bind parameter 'topN' of type 'System.Int32' using the name 'topN' in request data ...
2024-08-24 20:55:32.632 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-24 20:55:32.636 +03:00 [DBG] Done attempting to bind parameter 'topN' of type 'System.Int32'.
2024-08-24 20:55:32.642 +03:00 [DBG] Attempting to validate the bound parameter 'topN' of type 'System.Int32' ...
2024-08-24 20:55:32.646 +03:00 [DBG] Done attempting to validate the bound parameter 'topN' of type 'System.Int32'.
2024-08-24 20:55:32.663 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:55:32.696 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Include(r => r.Room)
    .Where(d => d.StartDateUtc <= __now_0 && d.EndDateUtc >= __now_0)
    .OrderByDescending(d => d.Percentage)
    .Take(__p_1)'
2024-08-24 20:55:32.711 +03:00 [DBG] Including navigation: 'Discount.Room'.
2024-08-24 20:55:32.809 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Discount>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Room.AdultsCapacity (int) Required, 9], [Property: Room.ChildrenCapacity (int) Required, 10], [Property: Room.CreatedAtUtc (DateTime) Required, 11], [Property: Room.Number (string) Required MaxLength(50), 12], [Property: Room.PricePerNight (decimal) Required, 13], [Property: Room.RoomClassID (int) Required FK Index, 14] }
        SELECT t.DiscountID, t.CreatedAtUtc, t.EndDateUtc, t.IsActive, t.Percentage, t.RoomClassID, t.RoomID, t.StartDateUtc, r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID
        FROM 
        (
            SELECT TOP(@__p_1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE (d.StartDateUtc <= @__now_0) && (d.EndDateUtc >= @__now_0)
            ORDER BY d.Percentage DESC
        ) AS t
        INNER JOIN Rooms AS r ON t.RoomID == r.RoomID
        ORDER BY t.Percentage DESC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 20:55:32.814 +03:00 [INF] Executed DbCommand (423ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM [Discounts] AS [d]
INNER JOIN [Rooms] AS [r] ON [d].[RoomID] = [r].[RoomID]
WHERE [d].[DiscountID] = @__id_0
2024-08-24 20:55:32.826 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:55:32.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:55:32.838 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:32.871 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:32.884 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-24 20:55:32.914 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__now_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DiscountID], [t].[CreatedAtUtc], [t].[EndDateUtc], [t].[IsActive], [t].[Percentage], [t].[RoomClassID], [t].[RoomID], [t].[StartDateUtc], [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID]
FROM (
    SELECT TOP(@__p_1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
    FROM [Discounts] AS [d]
    WHERE ([d].[StartDateUtc] <= @__now_0) AND ([d].[EndDateUtc] >= @__now_0)
    ORDER BY [d].[Percentage] DESC
) AS [t]
INNER JOIN [Rooms] AS [r] ON [t].[RoomID] = [r].[RoomID]
ORDER BY [t].[Percentage] DESC
2024-08-24 20:55:33.061 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.061 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.209 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.209 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.305 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.312 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.315 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.320 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.325 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.329 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.334 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.339 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:55:33.349 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:55:33.349 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:55:33.374 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:33.374 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:33.410 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:33.410 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:55:33.480 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:55:33.489 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:55:33.499 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 20:55:33.501 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:55:33.501 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-08-24 20:55:33.503 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:55:33.511 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-08-24 20:55:33.514 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:55:33.516 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:55:33.520 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 20:55:33.522 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:55:33.530 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:55:33.534 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[HotelBookingPlatform.Domain.DTOs.Discount.DiscountDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-24 20:55:33.662 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API) in 9676.5816ms
2024-08-24 20:55:33.662 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API) in 1097.1274ms
2024-08-24 20:55:33.674 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetDiscountById (HotelBookingPlatform.API)'
2024-08-24 20:55:33.674 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.DiscountController.GetRoomsWithHighestDiscountsAsync (HotelBookingPlatform.API)'
2024-08-24 20:55:33.710 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:55:33.710 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:55:33.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/top-discounts?topN=5 - - - 200 - application/json;+charset=utf-8 1262.4990ms
2024-08-24 20:55:33.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/api/Discount/60 - - - 200 - application/json;+charset=utf-8 10180.9989ms
2024-08-24 20:55:35.803 +03:00 [DBG] Connection id "0HN64CNGIR1TR" received FIN.
2024-08-24 20:55:35.807 +03:00 [DBG] Connection id "0HN64CNGIR1TR" is closed. The last processed stream ID was 3.
2024-08-24 20:55:35.813 +03:00 [DBG] Connection id "0HN64CNGIR1TR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:55:35.836 +03:00 [DBG] Connection id "0HN64CNGIR1TR" stopped.
2024-08-24 20:59:00.950 +03:00 [DBG] Connection id "0HN64CNGIR1TS" accepted.
2024-08-24 20:59:00.961 +03:00 [DBG] Connection id "0HN64CNGIR1TS" started.
2024-08-24 20:59:00.985 +03:00 [DBG] Connection 0HN64CNGIR1TS established using the following protocol: "Tls13"
2024-08-24 20:59:01.012 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 20:59:01.015 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 20:59:01.018 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 20:59:01.023 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:59:01.026 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:59:01.038 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 20:59:01.045 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 20:59:01.048 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:59:01.065 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 20:59:01.071 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:59:01.077 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:59:01.081 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 20:59:01.088 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:59:01.094 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:59:01.099 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 20:59:01.145 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 20:59:01.149 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 20:59:01.157 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 20:59:01.163 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 20:59:01.207 +03:00 [DBG] Connection id "0HN64CNGIR1TS", Request id "0HN64CNGIR1TS:00000001": started reading request body.
2024-08-24 20:59:01.215 +03:00 [DBG] Connection id "0HN64CNGIR1TS", Request id "0HN64CNGIR1TS:00000001": done reading request body.
2024-08-24 20:59:01.299 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 20:59:01.304 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:59:01.311 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:59:01.316 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 20:59:01.336 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 20:59:01.510 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:59:01.524 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 20:59:01.530 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 20:59:01.776 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:59:01.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:01.818 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 20:59:01.826 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:01.835 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:01.840 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:59:01.880 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:59:01.951 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:02.076 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:02.144 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:02.151 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:02.154 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.158 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.278 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 20:59:02.313 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 20:59:02.321 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:02.325 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:02.329 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.334 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.339 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 20:59:02.358 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 20:59:02.366 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:02.369 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.374 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.426 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 20:59:02.455 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 20:59:02.461 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:02.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:02.469 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.474 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.478 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:59:02.497 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:59:02.508 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:02.511 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.515 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.569 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:02.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 20:59:02.579 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.583 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.588 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:59:02.610 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 20:59:02.618 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:02.621 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:02.626 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:03.094 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:59:03.103 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 20:59:03.106 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:59:03.109 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:59:03.111 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:59:03.116 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 20:59:03.157 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 2057.9469ms
2024-08-24 20:59:03.161 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 20:59:03.167 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:59:03.175 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 2163.6320ms
2024-08-24 20:59:06.070 +03:00 [DBG] Connection id "0HN64CNGIR1TS" received FIN.
2024-08-24 20:59:06.076 +03:00 [DBG] Connection id "0HN64CNGIR1TS" is closed. The last processed stream ID was 1.
2024-08-24 20:59:06.082 +03:00 [DBG] Connection id "0HN64CNGIR1TS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:59:06.095 +03:00 [DBG] Connection id "0HN64CNGIR1TS" stopped.
2024-08-24 20:59:37.641 +03:00 [DBG] Connection id "0HN64CNGIR1TT" accepted.
2024-08-24 20:59:37.650 +03:00 [DBG] Connection id "0HN64CNGIR1TT" started.
2024-08-24 20:59:37.717 +03:00 [DBG] Connection 0HN64CNGIR1TT established using the following protocol: "Tls13"
2024-08-24 20:59:37.728 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161
2024-08-24 20:59:37.754 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-24 20:59:37.760 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-24 20:59:37.764 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:59:37.767 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 20:59:37.768 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 20:59:38.060 +03:00 [DBG] Successfully validated the token.
2024-08-24 20:59:38.065 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 20:59:38.070 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:59:38.081 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 20:59:38.088 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 20:59:38.093 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 20:59:38.098 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 20:59:38.106 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 20:59:38.112 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 20:59:38.117 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 20:59:38.126 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 20:59:38.131 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 20:59:38.135 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-24 20:59:38.141 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 20:59:38.159 +03:00 [DBG] Connection id "0HN64CNGIR1TT", Request id "0HN64CNGIR1TT:00000001": started reading request body.
2024-08-24 20:59:38.164 +03:00 [DBG] Connection id "0HN64CNGIR1TT", Request id "0HN64CNGIR1TT:00000001": done reading request body.
2024-08-24 20:59:38.213 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-24 20:59:38.217 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:59:38.222 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:59:38.227 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 20:59:38.242 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 20:59:38.259 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 20:59:38.267 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:38.271 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:38.277 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.281 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.285 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:59:38.305 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 20:59:38.313 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:38.318 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:38.323 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:38.327 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:38.329 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.333 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.344 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-24 20:59:38.350 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-24 20:59:38.367 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:59:38.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:38.378 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:38.382 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.387 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.392 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:38.416 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:38.423 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:38.444 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:38.482 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:38.485 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.490 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.509 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:38.513 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:38.517 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.521 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.527 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:38.549 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:38.557 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:38.560 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.565 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.580 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkInDate_1 && d.EndDateUtc >= __checkOutDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-24 20:59:38.629 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkInDate_1)) && (d.EndDateUtc >= @__checkOutDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:59:38.644 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:38.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 20:59:38.653 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.657 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.662 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 20:59:38.680 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkInDate_1='?' (DbType = DateTime2), @__checkOutDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkInDate_1)) AND ([d].[EndDateUtc] >= @__checkOutDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 20:59:38.687 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:38.690 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.694 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.711 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-24 20:59:38.721 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-24 20:59:38.728 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-24 20:59:38.735 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-24 20:59:38.858 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 20:59:38.892 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:38.898 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 20:59:38.903 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.909 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:38.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 20:59:38.955 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 20:59:39.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.127 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.162 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.214 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:39.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-24 20:59:39.227 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 20:59:39.256 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 20:59:39.295 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:39.299 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:39.301 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.306 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.314 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:39.319 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:59:39.324 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.330 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.335 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:39.352 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 20:59:39.361 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:39.364 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.369 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.489 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.636 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.666 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:39.693 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 20:59:39.702 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 20:59:39.881 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 20:59:39.945 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.951 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:39.961 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-24 20:59:39.994 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-24 20:59:40.184 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:40.190 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-24 20:59:40.213 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 20:59:40.245 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 20:59:40.315 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 20:59:40.344 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 20:59:40.361 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:40.369 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 20:59:40.373 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 20:59:40.379 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 20:59:40.397 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 20:59:40.406 +03:00 [DBG] A data reader was disposed.
2024-08-24 20:59:40.429 +03:00 [DBG] Committing transaction.
2024-08-24 20:59:40.450 +03:00 [DBG] Committed transaction.
2024-08-24 20:59:40.470 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:40.476 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 20:59:40.493 +03:00 [DBG] Disposing transaction.
2024-08-24 20:59:40.532 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:40.539 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 20:59:40.555 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-24 20:59:40.561 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 20:59:40.565 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 20:59:40.568 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 20:59:40.573 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-24 20:59:40.591 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 20:59:40.601 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 20:59:40.604 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 20:59:40.607 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 20:59:40.611 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 20:59:40.616 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 20:59:40.655 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 2537.6447ms
2024-08-24 20:59:40.660 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 20:59:40.665 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 20:59:40.669 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161 - 200 - application/json;+charset=utf-8 2940.5181ms
2024-08-24 20:59:46.143 +03:00 [DBG] Connection id "0HN64CNGIR1TT" received FIN.
2024-08-24 20:59:46.148 +03:00 [DBG] Connection id "0HN64CNGIR1TT" is closed. The last processed stream ID was 1.
2024-08-24 20:59:46.152 +03:00 [DBG] Connection id "0HN64CNGIR1TT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 20:59:46.157 +03:00 [DBG] Connection id "0HN64CNGIR1TT" stopped.
2024-08-24 21:08:24.920 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 21:08:25.161 +03:00 [DBG] Hosting starting
2024-08-24 21:08:25.241 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 21:08:25.250 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 21:08:25.269 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 21:08:25.274 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 21:08:25.279 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 21:08:25.293 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 21:08:25.307 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 21:08:25.312 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 21:08:25.316 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 21:08:25.337 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 21:08:25.350 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:08:25.363 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 21:08:25.369 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:08:25.388 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 21:08:25.401 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 21:08:25.417 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 21:08:25.423 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 21:08:25.857 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 21:08:26.040 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 21:08:26.043 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 21:08:26.047 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 21:08:26.051 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 21:08:26.054 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 21:08:26.058 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 21:08:26.061 +03:00 [INF] Hosting environment: Development
2024-08-24 21:08:26.064 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 21:08:26.067 +03:00 [DBG] Hosting started
2024-08-24 21:08:26.412 +03:00 [DBG] Connection id "0HN64CV028H1K" accepted.
2024-08-24 21:08:26.420 +03:00 [DBG] Connection id "0HN64CV028H1K" started.
2024-08-24 21:08:26.424 +03:00 [DBG] Connection id "0HN64CV028H1K" received FIN.
2024-08-24 21:08:26.462 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:08:26.569 +03:00 [DBG] Connection id "0HN64CV028H1K" stopped.
2024-08-24 21:08:26.577 +03:00 [DBG] Connection id "0HN64CV028H1K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:08:29.361 +03:00 [DBG] Connection id "0HN64CV028H1L" accepted.
2024-08-24 21:08:29.364 +03:00 [DBG] Connection id "0HN64CV028H1L" started.
2024-08-24 21:08:29.472 +03:00 [DBG] Connection 0HN64CV028H1L established using the following protocol: "Tls13"
2024-08-24 21:08:29.672 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 21:08:30.069 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 21:08:30.184 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 21:08:30.188 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:08:30.936 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 21:08:31.008 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 21:08:31.043 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 21:08:31.043 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1385.1883ms
2024-08-24 21:08:31.059 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.6459ms
2024-08-24 21:08:31.087 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 21:08:31.304 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 217.5913ms
2024-08-24 21:08:31.891 +03:00 [DBG] Connection id "0HN64CV028H1L" received FIN.
2024-08-24 21:08:31.919 +03:00 [DBG] Connection id "0HN64CV028H1L" is closed. The last processed stream ID was 5.
2024-08-24 21:08:31.925 +03:00 [DBG] Connection id "0HN64CV028H1L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:08:31.947 +03:00 [DBG] Connection id "0HN64CV028H1L" stopped.
2024-08-24 21:08:34.563 +03:00 [DBG] Connection id "0HN64CV028H1M" accepted.
2024-08-24 21:08:34.566 +03:00 [DBG] Connection id "0HN64CV028H1M" started.
2024-08-24 21:08:34.597 +03:00 [DBG] Connection 0HN64CV028H1M established using the following protocol: "Tls13"
2024-08-24 21:08:34.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 21:08:34.611 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 21:08:34.614 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:08:35.372 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 768.9392ms
2024-08-24 21:08:41.899 +03:00 [DBG] Connection id "0HN64CV028H1M" received FIN.
2024-08-24 21:08:41.903 +03:00 [DBG] Connection id "0HN64CV028H1M" is closed. The last processed stream ID was 1.
2024-08-24 21:08:41.908 +03:00 [DBG] Connection id "0HN64CV028H1M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:08:41.915 +03:00 [DBG] Connection id "0HN64CV028H1M" stopped.
2024-08-24 21:09:21.318 +03:00 [DBG] Connection id "0HN64CV028H1N" accepted.
2024-08-24 21:09:21.332 +03:00 [DBG] Connection id "0HN64CV028H1N" started.
2024-08-24 21:09:21.361 +03:00 [DBG] Connection 0HN64CV028H1N established using the following protocol: "Tls13"
2024-08-24 21:09:21.376 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 21:09:21.416 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 21:09:21.441 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 21:09:21.447 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:09:21.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:09:21.459 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:09:21.641 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 21:09:21.653 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:09:21.745 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 21:09:21.755 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:09:21.760 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:09:21.765 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 21:09:21.773 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:09:21.779 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:09:21.785 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:09:22.444 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 21:09:22.630 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:09:22.649 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:09:22.659 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 21:09:22.666 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:09:22.702 +03:00 [DBG] Connection id "0HN64CV028H1N", Request id "0HN64CV028H1N:00000001": started reading request body.
2024-08-24 21:09:22.709 +03:00 [DBG] Connection id "0HN64CV028H1N", Request id "0HN64CV028H1N:00000001": done reading request body.
2024-08-24 21:09:22.797 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 21:09:22.803 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:09:22.808 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:09:22.813 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:09:22.904 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:09:25.502 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 21:09:25.509 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 21:09:25.514 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 21:09:25.520 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 21:09:25.527 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 21:09:25.982 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:09:25.989 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:09:25.994 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:09:26.159 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:09:26.164 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:09:26.168 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:09:26.978 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:09:27.473 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 21:09:27.800 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 21:09:28.898 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:09:29.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:09:29.286 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (166ms).
2024-08-24 21:09:29.344 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:30.406 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:30.463 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:09:30.791 +03:00 [INF] Executed DbCommand (346ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:09:31.014 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:09:31.227 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:09:31.330 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:09:31.378 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:09:31.405 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.436 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.577 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 21:09:31.617 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:09:31.626 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:09:31.629 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:09:31.633 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.642 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.646 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:09:31.689 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:09:31.715 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:09:31.718 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.724 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.782 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 21:09:31.864 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:09:31.873 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:09:31.877 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:09:31.881 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.886 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.889 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:09:31.930 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:09:31.939 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:09:31.942 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.946 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:31.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:09:32.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:09:32.009 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:32.014 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:32.020 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:09:32.044 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:09:32.054 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:09:32.057 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:32.063 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:09:32.516 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:09:32.534 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:09:32.537 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:09:32.540 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:09:32.545 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:09:32.551 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:09:32.696 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 10894.0447ms
2024-08-24 21:09:32.707 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:09:32.747 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:09:32.769 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 11393.2201ms
2024-08-24 21:09:41.965 +03:00 [DBG] Connection id "0HN64CV028H1N" received FIN.
2024-08-24 21:09:41.970 +03:00 [DBG] Connection id "0HN64CV028H1N" is closed. The last processed stream ID was 1.
2024-08-24 21:09:41.975 +03:00 [DBG] Connection id "0HN64CV028H1N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:09:41.992 +03:00 [DBG] Connection id "0HN64CV028H1N" stopped.
2024-08-24 21:10:09.339 +03:00 [DBG] Connection id "0HN64CV028H1O" accepted.
2024-08-24 21:10:09.343 +03:00 [DBG] Connection id "0HN64CV028H1O" started.
2024-08-24 21:10:09.422 +03:00 [DBG] Connection 0HN64CV028H1O established using the following protocol: "Tls13"
2024-08-24 21:10:09.431 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161
2024-08-24 21:10:09.441 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-24 21:10:09.446 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-24 21:10:09.452 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:10:09.455 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:10:09.458 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:10:09.742 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:10:09.749 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:10:09.754 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:10:09.766 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:10:09.774 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:10:09.779 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:10:09.784 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:10:09.791 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:10:09.796 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:10:09.801 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:10:10.498 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:10:10.505 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 21:10:10.511 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-24 21:10:10.518 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:10:10.539 +03:00 [DBG] Connection id "0HN64CV028H1O", Request id "0HN64CV028H1O:00000001": started reading request body.
2024-08-24 21:10:10.544 +03:00 [DBG] Connection id "0HN64CV028H1O", Request id "0HN64CV028H1O:00000001": done reading request body.
2024-08-24 21:10:10.592 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-24 21:10:10.596 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:10:10.602 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:10:10.607 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 21:10:10.629 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:10:10.800 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:10:10.812 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:10.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:10:10.820 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:10.826 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:10.831 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:10:10.885 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:10:10.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:10.900 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:10.906 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:10.911 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:10.914 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:10.920 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:10.954 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-24 21:10:10.999 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-24 21:10:11.032 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:10:11.043 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:11.047 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:10:11.053 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.059 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.074 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:11.135 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:11.204 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:11.279 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:11.377 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:11.379 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.384 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.406 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:11.410 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:10:11.414 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.420 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.426 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:11.468 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:11.478 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:11.480 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.484 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.497 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkOutDate_1 && d.EndDateUtc >= __checkInDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-24 21:10:11.543 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkOutDate_1)) && (d.EndDateUtc >= @__checkInDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:10:11.564 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:11.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:10:11.576 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.580 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.585 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkOutDate_1='?' (DbType = DateTime2), @__checkInDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkOutDate_1)) AND ([d].[EndDateUtc] >= @__checkInDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 21:10:11.626 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkOutDate_1='?' (DbType = DateTime2), @__checkInDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkOutDate_1)) AND ([d].[EndDateUtc] >= @__checkInDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 21:10:11.645 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:11.689 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:11.692 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.697 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.710 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-24 21:10:11.717 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-24 21:10:11.724 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-24 21:10:11.729 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-24 21:10:11.819 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:10:11.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:11.870 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:10:11.875 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.879 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:11.884 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 21:10:11.932 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 21:10:12.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.142 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.258 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:12.262 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:10:12.268 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 21:10:12.327 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 21:10:12.362 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:12.366 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:12.369 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.377 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.385 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:12.389 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:10:12.394 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.399 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.404 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:12.438 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:10:12.446 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:12.449 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.454 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:12.626 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.772 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:12.846 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 21:10:12.862 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 21:10:13.059 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 21:10:13.147 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:13.152 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:13.165 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-24 21:10:13.210 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-24 21:10:13.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:13.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:10:13.429 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 21:10:13.476 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 21:10:13.566 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 21:10:13.591 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 21:10:13.607 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:13.612 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:10:13.615 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:10:13.621 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 21:10:13.643 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 21:10:13.652 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:10:13.678 +03:00 [DBG] Committing transaction.
2024-08-24 21:10:13.706 +03:00 [DBG] Committed transaction.
2024-08-24 21:10:13.727 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:13.732 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:10:13.755 +03:00 [DBG] Disposing transaction.
2024-08-24 21:10:13.798 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:13.806 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:10:13.823 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-24 21:10:13.829 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 21:10:13.833 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 21:10:13.837 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 21:10:13.841 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-24 21:10:13.891 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:10:13.900 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:10:13.903 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:10:13.906 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:10:13.910 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:10:13.915 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:10:13.979 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 4177.9657ms
2024-08-24 21:10:13.986 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:10:13.990 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:10:13.993 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 161 - 200 - application/json;+charset=utf-8 4563.8280ms
2024-08-24 21:10:22.018 +03:00 [DBG] Connection id "0HN64CV028H1O" received FIN.
2024-08-24 21:10:22.023 +03:00 [DBG] Connection id "0HN64CV028H1O" is closed. The last processed stream ID was 1.
2024-08-24 21:10:22.027 +03:00 [DBG] Connection id "0HN64CV028H1O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:10:22.034 +03:00 [DBG] Connection id "0HN64CV028H1O" stopped.
2024-08-24 21:18:47.619 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 21:18:47.939 +03:00 [DBG] Hosting starting
2024-08-24 21:18:48.203 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 21:18:48.213 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 21:18:48.260 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 21:18:48.292 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 21:18:48.322 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 21:18:48.365 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 21:18:48.382 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 21:18:48.387 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 21:18:48.393 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 21:18:48.418 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 21:18:48.427 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:18:48.438 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 21:18:48.443 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:18:48.458 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 21:18:48.472 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 21:18:48.487 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 21:18:48.493 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 21:18:49.447 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 21:18:49.545 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 21:18:49.552 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 21:18:49.556 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 21:18:49.561 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 21:18:49.565 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 21:18:49.568 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 21:18:49.570 +03:00 [INF] Hosting environment: Development
2024-08-24 21:18:49.581 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 21:18:49.585 +03:00 [DBG] Hosting started
2024-08-24 21:18:49.600 +03:00 [DBG] Connection id "0HN64D4PPE893" accepted.
2024-08-24 21:18:49.600 +03:00 [DBG] Connection id "0HN64D4PPE892" accepted.
2024-08-24 21:18:49.621 +03:00 [DBG] Connection id "0HN64D4PPE892" started.
2024-08-24 21:18:49.621 +03:00 [DBG] Connection id "0HN64D4PPE893" started.
2024-08-24 21:18:49.626 +03:00 [DBG] Connection id "0HN64D4PPE892" received FIN.
2024-08-24 21:18:49.626 +03:00 [DBG] Connection id "0HN64D4PPE893" received FIN.
2024-08-24 21:18:49.678 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:18:49.678 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:18:50.050 +03:00 [DBG] Connection id "0HN64D4PPE894" accepted.
2024-08-24 21:18:50.104 +03:00 [DBG] Connection id "0HN64D4PPE894" started.
2024-08-24 21:18:50.110 +03:00 [DBG] Connection id "0HN64D4PPE893" stopped.
2024-08-24 21:18:50.110 +03:00 [DBG] Connection id "0HN64D4PPE892" stopped.
2024-08-24 21:18:50.166 +03:00 [DBG] Connection id "0HN64D4PPE893" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:18:50.166 +03:00 [DBG] Connection id "0HN64D4PPE892" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:18:50.263 +03:00 [DBG] Connection 0HN64D4PPE894 established using the following protocol: "Tls13"
2024-08-24 21:18:50.465 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 21:18:50.913 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 21:18:50.984 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 21:18:50.991 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:18:51.524 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 21:18:51.576 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 21:18:51.598 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1146.9270ms
2024-08-24 21:18:51.611 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 21:18:51.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 22.4280ms
2024-08-24 21:18:51.649 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 21:18:51.812 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 163.4564ms
2024-08-24 21:18:52.678 +03:00 [DBG] Connection id "0HN64D4PPE894" received FIN.
2024-08-24 21:18:52.692 +03:00 [DBG] Connection id "0HN64D4PPE894" is closed. The last processed stream ID was 5.
2024-08-24 21:18:52.700 +03:00 [DBG] Connection id "0HN64D4PPE894" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:18:52.714 +03:00 [DBG] Connection id "0HN64D4PPE894" stopped.
2024-08-24 21:18:54.072 +03:00 [DBG] Connection id "0HN64D4PPE895" accepted.
2024-08-24 21:18:54.077 +03:00 [DBG] Connection id "0HN64D4PPE895" started.
2024-08-24 21:18:54.098 +03:00 [DBG] Connection 0HN64D4PPE895 established using the following protocol: "Tls13"
2024-08-24 21:18:54.105 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 21:18:54.111 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 21:18:54.115 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:18:54.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 584.1181ms
2024-08-24 21:19:02.690 +03:00 [DBG] Connection id "0HN64D4PPE895" received FIN.
2024-08-24 21:19:02.698 +03:00 [DBG] Connection id "0HN64D4PPE895" is closed. The last processed stream ID was 1.
2024-08-24 21:19:02.707 +03:00 [DBG] Connection id "0HN64D4PPE895" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:19:02.713 +03:00 [DBG] Connection id "0HN64D4PPE895" stopped.
2024-08-24 21:22:19.718 +03:00 [DBG] Connection id "0HN64D4PPE896" accepted.
2024-08-24 21:22:19.739 +03:00 [DBG] Connection id "0HN64D4PPE896" started.
2024-08-24 21:22:19.773 +03:00 [DBG] Connection 0HN64D4PPE896 established using the following protocol: "Tls13"
2024-08-24 21:22:19.786 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 21:22:19.828 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 21:22:19.854 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 21:22:19.863 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:22:19.873 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:22:19.881 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:22:20.061 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 21:22:20.073 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:22:20.164 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 21:22:20.175 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:22:20.180 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:22:20.188 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 21:22:20.196 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:22:20.204 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:22:20.212 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:22:20.856 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 21:22:20.993 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:22:21.008 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:22:21.018 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 21:22:21.028 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:22:21.061 +03:00 [DBG] Connection id "0HN64D4PPE896", Request id "0HN64D4PPE896:00000001": started reading request body.
2024-08-24 21:22:21.068 +03:00 [DBG] Connection id "0HN64D4PPE896", Request id "0HN64D4PPE896:00000001": done reading request body.
2024-08-24 21:22:21.123 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 21:22:21.129 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:22:21.134 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:22:21.139 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:22:21.341 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:22:23.049 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 21:22:23.059 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 21:22:23.068 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 21:22:23.075 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 21:22:23.081 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 21:22:23.284 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:22:23.292 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:22:23.299 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:22:23.389 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:22:23.397 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:22:23.404 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:22:23.781 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:22:24.087 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 21:22:24.281 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 21:22:24.986 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:22:25.122 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:22:25.265 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (143ms).
2024-08-24 21:22:25.315 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:26.322 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:26.382 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:22:26.667 +03:00 [INF] Executed DbCommand (309ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:22:26.832 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:22:26.957 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:22:27.006 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:22:27.042 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:22:27.066 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.092 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.334 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 21:22:27.369 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:22:27.380 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:22:27.385 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:22:27.391 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.400 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.406 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:22:27.448 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:22:27.472 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:22:27.475 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.481 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.527 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 21:22:27.581 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:22:27.593 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:22:27.598 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:22:27.603 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.609 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.616 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:22:27.655 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:22:27.666 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:22:27.669 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.673 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.708 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:22:27.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:22:27.719 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.724 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.729 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:22:27.754 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:22:27.763 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:22:27.766 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:27.769 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:22:28.084 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:22:28.100 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:22:28.104 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:22:28.107 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:22:28.112 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:22:28.118 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:22:28.239 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 8008.8299ms
2024-08-24 21:22:28.249 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:22:28.290 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:22:28.309 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 8522.5383ms
2024-08-24 21:22:38.036 +03:00 [DBG] Connection id "0HN64D4PPE896" received FIN.
2024-08-24 21:22:38.042 +03:00 [DBG] Connection id "0HN64D4PPE896" is closed. The last processed stream ID was 1.
2024-08-24 21:22:38.047 +03:00 [DBG] Connection id "0HN64D4PPE896" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:22:38.052 +03:00 [DBG] Connection id "0HN64D4PPE896" stopped.
2024-08-24 21:23:27.326 +03:00 [DBG] Connection id "0HN64D4PPE897" accepted.
2024-08-24 21:23:27.347 +03:00 [DBG] Connection id "0HN64D4PPE897" started.
2024-08-24 21:23:27.392 +03:00 [DBG] Connection 0HN64D4PPE897 established using the following protocol: "Tls13"
2024-08-24 21:23:27.403 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162
2024-08-24 21:23:27.453 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/create'
2024-08-24 21:23:27.465 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/create' is valid for the request path '/api/Booking/create'
2024-08-24 21:23:27.471 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:23:27.475 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:23:27.479 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:23:27.718 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:23:27.725 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:23:27.731 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:23:27.744 +03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:23:27.754 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:23:27.762 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:23:27.769 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:23:27.779 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:23:27.785 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:23:27.793 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:23:28.292 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:23:28.300 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 21:23:28.307 +03:00 [DBG] Attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' using the name '' in request data ...
2024-08-24 21:23:28.314 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:23:28.330 +03:00 [DBG] Connection id "0HN64D4PPE897", Request id "0HN64D4PPE897:00000001": started reading request body.
2024-08-24 21:23:28.336 +03:00 [DBG] Connection id "0HN64D4PPE897", Request id "0HN64D4PPE897:00000001": done reading request body.
2024-08-24 21:23:28.370 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'
2024-08-24 21:23:28.376 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:23:28.382 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:23:28.387 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest' ...
2024-08-24 21:23:28.405 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'HotelBookingPlatform.Domain.DTOs.Booking.BookingCreateRequest'.
2024-08-24 21:23:28.523 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:23:28.534 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:28.539 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:23:28.544 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.547 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.551 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:23:28.592 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:23:28.604 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:28.610 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:28.616 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:28.622 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:28.625 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.630 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.662 +03:00 [DBG] Compiling query expression: 
'DbSet<Room>()
    .Include(r => r.RoomClass)
    .FirstOrDefault(r => r.RoomID == __id_0)'
2024-08-24 21:23:28.716 +03:00 [DBG] Including navigation: 'Room.RoomClass'.
2024-08-24 21:23:28.739 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Room>(
    asyncEnumerable: new SingleQueryingEnumerable<Room>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Room.RoomID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Room.AdultsCapacity (int) Required, 1], [Property: Room.ChildrenCapacity (int) Required, 2], [Property: Room.CreatedAtUtc (DateTime) Required, 3], [Property: Room.Number (string) Required MaxLength(50), 4], [Property: Room.PricePerNight (decimal) Required, 5], [Property: Room.RoomClassID (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: RoomClass.RoomClassID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: RoomClass.CreatedAtUtc (DateTime) Required, 8], [Property: RoomClass.Description (string) MaxLength(500), 9], [Property: RoomClass.HotelId (int) Required FK Index, 10], [Property: RoomClass.Name (string) Required, 11], [Property: RoomClass.RoomType (RoomType) Required, 12] }
            SELECT TOP(1) r.RoomID, r.AdultsCapacity, r.ChildrenCapacity, r.CreatedAtUtc, r.Number, r.PricePerNight, r.RoomClassID, r0.RoomClassID, r0.CreatedAtUtc, r0.Description, r0.HotelId, r0.Name, r0.RoomType
            FROM Rooms AS r
            INNER JOIN RoomClasses AS r0 ON r.RoomClassID == r0.RoomClassID
            WHERE r.RoomID == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Room>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:23:28.747 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:28.751 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:23:28.756 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.760 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:28.769 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:28.822 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:28.877 +03:00 [DBG] Context 'AppDbContext' started tracking 'Room' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:28.961 +03:00 [DBG] Context 'AppDbContext' started tracking 'RoomClass' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:29.014 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.017 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.024 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.041 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:29.044 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:23:29.049 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.054 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.059 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:29.101 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:29.110 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.114 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.120 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.134 +03:00 [DBG] Compiling query expression: 
'DbSet<Discount>()
    .Where(d => d.RoomID == __roomId_0 && d.StartDateUtc <= __checkOutDate_1 && d.EndDateUtc >= __checkInDate_2 && DateTime.UtcNow >= d.StartDateUtc && DateTime.UtcNow <= d.EndDateUtc)
    .FirstOrDefault()'
2024-08-24 21:23:29.171 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Discount>(
    asyncEnumerable: new SingleQueryingEnumerable<Discount>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Discount.DiscountID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Discount.CreatedAtUtc (DateTime) Required, 1], [Property: Discount.EndDateUtc (DateTime) Required, 2], [Property: Discount.IsActive (bool) Required, 3], [Property: Discount.Percentage (decimal) Required, 4], [Property: Discount.RoomClassID (no field, int?) Shadow FK Index, 5], [Property: Discount.RoomID (int) Required FK Index, 6], [Property: Discount.StartDateUtc (DateTime) Required, 7] }
            SELECT TOP(1) d.DiscountID, d.CreatedAtUtc, d.EndDateUtc, d.IsActive, d.Percentage, d.RoomClassID, d.RoomID, d.StartDateUtc
            FROM Discounts AS d
            WHERE ((((d.RoomID == @__roomId_0) && (d.StartDateUtc <= @__checkOutDate_1)) && (d.EndDateUtc >= @__checkInDate_2)) && (GETUTCDATE() >= d.StartDateUtc)) && (GETUTCDATE() <= d.EndDateUtc)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Discount>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:23:29.190 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:29.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:23:29.204 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.211 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.216 +03:00 [DBG] Executing DbCommand [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkOutDate_1='?' (DbType = DateTime2), @__checkInDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkOutDate_1)) AND ([d].[EndDateUtc] >= @__checkInDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 21:23:29.257 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__roomId_0='?' (DbType = Int32), @__checkOutDate_1='?' (DbType = DateTime2), @__checkInDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DiscountID], [d].[CreatedAtUtc], [d].[EndDateUtc], [d].[IsActive], [d].[Percentage], [d].[RoomClassID], [d].[RoomID], [d].[StartDateUtc]
FROM [Discounts] AS [d]
WHERE (((([d].[RoomID] = @__roomId_0) AND ([d].[StartDateUtc] <= @__checkOutDate_1)) AND ([d].[EndDateUtc] >= @__checkInDate_2)) AND (GETUTCDATE() >= [d].[StartDateUtc])) AND (GETUTCDATE() <= [d].[EndDateUtc])
2024-08-24 21:23:29.279 +03:00 [DBG] Context 'AppDbContext' started tracking 'Discount' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:29.319 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.323 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.327 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.344 +03:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .Include(h => h.City)
    .Include(h => h.Owner)
    .Include(h => h.Reviews)
    .AsSplitQuery()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2024-08-24 21:23:29.354 +03:00 [DBG] Including navigation: 'Hotel.City'.
2024-08-24 21:23:29.360 +03:00 [DBG] Including navigation: 'Hotel.Owner'.
2024-08-24 21:23:29.366 +03:00 [DBG] Including navigation: 'Hotel.Reviews'.
2024-08-24 21:23:29.472 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: new SplitQueryingEnumerable<Hotel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.CityID (int) Required FK Index, 1], [Property: Hotel.CreatedAtUtc (DateTime) Required, 2], [Property: Hotel.Description (string) MaxLength(500), 3], [Property: Hotel.Name (string) Required MaxLength(100), 4], [Property: Hotel.OwnerID (int) Required FK Index, 5], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 6], [Property: Hotel.StarRating (int) Required, 7] }
                1 -> Dictionary<IProperty, int> { [Property: City.CityID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: City.Country (string) Required, 9], [Property: City.CreatedAtUtc (DateTime) Required, 10], [Property: City.Description (string) Required, 11], [Property: City.Name (string) Required, 12], [Property: City.PostOffice (string) Required, 13], [Property: City.VisitCount (int) Required, 14] }
                2 -> Dictionary<IProperty, int> { [Property: Owner.OwnerID (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Owner.Email (string) Required, 16], [Property: Owner.FirstName (string) Required, 17], [Property: Owner.LastName (string) Required, 18], [Property: Owner.PhoneNumber (string) Required, 19] }
                3 -> 0
                4 -> 8
                5 -> 15
            SELECT TOP(1) h.HotelId, h.CityID, h.CreatedAtUtc, h.Description, h.Name, h.OwnerID, h.PhoneNumber, h.StarRating, c.CityID, c.Country, c.CreatedAtUtc, c.Description, c.Name, c.PostOffice, c.VisitCount, o.OwnerID, o.Email, o.FirstName, o.LastName, o.PhoneNumber
            FROM Hotels AS h
            INNER JOIN Cities AS c ON h.CityID == c.CityID
            INNER JOIN owners AS o ON h.OwnerID == o.OwnerID
            WHERE h.HotelId == @__id_0
            ORDER BY h.HotelId ASC, c.CityID ASC, o.OwnerID ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Hotel>, 
        null, 
        Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:23:29.494 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:29.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:23:29.505 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.510 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.512 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 21:23:29.561 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[CityID], [h].[CreatedAtUtc], [h].[Description], [h].[Name], [h].[OwnerID], [h].[PhoneNumber], [h].[StarRating], [c].[CityID], [c].[Country], [c].[CreatedAtUtc], [c].[Description], [c].[Name], [c].[PostOffice], [c].[VisitCount], [o].[OwnerID], [o].[Email], [o].[FirstName], [o].[LastName], [o].[PhoneNumber]
FROM [Hotels] AS [h]
INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
WHERE [h].[HotelId] = @__id_0
ORDER BY [h].[HotelId], [c].[CityID], [o].[OwnerID]
2024-08-24 21:23:29.675 +03:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:29.725 +03:00 [DBG] Context 'AppDbContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:29.767 +03:00 [DBG] Context 'AppDbContext' started tracking 'Owner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:29.829 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:29.834 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:23:29.838 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 21:23:29.887 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewID], [r].[Content], [r].[CreatedAtUtc], [r].[HotelId], [r].[ModifiedAtUtc], [r].[Rating], [r].[UserId], [t].[HotelId], [t].[CityID], [t].[OwnerID]
FROM (
    SELECT TOP(1) [h].[HotelId], [c].[CityID], [o].[OwnerID]
    FROM [Hotels] AS [h]
    INNER JOIN [Cities] AS [c] ON [h].[CityID] = [c].[CityID]
    INNER JOIN [owners] AS [o] ON [h].[OwnerID] = [o].[OwnerID]
    WHERE [h].[HotelId] = @__id_0
) AS [t]
INNER JOIN [Reviews] AS [r] ON [t].[HotelId] = [r].[HotelId]
ORDER BY [t].[HotelId], [t].[CityID], [t].[OwnerID]
2024-08-24 21:23:29.914 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.917 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.921 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.927 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.933 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:29.938 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:23:29.943 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.949 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.954 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:29.983 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RoomID], [r].[AdultsCapacity], [r].[ChildrenCapacity], [r].[CreatedAtUtc], [r].[Number], [r].[PricePerNight], [r].[RoomClassID], [r0].[RoomClassID], [r0].[CreatedAtUtc], [r0].[Description], [r0].[HotelId], [r0].[Name], [r0].[RoomType]
FROM [Rooms] AS [r]
INNER JOIN [RoomClasses] AS [r0] ON [r].[RoomClassID] = [r0].[RoomClassID]
WHERE [r].[RoomID] = @__id_0
2024-08-24 21:23:29.990 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:29.994 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:29.999 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:30.214 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'BookingID.Booking'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:30.320 +03:00 [DBG] Context 'AppDbContext' started tracking 'Booking' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:30.353 +03:00 [DBG] Context 'AppDbContext' started tracking 'BookingRoom' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:30.375 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 21:23:30.387 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 21:23:30.515 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 21:23:30.568 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:30.574 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:30.585 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-08-24 21:23:30.621 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-08-24 21:23:30.756 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:30.763 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-08-24 21:23:30.782 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 21:23:30.819 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 450), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AfterDiscountedPrice], [BookingDateUtc], [CheckInDateUtc], [CheckOutDateUtc], [HotelId], [PaymentMethod], [Status], [TotalPrice], [UserId], [confirmationNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [BookingID]
FROM [Bookings]
WHERE @@ROWCOUNT = 1 AND [BookingID] = scope_identity();
2024-08-24 21:23:30.896 +03:00 [DBG] The foreign key property 'Booking.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 21:23:30.923 +03:00 [DBG] The foreign key property 'BookingRoom.BookingID' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-24 21:23:30.938 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:30.944 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:23:30.948 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:23:30.955 +03:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 21:23:30.972 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookingRoom] ([BookingID], [RoomID])
VALUES (@p10, @p11);
2024-08-24 21:23:30.983 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:23:31.004 +03:00 [DBG] Committing transaction.
2024-08-24 21:23:31.024 +03:00 [DBG] Committed transaction.
2024-08-24 21:23:31.043 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:31.048 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:23:31.065 +03:00 [DBG] Disposing transaction.
2024-08-24 21:23:31.122 +03:00 [DBG] An entity of type 'Booking' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:31.132 +03:00 [DBG] An entity of type 'BookingRoom' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:23:31.150 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2024-08-24 21:23:31.158 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2024-08-24 21:23:31.163 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2024-08-24 21:23:31.167 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2024-08-24 21:23:31.172 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2024-08-24 21:23:31.213 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:23:31.226 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:23:31.229 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:23:31.233 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:23:31.238 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:23:31.244 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.DTOs.Booking.BookingDto, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:23:31.297 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API) in 3504.1119ms
2024-08-24 21:23:31.303 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.CreateBooking (HotelBookingPlatform.API)'
2024-08-24 21:23:31.308 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:23:31.312 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/create application/json 162 - 200 - application/json;+charset=utf-8 3910.9333ms
2024-08-24 21:23:38.110 +03:00 [DBG] Connection id "0HN64D4PPE897" received FIN.
2024-08-24 21:23:38.118 +03:00 [DBG] Connection id "0HN64D4PPE897" is closed. The last processed stream ID was 1.
2024-08-24 21:23:38.126 +03:00 [DBG] Connection id "0HN64D4PPE897" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:23:38.136 +03:00 [DBG] Connection id "0HN64D4PPE897" stopped.
2024-08-24 21:27:13.852 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 21:27:14.115 +03:00 [DBG] Hosting starting
2024-08-24 21:27:14.197 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 21:27:14.207 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 21:27:14.219 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 21:27:14.224 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 21:27:14.228 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 21:27:14.248 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 21:27:14.261 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 21:27:14.265 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 21:27:14.268 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 21:27:14.287 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 21:27:14.300 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:27:14.313 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 21:27:14.319 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:27:14.337 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 21:27:14.353 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 21:27:14.370 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 21:27:14.376 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 21:27:14.787 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 21:27:14.926 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 21:27:14.929 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 21:27:14.932 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 21:27:14.935 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 21:27:14.937 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 21:27:14.940 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 21:27:14.943 +03:00 [INF] Hosting environment: Development
2024-08-24 21:27:14.947 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 21:27:14.950 +03:00 [DBG] Hosting started
2024-08-24 21:27:14.982 +03:00 [DBG] Connection id "0HN64D9GD6VQE" received FIN.
2024-08-24 21:27:15.003 +03:00 [DBG] Connection id "0HN64D9GD6VQE" accepted.
2024-08-24 21:27:15.009 +03:00 [DBG] Connection id "0HN64D9GD6VQE" started.
2024-08-24 21:27:15.057 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:27:15.162 +03:00 [DBG] Connection id "0HN64D9GD6VQE" stopped.
2024-08-24 21:27:15.171 +03:00 [DBG] Connection id "0HN64D9GD6VQE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:27:15.402 +03:00 [DBG] Connection id "0HN64D9GD6VQF" accepted.
2024-08-24 21:27:15.407 +03:00 [DBG] Connection id "0HN64D9GD6VQF" started.
2024-08-24 21:27:15.550 +03:00 [DBG] Connection 0HN64D9GD6VQF established using the following protocol: "Tls13"
2024-08-24 21:27:15.709 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 21:27:16.109 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 21:27:16.216 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 21:27:16.220 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:27:16.826 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 21:27:16.895 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 21:27:16.920 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1221.8222ms
2024-08-24 21:27:16.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 21:27:16.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 12.1916ms
2024-08-24 21:27:16.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 21:27:17.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 188.0740ms
2024-08-24 21:27:19.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 21:27:19.373 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 21:27:19.377 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:27:20.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 711.4986ms
2024-08-24 21:27:23.364 +03:00 [DBG] Connection id "0HN64D9GD6VQF" received FIN.
2024-08-24 21:27:23.402 +03:00 [DBG] Connection id "0HN64D9GD6VQF" is closed. The last processed stream ID was 7.
2024-08-24 21:27:23.416 +03:00 [DBG] Connection id "0HN64D9GD6VQF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:27:23.428 +03:00 [DBG] Connection id "0HN64D9GD6VQF" stopped.
2024-08-24 21:27:42.894 +03:00 [DBG] Connection id "0HN64D9GD6VQG" accepted.
2024-08-24 21:27:42.904 +03:00 [DBG] Connection id "0HN64D9GD6VQG" started.
2024-08-24 21:27:42.912 +03:00 [DBG] Connection 0HN64D9GD6VQG established using the following protocol: "Tls13"
2024-08-24 21:27:42.921 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 21:27:42.944 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 21:27:42.970 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 21:27:42.977 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:27:42.985 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:27:42.990 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:27:43.144 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 21:27:43.156 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:27:43.287 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 21:27:43.296 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:27:43.302 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:27:43.308 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 21:27:43.314 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:27:43.321 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:27:43.327 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:27:43.774 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 21:27:43.945 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:27:43.965 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:27:43.976 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 21:27:43.984 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:27:44.034 +03:00 [DBG] Connection id "0HN64D9GD6VQG", Request id "0HN64D9GD6VQG:00000001": started reading request body.
2024-08-24 21:27:44.041 +03:00 [DBG] Connection id "0HN64D9GD6VQG", Request id "0HN64D9GD6VQG:00000001": done reading request body.
2024-08-24 21:27:44.123 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 21:27:44.128 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:27:44.132 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:27:44.136 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:27:44.206 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:27:46.576 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 21:27:46.585 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 21:27:46.589 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 21:27:46.594 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 21:27:46.600 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 21:27:46.865 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:27:46.870 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:27:46.874 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:27:46.994 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:27:47.000 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:27:47.006 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:27:47.563 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:27:47.874 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 21:27:48.146 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 21:27:49.112 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:27:49.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:27:49.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (103ms).
2024-08-24 21:27:49.460 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:50.351 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:50.403 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:27:50.714 +03:00 [INF] Executed DbCommand (322ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:27:50.977 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:27:51.198 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:27:51.288 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:27:51.348 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:27:51.377 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.408 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.515 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 21:27:51.545 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:27:51.553 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:27:51.556 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:27:51.561 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.572 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.578 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:27:51.620 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:27:51.635 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:27:51.638 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.643 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.697 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 21:27:51.752 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:27:51.759 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:27:51.763 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-08-24 21:27:51.767 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.771 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.775 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:27:51.812 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:27:51.820 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:27:51.822 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.826 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:27:51.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:27:51.874 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.880 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.885 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:27:51.908 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:27:51.916 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:27:51.919 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:51.924 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:27:52.289 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:27:52.304 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:27:52.306 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:27:52.309 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:27:52.315 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:27:52.320 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:27:52.467 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 9123.2472ms
2024-08-24 21:27:52.478 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:27:52.514 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:27:52.530 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 9609.6688ms
2024-08-24 21:27:53.399 +03:00 [DBG] Connection id "0HN64D9GD6VQG" received FIN.
2024-08-24 21:27:53.407 +03:00 [DBG] Connection id "0HN64D9GD6VQG" is closed. The last processed stream ID was 1.
2024-08-24 21:27:53.417 +03:00 [DBG] Connection id "0HN64D9GD6VQG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:27:53.433 +03:00 [DBG] Connection id "0HN64D9GD6VQG" stopped.
2024-08-24 21:28:19.454 +03:00 [DBG] Connection id "0HN64D9GD6VQH" accepted.
2024-08-24 21:28:19.466 +03:00 [DBG] Connection id "0HN64D9GD6VQH" started.
2024-08-24 21:28:19.490 +03:00 [DBG] Connection 0HN64D9GD6VQH established using the following protocol: "Tls13"
2024-08-24 21:28:19.498 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 362
2024-08-24 21:28:19.521 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-24 21:28:19.526 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-24 21:28:19.532 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:19.536 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:28:19.540 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:28:19.850 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:28:19.858 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:28:19.864 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:19.883 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:28:19.891 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:28:19.895 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:28:19.900 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:28:19.909 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:28:19.914 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:28:19.918 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:28:20.611 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:28:20.618 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:28:20.623 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-24 21:28:20.628 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:28:20.662 +03:00 [DBG] Connection id "0HN64D9GD6VQH", Request id "0HN64D9GD6VQH:00000001": started reading request body.
2024-08-24 21:28:20.668 +03:00 [DBG] Connection id "0HN64D9GD6VQH", Request id "0HN64D9GD6VQH:00000001": done reading request body.
2024-08-24 21:28:20.746 +03:00 [DBG] JSON input formatter threw an exception: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 10 | BytePositionInLine: 2.
2024-08-24 21:28:20.750 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:20.756 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:20.760 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:28:20.784 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:20.790 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-24 21:28:20.797 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-24 21:28:20.801 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:28:20.809 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:28:20.812 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-24 21:28:20.821 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-24 21:28:20.826 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-24 21:28:20.869 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 951.2964ms
2024-08-24 21:28:20.876 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:20.880 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 362 - 400 - application/problem+json;+charset=utf-8 1382.7718ms
2024-08-24 21:28:23.429 +03:00 [DBG] Connection id "0HN64D9GD6VQH" received FIN.
2024-08-24 21:28:23.436 +03:00 [DBG] Connection id "0HN64D9GD6VQH" is closed. The last processed stream ID was 1.
2024-08-24 21:28:23.443 +03:00 [DBG] Connection id "0HN64D9GD6VQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:28:23.460 +03:00 [DBG] Connection id "0HN64D9GD6VQH" stopped.
2024-08-24 21:28:52.133 +03:00 [DBG] Connection id "0HN64D9GD6VQI" accepted.
2024-08-24 21:28:52.144 +03:00 [DBG] Connection id "0HN64D9GD6VQI" started.
2024-08-24 21:28:52.156 +03:00 [DBG] Connection 0HN64D9GD6VQI established using the following protocol: "Tls13"
2024-08-24 21:28:52.174 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 362
2024-08-24 21:28:52.192 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-24 21:28:52.197 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-24 21:28:52.202 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:52.207 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:28:52.215 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:28:52.224 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:28:52.228 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:28:52.231 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:52.235 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:28:52.243 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:28:52.248 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:28:52.254 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:28:52.265 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:28:52.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:28:52.280 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:28:52.297 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:28:52.301 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:28:52.304 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-24 21:28:52.311 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:28:52.314 +03:00 [DBG] Connection id "0HN64D9GD6VQI", Request id "0HN64D9GD6VQI:00000001": started reading request body.
2024-08-24 21:28:52.318 +03:00 [DBG] Connection id "0HN64D9GD6VQI", Request id "0HN64D9GD6VQI:00000001": done reading request body.
2024-08-24 21:28:52.328 +03:00 [DBG] JSON input formatter threw an exception: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 10 | BytePositionInLine: 2.
2024-08-24 21:28:52.330 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:52.334 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:52.339 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:28:52.345 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:28:52.349 +03:00 [DBG] The request has model state errors, returning an error response.
2024-08-24 21:28:52.351 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-08-24 21:28:52.355 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:28:52.364 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:28:52.366 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-08-24 21:28:52.376 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-08-24 21:28:52.381 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-24 21:28:52.385 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 104.7562ms
2024-08-24 21:28:52.393 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:28:52.397 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 362 - 400 - application/problem+json;+charset=utf-8 223.1312ms
2024-08-24 21:28:53.466 +03:00 [DBG] Connection id "0HN64D9GD6VQI" received FIN.
2024-08-24 21:28:53.472 +03:00 [DBG] Connection id "0HN64D9GD6VQI" is closed. The last processed stream ID was 1.
2024-08-24 21:28:53.473 +03:00 [DBG] Connection id "0HN64D9GD6VQI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:28:53.493 +03:00 [DBG] Connection id "0HN64D9GD6VQI" stopped.
2024-08-24 21:29:32.554 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" accepted.
2024-08-24 21:29:32.587 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" started.
2024-08-24 21:29:32.631 +03:00 [DBG] Connection 0HN64D9GD6VQJ established using the following protocol: "Tls13"
2024-08-24 21:29:32.637 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 363
2024-08-24 21:29:32.649 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-24 21:29:32.655 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-24 21:29:32.660 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:29:32.664 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:29:32.666 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:29:32.669 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:29:32.671 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:29:32.675 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:29:32.679 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:29:32.684 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:29:32.690 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:29:32.695 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:29:32.702 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:29:32.707 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:29:32.712 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:29:32.736 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:29:32.741 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:29:32.746 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-24 21:29:32.750 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:29:32.755 +03:00 [DBG] Connection id "0HN64D9GD6VQJ", Request id "0HN64D9GD6VQJ:00000001": started reading request body.
2024-08-24 21:29:32.760 +03:00 [DBG] Connection id "0HN64D9GD6VQJ", Request id "0HN64D9GD6VQJ:00000001": done reading request body.
2024-08-24 21:29:32.766 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'
2024-08-24 21:29:32.772 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:29:32.776 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:29:32.781 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:29:32.792 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:29:36.884 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:29:36.891 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:29:36.893 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:29:36.896 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:29:36.898 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:29:36.902 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-24 21:29:36.910 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 4197.8754ms
2024-08-24 21:29:36.915 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:29:36.918 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 363 - 200 - application/json;+charset=utf-8 4281.0051ms
2024-08-24 21:29:43.502 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" received FIN.
2024-08-24 21:29:43.510 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" is closed. The last processed stream ID was 1.
2024-08-24 21:29:43.518 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:29:43.535 +03:00 [DBG] Connection id "0HN64D9GD6VQJ" stopped.
2024-08-24 21:31:45.207 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-24 21:31:45.436 +03:00 [DBG] Hosting starting
2024-08-24 21:31:45.508 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-24 21:31:45.517 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-5dc8f8a8-2ffa-4a04-9c24-99574df10981.xml'.
2024-08-24 21:31:45.534 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-7f2c3628-443f-404a-ae0c-68b85bc9411a.xml'.
2024-08-24 21:31:45.540 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-8b924b12-ddc6-487f-b83a-45744266a460.xml'.
2024-08-24 21:31:45.544 +03:00 [DBG] Reading data from file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-e554efbd-c8ad-408b-86ee-59e78d255d63.xml'.
2024-08-24 21:31:45.559 +03:00 [DBG] Found key {5dc8f8a8-2ffa-4a04-9c24-99574df10981}.
2024-08-24 21:31:45.573 +03:00 [DBG] Found key {7f2c3628-443f-404a-ae0c-68b85bc9411a}.
2024-08-24 21:31:45.577 +03:00 [DBG] Found key {8b924b12-ddc6-487f-b83a-45744266a460}.
2024-08-24 21:31:45.580 +03:00 [DBG] Found key {e554efbd-c8ad-408b-86ee-59e78d255d63}.
2024-08-24 21:31:45.608 +03:00 [DBG] Considering key {7f2c3628-443f-404a-ae0c-68b85bc9411a} with expiration date 2024-08-24 22:00:11Z as default key.
2024-08-24 21:31:45.621 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:31:45.635 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-24 21:31:45.641 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-24 21:31:45.662 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-24 21:31:45.677 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-24 21:31:45.691 +03:00 [DBG] Using key {7f2c3628-443f-404a-ae0c-68b85bc9411a} as the default key.
2024-08-24 21:31:45.696 +03:00 [DBG] Key ring with default key {7f2c3628-443f-404a-ae0c-68b85bc9411a} was loaded during application startup.
2024-08-24 21:31:46.015 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 11B01FF3F2247D8CCE18AD0B376E737147DB39EC)
2024-08-24 21:31:46.135 +03:00 [DBG] Connection id "0HN64DC174CM9" received FIN.
2024-08-24 21:31:46.139 +03:00 [DBG] Connection id "0HN64DC174CMA" received FIN.
2024-08-24 21:31:46.144 +03:00 [DBG] Connection id "0HN64DC174CMA" accepted.
2024-08-24 21:31:46.144 +03:00 [DBG] Connection id "0HN64DC174CM9" accepted.
2024-08-24 21:31:46.150 +03:00 [DBG] Connection id "0HN64DC174CMA" started.
2024-08-24 21:31:46.151 +03:00 [DBG] Connection id "0HN64DC174CM9" started.
2024-08-24 21:31:46.153 +03:00 [INF] Now listening on: https://localhost:7054
2024-08-24 21:31:46.163 +03:00 [INF] Now listening on: http://localhost:5248
2024-08-24 21:31:46.166 +03:00 [DBG] Loaded hosting startup assembly HotelBookingPlatform.API
2024-08-24 21:31:46.168 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-24 21:31:46.172 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-24 21:31:46.179 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-24 21:31:46.182 +03:00 [INF] Hosting environment: Development
2024-08-24 21:31:46.187 +03:00 [INF] Content root path: C:\Users\hp\Desktop\C#\HotelBookingPlatform.API\
2024-08-24 21:31:46.190 +03:00 [DBG] Hosting started
2024-08-24 21:31:46.204 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:31:46.204 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-24 21:31:46.315 +03:00 [DBG] Connection id "0HN64DC174CM9" stopped.
2024-08-24 21:31:46.315 +03:00 [DBG] Connection id "0HN64DC174CMA" stopped.
2024-08-24 21:31:46.323 +03:00 [DBG] Connection id "0HN64DC174CMA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:31:46.323 +03:00 [DBG] Connection id "0HN64DC174CM9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:31:46.578 +03:00 [DBG] Connection id "0HN64DC174CMB" accepted.
2024-08-24 21:31:46.621 +03:00 [DBG] Connection id "0HN64DC174CMB" started.
2024-08-24 21:31:46.726 +03:00 [DBG] Connection 0HN64DC174CMB established using the following protocol: "Tls13"
2024-08-24 21:31:46.913 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/index.html - -
2024-08-24 21:31:47.253 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-24 21:31:47.348 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-24 21:31:47.353 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:31:47.822 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-24 21:31:47.890 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-24 21:31:47.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/index.html - - - 200 - text/html;charset=utf-8 1022.0472ms
2024-08-24 21:31:47.924 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - -
2024-08-24 21:31:47.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_framework/aspnetcore-browser-refresh.js - - - 200 12380 application/javascript;+charset=utf-8 16.5597ms
2024-08-24 21:31:47.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/_vs/browserLink - -
2024-08-24 21:31:48.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 162.5223ms
2024-08-24 21:31:50.341 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - -
2024-08-24 21:31:50.346 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-24 21:31:50.351 +03:00 [DBG] Request did not match any endpoints
2024-08-24 21:31:51.002 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7054/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 661.1992ms
2024-08-24 21:31:53.655 +03:00 [DBG] Connection id "0HN64DC174CMB" received FIN.
2024-08-24 21:31:53.678 +03:00 [DBG] Connection id "0HN64DC174CMB" is closed. The last processed stream ID was 7.
2024-08-24 21:31:53.689 +03:00 [DBG] Connection id "0HN64DC174CMB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:31:53.706 +03:00 [DBG] Connection id "0HN64DC174CMB" stopped.
2024-08-24 21:32:19.705 +03:00 [DBG] Connection id "0HN64DC174CMC" accepted.
2024-08-24 21:32:19.719 +03:00 [DBG] Connection id "0HN64DC174CMC" started.
2024-08-24 21:32:19.798 +03:00 [DBG] Connection 0HN64DC174CMC established using the following protocol: "Tls13"
2024-08-24 21:32:19.809 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/auth/login application/json 78
2024-08-24 21:32:19.831 +03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2024-08-24 21:32:19.853 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2024-08-24 21:32:19.861 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:32:19.870 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:32:19.876 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:32:20.043 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-24 21:32:20.051 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:32:20.130 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(HotelBookingPlatform.Domain.Helpers.LoginModel) on controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API).
2024-08-24 21:32:20.140 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:32:20.147 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:32:20.154 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-24 21:32:20.161 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:32:20.167 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:32:20.174 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:32:20.591 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-24 21:32:20.820 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.UserController (HotelBookingPlatform.API)
2024-08-24 21:32:20.838 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:32:20.851 +03:00 [DBG] Attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' using the name '' in request data ...
2024-08-24 21:32:20.860 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:32:20.907 +03:00 [DBG] Connection id "0HN64DC174CMC", Request id "0HN64DC174CMC:00000001": started reading request body.
2024-08-24 21:32:20.914 +03:00 [DBG] Connection id "0HN64DC174CMC", Request id "0HN64DC174CMC:00000001": done reading request body.
2024-08-24 21:32:20.985 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.Helpers.LoginModel'
2024-08-24 21:32:20.990 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:32:20.996 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:32:21.000 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel' ...
2024-08-24 21:32:21.070 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'HotelBookingPlatform.Domain.Helpers.LoginModel'.
2024-08-24 21:32:23.092 +03:00 [DBG] The index {'BookingID'} was not created on entity type 'BookingRoom (Dictionary<string, object>)' as the properties are already covered by the index {'BookingID', 'RoomID'}.
2024-08-24 21:32:23.100 +03:00 [DBG] The index {'LocalUserId'} was not created on entity type 'RefreshToken' as the properties are already covered by the index {'LocalUserId', 'Id'}.
2024-08-24 21:32:23.106 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-08-24 21:32:23.115 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-08-24 21:32:23.121 +03:00 [DBG] The index {'AmenityID'} was not created on entity type 'RoomClassAmenity (Dictionary<string, object>)' as the properties are already covered by the index {'AmenityID', 'RoomClassID'}.
2024-08-24 21:32:23.381 +03:00 [DBG] The property 'Discount.RoomClassID' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:32:23.389 +03:00 [DBG] The property 'RefreshToken.LocalUserId' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:32:23.394 +03:00 [DBG] The property 'RefreshToken.Id' was created in shadow state because there are no eligible CLR members with a matching name.
2024-08-24 21:32:23.495 +03:00 [WRN] No store type was specified for the decimal property 'AfterDiscountedPrice' on entity type 'Booking'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:32:23.502 +03:00 [WRN] No store type was specified for the decimal property 'DiscountPercentageAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:32:23.507 +03:00 [WRN] No store type was specified for the decimal property 'PriceAtBooking' on entity type 'InvoiceRecord'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-08-24 21:32:23.938 +03:00 [INF] Entity Framework Core 6.0.32 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.32' with options: None
2024-08-24 21:32:24.271 +03:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-08-24 21:32:24.605 +03:00 [DBG] Including navigation: 'LocalUser.RefreshTokens'.
2024-08-24 21:32:25.498 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocalUser>(
    asyncEnumerable: new SingleQueryingEnumerable<LocalUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: LocalUser.Id (string) Required PK AfterSave:Throw, 0], [Property: LocalUser.AccessFailedCount (int) Required, 1], [Property: LocalUser.ConcurrencyStamp (string) Concurrency, 2], [Property: LocalUser.Email (string) MaxLength(256), 3], [Property: LocalUser.EmailConfirmed (bool) Required, 4], [Property: LocalUser.FirstName (string) Required, 5], [Property: LocalUser.LastName (string) Required, 6], [Property: LocalUser.LockoutEnabled (bool) Required, 7], [Property: LocalUser.LockoutEnd (DateTimeOffset?), 8], [Property: LocalUser.NormalizedEmail (string) Index MaxLength(256), 9], [Property: LocalUser.NormalizedUserName (string) Index MaxLength(256), 10], [Property: LocalUser.PasswordHash (string), 11], [Property: LocalUser.PhoneNumber (string), 12], [Property: LocalUser.PhoneNumberConfirmed (bool) Required, 13], [Property: LocalUser.SecurityStamp (string), 14], [Property: LocalUser.TwoFactorEnabled (bool) Required, 15], [Property: LocalUser.UserName (string) MaxLength(256), 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.LocalUserId (no field, string) Shadow Required PK FK AfterSave:Throw, 17], [Property: RefreshToken.Id (no field, int) Shadow Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: RefreshToken.CreatedOn (DateTime) Required, 19], [Property: RefreshToken.ExpiresOn (DateTime) Required, 20], [Property: RefreshToken.RevokedOn (DateTime?), 21], [Property: RefreshToken.Token (string) Required, 22] }
                3 -> 17
                4 -> 18
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, r.LocalUserId, r.Id, r.CreatedOn, r.ExpiresOn, r.RevokedOn, r.Token
            FROM 
            (
                SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM AspNetUsers AS a
                WHERE a.NormalizedEmail == @__normalizedEmail_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.LocalUserId
            ORDER BY t.Id ASC, r.LocalUserId ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
        HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-24 21:32:25.658 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:32:25.754 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (97ms).
2024-08-24 21:32:25.800 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:26.550 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:26.594 +03:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:32:26.834 +03:00 [INF] Executed DbCommand (253ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[LocalUserId], [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[RevokedOn], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[LocalUserId]
ORDER BY [t].[Id], [r].[LocalUserId]
2024-08-24 21:32:27.000 +03:00 [DBG] Context 'AppDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:32:27.138 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:32:27.197 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-24 21:32:27.234 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:32:27.260 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.295 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.407 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2024-08-24 21:32:27.441 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:32:27.451 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:32:27.457 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:32:27.464 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.472 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.478 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:32:27.516 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-08-24 21:32:27.531 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:32:27.534 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.539 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.588 +03:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2024-08-24 21:32:27.652 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    HotelBookingPlatform.Infrastructure.Data.AppDbContext, 
    False, 
    False, 
    True
)'
2024-08-24 21:32:27.662 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:32:27.666 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-24 21:32:27.672 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.677 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.682 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:32:27.717 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:32:27.728 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:32:27.732 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.738 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.783 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-24 21:32:27.789 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-08-24 21:32:27.795 +03:00 [DBG] Opening connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.800 +03:00 [DBG] Opened connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.805 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:32:27.831 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-08-24 21:32:27.840 +03:00 [DBG] A data reader was disposed.
2024-08-24 21:32:27.843 +03:00 [DBG] Closing connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:27.847 +03:00 [DBG] Closed connection to database 'HotelBookingPlatform' on server '.'.
2024-08-24 21:32:28.160 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:32:28.176 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:32:28.179 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:32:28.182 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:32:28.186 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:32:28.193 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`4[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[HotelBookingPlatform.Domain.Helpers.AuthModel, HotelBookingPlatform.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-24 21:32:28.316 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API) in 8133.0961ms
2024-08-24 21:32:28.325 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.UserController.LoginAsync (HotelBookingPlatform.API)'
2024-08-24 21:32:28.359 +03:00 [DBG] 'AppDbContext' disposed.
2024-08-24 21:32:28.374 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/auth/login application/json 78 - 200 - application/json;+charset=utf-8 8564.8194ms
2024-08-24 21:32:33.693 +03:00 [DBG] Connection id "0HN64DC174CMC" received FIN.
2024-08-24 21:32:33.697 +03:00 [DBG] Connection id "0HN64DC174CMC" is closed. The last processed stream ID was 1.
2024-08-24 21:32:33.703 +03:00 [DBG] Connection id "0HN64DC174CMC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:32:33.716 +03:00 [DBG] Connection id "0HN64DC174CMC" stopped.
2024-08-24 21:33:02.037 +03:00 [DBG] Connection id "0HN64DC174CMD" accepted.
2024-08-24 21:33:02.049 +03:00 [DBG] Connection id "0HN64DC174CMD" started.
2024-08-24 21:33:02.152 +03:00 [DBG] Connection 0HN64DC174CMD established using the following protocol: "Tls13"
2024-08-24 21:33:02.185 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 363
2024-08-24 21:33:02.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-24 21:33:02.197 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-24 21:33:02.201 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:02.204 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:33:02.207 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:33:02.450 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:33:02.457 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:33:02.462 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:02.474 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:33:02.483 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:33:02.490 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:33:02.497 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:33:02.507 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:33:02.515 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:33:02.522 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:33:03.028 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:33:03.036 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:33:03.041 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-24 21:33:03.047 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:33:03.084 +03:00 [DBG] Connection id "0HN64DC174CMD", Request id "0HN64DC174CMD:00000001": started reading request body.
2024-08-24 21:33:03.089 +03:00 [DBG] Connection id "0HN64DC174CMD", Request id "0HN64DC174CMD:00000001": done reading request body.
2024-08-24 21:33:03.139 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'
2024-08-24 21:33:03.145 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:03.152 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:03.156 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:33:03.178 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:06.912 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:33:06.929 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:33:06.935 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:33:06.941 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:33:06.947 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:33:06.956 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-24 21:33:06.978 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 4455.9501ms
2024-08-24 21:33:06.982 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:06.987 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 363 - 200 - application/json;+charset=utf-8 4802.0778ms
2024-08-24 21:33:13.733 +03:00 [DBG] Connection id "0HN64DC174CMD" received FIN.
2024-08-24 21:33:13.737 +03:00 [DBG] Connection id "0HN64DC174CMD" is closed. The last processed stream ID was 1.
2024-08-24 21:33:13.742 +03:00 [DBG] Connection id "0HN64DC174CMD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:33:13.746 +03:00 [DBG] Connection id "0HN64DC174CMD" stopped.
2024-08-24 21:33:49.442 +03:00 [DBG] Connection id "0HN64DC174CME" accepted.
2024-08-24 21:33:49.552 +03:00 [DBG] Connection id "0HN64DC174CME" started.
2024-08-24 21:33:49.573 +03:00 [DBG] Connection 0HN64DC174CME established using the following protocol: "Tls13"
2024-08-24 21:33:49.581 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 368
2024-08-24 21:33:49.595 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Booking/confirm'
2024-08-24 21:33:49.603 +03:00 [DBG] Endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)' with route pattern 'api/Booking/confirm' is valid for the request path '/api/Booking/confirm'
2024-08-24 21:33:49.611 +03:00 [DBG] Request matched endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:49.615 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-24 21:33:49.618 +03:00 [INF] No CORS policy found for the specified request.
2024-08-24 21:33:49.627 +03:00 [DBG] Successfully validated the token.
2024-08-24 21:33:49.631 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-24 21:33:49.635 +03:00 [INF] Executing endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:49.639 +03:00 [INF] Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation) on controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API).
2024-08-24 21:33:49.645 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-24 21:33:49.651 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-24 21:33:49.658 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2024-08-24 21:33:49.667 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-24 21:33:49.673 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-24 21:33:49.680 +03:00 [DBG] Executing controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:33:49.688 +03:00 [DBG] Executed controller factory for controller HotelBookingPlatform.API.Controllers.BookingController (HotelBookingPlatform.API)
2024-08-24 21:33:49.694 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:33:49.699 +03:00 [DBG] Attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' using the name '' in request data ...
2024-08-24 21:33:49.705 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-24 21:33:49.712 +03:00 [DBG] Connection id "0HN64DC174CME", Request id "0HN64DC174CME:00000001": started reading request body.
2024-08-24 21:33:49.717 +03:00 [DBG] Connection id "0HN64DC174CME", Request id "0HN64DC174CME:00000001": done reading request body.
2024-08-24 21:33:49.723 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'
2024-08-24 21:33:49.728 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:49.733 +03:00 [DBG] Done attempting to bind parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:49.737 +03:00 [DBG] Attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation' ...
2024-08-24 21:33:49.745 +03:00 [DBG] Done attempting to validate the bound parameter 'confirmation' of type 'HotelBookingPlatform.Domain.DTOs.InvoiceRecord.BookingConfirmation'.
2024-08-24 21:33:53.192 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-24 21:33:53.201 +03:00 [DBG] No information found on request to perform content negotiation.
2024-08-24 21:33:53.204 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-24 21:33:53.207 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-24 21:33:53.211 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-24 21:33:53.216 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-24 21:33:53.221 +03:00 [INF] Executed action HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API) in 3541.3445ms
2024-08-24 21:33:53.226 +03:00 [INF] Executed endpoint 'HotelBookingPlatform.API.Controllers.BookingController.ConfirmBooking (HotelBookingPlatform.API)'
2024-08-24 21:33:53.230 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7054/api/Booking/confirm application/json 368 - 200 - application/json;+charset=utf-8 3648.5294ms
2024-08-24 21:33:53.784 +03:00 [DBG] Connection id "0HN64DC174CME" received FIN.
2024-08-24 21:33:53.791 +03:00 [DBG] Connection id "0HN64DC174CME" is closed. The last processed stream ID was 1.
2024-08-24 21:33:53.801 +03:00 [DBG] Connection id "0HN64DC174CME" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-24 21:33:53.815 +03:00 [DBG] Connection id "0HN64DC174CME" stopped.
